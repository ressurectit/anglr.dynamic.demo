"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[8389],{31203:(e,t,a)=>{a.r(t),a.d(t,{LayoutEditorModule:()=>U});var s=a(14392),i=a(89001),n=a(11650),c=a(56179),r=a(99043),o=a(57489),d=a(8477),h=a(22804),g=a(17505),l=a(94761),u=a(57466),p=a(27049),k=a(85638),v=a(89952),f=a(79440),b=a(13691),x=a(80827),m=a(72891),P=a(41853),y=a(66794),I=a(73301),S=a(9545),w=a(86825);let _=class{constructor(e){this.store=e,this._metadata=null}get emptyMetadata(){return{id:`stackPanel-${(0,u.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}_getMetadata(e){return e}_loadDemo(){this._metadata=k.F.demoLayout}};_.ɵfac=function(e){return new(e||_)(f.Y(v.U))},_.ɵcmp=b.Xp({type:_,selectors:[["layout-editor-view"]],decls:6,vars:3,consts:[[1,"flex-row"],["routePath","/layout/editor",3,"store","getMetadataCallback","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(e,t){1&e&&(x.Tg(0,"div",0)(1,"load-save-new",1),m.N("metadataChange",(function(e){let a;return t._metadata=null!==(a=e)&&void 0!==a?a:t.emptyMetadata})),x.qZ(),x.Tg(2,"button",2),m.N("click",(function(){return t._loadDemo()})),x.Tg(3,"span"),P._(4,"demo"),x.qZ()()(),x._U(5,"layout-editor",3)),2&e&&(y.x(1),I.Q("store",t.store)("getMetadataCallback",t._getMetadata),y.x(4),I.Q("metadata",t._metadata))},dependencies:[S.Z,w.Q],encapsulation:2,changeDetection:0}),(0,s.gn)([p.r,(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[Object]),(0,s.w6)("design:returntype",Object)],_.prototype,"_getMetadata",null),_=(0,s.gn)([(0,l.N)({path:"editor"}),(0,l.N)({path:"editor/:id"}),(0,s.w6)("design:paramtypes",[v.U])],_);const O=[_];var T=a(18567),C=a(53245),M=a(77653),N=a(38327);let U=class{};U.ɵfac=function(e){return new(e||U)},U.ɵmod=b.oA({type:U}),U.ɵinj=N.cJ({providers:[{provide:d.qO,useFactory:e=>new h.I((t=>e.getData(t))),deps:[v.U]},{provide:h.I,useExisting:d.qO},(0,C.Y)("LAYOUT_DATA"),(0,c.vQ)(),(0,r.gJ)(),(0,o.hd)(),{provide:g.L,useClass:M.y}],imports:[n.c.withProviders(),T.Qw]}),U=(0,s.gn)([(0,i.P)(O)],U)},6535:(e,t,a)=>{a.d(t,{X:()=>w});var s=a(80827),i=a(41853),n=a(73301),c=a(66794),r=a(6427),o=a(84773),d=a(72891),h=a(43870),g=a(6845),l=a(15686),u=a(11282),p=a(79440),k=a(13691),v=a(85320),f=a(17505),b=a(12311),x=a(21651),m=a(24881),P=a(17790);function y(e,t){if(1&e&&(s.Tg(0,"option",11),i._(1),s.qZ()),2&e){const e=t.$implicit;n.Q("value",e),c.x(1),r.Oq(e)}}function I(e,t){if(1&e){const e=o.E();s.Tg(0,"div",12)(1,"div",13),i._(2),s.qZ(),s.Tg(3,"button",14),d.N("click",(function(){const t=h.CH(e).$implicit,a=g.o(2);return h.Kt(a.removePackage(t))})),s._U(4,"span",15),s.qZ()()}if(2&e){const e=t.$implicit;c.x(2),r.Oq(e)}}function S(e,t){if(1&e){const e=o.E();s.Tg(0,"div")(1,"div",0)(2,"select",5,6),l.Y(4,y,2,2,"option",7),s.qZ(),s.Tg(5,"button",8),d.N("click",(function(){h.CH(e);const t=u.M(3),a=g.o();return h.Kt(a.addPackage(a.availablePackages[t.selectedIndex]))})),s._U(6,"span",9),s.qZ()(),l.Y(7,I,5,1,"div",10),s.qZ()}if(2&e){const e=g.o();c.x(4),n.Q("ngForOf",e.availablePackages),c.x(3),n.Q("ngForOf",e.usedPackages)}}class w{constructor(e){this.packageManager=e,this.detailVisible=!1,this.usedPackages=[],this.availablePackages=[]}ngOnInit(){this.usedPackages=this.packageManager.usedPackages,this.updatedAvailablePackages()}addPackage(e){e&&(this.usedPackages=[...this.usedPackages,e],this.updatedAvailablePackages(),this.packageManager.setUsedPackages(this.usedPackages))}removePackage(e){this.usedPackages=this.usedPackages.filter((t=>t!=e)),this.updatedAvailablePackages(),this.packageManager.setUsedPackages(this.usedPackages)}updatedAvailablePackages(){this.availablePackages=this.packageManager.packages.filter((e=>!this.usedPackages.find((t=>t==e))))}}w.ɵfac=function(e){return new(e||w)(p.Y(f.L))},w.ɵcmp=k.Xp({type:w,selectors:[["package-manager"]],decls:6,vars:5,consts:[[1,"flex-row"],[1,"btn-icon","margin-right-extra-small",3,"click"],[1,"fas"],[1,"pm-header"],[4,"ngIf"],[1,"form-control","flex-1"],["avPkgs",""],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn-icon","margin-left-extra-small",3,"click"],[1,"fas","fa-plus"],["class","flex-row align-items-center margin-top-small",4,"ngFor","ngForOf"],[3,"value"],[1,"flex-row","align-items-center","margin-top-small"],[1,"flex-1"],[1,"btn-icon","margin-left-extra-small",3,"click"],[1,"fas","fa-times"]],template:function(e,t){1&e&&(s.Tg(0,"div",0)(1,"button",1),d.N("click",(function(){return t.detailVisible=!t.detailVisible})),s._U(2,"span",2),s.qZ(),s.Tg(3,"div",3),i._(4,"packages"),s.qZ()(),l.Y(5,S,8,2,"div",4)),2&e&&(c.x(2),v.ek("fa-plus",!t.detailVisible)("fa-minus",t.detailVisible),c.x(3),n.Q("ngIf",t.detailVisible))},dependencies:[b.s,x.O,m.YN,P.Kr],styles:["[_nghost-%COMP%]\n{\n    display: flex;\n    flex-direction: column;\n    padding: 8px 10px;\n    border-bottom: 1px solid #aaa;\n}\n\n.pm-header[_ngcontent-%COMP%]\n{\n    text-transform: uppercase;\n    letter-spacing: 1px;\n}"],changeDetection:0})},44155:(e,t,a)=>{a.d(t,{F:()=>r});var s=a(27052),i=a(68624),n=a(13691),c=a(38327);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=n.oA({type:r}),r.ɵinj=c.cJ({imports:[s.e,i.U]})},56454:(e,t,a)=>{a.d(t,{z:()=>i});var s=a(98084);class i{constructor(e,t,a){this.hotkeys=e,this.historyManager=t,this.metadataStorage=a}destroy(){this.hotkeys.destroy()}init(){this.hotkeys.hotkeys.add(new s.q("ctrl+s",(()=>(this.metadataStorage.saveMetadata(),!1)),["INPUT","TEXTAREA"],"Saves current state of editor")),this.hotkeys.hotkeys.add(new s.q("ctrl+z",(()=>(this.historyManager.undo(),!1)),["INPUT","TEXTAREA"],"Undo current state of editor")),this.hotkeys.hotkeys.add(new s.q("ctrl+y",(()=>(this.historyManager.redo(),!1)),["INPUT","TEXTAREA"],"Redo current state of editor"))}}},44055:(e,t,a)=>{a.d(t,{Y:()=>o});var s=a(43939),i=a(53682),n=a(13457),c=a(11776),r=a(38327);class o{constructor(e){this.metadataState=e,this.activeIndex=null,this.saveIndex=null,this.states=[],this.enabled=!0,this.popSubject=new i.xQ,this.historyChangeSubject=new i.xQ}get canUndo(){return!(0,s.fp)(this.activeIndex)&&this.activeIndex>0}get canRedo(){return!(0,s.fp)(this.activeIndex)&&this.activeIndex+1<this.states.length}get saved(){return this.activeIndex===this.saveIndex}get pop(){return this.popSubject.asObservable()}get historyChange(){return this.historyChangeSubject.asObservable()}get state(){return(0,s.fp)(this.activeIndex)?null:this.states[this.activeIndex]}undo(){this.canUndo&&this.activeIndex&&(this.activeIndex--,this.popSubject.next(this.states[this.activeIndex]))}redo(){this.canRedo&&this.activeIndex&&(this.activeIndex++,this.popSubject.next(this.states[this.activeIndex]))}getNewState(){if(!this.enabled)return;this.states.length>=100&&this.states.shift(),this.activeIndex&&this.activeIndex+1<this.states.length&&this.states.splice(this.activeIndex+1,this.states.length-(this.activeIndex+1));const e=this.metadataState.getMetadata();e&&(this.states.push(JSON.parse(JSON.stringify(e))),this.activeIndex=this.states.length-1,this.historyChangeSubject.next())}save(){this.saveIndex=this.activeIndex}setInitialState(e){this.states.push(JSON.parse(JSON.stringify(e))),this.activeIndex=this.states.length-1,this.save()}clean(){this.activeIndex=null,this.saveIndex=null,this.states=[]}enable(){this.enabled=!0}disable(){this.enabled=!1}}o.ɵfac=function(e){return new(e||o)(c.LF(n.Q))},o.ɵprov=r.Yz({token:o,factory:o.ɵfac})},17505:(e,t,a)=>{a.d(t,{L:()=>o});var s=a(11776),i=a(46480),n=a(38223),c=a(53682),r=a(13457);class o{constructor(e){this.storageName=e,this._usedPackages=[],this.initSubscriptions=new n.w,this.usedPackagesSubject=new c.xQ,this.packagesChangeSubject=new c.xQ,this.store=(0,s.f3)(i.T0),this.packageSources=(0,s.f3)(r.B),this.usedPackages=this.store.get(e)??[];for(const e of this.packageSources)this.initSubscriptions.add(e.packagesChange.subscribe((()=>this.packagesChangeSubject.next())))}get packagesChange(){return this.packagesChangeSubject.asObservable()}get packages(){const e=[];for(const t of this.packageSources)e.push(...t.packages);return e}get usedPackages(){return this._usedPackages}set usedPackages(e){this._usedPackages=e}get usedPackagesChange(){return this.usedPackagesSubject.asObservable()}setUsedPackages(e){this._usedPackages!=e&&(this._usedPackages=e,this.store.set(this.storageName,e),this.usedPackagesSubject.next())}refresh(){for(const e of this.packageSources)e.refresh()}destroy(){this.initSubscriptions.unsubscribe()}}}}]);
//# sourceMappingURL=8389.chunk.a68c1f7547f3cc61d40d.js.map