/*! For license information please see 574.chunk.9635b486496527af880c.js.LICENSE.txt */
(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[574],{60574:(t,e,n)=>{"use strict";n.r(e),n.d(e,{RelationsLayoutFormModule:()=>jt});var a=n(14392),r=n(27052),o=n(68624),i=n(76668),s=n(97212),l=n(89001),c=n(22804),u=n(38707),d=n(35648),p=n(8477),m=n(66888),f=n(94761),h=n(71785),g=n(97149),v=n(56454),y=n(17505),_=n(44055),b=n(56179),w=n(99043),C=n(57489),x=n(10414),k=n(57466),F=n(27049),M=n(89952),O=n(77653),D=n(79440),N=n(13691),R=n(73379),Y=n(80827),P=n(41853),T=n(72891),L=n(66794),S=n(73301),E=n(84967),I=n(80239),G=n(9545),Z=n(80285),Q=n(86825);let A=class{constructor(t,e){this._store=t,this.history=e,this._metadata=null}get emptyMetadata(){return{id:`stackPanel-${(0,k.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}_getMetadata(t){return{layout:t}}};A.ɵfac=function(t){return new(t||A)(D.Y(M.U),D.Y(h.dB))},A.ɵcmp=N.Xp({type:A,selectors:[["form-layout-editor-view"]],features:[R._([v.z,{provide:p.qO,useFactory:t=>new c.I((e=>t.getData(e)?.layout)),deps:[M.U]},(0,g._)(),(0,x.iS)(),(0,b.vQ)(),(0,w.gJ)(),(0,C.hd)(),{provide:y.L,useClass:O.y}])],decls:9,vars:5,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsLayoutForm/layout",3,"store","getMetadataCallback","history","metadataChange"],[3,"copyClick"],[1,"margin-horizontal-small"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(Y.Tg(0,"div",0)(1,"button",1)(2,"span"),P._(3,"go back"),Y.qZ()(),Y.Tg(4,"load-save-new",2),T.N("metadataChange",(function(t){let n;return e._metadata=null!==(n=null==t?null:t.layout)&&void 0!==n?n:e.emptyMetadata})),Y.qZ(),Y.Tg(5,"debug-data",3)(6,"div",4),P._(7,"metadata"),Y.qZ()()(),Y._U(8,"layout-editor",5)),2&t&&(L.x(4),S.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history),L.x(1),S.Q("copyClick",e._metadata),L.x(3),S.Q("metadata",e._metadata))},dependencies:[E.v,G.Z,Z.v,I.o,Q.Q],encapsulation:2,changeDetection:0}),(0,a.gn)([F.r,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Object)],A.prototype,"_getMetadata",null),A=(0,a.gn)([(0,f.N)({path:"layout"}),(0,f.N)({path:"layout/:id"}),(0,a.w6)("design:paramtypes",[M.U,_.Y])],A);var U=n(95176),j=n(68961),z=n(23710),q=n(15467),V=n(70625),B=n(43939),$=n(79898),H=n(17777),J=n(66398),X=n(38937),K=n(11776),W=n(38327),tt=n(26938);function et(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}function nt(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return nt=function(t){this.s=t,this.n=t.next},nt.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new nt(t)}class at{constructor(t){this._iteratorsSvc=t}build(t){var e,n=this;return(e=function*(){const e=new H.cw({});let a=e;var r,o=!1,i=!1;try{for(var s,l=function(t){var e,n,a,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,a=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(a&&null!=(e=t[a]))return new nt(e.call(t));n="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}(n._iteratorsSvc.getIteratorFor(t));o=!(s=yield l.next()).done;o=!1){const t=s.value,e=n._getControlName(t.metadata);if(e){const r=n._getControlForMetadata(t.metadata);n._getActiveGroup(t.parent,a).addControl(e,r),r instanceof H.cw&&(a=r)}}}catch(t){i=!0,r=t}finally{try{o&&null!=l.return&&(yield l.return())}finally{if(i)throw r}}return e},function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(t){et(o,a,r,i,s,"next",t)}function s(t){et(o,a,r,i,s,"throw",t)}i(void 0)}))})()}_getActiveGroup(t,e){if(!e.parent||!t)return e;const n=this._getControlName(t.metadata);return n?e.parent.get(n)?e:this._getActiveGroup(t,e.parent):this._getActiveGroup(t.parent,e)}_getControlName(t){return t?t.options?.controlName:null}_getControlForMetadata(t){switch(t?.options?.controlType){case X.Z.FormArray:return new J.Oe([]);case X.Z.FormGroup:return new H.cw({});default:return new V.NI}}}at.ɵfac=function(t){return new(t||at)(K.LF(tt.$))},at.ɵprov=W.Yz({token:at,factory:at.ɵfac});var rt=n(85902),ot=n(75990),it=n(55441),st=n(84773),lt=n(43870),ct=n(6845),ut=n(4477),dt=n(15686),pt=n(94727),mt=n(6427),ft=n(32361),ht=n(12311),gt=n(21651),vt=n(58323),yt=n(77470),_t=n(27635),bt=n(86170),wt=n(4489),Ct=n(68965),xt=n(31686),kt=n(60405);function Ft(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}function Mt(t,e){if(1&t&&Y._U(0,"ng-option",7),2&t){const t=e.$implicit;S.Q("value",t)("text",t)}}function Ot(t,e){if(1&t){const t=st.E();Y.Tg(0,"form",8),T.N("ngSubmit",(function(){lt.CH(t);const e=ct.o();return lt.Kt(e._submit())})),Y.Tg(1,"div",9)(2,"div",10),ut.Gk(3,11),Y.qZ()(),Y.Tg(4,"button",12),P._(5,"Submit"),Y.qZ()()}if(2&t){const t=ct.o();S.Q("formGroup",t._formGroup),L.x(3),S.Q("layoutComponentRenderer",t._metadata)("layoutComponentRendererInjector",t._formInjector)}}const Dt=function(t){return["/relationsLayoutForm/layout",t]},Nt=function(t){return["/relationsLayoutForm/relations",t]};let Rt=class{constructor(t,e,n,a,r,o,i){this._relationsManager=t,this._store=e,this._router=n,this._route=a,this._injector=r,this._formComponentControlBuilder=o,this._changeDetector=i,this.selectedMetadata=null,this._available=new V.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){var t=this;this._availableNames=this._store.getStored(),this._route.params.subscribe(function(){var e,n=(e=function*({id:e}){if(e){t._available.setValue(e);const n=t.selectedMetadata=t._store.getData(e);t._metadata=n?.layout,t._relationsManager.setRelations(n.relations??[]),t._formGroup=yield t._formComponentControlBuilder.build(t._metadata),t._formInjector=U.z.create({parent:t._injector,providers:[{provide:$.O,useValue:t._formGroup}]}),t._changeDetector.detectChanges()}else t.selectedMetadata=null,t._relationsManager.setRelations([]);t._available.valueChanges.subscribe((e=>{t._router.navigate(["/relationsLayoutForm","form-preview",e],{skipLocationChange:!1,replaceUrl:!0})}))},function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(t){Ft(o,a,r,i,s,"next",t)}function s(t){Ft(o,a,r,i,s,"throw",t)}i(void 0)}))});return function(t){return n.apply(this,arguments)}}())}ngOnDestroy(){}_submit(){console.log(this._formGroup.value)}};var Yt,Pt;Rt.ɵfac=function(t){return new(t||Rt)(D.Y(ot.N),D.Y(M.U),D.Y(z.F0),D.Y(q.gz),D.Y(U.z),D.Y(at),D.Y(j.s))},Rt.ɵcmp=N.Xp({type:Rt,selectors:[["form-preview-view"]],features:[R._([at,tt.$,rt.T,(0,it.AL)(),(0,x.Hh)()])],decls:11,vars:11,consts:[[1,"flex-row"],[1,"margin-horizontal-small",3,"routerLink"],[1,"flex-1",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[3,"copyClick"],[1,"margin-horizontal-small"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"value","text"],[3,"formGroup","ngSubmit"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll","thin-scrollbar"],[3,"layoutComponentRenderer","layoutComponentRendererInjector"],["type","submit"]],template:function(t,e){1&t&&(Y.Tg(0,"div",0)(1,"a",1),P._(2,"layout"),Y.qZ(),Y.Tg(3,"a",1),P._(4,"relations"),Y.qZ(),Y.Tg(5,"ng-select",2),dt.Y(6,Mt,1,2,"ng-option",3),Y.qZ(),Y.Tg(7,"debug-data",4)(8,"div",5),P._(9),Y.qZ()()(),dt.Y(10,Ot,6,3,"form",6)),2&t&&(L.x(1),S.Q("routerLink",pt.VK(7,Dt,e._available.value)),L.x(2),S.Q("routerLink",pt.VK(9,Nt,e._available.value)),L.x(2),S.Q("formControl",e._available),L.x(1),S.Q("ngForOf",e._availableNames),L.x(1),S.Q("copyClick",e.selectedMetadata),L.x(2),mt.Oq(e._available.value),L.x(1),S.Q("ngIf",e._formGroup))},dependencies:[ht.s,gt.O,vt._,yt.JJ,yt.JL,_t.oH,bt.s,wt.x,Ct.w,xt.v,kt.i,ft.y,Z.v,I.o],encapsulation:2,changeDetection:0}),Rt=(0,a.gn)([("",Yt="form-preview",function(t){const e=t;if((0,B.fp)(e.routeValues)&&(0,B.fp)(Yt))return console.warn("Missing 'ComponentRoute' or wrong order of decorators 'ComponentRoute' and 'ComponentRedirectRoute'!"),t;if((0,B.fp)(Yt)&&(0,B.EN)(e.routeValues)&&e.routeValues.length>1)return console.warn("Multiple routes defined. Unable to set proper redirect!"),t;const n=t;return(0,B.fp)(n.redirectRouteValues)&&Object.defineProperty(t,"redirectRouteValues",{enumerable:!0,configurable:!1,writable:!1,value:[]}),(0,B.fp)(Pt)&&(Pt=!0),(0,B.fp)(Yt)&&(Yt=e.routeValues[0].path),n.redirectRouteValues.push({path:"",redirectTo:Yt,pathMatch:Pt?"full":"prefix"}),t}),(0,f.N)({path:"form-preview"}),(0,f.N)({path:"form-preview/:id"}),(0,a.w6)("design:paramtypes",[ot.N,M.U,z.F0,q.gz,U.z,at,j.s])],Rt);var Tt=n(91861),Lt=n(80734),St=n(20809),Et=n(85638),It=n(31166),Gt=n(36159);let Zt=class{constructor(t,e,n){this._store=t,this.history=e,this._layoutManager=n,this._metadata=[]}get emptyMetadata(){return[]}_getMetadata(t){return{relations:t}}_loadDemo(){this._metadata=Et.F.demoRelationsComplexRelations}_loadRestDemo(){this._metadata=Et.F.complexDemoRestRelations}_loadFullDemo(){this._metadata=Et.F.complexDemoFullRelations}setMetadata(t){this._metadata=t?.relations??this.emptyMetadata,this._layoutManager.setLayout(t?.layout)}};Zt.ɵfac=function(t){return new(t||Zt)(D.Y(M.U),D.Y(Tt.nR),D.Y(Lt.n))},Zt.ɵcmp=N.Xp({type:Zt,selectors:[["form-relations-editor-view"]],features:[R._([v.z,{provide:St.te,useFactory:t=>new c.I((e=>t.getData(e)?.relations)),deps:[M.U]},(0,it.$R)(),(0,C.vu)(),(0,w.Rn)(),(0,b.El)(),{provide:y.L,useClass:It.d}])],decls:6,vars:4,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsLayoutForm/relations",3,"store","getMetadataCallback","history","metadataChange"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(Y.Tg(0,"div",0)(1,"button",1)(2,"span"),P._(3,"go back"),Y.qZ()(),Y.Tg(4,"load-save-new",2),T.N("metadataChange",(function(t){return e.setMetadata(t)})),Y.qZ()(),Y._U(5,"relations-editor",3)),2&t&&(L.x(4),S.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history),L.x(1),S.Q("metadata",e._metadata))},dependencies:[E.v,Gt.Y,Q.Q],encapsulation:2,changeDetection:0}),(0,a.gn)([F.r,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Array]),(0,a.w6)("design:returntype",Object)],Zt.prototype,"_getMetadata",null),Zt=(0,a.gn)([(0,f.N)({path:"relations"}),(0,f.N)({path:"relations/:id"}),(0,a.w6)("design:paramtypes",[M.U,_.Y,Lt.n])],Zt);const Qt=[Rt,A,Zt];var At=n(53245),Ut=n(18567);let jt=class{};jt.ɵfac=function(t){return new(t||jt)},jt.ɵmod=N.oA({type:jt}),jt.ɵinj=W.cJ({providers:[{provide:p.qO,useFactory:t=>new c.I((e=>t.getData(e))),deps:[M.U]},(0,At.Y)("LAYOUT_RELATIONS_FORM_DATA")],imports:[r.e,o.U,d.A,i.Bz,s.p,m.W,u.s,Ut.Qw]}),jt=(0,a.gn)([(0,l.P)(Qt)],jt)},38937:(t,e,n)=>{"use strict";var a;n.d(e,{Z:()=>a}),function(t){t.FormControl="FormControl",t.FormArray="FormArray",t.FormGroup="FormGroup"}(a||(a={}))},79898:(t,e,n)=>{"use strict";n.d(e,{O:()=>a});const a=new(n(40296).O)("FORM_COMPONENT_CONTROL")},10414:(t,e,n)=>{"use strict";n.d(e,{Wm:()=>C,sx:()=>w,Hh:()=>_,iS:()=>b});var a=n(66398),r=n(17777),o=n(70625),i=n(14389),s=n(8477),l=n(71785),c=n(46480),u=n(11776),d=n(38327);function p(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}class m{constructor(t){this._logger=t}tryToGet(t){var e,a=this;return(e=function*(){if("form-components"!==t.package)return null;try{return a._logger?.debug("FormDynamicModuleItemsProvider: trying to get item {@item}",{name:t.name,package:t.package}),yield n(54384)(`./${t.name}/type`)}catch(e){a._logger?.debug("FormDynamicModuleItemsProvider: item {@item} was not found, reason: "+e,{name:t.name,package:t.package})}return null},function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(t){p(o,a,r,i,s,"next",t)}function s(t){p(o,a,r,i,s,"throw",t)}i(void 0)}))})()}}function f(t,e,n,a,r,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}m.ɵfac=function(t){return new(t||m)(u.LF(c.bZ,8))},m.ɵprov=d.Yz({token:m,factory:m.ɵfac});class h{constructor(t){this._logger=t}tryToGet(t){var e,a=this;return(e=function*(){try{return a._logger?.debug("FormDynamicModuleTypesProvider: trying to get types for module {@module}",{moduleName:t.package}),"form-components"===t.package?yield n.e(6311).then(n.bind(n,16311)):null}catch(e){a._logger?.debug("FormDynamicModuleTypesProvider: module {@module} was not found, reason: "+e,{moduleName:t.package})}return null},function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(t){f(o,a,r,i,s,"next",t)}function s(t){f(o,a,r,i,s,"throw",t)}i(void 0)}))})()}}h.ɵfac=function(t){return new(t||h)(u.LF(c.bZ,8))},h.ɵprov=d.Yz({token:h,factory:h.ɵfac});const g={provide:s.Aw,useClass:m,multi:!0},v={provide:l.sc,useClass:h,multi:!0};var y=n(38937);function _(){return[g]}function b(){return[g,v,(0,i.XW)("form-components")]}function w(t,e,n=y.Z.FormControl,a){return e&&t?e.get(t)??C(n,a):C(n,a)}function C(t,e){switch(t){case y.Z.FormArray:return new a.Oe([]);case y.Z.FormGroup:return new r.cw(e??{});default:return new o.NI(e)}}},54384:(t,e,n)=>{var a={"./formGroup/type":[70613,613]};function r(t){if(!n.o(a,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[t],r=e[0];return n.e(e[1]).then((()=>n(r)))}r.keys=()=>Object.keys(a),r.id=54384,t.exports=r},80285:(t,e,n)=>{"use strict";n.d(e,{v:()=>p});var a=n(79440),r=n(13691),o=n(72891),i=n(85320),s=n(48936);class l{constructor(t,e){this._document=e;const n=this._textarea=this._document.createElement("textarea"),a=n.style;a.position="fixed",a.top=a.opacity="0",a.left="-999em",n.setAttribute("aria-hidden","true"),n.value=t,n.readOnly=!0,this._document.body.appendChild(n)}copy(){const t=this._textarea;let e=!1;try{if(t){const n=this._document.activeElement;t.select(),t.setSelectionRange(0,t.value.length),e=this._document.execCommand("copy"),n&&n.focus()}}catch{}return e}destroy(){const t=this._textarea;t&&(t.remove(),this._textarea=void 0)}}var c=n(11776),u=n(38327);class d{constructor(t){this._document=t}copy(t){const e=this.beginCopy(t),n=e.copy();return e.destroy(),n}beginCopy(t){return new l(t,this._document)}}d.ɵfac=function(t){return new(t||d)(c.LF(s.K))},d.ɵprov=u.Yz({token:d,factory:d.ɵfac,providedIn:"root"});class p{constructor(t){this._clipboard=t,this.clickable=!0}copyData(){this._clipboard.copy(JSON.stringify(this.data,null,4))}}p.ɵfac=function(t){return new(t||p)(a.Y(d))},p.ɵdir=r.lG({type:p,selectors:[["debug-data","copyClick",""]],hostVars:2,hostBindings:function(t,e){1&t&&o.N("click",(function(){return e.copyData()})),2&t&&i.ek("clickable",e.clickable)},inputs:{data:["copyClick","data"]}})},80239:(t,e,n)=>{"use strict";n.d(e,{o:()=>f});var a=n(43086),r=n(79440),o=n(68961),i=n(4905),s=n(13691),l=n(15686),c=n(73301),u=n(35100),d=n(21651);function p(t,e){1&t&&a.Hs(0)}const m="enabled";class f{constructor(t,e,n){this._debugDataEnabledSvc=t,this._changeDetector=e,this._element=n,this.enabled=!1}ngOnInit(){this.enabled=this._debugDataEnabledSvc.enabled,this._setEnabledCssClass(),this._debugDataEnabledChangeSubscription=this._debugDataEnabledSvc.enabledChange.subscribe((()=>{this.enabled=this._debugDataEnabledSvc.enabled,this._setEnabledCssClass(),this._changeDetector.detectChanges()}))}ngOnDestroy(){this._debugDataEnabledChangeSubscription?.unsubscribe(),this._debugDataEnabledChangeSubscription=null}_setEnabledCssClass(){this.enabled?this._element.nativeElement.classList.add(m):this._element.nativeElement.classList.remove(m)}}f.ɵfac=function(t){return new(t||f)(r.Y(u.H),r.Y(o.s),r.Y(i.SB))},f.ɵcmp=s.Xp({type:f,selectors:[["debug-data"]],ngContentSelectors:["*"],decls:1,vars:1,consts:[[3,"ngIf"]],template:function(t,e){1&t&&(a.F$(),l.Y(0,p,1,0,"ng-template",0)),2&t&&c.Q("ngIf",e.enabled)},dependencies:[d.O],styles:["[_nghost-%COMP%]\r\n{\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    text-shadow: 0 0 1px;\r\n    display: none;\r\n}\r\n\r\n.clickable[_nghost-%COMP%]\r\n{\r\n    cursor: pointer;\r\n}\r\n\r\n.enabled[_nghost-%COMP%]\r\n{\r\n    display: block;\r\n}"],changeDetection:0})}}]);
//# sourceMappingURL=574.chunk.9635b486496527af880c.js.map