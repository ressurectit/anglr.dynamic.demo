"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[5184],{85184:(t,a,e)=>{e.r(a),e.d(a,{RelationsWithLayoutEditorModule:()=>ct});var n=e(14392),o=e(76668),i=e(27052),r=e(68624),s=e(97212),l=e(89001),u=e(35648),d=e(66888),c=e(94761),g=e(97149),p=e(83434),m=e(22804),_=e(56179),h=e(99043),y=e(57489),v=e(57466),b=e(27049),f=e(85638),w=e(89952),x=e(87752),M=e(79440),k=e(13691),N=e(73379),C=e(80827),L=e(41853),T=e(72891),Q=e(66794),Y=e(73301),U=e(84967),D=e(7842),Z=e(86825);let q=class{constructor(t,a){this._manager=t,this._store=a,this._metadata=null}get emptyMetadata(){return{id:`stackPanel-${(0,v.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}_getMetadata(){return{layout:this._manager.getMetadata()}}_loadDemo(){this._metadata=f.F.demoLayoutWithRelations}};q.ɵfac=function(t){return new(t||q)(M.Y(p.t),M.Y(w.U))},q.ɵcmp=k.Xp({type:q,selectors:[["layout-editor-view"]],features:[N._([x.X,{provide:m.I,useExisting:x.X},(0,g._)(),(0,_.vQ)(),(0,h.gJ)(),(0,y.hd)()])],decls:9,vars:3,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/layout",3,"store","getMetadataCallback","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,a){1&t&&(C.Tg(0,"div",0)(1,"button",1)(2,"span"),L._(3,"go back"),C.qZ()(),C.Tg(4,"load-save-new",2),T.N("metadataChange",(function(t){let e;return a._metadata=null!==(e=null==t?null:t.layout)&&void 0!==e?e:a.emptyMetadata})),C.qZ(),C.Tg(5,"button",3),T.N("click",(function(){return a._loadDemo()})),C.Tg(6,"span"),L._(7,"demo"),C.qZ()()(),C._U(8,"layout-editor",4)),2&t&&(Q.x(4),Y.Q("store",a._store)("getMetadataCallback",a._getMetadata),Q.x(4),Y.Q("metadata",a._metadata))},dependencies:[U.v,D.Z,Z.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([b.r,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",Object)],q.prototype,"_getMetadata",null),q=(0,n.gn)([(0,c.N)({path:"layout"}),(0,c.N)({path:"layout/:id"}),(0,n.w6)("design:paramtypes",[p.t,w.U])],q);var E=e(37943),F=e(15467),O=e(70625),W=e(2991),R=e(56224),A=e(75990),I=e(15686),J=e(4477),P=e(94727),X=e(32361),j=e(12311),z=e(77470),B=e(27635),V=e(4489),$=e(68965),K=e(31686),S=e(60405);function G(t,a){if(1&t&&C._U(0,"ng-option",7),2&t){const t=a.$implicit;Y.Q("value",t)("text",t)}}const H=function(t){return["/relationsWithLayoutEditor/layout",t]},tt=function(t){return["/relationsWithLayoutEditor/relations",t]};let at=class{constructor(t,a,e,n){this._store=t,this._router=a,this._relationsManager=e,this._route=n,this._available=new O.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStored(),this._route.params.subscribe((({id:t})=>{if(t){this._available.setValue(t);const a=this._store.getData(t);this._metadata=a?.layout,this._relationsManager.setRelations(a.relations??[])}else this._relationsManager.setRelations([]);this._available.valueChanges.subscribe((t=>{this._router.navigate(["/relationsWithLayoutEditor/preview",t],{skipLocationChange:!1,replaceUrl:!0})}))}))}ngOnDestroy(){}};at.ɵfac=function(t){return new(t||at)(M.Y(w.U),M.Y(E.F0),M.Y(A.N),M.Y(F.gz))},at.ɵcmp=k.Xp({type:at,selectors:[["layout-preview-view"]],features:[N._([(0,W._)(),(0,R.A)(),(0,_.I3)(),(0,h.Yj)(),(0,h.fm)(),(0,y.IM)(),(0,y.y)()])],decls:10,vars:9,consts:[[1,"flex-row"],[1,"margin-horizontal-small",3,"routerLink"],[1,"flex-1",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll"],[3,"layoutComponentRenderer"],[3,"value","text"]],template:function(t,a){1&t&&(C.Tg(0,"div",0)(1,"a",1),L._(2,"layout"),C.qZ(),C.Tg(3,"a",1),L._(4,"relations"),C.qZ(),C.Tg(5,"ng-select",2),I.Y(6,G,1,2,"ng-option",3),C.qZ()(),C.Tg(7,"div",4)(8,"div",5),J.Gk(9,6),C.qZ()()),2&t&&(Q.x(1),Y.Q("routerLink",P.VK(5,H,a._available.value)),Q.x(2),Y.Q("routerLink",P.VK(7,tt,a._available.value)),Q.x(2),Y.Q("formControl",a._available),Q.x(1),Y.Q("ngForOf",a._availableNames),Q.x(3),Y.Q("layoutComponentRenderer",a._metadata))},dependencies:[j.s,z.JJ,B.oH,X.y,V.x,$.w,K.v,S.i],encapsulation:2,changeDetection:0}),at=(0,n.gn)([(0,c.N)({path:"preview"}),(0,c.N)({path:"preview/:id"}),(0,n.w6)("design:paramtypes",[w.U,E.F0,A.N,F.gz])],at);var et=e(48397),nt=e(28626),ot=e(80734),it=e(36159);let rt=class{constructor(t,a,e){this._manager=t,this._store=a,this._layoutManager=e,this._metadata=[]}get emptyMetadata(){return[]}_getMetadata(){return{relations:this._manager.getMetadata()}}_loadDemo(){this._metadata=f.F.relationsWithLayoutDemo}setMetadata(t){this._metadata=t?.relations??this.emptyMetadata,this._layoutManager.setLayout(t?.layout)}};rt.ɵfac=function(t){return new(t||rt)(M.Y(et.J),M.Y(w.U),M.Y(ot.n))},rt.ɵcmp=k.Xp({type:rt,selectors:[["relations-editor-view"]],features:[N._([(0,nt.$)(),(0,y.vu)(),(0,h.Rn)(),(0,_.El)()])],decls:9,vars:3,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/relations",3,"store","getMetadataCallback","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,a){1&t&&(C.Tg(0,"div",0)(1,"button",1)(2,"span"),L._(3,"go back"),C.qZ()(),C.Tg(4,"load-save-new",2),T.N("metadataChange",(function(t){return a.setMetadata(t)})),C.qZ(),C.Tg(5,"button",3),T.N("click",(function(){return a._loadDemo()})),C.Tg(6,"span"),L._(7,"demo"),C.qZ()()(),C._U(8,"relations-editor",4)),2&t&&(Q.x(4),Y.Q("store",a._store)("getMetadataCallback",a._getMetadata),Q.x(4),Y.Q("metadata",a._metadata))},dependencies:[U.v,it.Y,Z.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([b.r,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",Object)],rt.prototype,"_getMetadata",null),rt=(0,n.gn)([(0,c.N)({path:"relations"}),(0,c.N)({path:"relations/:id"}),(0,n.w6)("design:paramtypes",[et.J,w.U,ot.n])],rt);const st=[at,q,rt];var lt=e(18567),ut=e(53245),dt=e(38327);let ct=class{};ct.ɵfac=function(t){return new(t||ct)},ct.ɵmod=k.oA({type:ct}),ct.ɵinj=dt.cJ({providers:[(0,ut.Y)("LAYOUT_RELATIONS_DATA")],imports:[i.e,r.U,o.Bz,u.A,s.p,d.W,lt.Qw]}),ct=(0,n.gn)([(0,l.P)(st)],ct)}}]);
//# sourceMappingURL=5184.chunk.543da97c41cbe195fb55.js.map