(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[5986],{85184:(t,e,a)=>{"use strict";a.r(e),a.d(e,{RelationsWithLayoutEditorModule:()=>ht});var n=a(44067),o=a(61942),r=a(94060),i=a(47260),s=a(46392),l=a(35648),u=a(66888),c=a(31685),d=a(8477),p=a(89651),g=a(97149),m=a(40921),y=a(56454),h=a(22804),v=a(17505),f=a(44055),_=a(56179),b=a(99043),w=a(57489),k=a(45529),x=a(7199),M=a(85638),C=a(89952),N=a(77653),D=a(15554),L=a(5549),Y=a(61980),T=a(94353),P=a(78581),U=a(45473),O=a(55640),R=a(31246),F=a(96650),q=a(41348),Q=a(71298);let Z=class{get emptyMetadata(){return{id:`stackPanel-${(0,x.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}constructor(t,e){this._store=t,this.history=e,this._metadata=null}_getMetadata(t){return{layout:t}}_loadDemo(){this._metadata=M.F.demoLayoutWithRelations}};Z.ɵfac=function(t){return new(t||Z)(D.Y(C.U),D.Y(p.dB))},Z.ɵcmp=L.Xp({type:Z,selectors:[["layout-editor-view"]],features:[Y._([y.z,{provide:d.qO,useFactory:t=>new h.I((e=>t.getData(e)?.layout)),deps:[C.U]},(0,g._T)(),(0,m.rj)(),(0,k.m_)(),(0,_.vQ)(),(0,b.gJ)(),(0,w.hd)(),{provide:v.L,useClass:N.y}])],decls:9,vars:4,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/layout",3,"store","getMetadataCallback","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(T.Tg(0,"div",0)(1,"button",1)(2,"span"),P._(3,"go back"),T.qZ()(),T.Tg(4,"load-save-new",2),U.N("metadataChange",(function(t){let a;return e._metadata=null!==(a=null==t?null:t.layout)&&void 0!==a?a:e.emptyMetadata})),T.qZ(),T.Tg(5,"button",3),U.N("click",(function(){return e._loadDemo()})),T.Tg(6,"span"),P._(7,"demo"),T.qZ()()(),T._U(8,"layout-editor",4)),2&t&&(O.x(4),R.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history),O.x(4),R.Q("metadata",e._metadata))},dependencies:[F.z,q.Z,Q.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([x.ru,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",Object)],Z.prototype,"_getMetadata",null),Z=(0,n.gn)([(0,c.N)({path:"layout"}),(0,c.N)({path:"layout/:id"}),(0,n.w6)("design:paramtypes",[C.U,f.Y])],Z);var W=a(33907),z=a(98023),A=a(47496),E=a(75990),j=a(79842),B=a(68623),I=a(41820),G=a(12142),J=a(16945),$=a(49402),S=a(60054),X=a(95381),V=a(79555),K=a(4489),H=a(81287),tt=a(31686),et=a(60405);function at(t,e){if(1&t&&T._U(0,"ng-option",7),2&t){const t=e.$implicit;R.Q("value",t)("text",t)}}const nt=t=>["/relationsWithLayoutEditor/layout",t],ot=t=>["/relationsWithLayoutEditor/relations",t];let rt=class{constructor(t,e,a,n){this._store=t,this._router=e,this._relationsManager=a,this._route=n,this._available=new A.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStored(),this._route.params.subscribe((({id:t})=>{if(t){this._available.setValue(t);const e=this._store.getData(t);this._metadata=e?.layout,this._relationsManager.setRelations(e.relations??[])}else this._relationsManager.setRelations([]);this._available.valueChanges.subscribe((t=>{this._router.navigate(["/relationsWithLayoutEditor/preview",t],{skipLocationChange:!1,replaceUrl:!0})}))}))}ngOnDestroy(){}};rt.ɵfac=function(t){return new(t||rt)(D.Y(C.U),D.Y(W.F0),D.Y(E.N),D.Y(z.gz))},rt.ɵcmp=L.Xp({type:rt,selectors:[["layout-preview-view"]],features:[Y._([{provide:d.qO,useFactory:t=>new h.I((e=>t.getData(e)?.layout)),deps:[C.U]},(0,j.AL)(),(0,m.mi)(),(0,k.Ur)(),(0,_.WH)(),(0,b.qN)(),(0,w.ag)(),(0,B.cg)()])],decls:10,vars:9,consts:[[1,"flex-row"],[1,"margin-horizontal-small",3,"routerLink"],[1,"flex-1",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll"],[3,"layoutComponentRenderer"],[3,"value","text"]],template:function(t,e){1&t&&(T.Tg(0,"div",0)(1,"a",1),P._(2,"layout"),T.qZ(),T.Tg(3,"a",1),P._(4,"relations"),T.qZ(),T.Tg(5,"ng-select",2),I.Y(6,at,1,2,"ng-option",3),T.qZ()(),T.Tg(7,"div",4)(8,"div",5),G.Gk(9,6),T.qZ()()),2&t&&(O.x(1),R.Q("routerLink",J.VK(5,nt,e._available.value)),O.x(2),R.Q("routerLink",J.VK(7,ot,e._available.value)),O.x(2),R.Q("formControl",e._available),O.x(1),R.Q("ngForOf",e._availableNames),O.x(3),R.Q("layoutComponentRenderer",e._metadata))},dependencies:[S.sg,X.JJ,V.o,$.r,K.x,H.w,tt.v,et.i],encapsulation:2,changeDetection:0}),rt=(0,n.gn)([(0,c.N)({path:"preview"}),(0,c.N)({path:"preview/:id"}),(0,n.w6)("design:paramtypes",[C.U,W.F0,E.N,z.gz])],rt);var it=a(91861),st=a(80734),lt=a(20809),ut=a(31166),ct=a(61085);let dt=class{get emptyMetadata(){return[]}constructor(t,e,a){this._store=t,this.history=e,this._layoutManager=a,this._metadata=[]}_getMetadata(t){return{relations:t}}_loadDemo(){this._metadata=M.F.relationsWithLayoutDemo}setMetadata(t){this._metadata=t?.relations??this.emptyMetadata,this._layoutManager.setLayout(t?.layout)}};dt.ɵfac=function(t){return new(t||dt)(D.Y(C.U),D.Y(it.nR),D.Y(st.n))},dt.ɵcmp=L.Xp({type:dt,selectors:[["relations-editor-view"]],features:[Y._([y.z,{provide:lt.te,useFactory:t=>new h.I((e=>t.getData(e)?.relations)),deps:[C.U]},(0,j.$R)(),(0,m.qm)(),(0,k.Od)(),(0,w.vu)(),(0,B.xb)(),(0,b.Rn)(),(0,_.El)(),{provide:v.L,useClass:ut.d}])],decls:9,vars:5,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/relations",3,"store","getMetadataCallback","layoutControls","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(T.Tg(0,"div",0)(1,"button",1)(2,"span"),P._(3,"go back"),T.qZ()(),T.Tg(4,"load-save-new",2),U.N("metadataChange",(function(t){return e.setMetadata(t)})),T.qZ(),T.Tg(5,"button",3),U.N("click",(function(){return e._loadDemo()})),T.Tg(6,"span"),P._(7,"demo"),T.qZ()()(),T._U(8,"relations-editor",4)),2&t&&(O.x(4),R.Q("store",e._store)("getMetadataCallback",e._getMetadata)("layoutControls",!1)("history",e.history),O.x(4),R.Q("metadata",e._metadata))},dependencies:[F.z,ct.Y,Q.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([x.ru,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Array]),(0,n.w6)("design:returntype",Object)],dt.prototype,"_getMetadata",null),dt=(0,n.gn)([(0,c.N)({path:"relations"}),(0,c.N)({path:"relations/:id"}),(0,n.w6)("design:paramtypes",[C.U,f.Y,st.n])],dt);const pt=[rt,Z,dt];var gt=a(18567),mt=a(53245),yt=a(36059);let ht=class{};ht.ɵfac=function(t){return new(t||ht)},ht.ɵmod=L.oA({type:ht}),ht.ɵinj=yt.cJ({providers:[(0,mt.Y)("LAYOUT_RELATIONS_DATA")],imports:[r.e,i.U,o.Bz,l.A,u.W,gt.Qw]}),ht=(0,n.gn)([(0,s.P)(pt)],ht)},66888:(t,e,a)=>{"use strict";a.d(e,{W:()=>l});var n=a(11650),o=a(22654),r=a(79842),i=a(5549),s=a(36059);class l{static withProviders(){return{ngModule:l,providers:[(0,r.$R)()]}}static withStaticComponents(t){return{ngModule:l,providers:[(0,r.Sf)(t)]}}}l.ɵfac=function(t){return new(t||l)},l.ɵmod=i.oA({type:l}),l.ɵinj=s.cJ({imports:[n.c,o.Y]})},68623:(t,e,a)=>{"use strict";a.d(e,{cg:()=>f,xb:()=>v,Gc:()=>h});var n=a(26038),o=a(91861),r=a(20809),i=a(80607),s=a(80056),l=a(36059);function u(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}class c{constructor(t){this._logger=t}tryToGet(t){var e,n=this;return(e=function*(){try{return n._logger?.debug("RestDynamicModuleRelationsProvider: trying to get relations types for module {{@module}}",{module:{moduleName:t.package}}),"rest-components"===t.package?yield a.e(7867).then(a.bind(a,27867)):null}catch(e){n._logger?.debug("RestDynamicModuleRelationsProvider: module {{@module}} was not found, reason: "+e,{module:{moduleName:t.package}})}return null},function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(t){u(r,n,o,i,s,"next",t)}function s(t){u(r,n,o,i,s,"throw",t)}i(void 0)}))})()}}function d(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}c.ɵfac=function(t){return new(t||c)(s.LF(i.bZ,8))},c.ɵprov=l.Yz({token:c,factory:c.ɵfac});class p{constructor(t){this._logger=t}tryToGet(t){var e,n=this;return(e=function*(){if("rest-components"!==t.package)return null;try{return n._logger?.debug("RestDynamicModuleItemsProvider: trying to get item {{@item}}",{item:{name:t.name,package:t.package}}),yield a(2721)(`./${t.name}/type`)}catch(e){n._logger?.debug("RestDynamicModuleItemsProvider: item {{@item}} was not found, reason: "+e,{item:{name:t.name,package:t.package}})}return null},function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(t){d(r,n,o,i,s,"next",t)}function s(t){d(r,n,o,i,s,"throw",t)}i(void 0)}))})()}}p.ɵfac=function(t){return new(t||p)(s.LF(i.bZ,8))},p.ɵprov=l.Yz({token:p,factory:p.ɵfac});const g={provide:o.GP,useClass:c,multi:!0},m={provide:o.n7,useClass:p,multi:!0},y={provide:r.B6,useClass:p,multi:!0};function h(){return[g,m,(0,n.XW)("rest-components")]}function v(){return[...h()]}function f(){return[y]}},2721:(t,e,a)=>{var n={"./rest/type":[20309,309]};function o(t){if(!a.o(n,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],o=e[0];return a.e(e[1]).then((()=>a(o)))}o.keys=()=>Object.keys(n),o.id=2721,t.exports=o},96650:(t,e,a)=>{"use strict";a.d(e,{z:()=>s});var n=a(15554),o=a(5549),r=a(45473),i=a(50666);class s{_location;constructor(t){this._location=t}goBack(t){t.preventDefault(),t.stopPropagation(),this._location.back()}static ɵfac=function(t){return new(t||s)(n.Y(i.Y))};static ɵdir=o.lG({type:s,selectors:[["","goBack",""]],hostBindings:function(t,e){1&t&&r.N("click",(function(t){return e.goBack(t)}))},standalone:!0})}},69563:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(5549),o=a(36059);class r{static ɵfac=function(t){return new(t||r)};static ɵmod=n.oA({type:r});static ɵinj=o.cJ({})}},79565:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var n=a(7199),o=a(5549);class r{transform(t){return(0,n.EN)(t)}static ɵfac=function(t){return new(t||r)};static ɵpipe=o.Yj({name:"isPresent",type:r,pure:!0,standalone:!0})}}}]);
//# sourceMappingURL=5986.chunk.9aa78ab6703cd1fc3871.js.map