"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[7133],{28626:(t,e,n)=>{n.d(e,{$:()=>F,S:()=>O});var o=n(47432),r=n(91861),a=n(53971),i=n(54870),s=n(46480);function c(t,e,n,o,r,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function i(t){c(a,o,r,i,s,"next",t)}function s(t){c(a,o,r,i,s,"throw",t)}i(void 0)}))}}class d{constructor(t,e,n){this._layoutMetadata=t,this._extractor=e,this._logger=n,this._items=[],this._initialized=!1,this._initPromise=null}[Symbol.asyncIterator](){let t=0;const e=this._initPromise??(this._initPromise=this._getInitPromise()),n=this._items;return{next:()=>l((function*(){return yield e,t<n.length?{value:n[t++],done:!1}:{value:n[t-1],done:!0}}))()}}forEach(t){var e=this;return l((function*(){yield e._initPromise??(e._initPromise=e._getInitPromise());for(const n of e._items)t(n.metadata,n.parentMetadata,n.levelIndex,n.level)}))()}_getComponents(){var t=this;return l((function*(){yield t._getComponent(t._layoutMetadata,null,0,0)}))()}_getComponent(t,e,n,o){var r=this;return l((function*(){r._items.push({metadata:t,parentMetadata:e,levelIndex:n,level:o});const a=yield r._extractor.extractMetadata(t);if(!a)return void r._logger?.debug("LayoutComponentsIterator: failed to get metadata for iterator! {@data}",{package:t.package,name:t.name});if(!a.getDescendants)return;const i=a.getDescendants(t.options);for(let e=0;e<i.length;e++)yield r._getComponent(i[e],t,e,o+1)}))()}_getInitPromise(){var t=this;return l((function*(){t._initialized||(t._initialized=!0,yield t._getComponents())}))()}}var u=n(11776),p=n(38327),m=n(85902);class f{constructor(t,e){this._extractor=t,this._logger=e}getIteratorFor(t){return new d(t,this._extractor,this._logger)}}f.ɵfac=function(t){return new(t||f)(u.LF(m.T),u.LF(s.bZ,8))},f.ɵprov=p.Yz({token:f,factory:f.ɵfac});var g=n(97149),h=n(8477),v=n(38223),y=n(80734);function _(t,e,n,o,r,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}function w(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function i(t){_(a,o,r,i,s,"next",t)}function s(t){_(a,o,r,i,s,"throw",t)}i(void 0)}))}}function b(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return b=function(t){this.s=t,this.n=t.next},b.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new b(t)}class P{constructor(t,e,n){this._layoutManager=t,this._loader=e,this._iteratorSvc=n,this._initSubscriptions=new v.w,this._definedTypes={},this._initPromise=null,this._initSubscriptions.add(this._layoutManager.layoutChange.subscribe((()=>this._initPromise=null)))}get types(){return this._initPromise??(this._initPromise=this._initializeTypes()),this._initPromise.then((()=>Object.keys(this._definedTypes)))}ngOnDestroy(){this._initSubscriptions.unsubscribe()}getType(t){var e=this;return w((function*(){return yield e._initPromise??(e._initPromise=e._initializeTypes()),e._definedTypes[t]??null}))()}_initializeTypes(){var t=this;return w((function*(){if(t._definedTypes={},!t._layoutManager.layout)return;const e=t._iteratorSvc.getIteratorFor(t._layoutManager.layout);var n,o=!1,r=!1;try{for(var a,i=function(t){var e,n,o,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,o=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(o&&null!=(e=t[o]))return new b(e.call(t));n="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}(e);o=!(a=yield i.next()).done;o=!1){const e=a.value,n=yield t._loader.loadItem(e.metadata);n&&(t._definedTypes[e.metadata.id]=n.data)}}catch(t){r=!0,n=t}finally{try{o&&null!=i.return&&(yield i.return())}finally{if(r)throw n}}}))()}}function x(t,e,n,o,r,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}P.ɵfac=function(t){return new(t||P)(u.LF(y.n),u.LF(h.Vl),u.LF(f))},P.ɵprov=p.Yz({token:P,factory:P.ɵfac});class k{constructor(t,e){this._componentsRegister=t,this._logger=e}tryToGet(t){var e,n=this;return(e=function*(){if("layout-components"!=t.package)return null;n._logger?.debug("LayoutComponentsRelationsNodesProvider: trying to get node {@item}",{name:t.name,package:t.package});const e=yield n._componentsRegister.getType(t.name);return e?{default:e}:null},function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(t){x(a,o,r,i,s,"next",t)}function s(t){x(a,o,r,i,s,"throw",t)}i(void 0)}))})()}}function D(t,e,n,o,r,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}k.ɵfac=function(t){return new(t||k)(u.LF(P),u.LF(s.bZ,8))},k.ɵprov=p.Yz({token:k,factory:k.ɵfac});class I{constructor(t,e,n){this._componentsRegister=t,this._loader=e,this._logger=n}tryToGet(t){var e,n=this;return(e=function*(){if("layout-components"!=t.package)return null;n._logger?.debug("LayoutComponentsRelationsTypesProvider: trying to get relations types {@item}",{name:t.name,package:t.package});const e=yield n._componentsRegister.types;if(!e)return null;const o=[];for(const t of e)(yield n._loader.loadItem({package:"layout-components",name:t}))?.data&&o.push(t);return{default:o}},function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(t){D(a,o,r,i,s,"next",t)}function s(t){D(a,o,r,i,s,"throw",t)}i(void 0)}))})()}}I.ɵfac=function(t){return new(t||I)(u.LF(P),u.LF(r.fI),u.LF(s.bZ,8))},I.ɵprov=p.Yz({token:I,factory:I.ɵfac});const C={provide:r.n7,useClass:k,multi:!0},L={provide:r.GP,useClass:I,multi:!0};function F(){return[...(0,g._)(!1),...(0,o.TN)(),C,L,y.n,P,f,{provide:r.dK,useFactory:t=>t.layoutChange,deps:[y.n],multi:!0}]}function O(t){return[...F(),a.I_,a.UB,{provide:i.w,useClass:t}]}},66888:(t,e,n)=>{n.d(e,{W:()=>l});var o=n(97149),r=n(11650),a=n(22654),i=n(28626),s=n(13691),c=n(38327);class l{static withProviders(){return{ngModule:l,providers:[(0,i.$)(),(0,o._)()]}}static withStaticComponents(t){return{ngModule:l,providers:[(0,i.S)(t),(0,o._)()]}}}l.ɵfac=function(t){return new(t||l)},l.ɵmod=s.oA({type:l}),l.ɵinj=c.cJ({imports:[r.c,a.Y]})},80734:(t,e,n)=>{n.d(e,{n:()=>a});var o=n(53682),r=n(38327);class a{constructor(){this._layout=null,this._layoutChange=new o.xQ}get layout(){return this._layout}get layoutChange(){return this._layoutChange.asObservable()}setLayout(t){this._layout!=t&&(this._layout=t,this._layoutChange.next())}}a.ɵfac=function(t){return new(t||a)},a.ɵprov=r.Yz({token:a,factory:a.ɵfac})},6258:(t,e,n)=>{n.d(e,{E:()=>A});var o=n(2032),r=n(27052),a=n(989),i=n(46480),s=n(57466),c=n(45069),l=n(38223),d=n(91861),u=n(13691);class p{transform(t,e,n){const o=n?e:`${t.itemSource.name}-${e}`;return{metadata:{id:o,displayName:o,package:t.itemSource.package,name:t.itemSource.name,relationsOptions:(0,s.l7)(!0,{},t.metadata.metaInfo?.defaultOptions),outputs:[],nodeMetadata:{coordinates:{x:0,y:0},options:null}}}}}p.ɵfac=function(t){return new(t||p)},p.ɵpipe=u.Yj({name:"toRelationsDragData",type:p,pure:!0,standalone:!0});var m=n(80827),f=n(41853),g=n(6845),h=n(66794),v=n(6427),y=n(84773),_=n(72891),w=n(43870),b=n(65589),P=n(15686),x=n(73301),k=n(4477),D=n(79440),I=n(68961),C=n(82568),L=n(48397),F=n(12311),O=n(21651),T=n(32434),S=n(99055),M=n(23208);function Y(t,e,n,o,r,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}function N(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function i(t){Y(a,o,r,i,s,"next",t)}function s(t){Y(a,o,r,i,s,"throw",t)}i(void 0)}))}}function j(t,e){if(1&t&&(m.Tg(0,"div",8),f._(1),m.qZ()),2&t){const t=g.o().$implicit;h.x(1),v.Oq(null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function z(t,e){if(1&t){const t=y.E();m.Tg(0,"div",4)(1,"div",5),_.N("cdkDragDropped",(function(){w.CH(t);const e=g.o(2);return w.Kt(e.generateNewId())})),b.AL(2,"toRelationsDragData"),m.Tg(3,"div",6),f._(4),m.qZ(),P.Y(5,j,2,1,"div",7),m.qZ()()}if(2&t){const t=e.$implicit,n=g.o(2);let o;x.Q("cdkDropListConnectedTo",n.canvasDropList),h.x(1),x.Q("cdkDragData",b.Dn(2,4,t,t.metadata.singleton?t.itemSource.name:n.newCompnentId,t.metadata.singleton)),h.x(3),v.Oq(t.metadata.singleton?t.itemSource.name:null!==(o=null==t.metadata.metaInfo?null:t.metadata.metaInfo.name)&&void 0!==o?o:t.itemSource.name),h.x(1),x.Q("ngIf",null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function Z(t,e){if(1&t&&(k.yn(0),m.Tg(1,"div",2),f._(2),m.qZ(),P.Y(3,z,6,8,"div",3),k.BQ()),2&t){const t=e.$implicit;h.x(2),v.hi("",t.key," "),h.x(1),x.Q("ngForOf",t.value)}}class A{constructor(t,e,n,o,r,a){this._moduleTypesLoader=t,this._nodesLoader=e,this._changeDetector=n,this._metadataManager=o,this._refreshObservables=r,this._logger=a,this.initSubscriptions=new l.w,this.allItems=[],this.syncPromise=Promise.resolve(),this.groupedItems={},this.newCompnentId=(0,s.Ox)(16),this.isDragOverPalette=!1}ngOnInit(){var t=this;return N((function*(){if(t._refreshObservables&&Array.isArray(t._refreshObservables))for(const e of t._refreshObservables)t.initSubscriptions.add(e.subscribe((()=>t.loadNodes())));yield t.loadNodes()}))()}ngOnDestroy(){this.initSubscriptions.unsubscribe()}loadNodes(){var t=this;return N((function*(){var e;let n;yield t.syncPromise,t.syncPromise=new Promise((t=>n=t)),t.allItems=[],t.groupedItems={};for(const e of["basic-components","material-components","static-components","layout-components","handlebars-components","tinymce-components"]){const n=(yield t._moduleTypesLoader.loadItem({package:e,name:"types"}))?.data??[];for(const o of n){const n={package:e,name:o},r=yield t._nodesLoader.loadItem(n);r?t.allItems.push({itemSource:n,metadata:r}):t._logger?.warn("NodesPaletteSAComponent: Failed to obtain layout editor metadata {@source}",n)}}t.groupedItems[""]=[];for(const n of t.allItems){const o=n.metadata.metaInfo?.group??"";(e=t.groupedItems)[o]??(e[o]=[]),t.groupedItems[o].push(n)}t._changeDetector.detectChanges(),n?.()}))()}generateNewId(){this.newCompnentId=(0,s.Ox)(16)}}A.ɵfac=function(t){return new(t||A)(D.Y(d.Bj),D.Y(d.fI),D.Y(I.s),D.Y(L.J),D.Y(d.dK,8),D.Y(i.bZ,8))},A.ɵcmp=u.Xp({type:A,selectors:[["nodes-palette"]],inputs:{canvasDropList:"canvasDropList"},standalone:!0,features:[C.j],decls:3,vars:3,consts:[[1,"flex-column","overflow-vertical-scroll","thin-scrollbar"],[4,"ngFor","ngForOf"],[1,"text-spread","text-small-caps","margin-left-extra-small","margin-horizontal-small","bold"],["cdkDropList","","cdkDropListSortingDisabled","","class","palette-droplist",3,"cdkDropListConnectedTo",4,"ngFor","ngForOf"],["cdkDropList","","cdkDropListSortingDisabled","",1,"palette-droplist",3,"cdkDropListConnectedTo"],["cdkDrag","",1,"editor-component","mat-elevation-z2",3,"cdkDragData","cdkDragDropped"],[1,"editor-component-name"],["class","editor-component-description",4,"ngIf"],[1,"editor-component-description"]],template:function(t,e){1&t&&(m.Tg(0,"div",0),P.Y(1,Z,4,2,"ng-container",1),b.AL(2,"keyvalue"),m.qZ()),2&t&&(h.x(1),x.Q("ngForOf",b.lc(2,1,e.groupedItems)))},dependencies:[r.e,F.s,O.O,T.N,a._,S.W,M.Z,p],styles:["[_nghost-%COMP%]\n{\n    display: flex;\n}\n\n.editor-component[_ngcontent-%COMP%]\n{\n    margin: 2px 10px;\n    padding: 4px 8px;\n\n    border-radius: 6px;\n    border: 1px solid #F0F0F0;\n    background-color: #FAFAFA;\n}\n\n.editor-component-name[_ngcontent-%COMP%]\n{\n    font-weight: 500;\n}\n\n.editor-component-description[_ngcontent-%COMP%]\n{\n    margin-left: 4px;\n    margin-top: 2px;\n    font-size: .8em;\n}\n\n.palette-droplist[_ngcontent-%COMP%]   layout-editor-drag-placeholder[_ngcontent-%COMP%]\n{\n    display: none;\n}"],changeDetection:0}),(0,o.gn)([(0,c.C)(10),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[]),(0,o.w6)("design:returntype",Promise)],A.prototype,"loadNodes",null)},36159:(t,e,n)=>{n.d(e,{Y:()=>f});var o=n(989),r=n(6258),a=n(75957),i=n(13691),s=n(82568),c=n(80827),l=n(72891),d=n(11282),u=n(66794),p=n(73301),m=n(99055);class f{constructor(){this.metadata=[]}addNode(t){const e=t.container.element.nativeElement.getBoundingClientRect();t.item.data.metadata.nodeMetadata?.coordinates&&(t.item.data.metadata.nodeMetadata.coordinates.x=t.dropPoint.x-e.x,t.item.data.metadata.nodeMetadata.coordinates.y=t.dropPoint.y-e.y),this.metadata=[...this.metadata,t.item.data.metadata]}}f.ɵfac=function(t){return new(t||f)},f.ɵcmp=i.Xp({type:f,selectors:[["relations-editor"]],inputs:{metadata:"metadata"},standalone:!0,features:[s.j],decls:4,vars:2,consts:[[1,"flex-row","flex-1"],[2,"width","250px",3,"canvasDropList"],["cdkDropList","",1,"flex-1",3,"nodeDefinitions","cdkDropListDropped"],["dropList","cdkDropList"]],template:function(t,e){if(1&t&&(c.Tg(0,"div",0),c._U(1,"nodes-palette",1),c.Tg(2,"relations-canvas",2,3),l.N("cdkDropListDropped",(function(t){return e.addNode(t)})),c.qZ()()),2&t){const t=d.M(3);u.x(1),p.Q("canvasDropList",t),u.x(1),p.Q("nodeDefinitions",e.metadata)}},dependencies:[r.E,a.F,o._,m.W],styles:["[_nghost-%COMP%]{display: flex;}"],changeDetection:0})},22654:(t,e,n)=>{n.d(e,{Y:()=>s});var o=n(36159),r=n(47432),a=n(13691),i=n(38327);class s{static withProviders(){return{ngModule:s,providers:[(0,r.TN)()]}}static withStaticComponents(t){return{ngModule:s,providers:[(0,r.hE)(t)]}}}s.ɵfac=function(t){return new(t||s)},s.ɵmod=a.oA({type:s}),s.ɵinj=i.cJ({imports:[o.Y]})},89402:(t,e,n)=>{function o(t){return!!t.__ɵɵRelationsComponent}function r(){return function(t){return t.__ɵɵRelationsComponent=!0,t}}n.d(e,{H:()=>r,O:()=>o})},56224:(t,e,n)=>{n.d(e,{X:()=>y,A:()=>_});var o=n(43939),r=n(60640),a=n(11776),i=n(86707),s=n(65569),c=n(12193),l=n(46480),d=n(20809),u=n(10439);const p={provide:d.B6,useClass:i.o,multi:!0},m={provide:d.u7,useFactory:t=>new s.$([u.j],t),deps:[[new r.Fi,l.bZ]],multi:!0},f={provide:d.TZ,useFactory:()=>new c.S((0,a.f3)(d.B6),(0,a.f3)(d.u7),y,(0,a.f3)(l.bZ,{optional:!0})??void 0)};var g=n(86485),h=n(75990),v=n(96130);const y=function(t){return!((0,o.fp)(t?.data)||!(0,o.P9)(t.data))};function _(){return[p,m,f,g.s,h.N,v.v]}},84967:(t,e,n)=>{n.d(e,{v:()=>s});var o=n(79440),r=n(13691),a=n(72891),i=n(55129);class s{constructor(t){this._location=t}goBack(t){t.preventDefault(),t.stopPropagation(),this._location.back()}}s.ɵfac=function(t){return new(t||s)(o.Y(i.Y))},s.ɵdir=r.lG({type:s,selectors:[["","goBack",""]],hostBindings:function(t,e){1&t&&a.N("click",(function(t){return e.goBack(t)}))}})},97212:(t,e,n)=>{n.d(e,{p:()=>a});var o=n(13691),r=n(38327);class a{}a.ɵfac=function(t){return new(t||a)},a.ɵmod=o.oA({type:a}),a.ɵinj=r.cJ({})}}]);
//# sourceMappingURL=7133.chunk.a55a1261c8e01ad5fa18.js.map