"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[9365],{72611:(t,e,n)=>{n.r(e),n.d(e,{RelationsWithEditorModule:()=>A});var o=n(14392),a=n(76668),i=n(97212),r=n(89001),s=n(68027),c=n(22654),d=n(94761),l=n(47432),p=n(48397),m=n(99043),u=n(57489),f=n(85638),g=n(54870),v=n(18567),h=n(43801),y=n(38327);class _ extends g.w{getDefinedTypes(){const t={};return t[v.mx.relationsId]=v.mx,t[v.oK.relationsId]=v.oK,t}}_.ɵfac=function(){let t;return function(e){return(t||(t=h.n5(_)))(e||_)}}(),_.ɵprov=y.Yz({token:_,factory:_.ɵfac});var D=n(79440),b=n(13691),w=n(73379),x=n(80827),k=n(41853),I=n(72891),O=n(66794),C=n(73301),L=n(84967),P=n(36159);let F=class{constructor(t){this._manager=t,this.metadata=f.F.relationsStaticWithEditorDemo}save(){f.F.relationsStaticWithEditorDemo=this._manager.getMetadata()}};F.ɵfac=function(t){return new(t||F)(D.Y(p.J))},F.ɵcmp=b.Xp({type:F,selectors:[["editor-view"]],features:[w._([(0,l.hE)(_),(0,m.eh)(),(0,u.wr)()])],decls:8,vars:1,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-left-extra-small"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(x.Tg(0,"div",0)(1,"button",1)(2,"span"),k._(3,"go back"),x.qZ()(),x.Tg(4,"button",2),I.N("click",(function(){return e.save()})),x.Tg(5,"span"),k._(6,"save"),x.qZ()()(),x._U(7,"relations-editor",3)),2&t&&(O.x(7),C.Q("metadata",e.metadata))},dependencies:[L.v,P.Y],encapsulation:2,changeDetection:0}),F=(0,o.gn)([(0,d.N)({path:"editor"}),(0,o.w6)("design:paramtypes",[p.J])],F);var N=n(56224),T=n(75990),M=n(32361),Y=n(31619),S=n(43747);let Z=class{constructor(t){this._relationsManager=t}ngOnInit(){this._relationsManager.setRelations(f.F.relationsStaticWithEditorDemo)}};Z.ɵfac=function(t){return new(t||Z)(D.Y(T.N))},Z.ɵcmp=b.Xp({type:Z,selectors:[["relations-view"]],features:[w._([(0,N.A)(),(0,m.fm)(),(0,u.y)()])],decls:11,vars:0,consts:[[1,"margin-bottom-big"],["routerLink","/relationsWithEditor/editor"],[1,"bold"]],template:function(t,e){1&t&&(x.Tg(0,"div",0)(1,"a",1),k._(2,"editor"),x.qZ()(),x.Tg(3,"div")(4,"div",2),k._(5,"relations sample click"),x.qZ(),x._U(6,"relations-sample-click"),x.qZ(),x.Tg(7,"div")(8,"div",2),k._(9,"relations result"),x.qZ(),x._U(10,"relations-result"),x.qZ())},dependencies:[M.y,Y.o,S.m],encapsulation:2,changeDetection:0}),Z=(0,o.gn)([(0,d.N)({path:""}),(0,o.w6)("design:paramtypes",[T.N])],Z);const q=[Z,F];let A=class{};A.ɵfac=function(t){return new(t||A)},A.ɵmod=b.oA({type:A}),A.ɵinj=y.cJ({imports:[a.Bz,i.p,s.Q,c.Y,v.oK,v.mx]}),A=(0,o.gn)([(0,r.P)(q)],A)},6258:(t,e,n)=>{n.d(e,{E:()=>B});var o=n(2032),a=n(27052),i=n(989),r=n(46480),s=n(57466),c=n(45069),d=n(38223),l=n(91861),p=n(13691);class m{transform(t,e,n){const o=n?e:`${t.itemSource.name}-${e}`;return{metadata:{id:o,displayName:o,package:t.itemSource.package,name:t.itemSource.name,relationsOptions:(0,s.l7)(!0,{},t.metadata.metaInfo?.defaultOptions),outputs:[],nodeMetadata:{coordinates:{x:0,y:0},options:null}}}}}m.ɵfac=function(t){return new(t||m)},m.ɵpipe=p.Yj({name:"toRelationsDragData",type:m,pure:!0,standalone:!0});var u=n(80827),f=n(41853),g=n(6845),v=n(66794),h=n(6427),y=n(84773),_=n(72891),D=n(43870),b=n(65589),w=n(15686),x=n(73301),k=n(4477),I=n(79440),O=n(68961),C=n(82568),L=n(48397),P=n(12311),F=n(21651),N=n(32434),T=n(99055),M=n(23208);function Y(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}function S(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){Y(i,o,a,r,s,"next",t)}function s(t){Y(i,o,a,r,s,"throw",t)}r(void 0)}))}}function Z(t,e){if(1&t&&(u.Tg(0,"div",8),f._(1),u.qZ()),2&t){const t=g.o().$implicit;v.x(1),h.Oq(null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function q(t,e){if(1&t){const t=y.E();u.Tg(0,"div",4)(1,"div",5),_.N("cdkDragDropped",(function(){D.CH(t);const e=g.o(2);return D.Kt(e.generateNewId())})),b.AL(2,"toRelationsDragData"),u.Tg(3,"div",6),f._(4),u.qZ(),w.Y(5,Z,2,1,"div",7),u.qZ()()}if(2&t){const t=e.$implicit,n=g.o(2);let o;x.Q("cdkDropListConnectedTo",n.canvasDropList),v.x(1),x.Q("cdkDragData",b.Dn(2,4,t,t.metadata.singleton?t.itemSource.name:n.newCompnentId,t.metadata.singleton)),v.x(3),h.Oq(t.metadata.singleton?t.itemSource.name:null!==(o=null==t.metadata.metaInfo?null:t.metadata.metaInfo.name)&&void 0!==o?o:t.itemSource.name),v.x(1),x.Q("ngIf",null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function A(t,e){if(1&t&&(k.yn(0),u.Tg(1,"div",2),f._(2),u.qZ(),w.Y(3,q,6,8,"div",3),k.BQ()),2&t){const t=e.$implicit;v.x(2),h.hi("",t.key," "),v.x(1),x.Q("ngForOf",t.value)}}class B{constructor(t,e,n,o,a,i){this._moduleTypesLoader=t,this._nodesLoader=e,this._changeDetector=n,this._metadataManager=o,this._refreshObservables=a,this._logger=i,this.initSubscriptions=new d.w,this.allItems=[],this.syncPromise=Promise.resolve(),this.groupedItems={},this.newCompnentId=(0,s.Ox)(16),this.isDragOverPalette=!1}ngOnInit(){var t=this;return S((function*(){if(t._refreshObservables&&Array.isArray(t._refreshObservables))for(const e of t._refreshObservables)t.initSubscriptions.add(e.subscribe((()=>t.loadNodes())));yield t.loadNodes()}))()}ngOnDestroy(){this.initSubscriptions.unsubscribe()}loadNodes(){var t=this;return S((function*(){var e;let n;yield t.syncPromise,t.syncPromise=new Promise((t=>n=t)),t.allItems=[],t.groupedItems={};for(const e of["basic-components","material-components","static-components","layout-components","handlebars-components","tinymce-components"]){const n=(yield t._moduleTypesLoader.loadItem({package:e,name:"types"}))?.data??[];for(const o of n){const n={package:e,name:o},a=yield t._nodesLoader.loadItem(n);a?t.allItems.push({itemSource:n,metadata:a}):t._logger?.warn("NodesPaletteSAComponent: Failed to obtain layout editor metadata {@source}",n)}}t.groupedItems[""]=[];for(const n of t.allItems){const o=n.metadata.metaInfo?.group??"";(e=t.groupedItems)[o]??(e[o]=[]),t.groupedItems[o].push(n)}t._changeDetector.detectChanges(),n?.()}))()}generateNewId(){this.newCompnentId=(0,s.Ox)(16)}}B.ɵfac=function(t){return new(t||B)(I.Y(l.Bj),I.Y(l.fI),I.Y(O.s),I.Y(L.J),I.Y(l.dK,8),I.Y(r.bZ,8))},B.ɵcmp=p.Xp({type:B,selectors:[["nodes-palette"]],inputs:{canvasDropList:"canvasDropList"},standalone:!0,features:[C.j],decls:3,vars:3,consts:[[1,"flex-column","overflow-vertical-scroll","thin-scrollbar"],[4,"ngFor","ngForOf"],[1,"text-spread","text-small-caps","margin-left-extra-small","margin-horizontal-small","bold"],["cdkDropList","","cdkDropListSortingDisabled","","class","palette-droplist",3,"cdkDropListConnectedTo",4,"ngFor","ngForOf"],["cdkDropList","","cdkDropListSortingDisabled","",1,"palette-droplist",3,"cdkDropListConnectedTo"],["cdkDrag","",1,"editor-component","mat-elevation-z2",3,"cdkDragData","cdkDragDropped"],[1,"editor-component-name"],["class","editor-component-description",4,"ngIf"],[1,"editor-component-description"]],template:function(t,e){1&t&&(u.Tg(0,"div",0),w.Y(1,A,4,2,"ng-container",1),b.AL(2,"keyvalue"),u.qZ()),2&t&&(v.x(1),x.Q("ngForOf",b.lc(2,1,e.groupedItems)))},dependencies:[a.e,P.s,F.O,N.N,i._,T.W,M.Z,m],styles:["[_nghost-%COMP%]\n{\n    display: flex;\n}\n\n.editor-component[_ngcontent-%COMP%]\n{\n    margin: 2px 10px;\n    padding: 4px 8px;\n\n    border-radius: 6px;\n    border: 1px solid #F0F0F0;\n    background-color: #FAFAFA;\n}\n\n.editor-component-name[_ngcontent-%COMP%]\n{\n    font-weight: 500;\n}\n\n.editor-component-description[_ngcontent-%COMP%]\n{\n    margin-left: 4px;\n    margin-top: 2px;\n    font-size: .8em;\n}\n\n.palette-droplist[_ngcontent-%COMP%]   layout-editor-drag-placeholder[_ngcontent-%COMP%]\n{\n    display: none;\n}"],changeDetection:0}),(0,o.gn)([(0,c.C)(10),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[]),(0,o.w6)("design:returntype",Promise)],B.prototype,"loadNodes",null)},36159:(t,e,n)=>{n.d(e,{Y:()=>f});var o=n(989),a=n(6258),i=n(75957),r=n(13691),s=n(82568),c=n(80827),d=n(72891),l=n(11282),p=n(66794),m=n(73301),u=n(99055);class f{constructor(){this.metadata=[]}addNode(t){const e=t.container.element.nativeElement.getBoundingClientRect();t.item.data.metadata.nodeMetadata?.coordinates&&(t.item.data.metadata.nodeMetadata.coordinates.x=t.dropPoint.x-e.x,t.item.data.metadata.nodeMetadata.coordinates.y=t.dropPoint.y-e.y),this.metadata=[...this.metadata,t.item.data.metadata]}}f.ɵfac=function(t){return new(t||f)},f.ɵcmp=r.Xp({type:f,selectors:[["relations-editor"]],inputs:{metadata:"metadata"},standalone:!0,features:[s.j],decls:4,vars:2,consts:[[1,"flex-row","flex-1"],[2,"width","250px",3,"canvasDropList"],["cdkDropList","",1,"flex-1",3,"nodeDefinitions","cdkDropListDropped"],["dropList","cdkDropList"]],template:function(t,e){if(1&t&&(c.Tg(0,"div",0),c._U(1,"nodes-palette",1),c.Tg(2,"relations-canvas",2,3),d.N("cdkDropListDropped",(function(t){return e.addNode(t)})),c.qZ()()),2&t){const t=l.M(3);p.x(1),m.Q("canvasDropList",t),p.x(1),m.Q("nodeDefinitions",e.metadata)}},dependencies:[a.E,i.F,o._,u.W],styles:["[_nghost-%COMP%]{display: flex;}"],changeDetection:0})},22654:(t,e,n)=>{n.d(e,{Y:()=>s});var o=n(36159),a=n(47432),i=n(13691),r=n(38327);class s{static withProviders(){return{ngModule:s,providers:[(0,a.TN)()]}}static withStaticComponents(t){return{ngModule:s,providers:[(0,a.hE)(t)]}}}s.ɵfac=function(t){return new(t||s)},s.ɵmod=i.oA({type:s}),s.ɵinj=r.cJ({imports:[o.Y]})},89402:(t,e,n)=>{function o(t){return!!t.__ɵɵRelationsComponent}function a(){return function(t){return t.__ɵɵRelationsComponent=!0,t}}n.d(e,{H:()=>a,O:()=>o})},56224:(t,e,n)=>{n.d(e,{X:()=>y,A:()=>_});var o=n(43939),a=n(60640),i=n(11776),r=n(86707),s=n(65569),c=n(12193),d=n(46480),l=n(20809),p=n(10439);const m={provide:l.B6,useClass:r.o,multi:!0},u={provide:l.u7,useFactory:t=>new s.$([p.j],t),deps:[[new a.Fi,d.bZ]],multi:!0},f={provide:l.TZ,useFactory:()=>new c.S((0,i.f3)(l.B6),(0,i.f3)(l.u7),y,(0,i.f3)(d.bZ,{optional:!0})??void 0)};var g=n(86485),v=n(75990),h=n(96130);const y=function(t){return!((0,o.fp)(t?.data)||!(0,o.P9)(t.data))};function _(){return[m,u,f,g.s,v.N,h.v]}},68027:(t,e,n)=>{n.d(e,{Q:()=>r});var o=n(56224),a=n(13691),i=n(38327);class r{static withProviders(){return{ngModule:r,providers:[(0,o.A)()]}}}r.ɵfac=function(t){return new(t||r)},r.ɵmod=a.oA({type:r}),r.ɵinj=i.cJ({})},84967:(t,e,n)=>{n.d(e,{v:()=>s});var o=n(79440),a=n(13691),i=n(72891),r=n(55129);class s{constructor(t){this._location=t}goBack(t){t.preventDefault(),t.stopPropagation(),this._location.back()}}s.ɵfac=function(t){return new(t||s)(o.Y(r.Y))},s.ɵdir=a.lG({type:s,selectors:[["","goBack",""]],hostBindings:function(t,e){1&t&&i.N("click",(function(t){return e.goBack(t)}))}})},97212:(t,e,n)=>{n.d(e,{p:()=>i});var o=n(13691),a=n(38327);class i{}i.ɵfac=function(t){return new(t||i)},i.ɵmod=o.oA({type:i}),i.ɵinj=a.cJ({})}}]);
//# sourceMappingURL=9365.chunk.0ea222473962b89bcecc.js.map