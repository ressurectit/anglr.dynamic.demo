"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[590],{70590:(e,t,n)=>{n.d(t,{q:()=>Me});var i=n(44330),o=n(29354),a=n(27398),r=n(38935),s=n(68339),d=n(19630),l=n(73943),h=n(24296),p=n(25689),c=n(97881),u=n(98029),m=n(85410),g=n(77217),y=n(56949);class v{constructor(){this.active=!1,this.minHeight="",this.minWidth="",this.horizontal=!1,this.canDrop=!1,this.editorMetadata=null}ngOnInit(){this.observer=new MutationObserver((e=>{for(const t of e)t.target instanceof HTMLElement&&this.updatedDimensions(t.target)}))}ngOnChanges(e){(0,l.$0)("editorMetadata")in e&&this.init()}ngOnDestroy(){this.observer?.disconnect()}renderedComponentCallback(e){this.element=(0,u.Yo)(e.component),this.init()}init(){if(!this.element||!this.editorMetadata)return;const e=this.editorMetadata.getChildrenContainer?.(this.element)??this.element;this.minHeight=e.style.minHeight,this.minWidth=e.style.minWidth,this.updatedDimensions(e),this.observer?.observe(e,{childList:!0})}updatedDimensions(e){const t=[];e.childNodes.forEach((e=>t.push(e)));const n=t.filter((e=>"#comment"!=e.nodeName)).length;if(!(n&&!this.active||!n&&this.active))if(n){if(1===e.children.length&&e.children.item(0)?.classList.contains("drag-placeholder"))return;this.active=!1,this.horizontal?e.style.minWidth=this.minWidth:e.style.minHeight=this.minHeight}else this.active=!0,this.horizontal?e.style.minWidth=this.canDrop?"30px":"10px":e.style.minHeight=this.canDrop?"30px":"10px"}}v.ɵfac=function(e){return new(e||v)},v.ɵdir=m.lG({type:v,selectors:[["","designerMinWidth",""]],contentQueries:function(e,t,n){if(1&e&&g.Su(n,a.i,7),2&e){let e;g.iG(e=g.CR())&&(t.layoutComponentRendererDirective=e.first)}},inputs:{horizontal:"horizontal",canDrop:"canDrop",editorMetadata:"editorMetadata"},exportAs:["designerMinWidth"],standalone:!0,features:[y.T]}),(0,c.gn)([l.ru,(0,c.w6)("design:type",Function),(0,c.w6)("design:paramtypes",[Object]),(0,c.w6)("design:returntype",void 0)],v.prototype,"renderedComponentCallback",null);var D=n(80033),f=n(25413),E=n(87003);function b(e,t,n,i,o,a,r){try{var s=e[a](r),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,o)}class C{get metadata(){return this._metadata}set metadata(e){this._metadata=e,this._copyDesignerStyles()}constructor(e,t){this._element=e,this._metadataExtractor=t}_copyDesignerStyles(){var e,t=this;return(e=function*(){if(!t._metadata)return;const e=yield t._metadataExtractor.extractMetadata(t._metadata),n=e?.applyDesignerStyles;n&&n(t._metadata.options,t._element.nativeElement.style)},function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function r(e){b(a,i,o,r,s,"next",e)}function s(e){b(a,i,o,r,s,"throw",e)}r(void 0)}))})()}}C.ɵfac=function(e){return new(e||C)(D.Y(f.SB),D.Y(E.T))},C.ɵdir=m.lG({type:C,selectors:[["","copyDesignerStyles",""]],inputs:{metadata:["copyDesignerStyles","metadata"]},exportAs:["copyDesignerStyles"],standalone:!0});var M=n(3717),w=n(95127),T=n(49276),x=n(78190),S=n(88809),I=n(96189),P=n(57284),O=n(57283),L=n(17640);class Y{get componentIdSafe(){if(!this.componentId)throw new Error("LayoutDesignerOverlayForSAComponent: missing id of component!");return this.componentId}constructor(e,t,n,i,o){this.element=e,this.changeDetector=t,this.liveEvents=n,this.renderer=i,this.logger=o,this.initSubscriptions=new p.w0}ngOnInit(){this.observer=new MutationObserver((()=>this.changeDetector.detectChanges()));const e=this.renderer.get(this.componentIdSafe);if(!e)throw new Error("LayoutDesignerOverlayForSAComponent: missing registered component!");this.logger.verbose("LayoutDesignerOverlayForSAComponent: registering component for layout designer overlay"),this.htmlElement=(0,u.Yo)(e.component),this.htmlElement&&this.observer?.observe(this.htmlElement,{attributeFilter:["style"]}),this.initSubscriptions.add(this.liveEvents.enabledChange.subscribe((()=>this.toggleLiveEvents()))),this.toggleLiveEvents()}ngOnDestroy(){this.observer?.disconnect(),this.initSubscriptions.unsubscribe()}toggleLiveEvents(){this.liveEvents.enabled?this.element.nativeElement.style.pointerEvents="none":this.element.nativeElement.style.pointerEvents="all"}}Y.ɵfac=function(e){return new(e||Y)(D.Y(f.SB),D.Y(T.s),D.Y(O._),D.Y(L.e),D.Y(w.bZ))},Y.ɵcmp=m.Xp({type:Y,selectors:[["","layoutDesignerOverlayFor",""]],inputs:{componentId:["layoutDesignerOverlayFor","componentId"]},standalone:!0,features:[x.j],attrs:["layoutDesignerOverlayFor",""],decls:12,vars:24,consts:[[1,"margin-top-div"],[1,"margin-bottom-div"],[1,"margin-left-div"],[1,"margin-right-div"],[1,"padding-top-div"],[1,"padding-bottom-div"],[1,"padding-left-div"],[1,"padding-right-div"],[1,"border-top-div"],[1,"border-bottom-div"],[1,"border-left-div"],[1,"border-right-div"]],template:function(e,t){1&e&&S._U(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),2&e&&(I.Ud("height",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.marginTop),P.x(1),I.Ud("height",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.marginBottom),P.x(1),I.Ud("width",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.marginLeft),P.x(1),I.Ud("width",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.marginRight),P.x(1),I.Ud("height",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.paddingTop),P.x(1),I.Ud("height",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.paddingBottom),P.x(1),I.Ud("width",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.paddingLeft),P.x(1),I.Ud("width",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.paddingRight),P.x(1),I.Ud("height",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.borderTop),P.x(1),I.Ud("height",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.borderBottom),P.x(1),I.Ud("width",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.borderLeft),P.x(1),I.Ud("width",null==t.htmlElement||null==t.htmlElement.style?null:t.htmlElement.style.borderRight))},encapsulation:2,changeDetection:0});var z=n(83762),A=n(53289);class k{transform(e){return t=>{for(const n of e)n(t)}}}k.ɵfac=function(e){return new(e||k)},k.ɵpipe=m.Yj({name:"combineRenderersCallbacks",type:k,pure:!0,standalone:!0});var R=n(13315),_=n(67942),N=n(26116),U=n(10065),F=n(13757),H=n(88731),j=n(43335),B=n(32603),W=n(66898),Z=n(46430),G=n(36273),Q=n(52622),$=n(5327),V=n(95741),q=n(61923),K=n(16301),X=n(32779),J=n(99114),ee=n(52038),te=n(72435),ne=n(38933),ie=n(31530),oe=n(67166),ae=n(83602),re=n(5059);const se=["COMPONENT","METADATA"];class de{get metadata(){if(!this.dragData.metadata)throw new Error("DndCoreDesignerDirective: invalid drag data without metadata!");return this.dragData.metadata}get canDrop(){return this.manager.getComponent(this.metadata.id)?.canDrop??!1}get horizontal(){return this.manager.getComponent(this.metadata.id)?.horizontal??!1}get containerElement(){if(!this.componentElement)return;const e=this.manager.getComponent(this.metadata.id);return e?.editorMetadata?.getChildrenContainer?e.editorMetadata.getChildrenContainer(this.componentElement)??this.componentElement:this.componentElement}constructor(e,t,n,i,o,a,r){this.dnd=e,this.designerElement=t,this.draggingSvc=n,this.manager=i,this.bus=o,this.injector=a,this.document=r,this.ngZone=(0,X.f3)(J.R0),this.initSubscriptions=new p.w0,this.dragDisabled=!1,this.dropMetadata=new ee.v,this.placeholderDrop=this.dnd.dropTarget(se,{canDrop:()=>!0,drop:e=>{const t=e.getItem();let n=this.bus.dropPlaceholderPreviewIndex;return t&&(0,l.EN)(t.dragData.index)&&(0,l.EN)(n)&&n>t.dragData.index&&n--,{index:n,id:this.metadata?.id}}},this.initSubscriptions),this.containerDrop=this.dnd.dropTarget(se,{canDrop:e=>this.canDropAncestors(e)[0]&&e.isOver({shallow:!0}),drop:e=>{const[t,n]=this.getFixedDropCoordinates(e,!1);return{index:t,id:n}},hover:e=>{if(e.isOver({shallow:!0})){const[t,n]=this.getDropCoordinates(e,!1);if((0,l.fp)(t)||(0,l.fp)(n))return;this.bus.setDropPlaceholderPreview({index:t,parentId:n,placeholder:{height:0,width:0}})}}},this.initSubscriptions),this.drag=this.dnd.dragSource("COMPONENT",{beginDrag:()=>(this.draggingSvc.setDragging(!0),this.designerElement.nativeElement.classList.add("is-dragged"),{dragData:this.dragData}),canDrag:()=>!this.dragDisabled,endDrag:e=>{if(e.didDrop()){const t=e.getItem(),n=e.getDropResult();if(!t)return;t.dragData.index=n.index,this.bus.setDropData({data:t.dragData,id:n.id})}else this.designerElement.nativeElement.classList.remove("is-dragged");this.bus.setDropPlaceholderPreview(null),this.draggingSvc.setDragging(!1),this.designerElement.nativeElement.classList.remove("is-dragged")}},this.initSubscriptions),this.dropzone=this.dnd.dropTarget(se,{canDrop:e=>(this.canDrop||this.canDropAncestors(e)[0])&&e.isOver({shallow:!0})&&this.selfIsAncestor(e),drop:e=>{const[t,n]=this.getFixedDropCoordinates(e,this.canDrop);return{index:t,id:n}},hover:e=>{if(e.isOver({shallow:!0})&&e.canDrop()){const[t,n]=this.getDropCoordinates(e,this.canDrop);if((0,l.fp)(t)||(0,l.fp)(n))return;this.bus.setDropPlaceholderPreview({index:t,parentId:n,placeholder:{height:0,width:0}})}}},this.initSubscriptions),this.connectDropToContainer()}ngOnInit(){if(!this.dropzoneElement)throw new Error("DndCoreDesignerDirective: missing dropzone element!");if(!this.dragData)throw new Error("DndCoreDesignerDirective: missing drag data!");this.initSubscriptions.add(this.bus.dropDataChange.pipe((0,ne.h)((e=>e.id===this.metadata.id))).subscribe((e=>{this.ngZone.run((()=>this.dropMetadata.emit(e.data)))}))),this.initSubscriptions.add(this.bus.oldDropPlaceholderPreviewChange.pipe((0,ne.h)((e=>e.parentId===this.metadata.id))).subscribe((()=>{this.ngZone.run((()=>{this.placeholderPreviewElement?.remove(),this.placeholderPreviewElement=null}))}))),this.initSubscriptions.add(this.bus.newDropPlaceholderPreviewChange.pipe((0,ne.h)((e=>e.parentId===this.metadata.id))).subscribe((e=>{this.ngZone.run((()=>this.showPlaceholderPreview(e)))})))}ngOnChanges(e){(0,l.$0)("customDragType")in e&&((0,l.fp)(this.customDragType)||this.drag.setType(this.customDragType)),(0,l.$0)("customDropTypes")in e&&((0,l.fp)(this.customDropTypes)||(this.dropzone.setTypes(this.customDropTypes),this.placeholderDrop.setTypes(this.customDropTypes),this.containerDrop.setTypes(this.customDropTypes)))}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.placeholderConnection?.unsubscribe(),this.placeholderConnection=null,this.containerConnection?.unsubscribe(),this.containerConnection=null,this.drag.unsubscribe(),this.dropzone.unsubscribe(),this.placeholderDrop.unsubscribe(),this.containerDrop.unsubscribe()}renderedComponentCallback(e){this.componentElement=(0,u.Yo)(e.component)}getDropCoordinates(e,t){if(t)return this.getDropCoordinatesForChildren(e);const[n,i,o]=this.canDropAncestors(e);if(!n||(0,l.fp)(i))return[null,null];const a=this.manager.getComponent(i),r=this.manager.getComponent(o)?.index??0,s=e.getItem();return s&&(0,l.EN)(s.dragData.index)&&s.dragData.metadata?.id===this.metadata.id?[s.dragData.index,s.dragData.parentId??""]:a?[r+a.dndCoreDesigner.getIndexIncrement(e,a.horizontal),i]:[null,null]}getDropCoordinatesForChildren(e){const t=e=>{const t=e.children[0].getBoundingClientRect();return(this.horizontal?t.x:t.y)+(this.horizontal?t.width:t.height)/2};if(!this.containerElement)return[null,null];let n=0;const i=e.getClientOffset();if(!i)return[null,null];const o=this.horizontal?i.x:i.y;for(let e=0;e<this.containerElement.children.length;e++){const i=this.containerElement.children[e];if(!i.classList.contains("drag-placeholder")){if(o<=t(i))return[n,this.metadata.id];n++}}return[n,this.metadata.id]}getFixedDropCoordinates(e,t){const[n,i]=this.getDropCoordinates(e,t);let o=n;const a=e.getItem();return a&&(0,l.EN)(o)&&(0,l.EN)(a.dragData.index)&&i===a.dragData.parentId&&o>a.dragData.index&&o--,[o,i]}getIndexIncrement(e,t){const n=this.dropzoneElement.getBoundingClientRect(),i=e.getClientOffset();return i?(t?i.x-n.x:i.y-n.y)<=(t?n.width/2:n.height/2)?0:1:0}showPlaceholderPreview(e){this.containerElement&&(this.placeholderPreviewElement??(this.placeholderPreviewElement=this.document.createElement("div")),this.placeholderPreviewElement.classList.add("drag-placeholder"),this.placeholderPreviewElement.remove(),this.connectDropToPlaceholder(),this.containerElement.insertBefore(this.placeholderPreviewElement,this.containerElement.children[e.index]))}connectDropToPlaceholder(){this.ngZone.runOutsideAngular((()=>{this.placeholderConnection?.unsubscribe(),this.placeholderPreviewElement&&(this.placeholderConnection=this.placeholderDrop.connectDropTarget(this.placeholderPreviewElement))}))}connectDropToContainer(){this.ngZone.runOutsideAngular((()=>{this.containerConnection?.unsubscribe(),this.containerConnection=this.containerDrop.connectDropTarget(this.designerElement.nativeElement)}))}selfIsAncestor(e){const t=e.getItem()?.dragData.metadata;if(!t)throw new Error("DndCoreDesignerDirective: missing drag metadata!");let n=this.manager.getComponentDef(this.metadata.id);do{if(n?.component.id==t.id)return!1}while(n=n?.parent);return!0}canDropAncestors(e,t){(0,l.fp)(t)&&(t=this.metadata.id);const n=this.manager.getComponentDef(t);if(!n?.parent)return[!1,null,t];const i=e.getItemType(),o=n.parent.component.dndCoreDesigner.customDropTypes?Array.isArray(n.parent.component.dndCoreDesigner.customDropTypes)?n.parent.component.dndCoreDesigner.customDropTypes:[n.parent.component.dndCoreDesigner.customDropTypes]:se;return n.parent.component.canDrop&&o.indexOf(i)>=0?[!0,n.parent.component.id,t]:this.canDropAncestors(e,n.parent.component.id)}}de.ɵfac=function(e){return new(e||de)(D.Y(oe.f),D.Y(f.SB),D.Y(ae.z),D.Y(q.t),D.Y(re.E),D.Y(ie.z),D.Y(te.K))},de.ɵdir=m.lG({type:de,selectors:[["","dndCoreDesigner",""]],inputs:{dropzoneElement:"dropzoneElement",dragData:["dndCoreDesigner","dragData"],dragDisabled:"dragDisabled",customDragType:"customDragType",customDropTypes:"customDropTypes"},outputs:{dropMetadata:"dropMetadata"},exportAs:["dndCoreDesigner"],features:[y.T]}),(0,c.gn)([l.ru,(0,c.w6)("design:type",Function),(0,c.w6)("design:paramtypes",[Object]),(0,c.w6)("design:returntype",void 0)],de.prototype,"renderedComponentCallback",null),(0,c.gn)([l.ru,(0,c.w6)("design:type",Function),(0,c.w6)("design:paramtypes",[Object]),(0,c.w6)("design:returntype",void 0)],de.prototype,"showPlaceholderPreview",null);var le=n(82619);function he(e,t,n,i,o,a,r){try{var s=e[a](r),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,o)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function r(e){he(a,i,o,r,s,"next",e)}function s(e){he(a,i,o,r,s,"throw",e)}r(void 0)}))}}function ce(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return ce=function(e){this.s=e,this.n=e.next},ce.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new ce(e)}const ue=["layoutDesigner"],me=["dndCore"];function ge(e,t){if(1&e&&(S.Tg(0,"div",9),R._(1),S.qZ()),2&e){const e=_.o(2),t=N.M(1);let n;U.Q("positionTo",t),P.x(1),F.Oq(null!==(n=null!==(n=null==e.renderedType?null:e.renderedType.displayName)&&void 0!==n?n:null==e.editorMetadata||null==e.editorMetadata.metaInfo?null:e.editorMetadata.metaInfo.name)&&void 0!==n?n:null==e.renderedType?null:e.renderedType.name)}}const ye=e=>({mainAxis:e});function ve(e,t){if(1&e){const e=H.E();S.Tg(0,"div",11),j.N("click",(function(){B.CH(e);const t=_.o(3);return B.Kt(t.remove())})),S._U(1,"span",12),S.qZ()}if(2&e){_.o(3);const e=N.M(1);U.Q("positionTo",e)("offset",W.VK(2,ye,-14))}}function De(e,t){1&e&&Z.Y(0,ve,2,4,"div",10)}function fe(e,t){if(1&e&&(S._U(0,"div",5)(1,"div",6),Z.Y(2,ge,2,2,"div",7)(3,De,1,0,"div",8)),2&e){const e=_.o();P.x(1),U.Q("layoutDesignerOverlayFor",null==e.options||null==e.options.typeMetadata?null:e.options.typeMetadata.id),P.x(2),G.um(3,e.parent&&null!=e.parent.editorMetadata&&e.parent.editorMetadata.removeDescendant?3:-1)}}function Ee(e,t){1&e&&Q.Gk(0)}const be=(e,t,n)=>({metadata:e,parentId:t,index:n}),Ce=(e,t)=>[e,t];class Me extends r.h{get componentInstance(){const e=this.layoutRenderer.get(this.id);if(!e?.component)throw new Error("LayoutDesignerSAComponent: unable to find renderer!");return e.component.instance}get selected(){return this.layoutEditorMetadataManager.selectedComponent()===this.id}get highlighted(){return this.layoutEditorMetadataManager.highlightedComponent()===this.id}get element(){return this.designerElement}get extensionsOptions(){return this.options?.typeMetadata.options}get dragDisabled(){return!this.parent||!!this.editorMetadata?.metaInfo?.dragDisabled}get id(){return this.optionsSafe.typeMetadata.id}constructor(e,t,n,i,o,a,r){super(),this.metadataExtractor=e,this.layoutEditorMetadataManager=t,this.iteratorSvc=n,this.layoutRenderer=i,this.history=o,this.scopeId=a,this.parent=r,this.initSubscriptions=new p.w0,this.canDrop=!1,this.horizontal=!1,this.index=0,this.editorMetadata=null}ngOnDestroy(){this.logger.debug("LayoutDesignerSAComponent: Destroying component {{@data}}",{data:{id:this.options?.typeMetadata.id}}),this.initSubscriptions.unsubscribe(),super.ngOnDestroy(),this.options&&this.layoutEditorMetadataManager.unregisterLayoutDesignerComponent(this.options.typeMetadata.id)}addDescendant(e){const t=this.optionsSafe;let n=!1;const i=e.parentId;if(this.logger.debug("LayoutDesignerSAComponent: Adding descendant {{@data}}",{data:{id:e.metadata?.id,parent:this.id}}),!e.metadata)return void this.logger.warn("LayoutDesignerSAComponent: Missing metadata while adding descendant");i&&(i==this.id?(this.logger.verbose("LayoutDesignerSAComponent: Swapping child component {{@(4)data}}",{data:{id:this.id}}),this.editorMetadata?.removeDescendant?.(e.metadata.id,t.typeMetadata.options),n=!0):(this.history.disable(),this.layoutEditorMetadataManager.getComponent(i)?.removeDescendant(e.metadata.id),this.history.enable())),this.editorMetadata?.addDescendant?.(e?.metadata,t.typeMetadata.options,e.index??0),this.canDrop=this.editorMetadata?.canDropMetadata?.(t.typeMetadata.options)??!1;const o={};(0,s.mv)(o,"options",t.typeMetadata.options,t.typeMetadata.options,!1),this.componentInstance.dynamicOnChanges?.(o),this.componentInstance.invalidateVisuals(),n&&this.layoutEditorMetadataManager.updateLayout();const a=this.layoutEditorMetadataManager.getChildren(this.id);for(const e of a)e?.updateIndex(),e?.invalidateVisuals();this.history.getNewState()}removeDescendant(e){const t=this.optionsSafe;this.logger.debug("LayoutDesignerSAComponent: Removing descendant {{@(4)data}}",{data:{id:this.id,child:e}}),this.editorMetadata?.removeDescendant?.(e,t.typeMetadata.options),this.canDrop=this.editorMetadata?.canDropMetadata?.(t.typeMetadata.options)??!1;const n={};(0,s.mv)(n,"options",t.typeMetadata.options,t.typeMetadata.options,!1),this.componentInstance.dynamicOnChanges?.(n),this.componentInstance.invalidateVisuals();const i=this.layoutEditorMetadataManager.getChildren(this.id);for(const e of i)e?.updateIndex(),e?.invalidateVisuals();this.history.getNewState()}showOverlay(e){this.logger.verbose("LayoutDesignerComponent: Showing overlay for {{@type}}",{type:{name:this.options?.typeMetadata.name,id:this.options?.typeMetadata.id}}),e.preventDefault(),e.stopPropagation(),this.layoutEditorMetadataManager.highlightComponent(this.options?.typeMetadata.id)}hideOverlay(e){(0,l.EN)(this.parent)||(this.logger.verbose("LayoutDesignerComponent: Hiding overlay for {{@type}}",{type:{name:this.options?.typeMetadata.name,id:this.options?.typeMetadata.id}}),e.preventDefault(),e.stopPropagation(),this.layoutEditorMetadataManager.cancelHighlightedComponent())}selectComponent(e){e.preventDefault(),e.stopPropagation(),this.options&&this.layoutEditorMetadataManager.selectComponent(this.id)}unselectComponent(e){e.preventDefault(),e.stopPropagation(),this.layoutEditorMetadataManager.unselectComponent()}remove(){this.parent&&this.parent.removeDescendant(this.id)}updateIndex(){var e=this;return pe((function*(){const t=e.optionsSafe;if(e.parent?.options){var n,i=!1,o=!1;try{for(var a,r=function(e){var t,n,i,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new ce(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(e.iteratorSvc.getChildrenIteratorFor(e.parent.options?.typeMetadata));i=!(a=yield r.next()).done;i=!1){const n=a.value;if(t.typeMetadata.id===n.metadata.id){e.index=n.index;break}}}catch(e){o=!0,n=e}finally{try{i&&null!=r.return&&(yield r.return())}finally{if(o)throw n}}}}))()}onInit(){var e=()=>super.onInit,t=this;return pe((function*(){yield e().call(t);const n=t.optionsSafe;n.typeMetadata.scope=t.scopeId,yield t.updateIndex(),t.editorMetadata=yield t.metadataExtractor.extractMetadata(n.typeMetadata),t.canDrop=t.editorMetadata?.canDropMetadata?.(n.typeMetadata.options)??!1,t.renderedType=n.typeMetadata,t.layoutEditorMetadataManager.registerLayoutDesignerComponent(t,n.typeMetadata.id,t.parent?.options?.typeMetadata.id)}))()}onOptionsSet(){const e=this.optionsSafe;this.horizontal=this.editorMetadata?.isHorizontalDrop?.(e.typeMetadata.options)??!1}}Me.ɵfac=function(e){return new(e||Me)(D.Y(E.T),D.Y(q.t),D.Y(K.$),D.Y(L.e),D.Y(z.dB),D.Y(d.H$,8),D.Y(Me,12))},Me.ɵcmp=m.Xp({type:Me,selectors:[["layout-designer-component"]],viewQuery:function(e,t){if(1&e&&(g.Gf(ue,7),g.Gf(me,7)),2&e){let e;g.iG(e=g.CR())&&(t.designerElement=e.first),g.iG(e=g.CR())&&(t.dndCoreDesigner=e.first)}},standalone:!0,features:[$.q,x.j],decls:9,vars:25,consts:[[1,"designer-overlay",3,"dndCoreDesigner","dropzoneElement","dragDisabled","dragSource","customDragType","customDropTypes","noHTML5Preview","copyDesignerStyles","dropMetadata","mouseleave","mouseover","click","dblclick"],["layoutDesigner","","dndCore","dndCoreDesigner"],["designerMinWidth","",1,"designer-dropzone",3,"canDrop","editorMetadata","horizontal","dropTarget","isDropZone"],["layoutDropzone","","minWidthDirective","designerMinWidth"],[4,"layoutComponentRenderer","layoutComponentRendererCallback"],[1,"designer-overlay-border"],[1,"designer-overlay-layout",3,"layoutDesignerOverlayFor"],["class","designer-overlay-title","placement","TopStart",3,"positionTo",4,"bodyRender"],["class","designer-overlay-remove","placement","TopEnd",3,"positionTo","offset"],["placement","TopStart",1,"designer-overlay-title",3,"positionTo"],["class","designer-overlay-remove","placement","TopEnd",3,"positionTo","offset","click",4,"bodyRender"],["placement","TopEnd",1,"designer-overlay-remove",3,"positionTo","offset","click"],[1,"fas","fa-times"]],template:function(e,t){if(1&e&&(S.Tg(0,"div",0,1),j.N("dropMetadata",(function(e){return t.addDescendant(e)}))("mouseleave",(function(e){return t.hideOverlay(e)}))("mouseover",(function(e){return t.showOverlay(e)}))("click",(function(e){return t.selectComponent(e)}))("dblclick",(function(e){return t.unselectComponent(e)})),S.Tg(3,"div",2,3),Z.Y(6,fe,4,2)(7,Ee,1,0,"ng-container",4),V.AL(8,"combineRenderersCallbacks"),S.qZ()()),2&e){const e=N.M(2),n=N.M(4),i=N.M(5);let o,a,r;U.Q("dndCoreDesigner",W.kE(18,be,t.renderedType,null==t.parent||null==t.parent.renderedType?null:t.parent.renderedType.id,t.index))("dropzoneElement",n)("dragDisabled",t.dragDisabled)("dragSource",e.drag)("customDragType",null==t.editorMetadata||null==t.editorMetadata.customDragType||null==(o=t.editorMetadata.customDragType())?null:o.layout)("customDropTypes",null==t.editorMetadata||null==t.editorMetadata.customDropTypes||null==(a=t.editorMetadata.customDropTypes())?null:a.layout)("noHTML5Preview",!0)("copyDesignerStyles",t.renderedType),P.x(3),U.Q("canDrop",t.canDrop)("editorMetadata",t.editorMetadata)("horizontal",null!==(r=null==t.parent?null:t.parent.horizontal)&&void 0!==r&&r)("dropTarget",e.dropzone)("isDropZone",t.canDrop),P.x(3),G.um(6,t.highlighted||t.selected?6:-1),P.x(1),U.Q("layoutComponentRenderer",t.renderedType)("layoutComponentRendererCallback",V.lc(8,16,W.WL(22,Ce,e.renderedComponentCallback,i.renderedComponentCallback)))}},dependencies:[A.N,de,h.c8,le.$d,le.Li,Y,a.i,v,C,M.c,i.k,o.I,k],encapsulation:2,changeDetection:0})},29354:(e,t,n)=>{n.d(t,{I:()=>l});var i=n(72435),o=n(73943),a=n(80033),r=n(85696),s=n(26066),d=n(85410);class l{template;viewContainer;document;view;element;targetElement;constructor(e,t,n){this.template=e,this.viewContainer=t,this.document=n}ngOnInit(){this.view=this.viewContainer.createEmbeddedView(this.template),this.element=this.view.rootNodes[0],(0,o.tE)(this.document,this.element,this.targetElement)}ngOnDestroy(){this.element?.remove(),this.element=null,this.view?.destroy(),this.view=null}static ɵfac=function(e){return new(e||l)(a.Y(r.Rg),a.Y(s.s_),a.Y(i.K))};static ɵdir=d.lG({type:l,selectors:[["","bodyRender",""]],inputs:{targetElement:["bodyRender","targetElement"]},standalone:!0})}},44330:(e,t,n)=>{n.d(t,{k:()=>c});var i=n(25413),o=n(52038),a=n(73943),r=n(69648),s=n(87243),d=n(95127),l=n(80033),h=n(85410),p=n(56949);class c{target;position;ɵPlacement;ɵSource;dispose;get source(){return this.ɵSource}set source(e){e instanceof i.SB?this.ɵSource=e.nativeElement:this.ɵSource=e}get placement(){return this.ɵPlacement}set placement(e){(0,a.HD)(e)?this.ɵPlacement=r.X[e]:this.ɵPlacement=e}offset="None";autoUpdate=!0;flip=new o.v;done=new o.v;constructor(e,t){this.target=e,this.position=t}ngOnChanges(e){((0,a.$0)("source")in e||(0,a.$0)("placement")in e)&&(0,a.EN)(this.source)&&this._applyPosition()}ngOnDestroy(){this.dispose?.()}_applyPosition(){if(!this.ɵSource)return;const e={flip:!0,autoUpdate:this.autoUpdate,offset:this.offset};this.ɵPlacement&&(e.placement=this.ɵPlacement),this.dispose?.(),this.position.placeElement(this.target.nativeElement,this.ɵSource,e).subscribe((e=>{this.dispose=e.dispose,(0,s.e)(e),e.flip&&this.flip.emit(),this.done.emit()}))}static ngAcceptInputType_placement;static ngAcceptInputType_source;static ɵfac=function(e){return new(e||c)(l.Y(i.SB),l.Y(d.Vr))};static ɵdir=h.lG({type:c,selectors:[["","positionTo",""]],inputs:{source:["positionTo","source"],placement:"placement",offset:"offset",autoUpdate:"autoUpdate"},outputs:{flip:"flip",done:"done"},standalone:!0,features:[p.T]})}}}]);
//# sourceMappingURL=590.chunk.3bbb5f69daada6b90c3d.js.map