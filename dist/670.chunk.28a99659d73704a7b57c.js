"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[670],{27670:(t,e,n)=>{n.r(e),n.d(e,{DefaultModule:()=>Qt});var o=n(14392),a=n(35375),i=n(89001),r=n(27052),s=n(38223),c=n(79440),l=n(93802),p=n(77842);class d{constructor(t){this.template=t}static ngTemplateContextGuard(t,e){return!0}}d.ɵfac=function(t){return new(t||d)(c.Y(l.Rg))},d.ɵdir=p.lG({type:d,selectors:[["","treeNodeTemplate",""]],exportAs:["treeNodeTemplate"],standalone:!0});var m=n(4477),g=n(15686),u=n(6845),h=n(11282),_=n(66794),f=n(73301),y=n(94727),x=n(84773),v=n(80827),b=n(72891),C=n(43870),D=n(41853),M=n(85320),k=n(6427),T=n(68961),w=n(82568),I=n(82973),O=n(83434),P=n(12311),L=n(21651),S=n(93234);function Y(t,e){1&t&&m.Gk(0)}const F=function(t,e){return{$implicit:t,margin:e}};function N(t,e){if(1&t&&(m.yn(0),g.Y(1,Y,1,0,"ng-container",5),m.BQ()),2&t){const t=e.$implicit,n=u.o().margin;u.o();const o=h.M(1);_.x(1),f.Q("ngTemplateOutlet",o.template)("ngTemplateOutletContext",y.WL(2,F,t,n+10))}}function q(t,e){if(1&t){const t=x.E();v.Tg(0,"div",3),b.N("mouseover",(function(e){const n=C.CH(t).$implicit,o=u.o();return C.Kt(o.highlight(e,null==n.component.options||null==n.component.options.typeMetadata?null:n.component.options.typeMetadata.id))}))("click",(function(){const e=C.CH(t).$implicit,n=u.o();return C.Kt(n._manager.selectComponent(null==e.component.options||null==e.component.options.typeMetadata?null:e.component.options.typeMetadata.id))})),D._(1),v.qZ(),g.Y(2,N,2,5,"ng-container",4)}if(2&t){const t=e.$implicit,n=e.margin,o=u.o();M.Ud("margin-left",n,"px"),M.ek("selected",(null==t.component.options||null==t.component.options.typeMetadata?null:t.component.options.typeMetadata.id)===o._manager.selectedComponent)("highlighted",(null==t.component.options||null==t.component.options.typeMetadata?null:t.component.options.typeMetadata.id)===o._manager.highlightedComponent),_.x(1),k.Oq(null==t.component.options||null==t.component.options.typeMetadata?null:t.component.options.typeMetadata.id),_.x(1),f.Q("ngForOf",t.children)}}function Z(t,e){1&t&&m.Gk(0)}const E=function(t){return{$implicit:t,margin:0}};function Q(t,e){if(1&t&&(m.yn(0),g.Y(1,Z,1,0,"ng-container",5),m.BQ()),2&t){const t=u.o(),e=h.M(1);_.x(1),f.Q("ngTemplateOutlet",e.template)("ngTemplateOutletContext",y.VK(2,E,t.root))}}class A{constructor(t,e){this._manager=t,this._changeDetector=e,this._initSubscriptions=new s.w}ngOnInit(){this._initSubscriptions.add(this._manager.layoutChange.subscribe((()=>{this.root=this._manager.root,this._changeDetector.detectChanges()}))),this._initSubscriptions.add(this._manager.selectedChange.subscribe((()=>this._changeDetector.detectChanges()))),this._initSubscriptions.add(this._manager.highlightedChange.subscribe((()=>this._changeDetector.detectChanges()))),this._initSubscriptions.add(this._manager.idChange.subscribe((()=>this._changeDetector.detectChanges()))),this.root=this._manager.root}ngOnDestroy(){this._initSubscriptions.unsubscribe()}highlight(t,e){t.preventDefault(),t.stopPropagation(),this._manager.highlightComponent(e)}_cancelHighlight(t){t.preventDefault(),t.stopPropagation(),this._manager.cancelHighlightedComponent()}}A.ɵfac=function(t){return new(t||A)(c.Y(O.t),c.Y(T.s))},A.ɵcmp=p.Xp({type:A,selectors:[["components-tree"]],hostBindings:function(t,e){1&t&&b.N("mouseleave",(function(t){return e._cancelHighlight(t)}))},standalone:!0,features:[w.j],decls:3,vars:1,consts:[["treeNodeTemplate",""],["components","treeNodeTemplate"],[4,"ngIf"],[3,"mouseover","click"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(g.Y(0,q,3,8,"ng-template",0,1,I.W),g.Y(2,Q,2,4,"ng-container",2)),2&t&&(_.x(2),f.Q("ngIf",e.root))},dependencies:[r.e,P.s,L.O,S.t,d],styles:["[_nghost-%COMP%]\n{\n    display: block;\n    background-color: #fafafa;\n    border-right: 1px solid #ccc;\n    padding: 10px 8px;\n}\n\n.highlighted[_ngcontent-%COMP%]\n{\n    text-shadow: 0 0 2px #666;\n}\n\n.selected[_ngcontent-%COMP%]\n{\n    text-shadow: 0 0 2px #009cd7;\n}"],changeDetection:0});var B=n(989),$=n(46480),R=n(57466);class U{transform(t,e){return{metadata:{id:`${t.itemSource.name}-${e}`,package:t.itemSource.package,name:t.itemSource.name,options:{}},parentId:null}}}U.ɵfac=function(t){return new(t||U)},U.ɵpipe=p.Yj({name:"toLayoutDragData",type:U,pure:!0,standalone:!0});var z=n(69307),H=n(53015),j=n(65589),W=n(87606),G=n(13457),J=n(11776),K=n(38327);function V(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}class X{constructor(t,e,n){this._providers=t,this._extractors=e,this._logger=n,this._cachedDynamicModuleTypes={},Array.isArray(this._providers)||(this._logger?.error("DynamicModuleTypesLoader: missing providers!"),this._providers=[]),Array.isArray(this._extractors)||(this._logger?.error("DynamicModuleTypesLoader: missing extractors!"),this._extractors=[])}loadTypes(t){var e,n=this;return(e=function*(){let e=null;if(n._cachedDynamicModuleTypes[t])return n._logger?.verbose("DynamicModuleTypesLoader: Loading from cache {@source}",{moduleName:t}),n._cachedDynamicModuleTypes[t];for(const o of n._providers){const n=o.tryToGet(t);if(e=n?yield(0,W.K)(n):null,e)break}if(!e)return n._logger?.debug("DynamicModuleTypesLoader: Failed to get dynamic module {@source}",{moduleName:t}),null;for(const o of n._extractors){const a=o.tryToExtract(e);if(a)return n._cachedDynamicModuleTypes[t]=a,a}return n._logger?.debug("DynamicModuleTypesLoader: Failed to extract dynamic module types {@source}",{moduleName:t}),null},function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function r(t){V(i,o,a,r,s,"next",t)}function s(t){V(i,o,a,r,s,"throw",t)}r(void 0)}))})()}}X.ɵfac=function(t){return new(t||X)(J.LF(G.Cf),J.LF(G.WU),J.LF($.bZ,8))},X.ɵprov=K.Yz({token:X,factory:X.ɵfac,providedIn:"root"});var tt=n(85902),et=n(32434),nt=n(99055),ot=n(23208),at=n(10866),it=n(22549);function rt(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}function st(t,e){1&t&&v._U(0,"layout-editor-drag-placeholder",10)}function ct(t,e){if(1&t&&(v._U(0,"layout-editor-drag-preview",11),j.AL(1,"toLayoutDragData")),2&t){const t=u.o().$implicit,e=u.o(2);f.Q("editorMetadata",t.metadata)("layoutMetadata",j.xi(1,2,t,e._newCompnentId).metadata)}}function lt(t,e){if(1&t&&(v.Tg(0,"div",12),D._(1),v.qZ()),2&t){const t=u.o().$implicit;_.x(1),k.Oq(null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function pt(t,e){if(1&t){const t=x.E();v.Tg(0,"div",4)(1,"div",5),b.N("cdkDragDropped",(function(){C.CH(t);const e=u.o(2);return C.Kt(e._generateNewId())})),j.AL(2,"toLayoutDragData"),g.Y(3,st,1,0,"layout-editor-drag-placeholder",6),g.Y(4,ct,2,5,"layout-editor-drag-preview",7),v.Tg(5,"div",8),D._(6),v.qZ(),g.Y(7,lt,2,1,"div",9),v.qZ()()}if(2&t){const t=e.$implicit,n=u.o(2);let o;f.Q("cdkDropListConnectedTo",n._designerDropLists),_.x(1),f.Q("cdkDragData",j.xi(2,4,t,n._newCompnentId)),_.x(5),k.Oq(null!==(o=null==t.metadata.metaInfo?null:t.metadata.metaInfo.name)&&void 0!==o?o:t.itemSource.name),_.x(1),f.Q("ngIf",null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function dt(t,e){if(1&t&&(m.yn(0),v.Tg(1,"div",2),D._(2),v.qZ(),g.Y(3,pt,8,7,"div",3),m.BQ()),2&t){const t=e.$implicit;_.x(2),k.hi("",t.key," "),_.x(1),f.Q("ngForOf",t.value)}}class mt{constructor(t,e,n,o,a){this._moduleTypesLoader=t,this._changeDetector=e,this._metadataExtractor=n,this._metadataManager=o,this._logger=a,this._initSubscriptions=new s.w,this._allItems=[],this._groupedItems={},this._designerDropLists=[],this._newCompnentId=(0,R.Ox)(16)}ngOnInit(){var t,e=this;return(t=function*(){var t;e._initSubscriptions.add(e._metadataManager.layoutChange.subscribe((()=>e._getDesignerDropLists()))),e._getDesignerDropLists();const n=(yield e._moduleTypesLoader.loadTypes("basic-components"))??[];for(const t of n){const n={package:"basic-components",name:t},o=yield e._metadataExtractor.extractMetadata(n);o?e._allItems.push({itemSource:n,metadata:o}):e._logger?.warn("ComponentsPaletteSAComponent: Failed to obtain layout editor metadata {@source}",n)}e._groupedItems[""]=[];for(const n of e._allItems){const o=n.metadata.metaInfo?.group??"";(t=e._groupedItems)[o]??(t[o]=[]),e._groupedItems[o].push(n)}e._changeDetector.detectChanges()},function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){rt(i,o,a,r,s,"next",t)}function s(t){rt(i,o,a,r,s,"throw",t)}r(void 0)}))})()}ngOnDestroy(){this._initSubscriptions.unsubscribe()}_generateNewId(){this._newCompnentId=(0,R.Ox)(16)}_getDesignerDropLists(){this._designerDropLists=this._metadataManager.flatTree.map((t=>t.component.designerDropList)).reverse()}}mt.ɵfac=function(t){return new(t||mt)(c.Y(X),c.Y(T.s),c.Y(tt.T),c.Y(O.t),c.Y($.bZ,8))},mt.ɵcmp=p.Xp({type:mt,selectors:[["components-palette"]],standalone:!0,features:[w.j],decls:3,vars:3,consts:[[1,"flex-column"],[4,"ngFor","ngForOf"],[1,"text-spread","text-small-caps","margin-left-extra-small","margin-horizontal-small","bold"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo",4,"ngFor","ngForOf"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo"],["cdkDrag","",1,"editor-component","mat-elevation-z2",3,"cdkDragData","cdkDragDropped"],["class","mat-elevation-z6",4,"cdkDragPlaceholder"],["class","mat-elevation-z4",3,"editorMetadata","layoutMetadata",4,"cdkDragPreview"],[1,"editor-component-name"],["class","editor-component-description",4,"ngIf"],[1,"mat-elevation-z6"],[1,"mat-elevation-z4",3,"editorMetadata","layoutMetadata"],[1,"editor-component-description"]],template:function(t,e){1&t&&(v.Tg(0,"div",0),g.Y(1,dt,4,2,"ng-container",1),j.AL(2,"keyvalue"),v.qZ()),2&t&&(_.x(1),f.Q("ngForOf",j.lc(2,1,e._groupedItems)))},dependencies:[r.e,P.s,L.O,et.N,B._,nt.W,ot.Z,at.p,it.H,H.s,z.a,U],styles:[".editor-component[_ngcontent-%COMP%]\n{\n    margin: 2px 10px;\n    padding: 4px 8px;\n\n    border-radius: 6px;\n    border: 1px solid #F0F0F0;\n    background-color: #FAFAFA;\n}\n\n.editor-component-name[_ngcontent-%COMP%]\n{\n    font-weight: 500;\n}\n\n.editor-component-description[_ngcontent-%COMP%]\n{\n    margin-left: 4px;\n    margin-top: 2px;\n    font-size: .8em;\n}"],changeDetection:0});var gt=n(70625),ut=n(99237),ht=n(43939),_t=n(22294),ft=n(49280),yt=n(77470),xt=n(27635);function vt(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}function bt(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){vt(i,o,a,r,s,"next",t)}function s(t){vt(i,o,a,r,s,"throw",t)}r(void 0)}))}}function Ct(t,e){if(1&t&&(v.Tg(0,"div",4)(1,"label",5),D._(2,"Text"),v.qZ(),v._U(3,"input",6),v.qZ()),2&t){const t=u.o(2);_.x(3),f.Q("formControl",t._text)}}function Dt(t,e){if(1&t&&(v.Tg(0,"div",1)(1,"div",2),D._(2,"Properties "),v.Tg(3,"span",3),D._(4),v.qZ()(),v.Tg(5,"div",4)(6,"label",5),D._(7,"Id"),v.qZ(),v._U(8,"input",6),v.qZ(),g.Y(9,Ct,4,1,"div",7),v.qZ()),2&t){const t=u.o();let e;_.x(4),k.Oq(null!==(e=null==t._metadata||null==t._metadata.metaInfo?null:t._metadata.metaInfo.name)&&void 0!==e?e:null==t._component||null==t._component.options||null==t._component.options.typeMetadata?null:t._component.options.typeMetadata.name),_.x(4),f.Q("formControl",t._id),_.x(1),f.Q("ngIf","textBlock"==(null==t._component||null==t._component.options||null==t._component.options.typeMetadata?null:t._component.options.typeMetadata.name))}}class Mt{constructor(t,e,n,o){this._manager=t,this._metadataExtractor=e,this._changeDetector=n,this._logger=o,this._initSubscriptions=new s.w,this._visible=!1,this._component=null,this._metadata=null,this._id=new gt.NI(null),this._text=new gt.NI(null)}ngOnInit(){this._initSubscriptions.add(this._manager.selectedChange.subscribe((()=>this._initProperties()))),this._id.valueChanges.pipe((0,_t.b)(160)).subscribe((t=>{if(this._component?.options?.typeMetadata&&(0,ht.EN)(t)){const e=this._component.options.typeMetadata.id;this._component.options.typeMetadata.id=t,this._manager.updatedLayoutDesignerComponentId(e,t)}})),this._text.valueChanges.pipe((0,_t.b)(160)).subscribe((t=>{this._component?.options?.typeMetadata&&(0,ht.EN)(t)&&(this._component.options.typeMetadata.options.text=t,this._component.options=this._component.options)})),this._initProperties()}ngOnDestroy(){this._initSubscriptions.unsubscribe()}_initProperties(){var t=this;return bt((function*(){if((0,ht.EN)(t._manager.selectedComponent)){t._visible=!0;const e=t._manager.getComponent(t._manager.selectedComponent);e?(t._visible=!0,t._component=e,yield t._getMetadata()):t._hide()}else t._hide()}))()}_getMetadata(){var t=this;return bt((function*(){t._component?.options?.typeMetadata?(t._id.setValue(t._component.options.typeMetadata.id,{emitEvent:!1}),t._text.setValue(t._component.options.typeMetadata.options.text,{emitEvent:!1}),t._metadata=yield t._metadataExtractor.extractMetadata(t._component.options?.typeMetadata),t._metadata||(t._logger?.error("PropertiesEditorSAComponent: unable to get metadata {@source}",{package:t._component.options?.typeMetadata.package,name:t._component.options?.typeMetadata.name}),t._hide())):t._hide(),t._changeDetector.detectChanges()}))()}_hide(){this._visible=!1,this._component=null,this._metadata=null}}Mt.ɵfac=function(t){return new(t||Mt)(c.Y(O.t),c.Y(tt.T),c.Y(T.s),c.Y($.bZ,8))},Mt.ɵcmp=p.Xp({type:Mt,selectors:[["properties-editor"]],standalone:!0,features:[w.j],decls:1,vars:1,consts:[["class","properties-main",4,"ngIf"],[1,"properties-main"],[1,"header"],[1,"bold"],[1,"form-group"],[1,"control-label"],["type","text",1,"form-control",3,"formControl"],["class","form-group",4,"ngIf"]],template:function(t,e){1&t&&g.Y(0,Dt,10,3,"div",0),2&t&&f.Q("ngIf",e._visible)},dependencies:[r.e,L.O,ut.U,ft.Fj,yt.JJ,xt.oH],styles:["[_nghost-%COMP%]\n{\n    display: flex;\n    flex-direction: column;\n}\n\n.properties-main[_ngcontent-%COMP%]\n{\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    min-height: 0;\n    border: 1px solid #bbb;\n    background-color: #F5F5F5;\n}\n\n.header[_ngcontent-%COMP%]\n{\n    padding: 2px 8px;\n    background-color: #bbb;\n}\n\n.form-group[_ngcontent-%COMP%]\n{\n    margin: 4px 6px 0;\n}"],changeDetection:0});var kt,Tt,wt=n(80149),It=n(94761);!function(t){t[t.Light=200]="Light",t[t.Normal=400]="Normal",t[t.SemiBold=600]="SemiBold",t[t.Bold=700]="Bold"}(kt||(kt={})),function(t){t[t.px=0]="px",t[t.pt=1]="pt",t[t.em=2]="em"}(Tt||(Tt={}));var Ot=n(78950),Pt=n(31918),Lt=n(35083),St=n(73379),Yt=n(49308),Ft=n(47e3),Nt=n(75464);let qt=class{constructor(t){this._manager=t,this.metadata={id:"gridPanelTest",package:"basic-components",name:"gridPanel",options:{columns:[{width:"1fr"},{width:"2fr"},{width:"1fr"},{width:"100px"}],rows:[{height:"300px"}],cells:[{id:"celltest",package:"basic-components",name:"gridPanelCell",options:{gridColumnStart:2,gridColumnEnd:3,gridRowStart:1,gridRowEnd:2,component:{id:"stackPanelTest",package:"basic-components",name:"stackPanel",options:{padding:{top:"20px"},children:[{package:"basic-components",id:"textTest",name:"textBlock",options:{text:"toto je text",margin:{top:"10px"},textStyling:{fontSize:"20px"}}},{package:"basic-components",id:"text2Test",name:"textBlock",options:{text:"druhý riadok je toto",textStyling:{fontWeight:kt.Bold}}}]}}}},{id:"anotherCell",package:"basic-components",name:"gridPanelCell",options:{gridColumnStart:3,gridColumnEnd:4,gridRowStart:1,gridRowEnd:2,component:{package:"basic-components",id:"textJeTo",name:"textBlock",options:{text:"nový text"}}}},{id:"stackxxx",package:"basic-components",name:"gridPanelCell",options:{gridColumnStart:4,gridColumnEnd:5,gridRowStart:1,gridRowEnd:2,component:{id:"stackPanelxxx",package:"basic-components",name:"stackPanel",options:{children:[]}}}}]}}}ngOnInit(){}ngOnDestroy(){}getMetadata(){console.log(this._manager.getMetadata()),console.log(this._manager.root),console.log(this._manager.flatTree),console.log(this._manager.flatTree.map((t=>t.component.options.typeMetadata.id))),console.log(this._manager.flatTree.map((t=>t.component.designerDropList)).reverse())}};qt.ɵfac=function(t){return new(t||qt)(c.Y(O.t))},qt.ɵcmp=p.Xp({type:qt,selectors:[["home-view"]],features:[St._([{provide:Ot.W,useValue:new Ot.W(Pt.q.ShowNotFound)},Lt.N,O.t])],decls:11,vars:1,consts:[[1,"flex-row","margin-top-big"],["label","Hierarchy"],["label","Palette"],[1,"flex-1"],[3,"layoutComponentRenderer"],[3,"click"]],template:function(t,e){1&t&&(v.Tg(0,"div",0)(1,"mat-tab-group")(2,"mat-tab",1),v._U(3,"components-tree"),v.qZ(),v.Tg(4,"mat-tab",2),v._U(5,"components-palette"),v.qZ()(),v.Tg(6,"div",3),m.Gk(7,4),v.qZ(),v._U(8,"properties-editor"),v.qZ(),v.Tg(9,"button",5),b.N("click",(function(){return e.getMetadata()})),D._(10,"get metadata"),v.qZ()),2&t&&(_.x(7),f.Q("layoutComponentRenderer",e.metadata))},dependencies:[Yt.i,A,mt,Mt,Ft.SP,Nt.u],encapsulation:2,changeDetection:0}),qt=(0,o.gn)([(0,wt.R)("","home"),(0,It.N)({path:"home"}),(0,o.w6)("design:paramtypes",[O.t])],qt);const Zt=[qt];var Et=n(42983);let Qt=class{};Qt.ɵfac=function(t){return new(t||Qt)},Qt.ɵmod=p.oA({type:Qt}),Qt.ɵinj=K.cJ({imports:[Et._J,Et.No,Et.nP,A,mt,Mt,a.N]}),Qt=(0,o.gn)([(0,i.P)(Zt)],Qt)}}]);
//# sourceMappingURL=670.chunk.28a99659d73704a7b57c.js.map