"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[671],{72385:(t,e,n)=>{n.d(e,{b:()=>N});var o=n(68624),i=n(30621),s=n(9249),a=n(71791),l=n(71309),r=n(50073),c=n(14389),d=n(57466),u=n(43939),p=n(64297);class h{constructor(t){this.defaultValue=null,this.name="",d.Rl.bind(this)(t)}}var g=n(79440),m=n(13691),f=n(73379),v=n(82568),b=n(80827),y=n(41853),C=n(72891),w=n(73301),E=n(66794),M=n(47826),x=n(49280),k=n(77470),j=n(86170),T=n(66163),_=n(80943);function F(t,e,n,o,i,s,a){try{var l=t[s](a),r=l.value}catch(t){return void n(t)}l.done?e(r):Promise.resolve(r).then(o,i)}class N{constructor(t,e,n){this.data=t,this.dialog=e,this.form=n.build(new h(t)),this.form.valueChanges.subscribe((e=>(0,d.l7)(t,e)))}showCodeEditor(){var t,e=this;return(t=function*(){const t=(0,u.EN)(e.data.defaultValue)?JSON.stringify(e.data.defaultValue,null,4):"",n=yield(0,p.n)(e.dialog.open(l.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:t,languageModel:r.H}}).afterClosed());(0,u.EN)(n)&&(e.data.defaultValue=(0,c.LK)(n))},function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function a(t){F(s,o,i,a,l,"next",t)}function l(t){F(s,o,i,a,l,"throw",t)}a(void 0)}))})()}}N.ɵfac=function(t){return new(t||N)(g.Y(s.m),g.Y(M.J),g.Y(a.p))},N.ɵcmp=m.Xp({type:N,selectors:[["configure-node-endpoint"]],standalone:!0,features:[f._([a.p]),v.j],decls:16,vars:3,consts:[[3,"formGroup"],[1,"form-group","margin-bottom-extra-small"],[1,"control-label","text-uppercase"],["type","text","formControlName","name",1,"form-control"],[1,"flex-column"],["type","button",1,"btn","btn-primary","align-self-center",3,"click"],[1,"flex-row","flex-end"],["type","button",1,"btn","btn-info","margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"btn","btn-primary",3,"mat-dialog-close"]],template:function(t,e){1&t&&(b.Tg(0,"div",0)(1,"div",1)(2,"label",2),y._(3,"name"),b.qZ(),b._U(4,"input",3),b.qZ(),b.Tg(5,"div",4)(6,"button",5),C.N("click",(function(){return e.showCodeEditor()})),b.Tg(7,"span"),y._(8,"default value"),b.qZ()()()(),b.Tg(9,"div",6)(10,"button",7)(11,"span"),y._(12,"cancel"),b.qZ()(),b.Tg(13,"button",8)(14,"span"),y._(15,"ok"),b.qZ()()()),2&t&&(w.Q("formGroup",e.form),E.x(10),w.Q("mat-dialog-close",null),E.x(3),w.Q("mat-dialog-close",!0))},dependencies:[o.U,x.Fj,k.JJ,k.JL,j.s,T.u,i.I,_.ZT],encapsulation:2,changeDetection:0})},80671:(t,e,n)=>{n.r(e),n.d(e,{ComponentInputsRelationsEditorMetadata:()=>q});var o=n(27052),i=n(93551),s=n(40876),a=n(85478),l=n(57466),r=n(64297),c=n(72385),d=n(84773),u=n(80827),p=n(41853),h=n(72891),g=n(43870),m=n(6845),f=n(66794),v=n(6427),b=n(73301),y=n(79440),C=n(68961),w=n(4905),E=n(13691),M=n(47098),x=n(82568),k=n(15686),j=n(47826),T=n(12311);function _(t,e,n,o,i,s,a){try{var l=t[s](a),r=l.value}catch(t){return void n(t)}l.done?e(r):Promise.resolve(r).then(o,i)}function F(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function a(t){_(s,o,i,a,l,"next",t)}function l(t){_(s,o,i,a,l,"throw",t)}a(void 0)}))}}function N(t,e){if(1&t){const t=d.E();u.Tg(0,"div",9)(1,"div",10)(2,"div"),p._(3),u.qZ(),u.Tg(4,"button",11),h.N("click",(function(e){const n=g.CH(t).$implicit,o=m.o();return e.preventDefault(),e.stopPropagation(),g.Kt(o.configureEndpoint(n))})),u._U(5,"span",12),u.qZ(),u.Tg(6,"button",13),h.N("click",(function(e){const n=g.CH(t).$implicit,o=m.o();return e.preventDefault(),e.stopPropagation(),g.Kt(o.removeEndpoint(n))})),u._U(7,"span",14),u.qZ()(),u._U(8,"relation-node-output",15),u.qZ()}if(2&t){const t=e.$implicit,n=m.o();f.x(3),v.Oq(t.name),f.x(5),b.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",t.name)("parent",n)}}class O extends i.M{constructor(t,e,n){super(t,e),this.dialog=n}get endpoints(){var t,e;return this.metadata?((t=this.metadata).relationsOptions??(t.relationsOptions={inputs:[]}),(e=this.metadata.relationsOptions).inputs??(e.inputs=[])):[]}addEndpoint(){var t=this;return F((function*(){const e={name:"",defaultValue:null};(yield t.configureEndpoint(e))&&t.endpoints.push(e)}))()}removeEndpoint(t){const e=this.endpoints.indexOf(t);e>=0&&this.endpoints.splice(e,1)}configureEndpoint(t){var e=this;return F((function*(){const n=JSON.parse(JSON.stringify(t)),o=yield(0,r.n)(e.dialog.open(c.b,{title:"configure component input",width:"60vw",data:t}).afterClosed());return o||(0,l.l7)(t,n),o??!1}))()}}O.ɵfac=function(t){return new(t||O)(y.Y(C.s),y.Y(w.SB),y.Y(j.J))},O.ɵcmp=E.Xp({type:O,selectors:[["component-inputs-node"]],standalone:!0,features:[M.q,x.j],decls:9,vars:3,consts:[["name","component inputs",3,"parent","destroySubject"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"outputs"],["class","output",4,"ngFor","ngForOf"],[1,"flex-row","flex-end"],["type","button",1,"btn-icon","margin-right-extra-small",3,"click"],[1,"fas","fa-plus"],[1,"output"],[1,"flex-row"],["type","button",1,"btn-icon","margin-horizontal-extra-small",3,"click"],[1,"fas","fa-cog"],["type","button",1,"btn-icon",3,"click"],[1,"fas","fa-times"],[3,"parentCoordiantes","zoomLevel","name","parent"]],template:function(t,e){1&t&&(u._U(0,"relations-node-header",0),u.Tg(1,"div",1)(2,"div",2),u._U(3,"div",3),u.Tg(4,"div",4),k.Y(5,N,9,5,"div",5),u.Tg(6,"div",6)(7,"button",7),h.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.addEndpoint()})),u._U(8,"span",8),u.qZ()()()()()),2&t&&(b.Q("parent",e)("destroySubject",e.destroySubject),f.x(5),b.Q("ngForOf",e.endpoints))},dependencies:[o.e,T.s,s.e,a.n],encapsulation:2,changeDetection:0});class q{constructor(){this.metaInfo={name:"Component inputs",description:"Definition of relations component inputs",group:"Component"},this.nodeDefinition=O,Object.freeze(this)}}},71309:(t,e,n)=>{n.d(e,{I:()=>x});var o=n(9249),i=n(79440),s=n(13691),a=n(84773),l=n(80827),r=n(72891),c=n(41853),d=n(43870),u=n(11282),p=n(73301),h=n(66794),g=n(31750),m=n(80943),f=n(74445),v=n(49891),b=n(43939),y=n(58654);self.MonacoEnvironment={getWorkerUrl:function(t,e){return"json"===e?"dist/json.worker.js":"css"===e||"scss"===e||"less"===e?"dist/css.worker.js":"html"===e||"handlebars"==e?"dist/html.worker.js":"typescript"===e||"javascript"===e?"dist/ts.worker.js":"dist/editor.worker.js"}};const C={target:y.Mj.typescript.ScriptTarget.ES2020,module:y.Mj.typescript.ModuleKind.CommonJS,moduleResolution:y.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:y.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};y.Mj.typescript.typescriptDefaults.setCompilerOptions(C);var w=n(4905),E=n(36973);class M{constructor(t){this.element=t,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new f.v,this.contentChange=new f.v}ngOnChanges(t){(0,v.$)("languageModel")in t&&this.languageModel&&(0,v.$)("content")in t&&(0,b.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){this.openedFile&&this.codeEditor&&this.languageModel&&this.save.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){this.codeEditor=y.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(y.DC.CtrlCmd|y.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent((()=>{this.openedFile&&this.languageModel&&this.codeEditor&&this.contentChange.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,b.fp)(this.content)&&(this.openedFile=y.j6.createModel(this.content,this.languageModel.language,y.Sf.file(`index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}M.monacoInit=!0,M.ɵfac=function(t){return new(t||M)(i.Y(w.SB))},M.ɵcmp=s.Xp({type:M,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[E.T],decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]\r\n{\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n}"],changeDetection:0});class x{constructor(t,e){this.data=t,this.dialog=e,this.content=null,this.content=t.content}}x.ɵfac=function(t){return new(t||x)(i.Y(o.m),i.Y(g.s))},x.ɵcmp=s.Xp({type:x,selectors:[["code-editor-dialog"]],decls:9,vars:3,consts:[[2,"height","calc(75vh - 32px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"flex-row","flex-end"],["type","button","type","button",1,"btn","btn-info",3,"mat-dialog-close"],["type","button","type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){if(1&t){const t=a.E();l.Tg(0,"code-editor",0,1),r.N("save",(function(t){return e.content=t.content})),l.qZ(),l.Tg(2,"div",2)(3,"button",3)(4,"span"),c._(5,"cancel"),l.qZ()(),l.Tg(6,"button",4),r.N("click",(function(){return d.CH(t),u.M(1).saveContent(),d.Kt(e.dialog.close(e.content))})),l.Tg(7,"span"),c._(8,"ok"),l.qZ()()()}2&t&&(p.Q("content",e.data.content)("languageModel",e.data.languageModel),h.x(3),p.Q("mat-dialog-close",null))},dependencies:[m.ZT,M],encapsulation:2,changeDetection:0})},50073:(t,e,n)=>{n.d(e,{H:()=>o});const o=new(n(53136).y)("json","json",(t=>t.getModel()?.getValue()??""))},53136:(t,e,n)=>{n.d(e,{y:()=>o});class o{constructor(t,e,n){this.language=t,this.extension=e,this.compiledCode=n}}}}]);
//# sourceMappingURL=671.chunk.549ac01fe47e88945bbd.js.map