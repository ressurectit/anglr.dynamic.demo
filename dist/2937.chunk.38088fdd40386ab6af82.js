"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[2937],{2937:(t,e,n)=>{n.r(e),n.d(e,{TriggerRelationsEditorMetadata:()=>F});var o=n(58853),i=n(65206),a=n(34608),s=n(36266),r=n(71386),c=n(13724),l=n(32141),d=n(73943),u=n(12009),p=n(88731),m=n(88809),g=n(13315),f=n(43335),h=n(32603),v=n(67942),y=n(57284),b=n(10065),x=n(13757),C=n(80033),w=n(49276),E=n(25413),M=n(85410),k=n(5327),L=n(78190),q=n(95741),O=n(46430),T=n(46363),j=n(4539);function _(t,e,n,o,i,a,s){try{var r=t[a](s),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,i)}function U(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(t){_(a,o,i,s,r,"next",t)}function r(t){_(a,o,i,s,r,"throw",t)}s(void 0)}))}}function D(t,e){if(1&t){const t=p.E();m.Tg(0,"div",4),m._U(1,"relation-node-input",12),m.Tg(2,"div",7)(3,"div"),g._(4),m.qZ(),m.Tg(5,"button",13),f.N("click",(function(e){const n=h.CH(t).$implicit,o=v.o();return e.preventDefault(),e.stopPropagation(),h.Kt(o.configureEndpoint(n))})),m._U(6,"span",14),m.qZ(),m.Tg(7,"button",15),f.N("click",(function(e){const n=h.CH(t).$implicit,o=v.o();return e.preventDefault(),e.stopPropagation(),h.Kt(o.removeEndpoint(n))})),m._U(8,"span",16),m.qZ()()()}if(2&t){const t=e.$implicit,n=v.o();y.x(1),b.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",t.name)("parent",n),y.x(3),x.Oq(t.name)}}function N(t,e){if(1&t&&(m.Tg(0,"div",17)(1,"div"),g._(2),m.qZ(),m._U(3,"relation-node-output",12),m.qZ()),2&t){const t=e.$implicit,n=v.o();y.x(2),x.Oq(t.name),y.x(1),b.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",t.name)("parent",n)}}class z extends s.M{get endpoints(){var t,e;return this.metadata?((t=this.metadata).relationsOptions??(t.relationsOptions={endpoints:[]}),(e=this.metadata.relationsOptions).endpoints??(e.endpoints=[])):[]}constructor(t,e,n){super(t,e),this.dialog=n}addEndpoint(){var t=this;return U((function*(){const e={name:"",defaultValue:null,skipInit:!0,allowSkipInit:!0};(yield t.configureEndpoint(e))&&(t.endpoints.push(e),t.history.getNewState())}))()}removeEndpoint(t){const e=this.endpoints.indexOf(t);e>=0&&(this.endpoints.splice(e,1),this.history.getNewState())}configureEndpoint(t){var e=this;return U((function*(){const n=JSON.parse(JSON.stringify(t)),o=yield(0,u.n)(e.dialog.open(a.b,{title:"configure endpoint",width:"60vw",data:t}).afterClosed());return o?e.history.getNewState():(0,d.l7)(t,n),o??!1}))()}}z.ɵfac=function(t){return new(t||z)(C.Y(w.s),C.Y(E.SB),C.Y(T.J))},z.ɵcmp=M.Xp({type:z,selectors:[["trigger-node"]],standalone:!0,features:[k.q,L.j],decls:16,vars:13,consts:[[3,"parent","destroySubject","name"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"input"],["name","trigger",3,"parentCoordiantes","zoomLevel","parent"],["class","input",4,"ngFor","ngForOf"],[1,"dynamic-flex-row"],["type","button",1,"dynamic-btn-icon","dynamic-margin-left-extra-small",3,"click"],[1,"fas","fa-plus"],[1,"outputs"],["class","output",4,"ngFor","ngForOf"],[3,"parentCoordiantes","zoomLevel","name","parent"],["type","button",1,"dynamic-btn-icon","dynamic-margin-horizontal-extra-small",3,"click"],[1,"fas","fa-cog"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-times"],[1,"output"]],template:function(t,e){1&t&&(m._U(0,"relations-node-header",0),q.AL(1,"firstUppercaseLocalize"),m.Tg(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),m._U(6,"relation-node-input",5),m.Tg(7,"div"),g._(8),q.AL(9,"firstUppercaseLocalize"),m.qZ()(),O.Y(10,D,9,5,"div",6),m.Tg(11,"div",7)(12,"button",8),f.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.addEndpoint()})),m._U(13,"span",9),m.qZ()()(),m.Tg(14,"div",10),O.Y(15,N,4,5,"div",11),m.qZ()()()),2&t&&(b.Q("parent",e)("destroySubject",e.destroySubject)("name",q.lc(1,9,"trigger")),y.x(6),b.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e),y.x(2),x.Oq(q.lc(9,11,"trigger")),y.x(2),b.Q("ngForOf",e.endpoints),y.x(5),b.Q("ngForOf",e.endpoints))},dependencies:[o.e,j.sg,r.e,c.P,l.n,i.R],encapsulation:2,changeDetection:0});class F{constructor(){this.metaInfo={name:"Trigger",description:"Allows sending data on trigger input",group:"Data"},this.nodeDefinition=z,Object.freeze(this)}}},34608:(t,e,n)=>{n.d(e,{b:()=>A});var o=n(58853),i=n(14829),a=n(96935),s=n(65206),r=n(69363),c=n(30626),l=n(93917),d=n(32954),u=n(68339),p=n(73943),m=n(12009);class g{constructor(t){this.defaultValue=null,this.name="",this.skipInit=!1,p.Rl.bind(this)(t)}}var f=n(88809),h=n(13315),v=n(95741),y=n(57284),b=n(13757),x=n(88731),C=n(43335),w=n(32603),E=n(67942),M=n(80033),k=n(85410),L=n(80354),q=n(78190),O=n(46430),T=n(10065),j=n(46363),_=n(48049),U=n(28007),D=n(48074),N=n(64909),z=n(87905),F=n(45148),I=n(22517);function S(t,e,n,o,i,a,s){try{var r=t[a](s),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,i)}function Z(t,e){1&t&&(f.Tg(0,"div",1)(1,"label",2),f._U(2,"input",9),h._(3),v.AL(4,"firstUppercaseLocalize"),f.qZ()()),2&t&&(y.x(3),b.hi(" ",v.lc(4,1,"skip init")," "))}function P(t,e){if(1&t){const t=x.E();f.Tg(0,"div",10)(1,"button",11),C.N("click",(function(){w.CH(t);const e=E.o();return w.Kt(e.showCodeEditor())})),f.Tg(2,"span"),h._(3),v.AL(4,"firstUppercaseLocalize"),f.qZ()()()}2&t&&(y.x(3),b.Oq(v.lc(4,1,"default value")))}class A{constructor(t,e,n){this.data=t,this.dialog=e,this.form=n.build(new g(t)),this.form.valueChanges.subscribe((e=>(0,p.l7)(t,e)))}showCodeEditor(){var t,e=this;return(t=function*(){const t=(0,p.EN)(e.data.defaultValue)?JSON.stringify(e.data.defaultValue,null,4):"",n=yield(0,m.n)(e.dialog.open(l.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:t,languageModel:d.H}}).afterClosed());(0,p.EN)(n)&&(e.data.defaultValue=(0,u.LK)(n.content))},function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(t){S(a,o,i,s,r,"next",t)}function r(t){S(a,o,i,s,r,"throw",t)}s(void 0)}))})()}}A.ɵfac=function(t){return new(t||A)(M.Y(r.m),M.Y(j.J),M.Y(c.p))},A.ɵcmp=k.Xp({type:A,selectors:[["configure-node-endpoint"]],standalone:!0,features:[L._([c.p]),q.j],decls:17,vars:14,consts:[[3,"formGroup"],[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["type","text","formControlName","name",1,"dynamic-form-control"],["class","dynamic-form-group dynamic-margin-bottom-extra-small",4,"ngIf"],["class","dynamic-flex-column dynamic-margin-bottom-extra-small",4,"ngIf"],[1,"dynamic-flex-row","dynamic-flex-end","dynamic-action-buttons"],["type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"mat-dialog-close"],["type","checkbox","formControlName","skipInit"],[1,"dynamic-flex-column","dynamic-margin-bottom-extra-small"],["type","button",1,"dynamic-btn","dynamic-btn-primary","dynamic-align-self-center",3,"click"]],template:function(t,e){1&t&&(f.Tg(0,"div",0)(1,"div",1)(2,"label",2),h._(3),v.AL(4,"firstUppercaseLocalize"),f.qZ(),f._U(5,"input",3),f.qZ(),O.Y(6,Z,5,3,"div",4)(7,P,5,3,"div",5),f.qZ(),f.Tg(8,"div",6)(9,"button",7)(10,"span"),h._(11),v.AL(12,"firstUppercaseLocalize"),f.qZ()(),f.Tg(13,"button",8)(14,"span"),h._(15),v.AL(16,"firstUppercaseLocalize"),f.qZ()()()),2&t&&(T.Q("formGroup",e.form),y.x(3),b.Oq(v.lc(4,8,"name")),y.x(3),T.Q("ngIf",e.data.allowSkipInit),y.x(1),T.Q("ngIf",!e.data.noDefaultValue),y.x(2),T.Q("mat-dialog-close",null),y.x(2),b.Oq(v.lc(12,10,"cancel")),y.x(2),T.Q("mat-dialog-close",!0),y.x(2),b.Oq(v.lc(16,12,"ok")))},dependencies:[i.U,_.Fj,U.W,D.JJ,D.JL,N.s,z.u,a.I,F.ZT,o.e,I.O,s.R],encapsulation:2,changeDetection:0})},93917:(t,e,n)=>{n.d(e,{I:()=>T});var o=n(69363),i=n(80033),a=n(85410),s=n(88731),r=n(88809),c=n(43335),l=n(13315),d=n(95741),u=n(32603),p=n(26116),m=n(10065),g=n(57284),f=n(13757),h=n(52552),v=n(45148),y=n(52038),b=n(73943),x=n(36893);(0,b.yJ)((t=>{(0,b.fp)(t.ngDynamicMonacoPath)&&(t.ngDynamicMonacoPath="dist")})),self.MonacoEnvironment={getWorkerUrl:function(t,e){return"json"===e?"dist/json.worker.js":"css"===e||"scss"===e||"less"===e?"dist/css.worker.js":"html"===e||"handlebars"==e?"dist/html.worker.js":"typescript"===e||"javascript"===e?"dist/ts.worker.js":"dist/editor.worker.js"}};const C={target:x.Mj.typescript.ScriptTarget.ES2020,module:x.Mj.typescript.ModuleKind.CommonJS,moduleResolution:x.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noEmitOnError:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:x.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};x.Mj.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),x.Mj.typescript.typescriptDefaults.setCompilerOptions(C);var w=n(25413),E=n(56949);function M(t,e,n,o,i,a,s){try{var r=t[a](s),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,i)}function k(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(t){M(a,o,i,s,r,"next",t)}function r(t){M(a,o,i,s,r,"throw",t)}s(void 0)}))}}class L{constructor(t){this.element=t,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new y.v,this.contentChange=new y.v}ngOnChanges(t){(0,b.$0)("languageModel")in t&&this.languageModel&&(0,b.$0)("content")in t&&(0,b.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){var t=this;return k((function*(){t.openedFile&&t.codeEditor&&t.languageModel&&t.save.emit({content:t.openedFile.getValue(),code:yield t.languageModel.compiledCode(t.codeEditor)})}))()}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){var t=this;this.codeEditor=x.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},bracketPairColorization:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(x.DC.CtrlCmd|x.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent(k((function*(){t.openedFile&&t.languageModel&&t.codeEditor&&t.contentChange.emit({content:t.openedFile.getValue(),code:yield t.languageModel.compiledCode(t.codeEditor)})})))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,b.fp)(this.content)&&(this.openedFile=x.j6.createModel((this.content||this.languageModel.initialData)??"",this.languageModel.language,x.Sf.file(`file:///index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}L.monacoInit=!0,L.ɵfac=function(t){return new(t||L)(i.Y(w.SB))},L.ɵcmp=a.Xp({type:L,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[E.T],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0});var q=n(65206);function O(t,e,n,o,i,a,s){try{var r=t[a](s),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,i)}class T{constructor(t,e){this.data=t,this.dialog=e,this.editorContent=null}saveAndClose(t){var e,n=this;return(e=function*(){yield t.saveContent(),n.dialog.close(n.editorContent)},function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(t){O(a,o,i,s,r,"next",t)}function r(t){O(a,o,i,s,r,"throw",t)}s(void 0)}))})()}}T.ɵfac=function(t){return new(t||T)(i.Y(o.m),i.Y(h.s))},T.ɵcmp=a.Xp({type:T,selectors:[["code-editor-dialog"]],decls:11,vars:9,consts:[[2,"height","calc(70vh - 46px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"dynamic-flex-row","dynamic-flex-end","dynamic-action-buttons"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-primary",3,"click"]],template:function(t,e){if(1&t){const t=s.E();r.Tg(0,"code-editor",0,1),c.N("save",(function(t){return e.editorContent=t})),r.qZ(),r.Tg(2,"div",2)(3,"button",3)(4,"span"),l._(5),d.AL(6,"firstUppercaseLocalize"),r.qZ()(),r.Tg(7,"button",4),c.N("click",(function(){u.CH(t);const n=p.M(1);return u.Kt(e.saveAndClose(n))})),r.Tg(8,"span"),l._(9),d.AL(10,"firstUppercaseLocalize"),r.qZ()()()}2&t&&(m.Q("content",e.data.content)("languageModel",e.data.languageModel),g.x(3),m.Q("mat-dialog-close",null),g.x(2),f.Oq(d.lc(6,5,"cancel")),g.x(4),f.Oq(d.lc(10,7,"ok")))},dependencies:[v.ZT,L,q.R],encapsulation:2,changeDetection:0})},32954:(t,e,n)=>{n.d(e,{H:()=>o});const o=new(n(87552).y)("json","json",(t=>t.getModel()?.getValue()??""))},87552:(t,e,n)=>{n.d(e,{y:()=>o});class o{constructor(t,e,n,o){this.language=t,this.extension=e,this.compiledCode=n,this.initialData=o}}}}]);
//# sourceMappingURL=2937.chunk.38088fdd40386ab6af82.js.map