/*! For license information please see 4403.chunk.3aeb44bcae7fbcbbc834.js.LICENSE.txt */
"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[4403],{64403:(t,e,n)=>{n.r(e),n.d(e,{default:()=>pt});var o=n(27052),i=n(989),a=n(46480),r=n(13691),s=n(38327);class l{}l.ɵfac=function(t){return new(t||l)},l.ɵmod=r.oA({type:l}),l.ɵinj=s.cJ({});var d=n(53633),c=n(60405),p=n(43939),h=n(38223),u=n(79440),m=n(4905),g=n(55436);class _{constructor(t){this._element=t,this._initSubscriptions=new h.w}ngOnInit(){this._observer=new ResizeObserver((t=>{for(const e of t)this._updatedDimensions(e.contentRect)})),this._initSubscriptions.add(this._layoutComponentRendererDirective?.componentChange.subscribe((t=>{if(!t)return void this._observer?.disconnect();const e=t.hostView.rootNodes[0];this._updatedDimensions(e.getBoundingClientRect()),this._observer?.observe(e)})))}ngOnDestroy(){this._observer?.disconnect(),this._initSubscriptions.unsubscribe()}_updatedDimensions(t){30!=t.height&&(t.height<=0?this._element.nativeElement.style.minHeight="30px":this._element.nativeElement.style.minHeight=""),30!=t.width&&(t.width<=0?this._element.nativeElement.style.minWidth="30px":this._element.nativeElement.style.minWidth="")}}_.ɵfac=function(t){return new(t||_)(u.Y(m.SB))},_.ɵdir=r.lG({type:_,selectors:[["","designerMinWidth",""]],contentQueries:function(t,e,n){if(1&t&&g.Su(n,c.i,7),2&t){let t;g.iG(t=g.CR())&&(e._layoutComponentRendererDirective=t.first)}},standalone:!0});var y=n(85902);function f(t,e,n,o,i,a,r){try{var s=t[a](r),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(o,i)}class v{constructor(t,e){this._element=t,this._metadataExtractor=e}get metadata(){return this._metadata}set metadata(t){this._metadata=t,this._copyDesignerStyles()}_copyDesignerStyles(){var t,e=this;return(t=function*(){if(!e._metadata)return;const t=(yield e._metadataExtractor.extractMetadata(e._metadata))?.applyDesignerStyles;t&&t(e._metadata.options,e._element.nativeElement.style)},function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function r(t){f(a,o,i,r,s,"next",t)}function s(t){f(a,o,i,r,s,"throw",t)}r(void 0)}))})()}}v.ɵfac=function(t){return new(t||v)(u.Y(m.SB),u.Y(y.T))},v.ɵdir=r.lG({type:v,selectors:[["","copyDesignerStyles",""]],inputs:{metadata:["copyDesignerStyles","metadata"]},exportAs:["copyDesignerStyles"],standalone:!0});var C=n(63152),M=n(53015),b=n(69307),D=n(68961),w=n(82568),x=n(80827),E=n(85320),O=n(66794);class T{constructor(t,e){this._element=t,this._changeDetector=e}ngOnInit(){this._observer=new MutationObserver((()=>this._changeDetector.detectChanges())),this._htmlElement=this.layoutComponentRendererDirective?.componentRef?.hostView?.rootNodes?.[0],this._htmlElement&&this._observer?.observe(this._htmlElement,{attributeFilter:["style"]})}ngOnDestroy(){this._observer?.disconnect()}}T.ɵfac=function(t){return new(t||T)(u.Y(m.SB),u.Y(D.s))},T.ɵcmp=r.Xp({type:T,selectors:[["","layoutDesignerOverlayFor",""]],inputs:{layoutComponentRendererDirective:["layoutDesignerOverlayFor","layoutComponentRendererDirective"]},standalone:!0,features:[w.j],attrs:["layoutDesignerOverlayFor",""],decls:12,vars:24,consts:[[1,"margin-top-div"],[1,"margin-bottom-div"],[1,"margin-left-div"],[1,"margin-right-div"],[1,"padding-top-div"],[1,"padding-bottom-div"],[1,"padding-left-div"],[1,"padding-right-div"],[1,"border-top-div"],[1,"border-bottom-div"],[1,"border-left-div"],[1,"border-right-div"]],template:function(t,e){1&t&&x._U(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),2&t&&(E.Ud("height",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.marginTop),O.x(1),E.Ud("height",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.marginBottom),O.x(1),E.Ud("width",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.marginLeft),O.x(1),E.Ud("width",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.marginRight),O.x(1),E.Ud("height",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.paddingTop),O.x(1),E.Ud("height",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.paddingBottom),O.x(1),E.Ud("width",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.paddingLeft),O.x(1),E.Ud("width",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.paddingRight),O.x(1),E.Ud("height",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.borderTop),O.x(1),E.Ud("height",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.borderBottom),O.x(1),E.Ud("width",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.borderLeft),O.x(1),E.Ud("width",null==e._htmlElement||null==e._htmlElement.style?null:e._htmlElement.style.borderRight))},styles:['[_nghost-%COMP%]\n{\n    display: grid;\n\n    grid-template-columns: auto auto auto 1fr auto auto auto;\n    grid-template-rows: auto auto auto 1fr auto auto auto;\n}\n\n[class^="margin"][_ngcontent-%COMP%]\n{\n    background-color: #d0ff0060;\n}\n\n[class^="padding"][_ngcontent-%COMP%]\n{\n    background-color: #613eff60;\n}\n\n[class^="border"][_ngcontent-%COMP%]\n{\n    background-color: #0011ff62;\n}\n\n.margin-top-div[_ngcontent-%COMP%]\n{\n    grid-row: 1/2;\n    grid-column: 1/8;\n}\n\n.margin-bottom-div[_ngcontent-%COMP%]\n{\n    grid-row: 7/8;\n    grid-column: 1/8;\n}\n\n.margin-left-div[_ngcontent-%COMP%]\n{\n    grid-row: 2/7;\n    grid-column: 1/2;\n}\n\n.margin-right-div[_ngcontent-%COMP%]\n{\n    grid-row: 2/7;\n    grid-column: 7/8;\n}\n\n.padding-top-div[_ngcontent-%COMP%]\n{\n    grid-row: 3/4;\n    grid-column: 3/6;\n}\n\n.padding-bottom-div[_ngcontent-%COMP%]\n{\n    grid-row: 5/6;\n    grid-column: 3/6;\n}\n\n.padding-left-div[_ngcontent-%COMP%]\n{\n    grid-row: 4/5;\n    grid-column: 3/4;\n}\n\n.padding-right-div[_ngcontent-%COMP%]\n{\n    grid-row: 4/5;\n    grid-column: 5/6;\n}\n\n.border-top-div[_ngcontent-%COMP%]\n{\n    grid-row: 2/3;\n    grid-column: 2/7;\n}\n\n.border-bottom-div[_ngcontent-%COMP%]\n{\n    grid-row: 6/7;\n    grid-column: 2/7;\n}\n\n.border-left-div[_ngcontent-%COMP%]\n{\n    grid-row: 3/6;\n    grid-column: 2/3;\n}\n\n.border-right-div[_ngcontent-%COMP%]\n{\n    grid-row: 3/6;\n    grid-column: 6/7;\n}'],changeDetection:0});var P=n(6845),k=n(73301),R=n(84773),L=n(72891),S=n(43870),I=n(41853),Y=n(4477),U=n(15686),z=n(11282),F=n(6427),N=n(95176),j=n(47098),A=n(82973),B=n(94727),Q=n(83434),V=n(21651),Z=n(74445),q=n(49891),G=n(54214),H=n(90675),X=n(36973);function W(t,e,n,o,i,a,r){try{var s=t[a](r),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(o,i)}class ${constructor(t,e){this._target=t,this._position=e,this.flip=new Z.v}get source(){return this._source}set source(t){t instanceof m.SB?this._source=t.nativeElement:this._source=t}get placement(){return this._placement}set placement(t){(0,p.HD)(t)?this._placement=G.X[t]:this._placement=t}ngOnChanges(t){((0,q.$)("source")in t||(0,q.$)("placement")in t)&&(0,p.EN)(this.source)&&this._applyPosition()}_applyPosition(){var t,e=this;return(t=function*(){const t={};e._placement&&(t.placement=e._placement);const n=yield e._position.placeElement(e._target.nativeElement,e._source,t).toPromise();(0,H.e)(n),n.flip&&e.flip.next()},function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function r(t){W(a,o,i,r,s,"next",t)}function s(t){W(a,o,i,r,s,"throw",t)}r(void 0)}))})()}}$.ɵfac=function(t){return new(t||$)(u.Y(m.SB),u.Y(a.Vr))},$.ɵdir=r.lG({type:$,selectors:[["","positionTo",""]],inputs:{source:["positionTo","source"],placement:"placement"},outputs:{flip:"flip"},features:[X.T]});var J=n(99055),K=n(23208),tt=n(10866),et=n(22549);function nt(t,e,n,o,i,a,r){try{var s=t[a](r),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(o,i)}const ot=["layoutDesigner"];function it(t,e){1&t&&x._U(0,"layout-editor-drag-placeholder",7)}function at(t,e){if(1&t&&x._U(0,"layout-editor-drag-preview",8),2&t){const t=P.o();k.Q("editorMetadata",t._editorMetadata)("layoutMetadata",t._renderedType)}}function rt(t,e){}function st(t,e){if(1&t){const t=R.E();x.Tg(0,"div",13),L.N("click",(function(){S.CH(t);const e=P.o(2);return S.Kt(e._remove())})),I._(1,"x"),x.qZ()}}function lt(t,e){if(1&t&&(Y.yn(0),x._U(1,"div",9)(2,"div",10),x.Tg(3,"div",11),I._(4),x.qZ(),U.Y(5,st,2,0,"div",12),Y.BQ()),2&t){const t=P.o(),e=z.M(5),n=z.M(1);let o;O.x(2),k.Q("layoutDesignerOverlayFor",e),O.x(1),k.Q("positionTo",n),O.x(1),F.Oq(null!==(o=null==t._editorMetadata||null==t._editorMetadata.metaInfo?null:t._editorMetadata.metaInfo.name)&&void 0!==o?o:null==t._renderedType?null:t._renderedType.name),O.x(1),k.Q("ngIf",!!t._parent&&(null==t._parent._editorMetadata?null:t._parent._editorMetadata.removeDescendant))}}const dt=function(t,e){return{metadata:t,parentId:e}};class ct extends d.h{constructor(t,e,n,o,i,a,r){super(t,e,n,a),this._metadataExtractor=o,this._layoutEditorMetadataManager=i,this._parent=r,this._initSubscriptions=new h.w,this._canDropValue=!1,this._editorMetadata=null,this._orientation="vertical",this.canDrop=()=>this._canDropValue}get id(){return this._options?.typeMetadata?.id??""}get selected(){return this._layoutEditorMetadataManager.selectedComponent===this._options?.typeMetadata.id}get highlighted(){return this._layoutEditorMetadataManager.highlightedComponent===this._options?.typeMetadata.id}get element(){return this._designerElement}get extensionsOptions(){return this._options?.typeMetadata.options}get dragDisabled(){return!this._parent||!!this._editorMetadata?.metaInfo?.dragDisabled}initialize(t){var e,n=()=>super.initialize,o=this;return(e=function*(){t&&(o._options=t,o._initSubscriptions.add(o._layoutEditorMetadataManager.selectedChange.subscribe((()=>o._changeDetector.detectChanges()))),o._initSubscriptions.add(o._layoutEditorMetadataManager.highlightedChange.subscribe((()=>o._changeDetector.detectChanges()))),o._editorMetadata=yield o._metadataExtractor.extractMetadata(t.typeMetadata),o._canDropValue=o._editorMetadata?.canDropMetadata?.(t.typeMetadata.options)??!1,o._layoutEditorMetadataManager.registerLayoutDesignerComponent(o,t.typeMetadata.id,o._parent?._options?.typeMetadata.id),n().call(o,t))},function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function r(t){nt(a,o,i,r,s,"next",t)}function s(t){nt(a,o,i,r,s,"throw",t)}r(void 0)}))})()}ngOnDestroy(){this._logger?.debug("LayoutDesignerSAComponent: Destroying component {@data}",{id:this._options?.typeMetadata.id}),this._initSubscriptions.unsubscribe(),super.ngOnDestroy(),this._options&&this._layoutEditorMetadataManager.unregisterLayoutDesignerComponent(this._options.typeMetadata.id)}addDescendant(t){if(!this._options)return;const e=t.item.data.parentId;this._logger?.debug("LayoutDesignerSAComponent: Adding descendant {@data}",{id:t.item.data.metadata.id,parent:this._options.typeMetadata.id}),e&&this._layoutEditorMetadataManager.getComponent(e)?._removeDescendant(t.item.data.metadata.id),this._editorMetadata?.addDescendant?.(t.item.data.metadata,this._options.typeMetadata.options,t.currentIndex),this._canDropValue=this._editorMetadata?.canDropMetadata?.(this._options.typeMetadata.options)??!1,this._renderedType={...this._options.typeMetadata},this._changeDetector.markForCheck()}_removeDescendant(t){this._options&&(this._logger?.debug("LayoutDesignerSAComponent: Removing descendant {@data}",{id:this._options.typeMetadata.id,child:t}),this._editorMetadata?.removeDescendant?.(t,this._options.typeMetadata.options),this._canDropValue=this._editorMetadata?.canDropMetadata?.(this._options.typeMetadata.options)??!1,this._renderedType={...this._options.typeMetadata},this._changeDetector.markForCheck())}_showOverlay(t){this._logger?.verbose("LayoutDesignerComponent: Showing overlay for {@type}",{name:this._options?.typeMetadata.name,id:this._options?.typeMetadata.id}),t.preventDefault(),t.stopPropagation(),this._layoutEditorMetadataManager.highlightComponent(this._options?.typeMetadata.id)}_hideOverlay(t){(0,p.EN)(this._parent)||(this._logger?.verbose("LayoutDesignerComponent: Hiding overlay for {@type}",{name:this._options?.typeMetadata.name,id:this._options?.typeMetadata.id}),t.preventDefault(),t.stopPropagation(),this._layoutEditorMetadataManager.cancelHighlightedComponent())}_selectComponent(t){t.preventDefault(),t.stopPropagation(),this._options&&this._layoutEditorMetadataManager.selectComponent(this._options.typeMetadata.id)}_unselectComponent(t){t.preventDefault(),t.stopPropagation(),this._layoutEditorMetadataManager.unselectComponent()}_remove(){this._parent&&this._options&&this._parent._removeDescendant(this._options.typeMetadata.id)}_optionsSet(){this._options&&(this._renderedType={...this._options.typeMetadata},this._orientation=this._editorMetadata?.isHorizontalDrop?.(this._options.typeMetadata.options)?"horizontal":"vertical")}}ct.ɵfac=function(t){return new(t||ct)(u.Y(D.s),u.Y(m.SB),u.Y(N.z),u.Y(y.T),u.Y(Q.t),u.Y(a.bZ,8),u.Y(ct,12))},ct.ɵcmp=r.Xp({type:ct,selectors:[["layout-designer-component"]],viewQuery:function(t,e){if(1&t&&g.Gf(ot,7),2&t){let t;g.iG(t=g.CR())&&(e._designerElement=t.first)}},standalone:!0,features:[j.q,w.j],decls:7,vars:12,consts:[["cdkDrag","","cdkDropList","","designerMinWidth","","connectDropLists","",1,"designer-overlay",3,"id","copyDesignerStyles","cdkDragData","cdkDragDisabled","cdkDropListEnterPredicate","cdkDropListOrientation","mouseleave","mouseover","cdkDropListDropped","click","dblclick"],["layoutDesigner",""],["class","mat-elevation-z6",4,"cdkDragPlaceholder"],["class","mat-elevation-z4",3,"editorMetadata","layoutMetadata",4,"cdkDragPreview"],[3,"layoutComponentRenderer","layoutComponentRendererDisableTransformer"],["renderer","layoutComponentRenderer"],[4,"ngIf"],[1,"mat-elevation-z6"],[1,"mat-elevation-z4",3,"editorMetadata","layoutMetadata"],[1,"designer-overlay-border"],[1,"designer-overlay-layout",3,"layoutDesignerOverlayFor"],["placement","TopStart",1,"designer-overlay-title",3,"positionTo"],["class","designer-overlay-remove",3,"click",4,"ngIf"],[1,"designer-overlay-remove",3,"click"]],template:function(t,e){1&t&&(x.Tg(0,"div",0,1),L.N("mouseleave",(function(t){return e._hideOverlay(t)}))("mouseover",(function(t){return e._showOverlay(t)}))("cdkDropListDropped",(function(t){return e.addDescendant(t)}))("click",(function(t){return e._selectComponent(t)}))("dblclick",(function(t){return e._unselectComponent(t)})),U.Y(2,it,1,0,"layout-editor-drag-placeholder",2),U.Y(3,at,1,2,"layout-editor-drag-preview",3),U.Y(4,rt,0,0,"ng-template",4,5,A.W),U.Y(6,lt,6,4,"ng-container",6),x.qZ()),2&t&&(k.Q("id",e.id)("copyDesignerStyles",e._renderedType)("cdkDragData",B.WL(9,dt,e._renderedType,null==e._parent||null==e._parent._renderedType?null:e._parent._renderedType.id))("cdkDragDisabled",e.dragDisabled)("cdkDropListEnterPredicate",e.canDrop)("cdkDropListOrientation",e._orientation),O.x(4),k.Q("layoutComponentRenderer",e._renderedType)("layoutComponentRendererDisableTransformer",!0),O.x(2),k.Q("ngIf",e.highlighted||e.selected))},dependencies:[o.e,V.O,l,$,i._,J.W,K.Z,tt.p,et.H,M.s,b.a,T,_,v,C.z,c.i],styles:["[_nghost-%COMP%]\n{\n    display: contents;\n}\n\n.designer-overlay[_ngcontent-%COMP%]\n{\n    position: relative;\n}\n\n.designer-overlay-layout[_ngcontent-%COMP%], .designer-overlay-border[_ngcontent-%COMP%]\n{\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n}\n\n.designer-overlay-border[_ngcontent-%COMP%]\n{\n    border: 1px solid #009dd8;\n}\n\n.designer-overlay-title[_ngcontent-%COMP%]\n{\n    position: absolute;\n    background-color: #009dd8;\n    color: white;\n    font-weight: 500;\n    z-index: 500;\n    padding: 2px 6px;\n    pointer-events: none;\n}\n\n.designer-overlay-remove[_ngcontent-%COMP%]\n{\n    position: absolute;\n    right: -6px;\n    top: -6px;\n    border-radius: 50%;\n    background-color: #009dd8;\n    padding: 2px 7px;\n    opacity: .75;\n    color: #fff;\n    cursor: pointer;\n}"],changeDetection:0});const pt=ct},69307:(t,e,n)=>{n.d(e,{a:()=>a});var o=n(13691),i=n(82568);class a{}a.ɵfac=function(t){return new(t||a)},a.ɵcmp=o.Xp({type:a,selectors:[["layout-editor-drag-placeholder"]],standalone:!0,features:[i.j],decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]\n{\n    display: block;\n    background: #0096cca2;\n    min-height: 10px;\n    width: 85%;\n    margin-left: auto;\n    margin-right: auto;\n    border-radius: 4px;\n    transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n}"],changeDetection:0})},53015:(t,e,n)=>{n.d(e,{s:()=>d});var o=n(13691),i=n(82568),a=n(80827),r=n(41853),s=n(66794),l=n(6427);class d{}d.ɵfac=function(t){return new(t||d)},d.ɵcmp=o.Xp({type:d,selectors:[["layout-editor-drag-preview"]],inputs:{editorMetadata:"editorMetadata",layoutMetadata:"layoutMetadata"},standalone:!0,features:[i.j],decls:4,vars:2,consts:[[1,"semi-bold"],[1,"margin-left-extra-small","small-text"]],template:function(t,e){if(1&t&&(a.Tg(0,"span",0),r._(1),a.qZ(),a.Tg(2,"span",1),r._(3),a.qZ()),2&t){let t;s.x(1),l.Oq(null!==(t=null==e.editorMetadata||null==e.editorMetadata.metaInfo?null:e.editorMetadata.metaInfo.name)&&void 0!==t?t:null==e.layoutMetadata?null:e.layoutMetadata.name),s.x(2),l.hi("#",(null==e.layoutMetadata?null:e.layoutMetadata.displayName)||(null==e.layoutMetadata?null:e.layoutMetadata.id),"")}},styles:["[_nghost-%COMP%]\n{\n    display: block;\n    background-color: #eee;\n    border-radius: 6px;\n    padding: 3px 8px;\n}"],changeDetection:0})},63152:(t,e,n)=>{n.d(e,{z:()=>d});var o=n(38223),i=n(22294),a=n(79440),r=n(13691),s=n(99055),l=n(83434);class d{constructor(t,e){this._cdkDropList=t,this._manager=e,this._initSubscriptions=new o.w,this._connectDropListsPrefix=""}set connectDropListsPrefix(t){this._connectDropListsPrefix=t,this._setConnectedTo()}get connectDropListsPrefix(){return this._connectDropListsPrefix??""}ngOnInit(){this._initSubscriptions.add(this._manager.layoutChange.pipe((0,i.b)(12)).subscribe((()=>this._setConnectedTo()))),this._setConnectedTo()}ngOnDestroy(){this._initSubscriptions.unsubscribe()}_setConnectedTo(){const t=this._manager.flatTree.filter((t=>t.component.canDrop())).map((t=>this.connectDropListsPrefix+t.component.id)).reverse().filter((t=>t!=this._cdkDropList.id));this._cdkDropList.connectedTo=t}}d.ɵfac=function(t){return new(t||d)(a.Y(s.W),a.Y(l.t))},d.ɵdir=r.lG({type:d,selectors:[["","cdkDropList","","connectDropLists",""]],inputs:{connectDropListsPrefix:"connectDropListsPrefix"},exportAs:["connectDropLists"],standalone:!0})},83434:(t,e,n)=>{n.d(e,{t:()=>l});var o=n(46480),i=n(43939),a=n(53682),r=n(11776),s=n(38327);class l{constructor(t){this._logger=t,this._components={},this._rootComponentId=null,this._selectedComponent=null,this._highlightedComponent=null,this._layoutChange=new a.xQ,this._selectedChange=new a.xQ,this._highlightedChange=new a.xQ,this._displayNameChanges=new a.xQ,this._flatTree=null}get selectedComponent(){return this._selectedComponent}get highlightedComponent(){return this._highlightedComponent}get root(){return(0,i.fp)(this._rootComponentId)?null:this._components[this._rootComponentId]}get layoutChange(){return this._layoutChange.asObservable()}get selectedChange(){return this._selectedChange.asObservable()}get highlightedChange(){return this._highlightedChange.asObservable()}get displayNameChange(){return this._displayNameChanges.asObservable()}get flatTree(){return this._flatTree??(this._flatTree=this._buildFlatTree())}selectComponent(t){this._selectedComponent=t??null,this._selectedChange.next()}unselectComponent(){this._selectedComponent=null,this._selectedChange.next()}highlightComponent(t){this._highlightedComponent=t??null,this._highlightedChange.next()}cancelHighlightedComponent(){this._highlightedComponent=null,this._highlightedChange.next()}registerLayoutDesignerComponent(t,e,n){if((0,i.fp)(n)&&(this._rootComponentId=e),this._components[e])return this._logger?.error(`LayoutEditorMetadataManager: Component with id ${e} is already registered!`),!1;const o=n?this._components[n]:null,a={component:t,parent:o,children:[]};return this._components[e]=a,o&&o.children.splice(o.children.length,0,a),this._flatTree=null,this._layoutChange.next(),this._logger?.debug("LayoutEditorMetadataManager: Registering component {@id}",e),!0}getComponent(t){return this._components[t]?.component??null}getParent(t){return this._components[t]?.parent?.component??null}unregisterLayoutDesignerComponent(t){const e=this._components[t];if(delete this._components[t],e?.parent){const t=e.parent.children.indexOf(e);e.parent.children.splice(t,1)}t===this._rootComponentId&&(this._rootComponentId=null),this._flatTree=null,this._layoutChange.next(),this._logger?.debug("LayoutEditorMetadataManager: Unregistering component {@id}",t)}displayNameUpdated(){this._displayNameChanges.next()}getMetadata(){return(0,i.fp)(this._rootComponentId)||!this._components[this._rootComponentId]?null:this._components[this._rootComponentId].component.options?.typeMetadata??null}_buildFlatTree(){if((0,i.fp)(this._rootComponentId))return[];const t=this._components[this._rootComponentId];return t?this._buildFlatTreeForComponent(t):[]}_buildFlatTreeForComponent(t){let e=[t];for(const n of t.children)e=e.concat(this._buildFlatTreeForComponent(n));return e}}l.ɵfac=function(t){return new(t||l)(r.LF(o.bZ,8))},l.ɵprov=s.Yz({token:l,factory:l.ɵfac})},53633:(t,e,n)=>{n.d(e,{h:()=>c});var o=n(46480),i=n(79440),a=n(68961),r=n(4905),s=n(95176),l=n(13691);function d(t,e,n,o,i,a,r){try{var s=t[a](r),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(o,i)}class c{constructor(t,e,n,o){this._changeDetector=t,this._element=e,this._injector=n,this._logger=o,this._extensions=[]}get element(){return this._element}get extensionsOptions(){return this._options}get options(){return this._options}set options(t){this._options=t,this._optionsSet();const e=this.extensionsOptions;if(e)for(const t of this._extensions)t.optionsChange(e)}ngOnDestroy(){for(const t of this._extensions)t.destroy()}initialize(t){var e,n=this;return(e=function*(){if(!t)return;n.options=t;const e=n.extensionsOptions;if(e)for(const t of n._extensions)t.initialize(n._injector,n.element,e)},function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function r(t){d(a,o,i,r,s,"next",t)}function s(t){d(a,o,i,r,s,"throw",t)}r(void 0)}))})()}registerExtensions(t){this._extensions=t}invalidateVisuals(){this._changeDetector.detectChanges()}_optionsSet(){}}c.ɵfac=function(t){return new(t||c)(i.Y(a.s),i.Y(r.SB),i.Y(s.z),i.Y(o.bZ,8))},c.ɵdir=l.lG({type:c})},60405:(t,e,n)=>{n.d(e,{i:()=>b});var o,i=n(74445),a=n(95176),r=n(46480),s=n(49891),l=n(87606),d=n(43939);!function(t){t[t.ShowNotFound=0]="ShowNotFound",t[t.Ignore=1]="Ignore",t[t.ThrowError=2]="ThrowError"}(o||(o={}));class c{constructor(t){this.missingTypeBehavior=o.ShowNotFound,(0,d.EN)(t)&&(this.missingTypeBehavior=t)}}var p=n(13691),h=n(82568),u=n(80827),m=n(41853);class g{}g.ɵfac=function(t){return new(t||g)},g.ɵcmp=p.Xp({type:g,selectors:[["not-found-layout-type"]],standalone:!0,features:[h.j],decls:5,vars:0,consts:[[1,"fas","fa-minus-circle"]],template:function(t,e){1&t&&(u.Tg(0,"div"),u._U(1,"span",0),u.Tg(2,"span"),m._(3,"NOT FOUND"),u.qZ(),u._U(4,"span",0),u.qZ())},styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0});var _=n(8477),y=n(79440),f=n(15783),v=n(73379),C=n(36973);function M(t,e,n,o,i,a,r){try{var s=t[a](r),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(o,i)}class b{constructor(t,e,n,o,a,r){this._viewContainerRef=t,this._loader=e,this._childExtensions=n,this._options=o,this._metadataTransformer=a,this._logger=r,this._componentRef=null,this.componentMetadata=null,this.disableTransformer=!1,this.componentChange=new i.v,this._options&&this._options instanceof c||(this._options=new c)}get component(){return this._componentRef?this._componentRef.instance:null}get componentRef(){return this._componentRef}ngOnChanges(t){var e,n=this;return(e=function*(){if(n._logger?.debug("LayoutComponentRendererSADirective: rendering component {@id}",{id:n.componentMetadata?.id}),n.ngOnDestroy(),n._viewContainerRef.clear(),(0,s.$)("componentMetadata")in t&&n.componentMetadata){const t=n.customInjector||n._viewContainerRef.injector;let e=n.componentMetadata;n._metadataTransformer&&!n.disableTransformer&&(e=n._metadataTransformer(n.componentMetadata,t));const i=yield n._loader.loadItem(e);if(!i){switch(n._logger?.warn("LayoutComponentRendererSADirective: Unable to find layout component type {@type}",{name:e.name,package:e.package}),n._options?.missingTypeBehavior){default:n._viewContainerRef.createComponent(g);break;case o.Ignore:break;case o.ThrowError:throw new Error(`LayoutComponentRendererSADirective: Unable to find layout component type Name: ${e.name} Package: ${e.package}`)}return}const r=a.z.create({parent:t,providers:[{provide:_.X5,useValue:i.childExtensions}]});n._componentRef=n._viewContainerRef.createComponent(i.data,{injector:r}),n._logger?.debug("LayoutComponentRendererSADirective: component rendered {@id}",{id:e?.id}),n.componentChange.next(n._componentRef),n.component&&(n.component.registerExtensions([...n._childExtensions?.map((t=>new t))??[],...i?.extensions?.map((t=>new t))??[]]),n._logger?.debug("LayoutComponentRendererSADirective: initializing component with options {@id}",{id:e?.id}),yield(0,l.K)(n.component.initialize?.(e.options)),n._logger?.debug("LayoutComponentRendererSADirective: invalidating component visuals {@id}",{id:e?.id}),n.component?.invalidateVisuals())}},function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function r(t){M(a,o,i,r,s,"next",t)}function s(t){M(a,o,i,r,s,"throw",t)}r(void 0)}))})()}ngOnDestroy(){this._componentRef&&(this._logger?.debug("LayoutComponentRendererSADirective: destroying component {@id}",{id:this.componentMetadata?.id,designer:this.disableTransformer}),this._componentRef?.destroy(),this._componentRef=null,this.componentChange.next(null))}}b.ɵfac=function(t){return new(t||b)(y.Y(f.s_),y.Y(_.Vl),y.Y(_.X5,12),y.Y(c,8),y.Y(_.xM,8),y.Y(r.bZ,8))},b.ɵdir=p.lG({type:b,selectors:[["","layoutComponentRenderer",""]],inputs:{componentMetadata:["layoutComponentRenderer","componentMetadata"],customInjector:["layoutComponentRendererInjector","customInjector"],disableTransformer:["layoutComponentRendererDisableTransformer","disableTransformer"]},outputs:{componentChange:"layoutComponentRendererComponentChange"},exportAs:["layoutComponentRenderer"],standalone:!0,features:[v._([{provide:_.X5,useValue:null}]),C.T]})},90675:(t,e,n)=>{function o(t){Object.assign(t.target.style,{top:"0",left:"0",transform:`translate(${t.x}px, ${t.y}px)`})}n.d(e,{e:()=>o})},989:(t,e,n)=>{n.d(e,{_:()=>s});var o=n(65252),i=n(19878),a=n(13691),r=n(38327);class s{}s.ɵfac=function(t){return new(t||s)},s.ɵmod=a.oA({type:s}),s.ɵinj=r.cJ({providers:[i.v],imports:[o.Z]})}}]);
//# sourceMappingURL=4403.chunk.3aeb44bcae7fbcbbc834.js.map