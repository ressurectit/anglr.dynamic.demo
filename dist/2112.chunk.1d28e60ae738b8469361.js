"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[2112],{62112:(e,t,n)=>{n.r(t),n.d(t,{DataBlockLayoutEditorMetadata:()=>r});var o=n(28438),i=n(69784),a=n(57466);class s{constructor(e){this.template="",a.Rl.bind(this)(e)}}class r{constructor(){this.metaInfo={name:"Data block",description:"Data block - allows displaying data in template",group:"Data",optionsMetadata:{propertiesMetadata:[{modelType:s,propertiesControls:[(0,o.R)("template",i.d)]}]}},Object.freeze(this)}}},68490:(e,t,n)=>{n.d(t,{M:()=>T});var o=n(30621),i=n(13691),a=n(38327);class s{}s.ɵfac=function(e){return new(e||s)},s.ɵmod=i.oA({type:s}),s.ɵinj=a.cJ({});var r=n(9249),c=n(79440),l=n(82568),d=n(84773),u=n(80827),p=n(72891),h=n(41853),g=n(43870),m=n(11282),f=n(73301),v=n(66794),y=n(31750),M=n(80943),w=n(74445),E=n(49891),C=n(43939),b=n(58654);self.MonacoEnvironment={getWorkerUrl:function(e,t){return"json"===t?"dist/json.worker.js":"css"===t||"scss"===t||"less"===t?"dist/css.worker.js":"html"===t||"handlebars"==t?"dist/html.worker.js":"typescript"===t||"javascript"===t?"dist/ts.worker.js":"dist/editor.worker.js"}};const k={target:b.Mj.typescript.ScriptTarget.ES2020,module:b.Mj.typescript.ModuleKind.CommonJS,moduleResolution:b.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:b.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};b.Mj.typescript.typescriptDefaults.setCompilerOptions(k);var _=n(4905),x=n(36973);class j{constructor(e){this.element=e,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new w.v,this.contentChange=new w.v}ngOnChanges(e){(0,E.$)("languageModel")in e&&this.languageModel&&(0,E.$)("content")in e&&(0,C.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){this.openedFile&&this.codeEditor&&this.languageModel&&this.save.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){this.codeEditor=b.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(b.DC.CtrlCmd|b.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent((()=>{this.openedFile&&this.languageModel&&this.codeEditor&&this.contentChange.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,C.fp)(this.content)&&(this.openedFile=b.j6.createModel(this.content,this.languageModel.language,b.Sf.file(`index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}j.monacoInit=!0,j.ɵfac=function(e){return new(e||j)(c.Y(_.SB))},j.ɵcmp=i.Xp({type:j,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[x.T],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]\r\n{\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n}"],changeDetection:0});class T{constructor(e,t){this.data=e,this.dialog=t,this.content=null,this.content=e.content}}T.ɵfac=function(e){return new(e||T)(c.Y(r.m),c.Y(y.s))},T.ɵcmp=i.Xp({type:T,selectors:[["code-editor-dialog"]],standalone:!0,features:[l.j],decls:9,vars:3,consts:[[2,"height","calc(75vh - 32px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"flex-row","flex-end"],["type","button",1,"btn","btn-info",3,"mat-dialog-close"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){if(1&e){const e=d.E();u.Tg(0,"code-editor",0,1),p.N("save",(function(e){return t.content=e.content})),u.qZ(),u.Tg(2,"div",2)(3,"button",3)(4,"span"),h._(5,"cancel"),u.qZ()(),u.Tg(6,"button",4),p.N("click",(function(){return g.CH(e),m.M(1).saveContent(),g.Kt(t.dialog.close(t.content))})),u.Tg(7,"span"),h._(8,"ok"),u.qZ()()()}2&e&&(f.Q("content",t.data.content)("languageModel",t.data.languageModel),v.x(3),f.Q("mat-dialog-close",null))},dependencies:[s,j,o.I,M.ZT],encapsulation:2,changeDetection:0})},28438:(e,t,n)=>{n.d(t,{R:()=>b});var o=n(70625),i=n(43939),a=n(87316),s=n(68490),r=n(79440),c=n(68961),l=n(13691),d=n(47098),u=n(82568),p=n(80827),h=n(72891),g=n(41853),m=n(66794),f=n(6427),v=n(43801),y=n(85902),M=n(47826);function w(e,t,n,o,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}const E="[_nghost-%COMP%]\n{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}";class C extends a.k{constructor(e,t,n){super(e,t),this.dialog=n}showCodeEditor(){var e,t=this;return(e=function*(){if((0,i.fp)(t.property)||!t.languageModel)return;const e=yield t.dialog.open(s.M,{title:"Code editor",width:"75vw",height:"75vh",data:{content:t.form?.get(t.property)?.value??"",languageModel:t.languageModel}}).afterClosed().toPromise();if((0,i.EN)(e)){const n=t.form?.get(t.property);n instanceof o.NI&&n.setValue(e)}},function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){w(a,o,i,s,r,"next",e)}function r(e){w(a,o,i,s,r,"throw",e)}s(void 0)}))})()}}function b(e,t){class n extends C{constructor(){super(...arguments),this.property=e,this.languageModel=t}}return n.ɵfac=function(){let e;return function(t){return(e||(e=v.n5(n)))(t||n)}}(),n.ɵcmp=l.Xp({type:n,selectors:[["code-properties-control"]],inputs:{property:"property",languageModel:"languageModel"},standalone:!0,features:[d.q,u.j],decls:3,vars:1,consts:[["type","button",1,"btn","btn-primary","margin-vertical-small",3,"click"]],template:function(e,t){1&e&&(p.Tg(0,"button",0),h.N("click",(function(){return t.showCodeEditor()})),p.Tg(1,"span"),g._(2),p.qZ()()),2&e&&(m.x(2),f.hi("Edit ",t.property,""))},styles:[E],changeDetection:0}),n}C.ɵfac=function(e){return new(e||C)(r.Y(c.s),r.Y(y.T),r.Y(M.J))},C.ɵcmp=l.Xp({type:C,selectors:[["base-code-properties-control"]],inputs:{property:"property",languageModel:"languageModel"},standalone:!0,features:[d.q,u.j],decls:3,vars:1,consts:[["type","button",1,"btn","btn-primary","margin-vertical-small",3,"click"]],template:function(e,t){1&e&&(p.Tg(0,"button",0),h.N("click",(function(){return t.showCodeEditor()})),p.Tg(1,"span"),g._(2),p.qZ()()),2&e&&(m.x(2),f.hi("Edit ",t.property,""))},styles:[E],changeDetection:0})},87316:(e,t,n)=>{n.d(t,{k:()=>d});var o=n(87606),i=n(79440),a=n(68961),s=n(13691),r=n(85902);function c(e,t,n,o,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){c(a,o,i,s,r,"next",e)}function r(e){c(a,o,i,s,r,"throw",e)}s(void 0)}))}}class d{constructor(e,t){this._changeDetector=e,this._extractor=t,this._initialized=!1,this.propertiesMetadata=null}ngOnInit(){var e=this;return l((function*(){e._initialized||(e._initialized=!0,yield(0,o.K)(e._initialize()))}))()}initialize(){var e=this;return l((function*(){yield(0,o.K)(e.ngOnInit())}))()}invalidateVisuals(){this._changeDetector.detectChanges()}_initialize(){}}d.ɵfac=function(e){return new(e||d)(i.Y(a.s),i.Y(r.T))},d.ɵdir=s.lG({type:d,inputs:{form:"form",propertiesMetadata:"propertiesMetadata"}})},85902:(e,t,n)=>{n.d(t,{T:()=>c});var o=n(8477),i=n(46480),a=n(11776),s=n(38327);function r(e,t,n,o,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}class c{constructor(e,t){this._loader=e,this._logger=t,this._cache={}}extractMetadata(e){var t,n=this;return(t=function*(){const t=`${e.package}-${e.name}`;if(n._cache[t])return n._cache[t];const o=yield n._loader.loadItem(e);if(!o)return null;const i=o.data;if(!i.layoutEditorMetadata)return n._logger?.warn("LayoutEditorMetadataExtractor: Missing metadata! ",{package:e.package,name:e.name}),null;n._logger?.debug("LayoutEditorMetadataExtractor: Reading metadata! ",{package:e.package,name:e.name});const a=yield i.layoutEditorMetadata;return Object.freeze(a),n._cache[t]=a,a},function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))})()}}c.ɵfac=function(e){return new(e||c)(a.LF(o.Vl),a.LF(i.bZ,8))},c.ɵprov=s.Yz({token:c,factory:c.ɵfac})},69784:(e,t,n)=>{n.d(t,{d:()=>o});const o=new(n(53136).y)("handlebars","hbs",(e=>e.getModel()?.getValue()??""))},53136:(e,t,n)=>{n.d(t,{y:()=>o});class o{constructor(e,t,n){this.language=e,this.extension=t,this.compiledCode=n}}}}]);
//# sourceMappingURL=2112.chunk.1d28e60ae738b8469361.js.map