"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[1001],{40857:(t,e,n)=>{n.r(e),n.d(e,{ValueRelationsEditorMetadata:()=>b});var o=n(71309),s=n(50073),a=n(14389),i=n(93551),r=n(40876),c=n(85478),l=n(43939),d=n(64297),u=n(79440),h=n(68961),p=n(4905),g=n(13691),f=n(47098),v=n(82568),m=n(80827),E=n(41853),y=n(72891),O=n(73301),w=n(66794),_=n(47826);function C(t,e,n,o,s,a,i){try{var r=t[a](i),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,s)}class M extends i.M{constructor(t,e,n){super(t,e),this.dialog=n}showCodeEditor(){var t,e=this;return(t=function*(){const t=(0,l.EN)(e.metadata?.relationsOptions?.value)?JSON.stringify(e.metadata?.relationsOptions?.value,null,4):"",n=yield(0,d.n)(e.dialog.open(o.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:t,languageModel:s.H}}).afterClosed());e.metadata?.relationsOptions&&(0,l.EN)(n)&&(e.metadata.relationsOptions.value=(0,a.LK)(n))},function(){var e=this,n=arguments;return new Promise((function(o,s){var a=t.apply(e,n);function i(t){C(a,o,s,i,r,"next",t)}function r(t){C(a,o,s,i,r,"throw",t)}i(void 0)}))})()}}M.ɵfac=function(t){return new(t||M)(u.Y(h.s),u.Y(p.SB),u.Y(_.J))},M.ɵcmp=g.Xp({type:M,selectors:[["value-node"]],standalone:!0,features:[f.q,v.j],decls:12,vars:5,consts:[["name","value",3,"parent","destroySubject"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"outputs"],[1,"output"],["name","value",3,"parentCoordiantes","zoomLevel","parent"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(m._U(0,"relations-node-header",0),m.Tg(1,"div",1)(2,"div",2),m._U(3,"div",3),m.Tg(4,"div",4)(5,"div",5)(6,"div"),E._(7,"value"),m.qZ(),m._U(8,"relation-node-output",6),m.qZ()()(),m.Tg(9,"button",7),y.N("click",(function(){return e.showCodeEditor()})),m.Tg(10,"span"),E._(11,"edit"),m.qZ()()()),2&t&&(O.Q("parent",e)("destroySubject",e.destroySubject),w.x(8),O.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e))},dependencies:[r.e,c.n],encapsulation:2,changeDetection:0});class b{constructor(){this.metaInfo={name:"Value",description:"Initial, default value",group:"Data"},this.nodeDefinition=M,Object.freeze(this)}}},91861:(t,e,n)=>{n.d(e,{Bj:()=>i,DZ:()=>s,GP:()=>a,dK:()=>d,fI:()=>l,n7:()=>c,nR:()=>u,yh:()=>r});var o=n(40296);const s=new o.O("RELATIONS_MODULE_TYPES_DATA_EXTRACTORS"),a=new o.O("RELATIONS_MODULE_TYPES_PROVIDERS"),i=new o.O("RELATIONS_MODULE_TYPES_LOADER"),r=new o.O("RELATIONS_NODES_DATA_EXTRACTORS"),c=new o.O("RELATIONS_NODES_PROVIDERS"),l=new o.O("RELATIONS_NODES_LOADER"),d=new o.O("REFRESH_PALETTE_OBSERVABLES"),u=new o.O("RELATIONS_HISTORY_MANAGER")},44677:(t,e,n)=>{n.d(e,{L:()=>s});var o=n(43939);const s=(t,e)=>{const n=t;return e?.debug("defaultExportExtractor: trying to extract default dynamic data"),(0,o.EN)(n.default)?{data:n.default}:null}},14389:(t,e,n)=>{n.d(e,{LK:()=>r,XW:()=>i,mv:()=>a});var o=n(97825),s=n(13457);function a(t,e,n,o,s=!1){t[e]={currentValue:n,previousValue:o,firstChange:s,isFirstChange:()=>s}}function i(t){return{provide:s.BG,useValue:{packages:[t],packagesChange:o.C,refresh(){}},multi:!0}}function r(t){try{return JSON.parse(t)}catch{return null}}},71309:(t,e,n)=>{n.d(e,{I:()=>M});var o=n(9249),s=n(79440),a=n(13691),i=n(84773),r=n(80827),c=n(72891),l=n(41853),d=n(43870),u=n(11282),h=n(73301),p=n(66794),g=n(31750),f=n(80943),v=n(74445),m=n(49891),E=n(43939),y=n(58654);self.MonacoEnvironment={getWorkerUrl:function(t,e){return"json"===e?"dist/json.worker.js":"css"===e||"scss"===e||"less"===e?"dist/css.worker.js":"html"===e||"handlebars"==e?"dist/html.worker.js":"typescript"===e||"javascript"===e?"dist/ts.worker.js":"dist/editor.worker.js"}};const O={target:y.Mj.typescript.ScriptTarget.ES2020,module:y.Mj.typescript.ModuleKind.CommonJS,moduleResolution:y.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:y.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};y.Mj.typescript.typescriptDefaults.setCompilerOptions(O);var w=n(4905),_=n(36973);class C{constructor(t){this.element=t,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new v.v,this.contentChange=new v.v}ngOnChanges(t){(0,m.$)("languageModel")in t&&this.languageModel&&(0,m.$)("content")in t&&(0,E.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){this.openedFile&&this.codeEditor&&this.languageModel&&this.save.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){this.codeEditor=y.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(y.DC.CtrlCmd|y.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent((()=>{this.openedFile&&this.languageModel&&this.codeEditor&&this.contentChange.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,E.fp)(this.content)&&(this.openedFile=y.j6.createModel(this.content,this.languageModel.language,y.Sf.file(`index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}C.monacoInit=!0,C.ɵfac=function(t){return new(t||C)(s.Y(w.SB))},C.ɵcmp=a.Xp({type:C,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[_.T],decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]\r\n{\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n}"],changeDetection:0});class M{constructor(t,e){this.data=t,this.dialog=e,this.content=null,this.content=t.content}}M.ɵfac=function(t){return new(t||M)(s.Y(o.m),s.Y(g.s))},M.ɵcmp=a.Xp({type:M,selectors:[["code-editor-dialog"]],decls:9,vars:3,consts:[[2,"height","calc(75vh - 32px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"flex-row","flex-end"],["type","button","type","button",1,"btn","btn-info",3,"mat-dialog-close"],["type","button","type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){if(1&t){const t=i.E();r.Tg(0,"code-editor",0,1),c.N("save",(function(t){return e.content=t.content})),r.qZ(),r.Tg(2,"div",2)(3,"button",3)(4,"span"),l._(5,"cancel"),r.qZ()(),r.Tg(6,"button",4),c.N("click",(function(){return d.CH(t),u.M(1).saveContent(),d.Kt(e.dialog.close(e.content))})),r.Tg(7,"span"),l._(8,"ok"),r.qZ()()()}2&t&&(h.Q("content",e.data.content)("languageModel",e.data.languageModel),p.x(3),h.Q("mat-dialog-close",null))},dependencies:[f.ZT,C],encapsulation:2,changeDetection:0})},50073:(t,e,n)=>{n.d(e,{H:()=>o});const o=new(n(53136).y)("json","json",(t=>t.getModel()?.getValue()??""))},53136:(t,e,n)=>{n.d(e,{y:()=>o});class o{constructor(t,e,n){this.language=t,this.extension=e,this.compiledCode=n}}},97825:(t,e,n)=>{n.d(e,{C:()=>a});var o=n(28653),s=n(58656);const a=new o.y(s.Z)},92640:(t,e,n)=>{n.d(e,{x:()=>s});var o=n(70625);const s={asyncValidators:[],validators:[],disabled:!1,type:o.NI,childType:o.NI,args:{}}},71791:(t,e,n)=>{n.d(e,{p:()=>g});var o=n(17777),s=n(66398),a=n(70625),i=n(92640);class r{constructor(t,e){this._factoryFn=t,this._args=e}valueOf(){return this._args?t=>(t={...this._args,args:t},this._factoryFn(t)):this._factoryFn}}class c{constructor(t,e){this._factoryFn=t,this._args=e}valueOf(){return this._args?t=>(t={...this._args,args:t},this._factoryFn(t)):this._factoryFn}}function l(t,e){if(!t)return new o.cw({});const n=t.ɵControlsMetadata??{},d=t.ɵValidators??[],u=t.ɵAsyncValidators??[],h=t.ɵArgs??{},p=Object.keys(t),g=new o.cw({},{validators:d?.map((t=>t instanceof r?t.valueOf()({...h,...e}):t)).filter((t=>!!t)),asyncValidators:u?.map((t=>t instanceof c?t.valueOf()({...h,...e}):t)).filter((t=>!!t))});for(const d of p){const u=n[d]??i.x,h=t[d];if(void 0===h)continue;const p=u.validators.map((t=>t instanceof r?t.valueOf()({...u.args,...e}):t)).filter((t=>!!t)),f=u.asyncValidators.map((t=>t instanceof c?t.valueOf()({...u.args,...e}):t)).filter((t=>!!t));let v;switch(u.type){case o.cw:v=l(h,e);break;case s.Oe:if(v=new s.Oe([],{validators:p,asyncValidators:f,...u.controlOptions}),h&&Array.isArray(h)){const t=v;for(const n of h)switch(u.childType){case o.cw:t.push(l(n,e));break;case s.Oe:break;default:t.push(new a.NI(n,{validators:p,asyncValidators:f,...u.controlOptions}))}}break;default:v=new a.NI(h,{validators:p,asyncValidators:f,...u.controlOptions})}u.disabled&&v.disable(),g.addControl(d,v)}return g}function d(t,e){return l(t,e)}var u=n(11776),h=n(95176),p=n(38327);class g{constructor(t){this._injector=t}build(t,e){return d(t,{...e,injector:this._injector})}}g.ɵfac=function(t){return new(t||g)(u.LF(h.z))},g.ɵprov=p.Yz({token:g,factory:g.ɵfac})}}]);
//# sourceMappingURL=1001.chunk.645b42d38536e3c06354.js.map