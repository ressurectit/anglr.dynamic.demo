"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[7533],{18978:(t,e,n)=>{n.r(e),n.d(e,{RestRelationsEditorMetadata:()=>at});var o=n(27052),a=n(68624),i=n(93551),r=n(88735),s=n(60901),l=n(85478),u=n(71791),c=n(57466),p=n(64297),m=n(30621),d=n(9249);class f{constructor(t){this.type="PATH",this.configurable=!1,this.value="",this.name=null,c.Rl.bind(this)(t)}}var g=n(80827),v=n(41853),T=n(79440),h=n(13691),_=n(73379),b=n(82568),O=n(15686),E=n(73301),P=n(66794),C=n(21651),R=n(24881),q=n(17790),y=n(49280),Z=n(70983),x=n(77470),S=n(86170),L=n(66163),N=n(80943);function Y(t,e){1&t&&(g.Tg(0,"option",13),v._(1,"BODY"),g.qZ())}class D{constructor(t,e){this.data=t,this.form=e.build(new f(t.parameter)),this.form.valueChanges.subscribe((e=>(0,c.l7)(t.parameter,e)))}}D.ɵfac=function(t){return new(t||D)(T.Y(d.m),T.Y(u.p))},D.ɵcmp=h.Xp({type:D,selectors:[["configure-rest-parameter"]],standalone:!0,features:[_._([u.p]),b.j],decls:29,vars:4,consts:[[3,"formGroup"],[1,"form-group","margin-bottom-extra-small"],[1,"control-label","text-uppercase"],["formControlName","type",1,"form-control"],["value","BODY",4,"ngIf"],["value","PATH"],["value","QUERY"],["type","text","formControlName","value",1,"form-control"],["type","text","formControlName","name",1,"form-control"],["type","checkbox","formControlName","configurable",1,"form-control"],[1,"flex-row","flex-end"],["type","button",1,"btn","btn-info","margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"btn","btn-primary",3,"mat-dialog-close"],["value","BODY"]],template:function(t,e){1&t&&(g.Tg(0,"div",0)(1,"div",1)(2,"label",2),v._(3,"type"),g.qZ(),g.Tg(4,"select",3),O.Y(5,Y,2,0,"option",4),g.Tg(6,"option",5),v._(7,"PATH"),g.qZ(),g.Tg(8,"option",6),v._(9,"QUERY"),g.qZ()()(),g.Tg(10,"div",1)(11,"label",2),v._(12,"value"),g.qZ(),g._U(13,"input",7),g.qZ(),g.Tg(14,"div",1)(15,"label",2),v._(16,"name"),g.qZ(),g._U(17,"input",8),g.qZ(),g.Tg(18,"div",1)(19,"label",2),v._(20,"configurable"),g.qZ(),g._U(21,"input",9),g.qZ()(),g.Tg(22,"div",10)(23,"button",11)(24,"span"),v._(25,"cancel"),g.qZ()(),g.Tg(26,"button",12)(27,"span"),v._(28,"ok"),g.qZ()()()),2&t&&(E.Q("formGroup",e.form),P.x(5),E.Q("ngIf",!e.data.hasBody),P.x(18),E.Q("mat-dialog-close",null),P.x(3),E.Q("mat-dialog-close",!0))},dependencies:[o.e,C.O,a.U,R.YN,q.Kr,y.Fj,Z.W,R.EJ,x.JJ,x.JL,S.s,L.u,m.I,N.ZT],encapsulation:2,changeDetection:0});class U{constructor(t){this.url="",this.method="GET",this.runImmediately=!0,c.Rl.bind(this)(t)}}var A=n(6845),w=n(84773),Q=n(72891),I=n(43870),k=n(6427),H=n(4477),z=n(68961),B=n(4905),$=n(47098),J=n(47826),K=n(12311),j=n(30084);function G(t,e,n,o,a,i,r){try{var s=t[i](r),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(o,a)}function F(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){G(i,o,a,r,s,"next",t)}function s(t){G(i,o,a,r,s,"throw",t)}r(void 0)}))}}function V(t,e){if(1&t&&g._U(0,"relation-node-input",29),2&t){const t=A.o(2).$implicit,e=A.o();E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}function M(t,e){if(1&t){const t=w.E();g.Tg(0,"div",23),O.Y(1,V,1,4,"relation-node-input",24),g.Tg(2,"div",25)(3,"div"),v._(4),g.qZ(),g.Tg(5,"button",26),Q.N("click",(function(e){I.CH(t);const n=A.o().$implicit,o=A.o();return e.preventDefault(),e.stopPropagation(),I.Kt(o.configureRestParameter(n))})),g._U(6,"span",27),g.qZ(),g.Tg(7,"button",15),Q.N("click",(function(e){I.CH(t);const n=A.o().$implicit,o=A.o();return e.preventDefault(),e.stopPropagation(),I.Kt(o.removeParam(n))})),g._U(8,"span",28),g.qZ()()()}if(2&t){const t=A.o().$implicit;P.x(1),E.Q("ngIf",t.configurable),P.x(3),k.hi("BODY: ",t.name,"")}}function X(t,e){if(1&t&&g._U(0,"relation-node-input",29),2&t){const t=A.o(2).$implicit,e=A.o();E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}function W(t,e){if(1&t){const t=w.E();g.Tg(0,"div",23),O.Y(1,X,1,4,"relation-node-input",24),g.Tg(2,"div",25)(3,"div"),v._(4),g.qZ(),g.Tg(5,"button",26),Q.N("click",(function(){I.CH(t);const e=A.o().$implicit,n=A.o();return I.Kt(n.configureRestParameter(e))})),g._U(6,"span",27),g.qZ(),g.Tg(7,"button",15),Q.N("click",(function(e){I.CH(t);const n=A.o().$implicit,o=A.o();return e.preventDefault(),e.stopPropagation(),I.Kt(o.removeParam(n))})),g._U(8,"span",28),g.qZ()()()}if(2&t){const t=A.o().$implicit;P.x(1),E.Q("ngIf",t.configurable),P.x(3),k.hi("PATH: ",t.name,"")}}function tt(t,e){if(1&t&&g._U(0,"relation-node-input",29),2&t){const t=A.o(2).$implicit,e=A.o();E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}function et(t,e){if(1&t){const t=w.E();g.Tg(0,"div",23),O.Y(1,tt,1,4,"relation-node-input",24),g.Tg(2,"div",25)(3,"div"),v._(4),g.qZ(),g.Tg(5,"button",26),Q.N("click",(function(){I.CH(t);const e=A.o().$implicit,n=A.o();return I.Kt(n.configureRestParameter(e))})),g._U(6,"span",27),g.qZ(),g.Tg(7,"button",15),Q.N("click",(function(e){I.CH(t);const n=A.o().$implicit,o=A.o();return e.preventDefault(),e.stopPropagation(),I.Kt(o.removeParam(n))})),g._U(8,"span",28),g.qZ()()()}if(2&t){const t=A.o().$implicit;P.x(1),E.Q("ngIf",t.configurable),P.x(3),k.hi("QUERY: ",t.name,"")}}function nt(t,e){if(1&t&&(H.yn(0)(1,21),O.Y(2,M,9,2,"div",22),O.Y(3,W,9,2,"div",22),O.Y(4,et,9,2,"div",22),H.BQ()()),2&t){const t=e.$implicit;P.x(1),E.Q("ngSwitch",t.type),P.x(1),E.Q("ngSwitchCase","BODY"),P.x(1),E.Q("ngSwitchCase","PATH"),P.x(1),E.Q("ngSwitchCase","QUERY")}}class ot extends i.M{constructor(t,e,n,o){super(t,e),this.dialog=n,this.form=o.build(new U(null)),this.form.valueChanges.subscribe((t=>{this.metadata?.relationsOptions&&(0,c.l7)(this.metadata.relationsOptions,t)}))}get params(){var t,e;return this.metadata?((t=this.metadata).relationsOptions??(t.relationsOptions={params:[],url:null,method:null,runImmediately:!0}),(e=this.metadata.relationsOptions).params??(e.params=[])):[]}addParam(){var t=this;return F((function*(){const e={configurable:!1,name:null,type:"PATH",value:null};(yield t.configureRestParameter(e))&&t.params.push(e)}))()}removeParam(t){const e=this.params.indexOf(t);e>=0&&this.params.splice(e,1)}configureRestParameter(t){var e=this;return F((function*(){const n=JSON.parse(JSON.stringify(t)),o=yield(0,p.n)(e.dialog.open(D,{title:"configure rest parameter",width:"60vw",data:{parameter:t,hasBody:"BODY"!==t.type&&!!e.params.find((t=>"BODY"===t.type))}}).afterClosed());return o||(0,c.l7)(t,n),o??!1}))()}metadataSet(){this.metadata?.relationsOptions&&this.form.patchValue(this.metadata.relationsOptions)}}ot.ɵfac=function(t){return new(t||ot)(T.Y(z.s),T.Y(B.SB),T.Y(J.J),T.Y(u.p))},ot.ɵcmp=h.Xp({type:ot,selectors:[["rest-node"]],standalone:!0,features:[_._([u.p]),$.q,b.j],decls:38,vars:10,consts:[["name","rest",3,"parent","destroySubject"],[1,"node-content",3,"formGroup"],[1,"form-group","margin-bottom-extra-small"],[1,"control-label","text-uppercase"],["type","text","formControlName","url",1,"form-control"],["formControlName","method",1,"form-control"],["value","GET"],["value","POST"],["value","PUT"],["value","PATCH"],["value","DELETE"],["type","checkbox","formControlName","runImmediately",1,"form-control"],[1,"inputs-outputs"],[1,"inputs"],[4,"ngFor","ngForOf"],["type","button",1,"btn-icon",3,"click"],[1,"fas","fa-plus"],[1,"outputs"],[1,"output"],["name","success",3,"parentCoordiantes","zoomLevel","parent"],["name","error",3,"parentCoordiantes","zoomLevel","parent"],[3,"ngSwitch"],["class","input",4,"ngSwitchCase"],[1,"input"],[3,"parentCoordiantes","zoomLevel","name","parent",4,"ngIf"],[1,"flex-row"],["type","button",1,"btn-icon","margin-horizontal-extra-small",3,"click"],[1,"fas","fa-cog"],[1,"fas","fa-times"],[3,"parentCoordiantes","zoomLevel","name","parent"]],template:function(t,e){1&t&&(g._U(0,"relations-node-header",0),g.Tg(1,"div",1)(2,"div",2)(3,"label",3),v._(4,"url"),g.qZ(),g._U(5,"input",4),g.qZ(),g.Tg(6,"div",2)(7,"label",3),v._(8,"method"),g.qZ(),g.Tg(9,"select",5)(10,"option",6),v._(11,"GET"),g.qZ(),g.Tg(12,"option",7),v._(13,"POST"),g.qZ(),g.Tg(14,"option",8),v._(15,"PUT"),g.qZ(),g.Tg(16,"option",9),v._(17,"PATCH"),g.qZ(),g.Tg(18,"option",10),v._(19,"DELETE"),g.qZ()()(),g.Tg(20,"div",2)(21,"label",3),v._(22,"run immediately"),g.qZ(),g._U(23,"input",11),g.qZ(),g.Tg(24,"div",12)(25,"div",13),O.Y(26,nt,5,4,"ng-container",14),g.Tg(27,"button",15),Q.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.addParam()})),g._U(28,"span",16),g.qZ()(),g.Tg(29,"div",17)(30,"div",18)(31,"div"),v._(32,"success"),g.qZ(),g._U(33,"relation-node-output",19),g.qZ(),g.Tg(34,"div",18)(35,"div"),v._(36,"error"),g.qZ(),g._U(37,"relation-node-output",20),g.qZ()()()()),2&t&&(E.Q("parent",e)("destroySubject",e.destroySubject),P.x(1),E.Q("formGroup",e.form),P.x(25),E.Q("ngForOf",e.params),P.x(7),E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e),P.x(4),E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e))},dependencies:[o.e,K.s,C.O,j.RF,j.n9,a.U,R.YN,q.Kr,y.Fj,Z.W,R.EJ,x.JJ,x.JL,S.s,L.u,r.e,s.P,l.n],encapsulation:2,changeDetection:0});class at{constructor(){this.metaInfo={name:"Rest",description:"Restfull requests",group:"Http"},this.nodeDefinition=ot,Object.freeze(this)}}},91861:(t,e,n)=>{n.d(e,{Bj:()=>r,DZ:()=>a,GP:()=>i,dK:()=>c,fI:()=>u,n7:()=>l,nR:()=>p,yh:()=>s});var o=n(40296);const a=new o.O("RELATIONS_MODULE_TYPES_DATA_EXTRACTORS"),i=new o.O("RELATIONS_MODULE_TYPES_PROVIDERS"),r=new o.O("RELATIONS_MODULE_TYPES_LOADER"),s=new o.O("RELATIONS_NODES_DATA_EXTRACTORS"),l=new o.O("RELATIONS_NODES_PROVIDERS"),u=new o.O("RELATIONS_NODES_LOADER"),c=new o.O("REFRESH_PALETTE_OBSERVABLES"),p=new o.O("RELATIONS_HISTORY_MANAGER")},44677:(t,e,n)=>{n.d(e,{L:()=>a});var o=n(43939);const a=(t,e)=>{const n=t;return e?.debug("defaultExportExtractor: trying to extract default dynamic data"),(0,o.EN)(n.default)?{data:n.default}:null}},14389:(t,e,n)=>{n.d(e,{LK:()=>s,XW:()=>r,mv:()=>i});var o=n(97825),a=n(13457);function i(t,e,n,o,a=!1){t[e]={currentValue:n,previousValue:o,firstChange:a,isFirstChange:()=>a}}function r(t){return{provide:a.B,useValue:{packages:[t],packagesChange:o.C,refresh(){}},multi:!0}}function s(t){try{return JSON.parse(t)}catch{return null}}}}]);
//# sourceMappingURL=7533.chunk.d5f0f2124bd345592e89.js.map