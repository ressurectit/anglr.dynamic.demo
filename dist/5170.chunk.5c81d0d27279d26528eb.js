(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[5170],{55170:(t,e,r)=>{"use strict";r.r(e),r.d(e,{RelationsLayoutFormModule:()=>St});var o=r(44067),a=r(94060),n=r(47260),i=r(61942),s=r(46392),u=r(22804),l=r(71794),c=r(35648),d=r(8477),m=r(66888),p=r(31685),f=r(89651),g=r(97149),v=r(40921),y=r(56454),h=r(17505),_=r(44055),w=r(56179),b=r(99043),C=r(57489),F=r(30688),x=r(45529),k=r(7199),M=r(89952),N=r(77653),O=r(15554),P=r(5549),T=r(61980),D=r(94353),R=r(78581),Y=r(45473),G=r(55640),L=r(31246),Z=r(96650),I=r(68792),A=r(41348),j=r(41574),Q=r(71298);let S=class{get emptyMetadata(){return{id:`stackPanel-${(0,k.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}constructor(t,e){this._store=t,this.history=e,this._metadata=null}_getMetadata(t){return{layout:t}}};S.ɵfac=function(t){return new(t||S)(O.Y(M.U),O.Y(f.dB))},S.ɵcmp=P.Xp({type:S,selectors:[["form-layout-editor-view"]],features:[T._([y.z,{provide:d.qO,useFactory:t=>new u.I((e=>t.getData(e)?.layout)),deps:[M.U]},(0,g._T)(),(0,v.rj)(),(0,x.m_)(),(0,F.iS)(),(0,w.vQ)(),(0,b.gJ)(),(0,C.hd)(),{provide:h.L,useClass:N.y}])],decls:9,vars:5,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsLayoutForm/layout",3,"store","getMetadataCallback","history","metadataChange"],[3,"copyClick"],[1,"margin-horizontal-small"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(D.Tg(0,"div",0)(1,"button",1)(2,"span"),R._(3,"go back"),D.qZ()(),D.Tg(4,"load-save-new",2),Y.N("metadataChange",(function(t){let r;return e._metadata=null!==(r=null==t?null:t.layout)&&void 0!==r?r:e.emptyMetadata})),D.qZ(),D.Tg(5,"debug-data",3)(6,"div",4),R._(7,"metadata"),D.qZ()()(),D._U(8,"layout-editor",5)),2&t&&(G.x(4),L.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history),G.x(1),L.Q("copyClick",e._metadata),G.x(3),L.Q("metadata",e._metadata))},dependencies:[Z.z,A.Z,j.v,I.o,Q.Q],encapsulation:2,changeDetection:0}),(0,o.gn)([k.ru,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Object]),(0,o.w6)("design:returntype",Object)],S.prototype,"_getMetadata",null),S=(0,o.gn)([(0,p.N)({path:"layout"}),(0,p.N)({path:"layout/:id"}),(0,o.w6)("design:paramtypes",[M.U,_.Y])],S);var z=r(70290),U=r(86870),q=r(33907),E=r(98023),B=r(47496),$=r(72887),J=r(79898),W=r(71083),X=r(18104),H=r(38937),V=r(80056),K=r(36059),tt=r(26938);function et(t,e,r,o,a,n,i){try{var s=t[n](i),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(o,a)}function rt(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return rt=function(t){this.s=t,this.n=t.next},rt.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new rt(t)}class ot{constructor(t){this._iteratorsSvc=t}build(t){var e,r=this;return(e=function*(){const e=new W.cw({});let o=e;var a,n=!1,i=!1;try{for(var s,u=function(t){var e,r,o,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,o=Symbol.iterator);a--;){if(r&&null!=(e=t[r]))return e.call(t);if(o&&null!=(e=t[o]))return new rt(e.call(t));r="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}(r._iteratorsSvc.getIteratorFor(t));n=!(s=yield u.next()).done;n=!1){const t=s.value;{const e=r._getControlName(t.metadata);if(e){const a=r._getControlForMetadata(t.metadata);r._getActiveGroup(t.parent,o).addControl(e,a),a instanceof W.cw&&(o=a)}}}}catch(t){i=!0,a=t}finally{try{n&&null!=u.return&&(yield u.return())}finally{if(i)throw a}}return e},function(){var t=this,r=arguments;return new Promise((function(o,a){var n=e.apply(t,r);function i(t){et(n,o,a,i,s,"next",t)}function s(t){et(n,o,a,i,s,"throw",t)}i(void 0)}))})()}_getActiveGroup(t,e){if(!e.parent||!t)return e;const r=this._getControlName(t.metadata);return r?e.parent.get(r)?e:this._getActiveGroup(t,e.parent):t.parent?this._getActiveGroup(t.parent,e):this._getActiveGroup(t.parent,e.root)}_getControlName(t){return t?t.options?.controlName:null}_getControlForMetadata(t){switch(t?.options?.controlType){case H.Z.FormArray:return new X.Oe([]);case H.Z.FormGroup:return new W.cw({});default:return new B.NI}}}ot.ɵfac=function(t){return new(t||ot)(V.LF(tt.$))},ot.ɵprov=K.Yz({token:ot,factory:ot.ɵfac});var at=r(85902),nt=r(79842),it=r(75990),st=r(97710),ut=r(71325),lt=r(84746),ct=r(12142),dt=r(41820),mt=r(16945),pt=r(23527),ft=r(49402),gt=r(60054),vt=r(88195),yt=r(90661),ht=r(95381),_t=r(79555),wt=r(15528),bt=r(4489),Ct=r(81287),Ft=r(31686),xt=r(60405);function kt(t,e,r,o,a,n,i){try{var s=t[n](i),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(o,a)}function Mt(t,e){if(1&t&&D._U(0,"ng-option",7),2&t){const t=e.$implicit;L.Q("value",t)("text",t)}}function Nt(t,e){if(1&t){const t=st.E();D.Tg(0,"form",8),Y.N("ngSubmit",(function(){ut.CH(t);const e=lt.o();return ut.Kt(e._submit())})),D.Tg(1,"div",9)(2,"div",10),ct.Gk(3,11),D.qZ()(),D.Tg(4,"button",12),R._(5,"Submit"),D.qZ()()}if(2&t){const t=lt.o();L.Q("formGroup",t._formGroup),G.x(3),L.Q("layoutComponentRenderer",t._metadata)("layoutComponentRendererInjector",t._formInjector)}}const Ot=t=>["/relationsLayoutForm/layout",t],Pt=t=>["/relationsLayoutForm/relations",t];let Tt=class{constructor(t,e,r,o,a,n,i){this._relationsManager=t,this._store=e,this._router=r,this._route=o,this._injector=a,this._formComponentControlBuilder=n,this._changeDetector=i,this.selectedMetadata=null,this._available=new B.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){var t=this;this._availableNames=this._store.getStored(),this._route.params.subscribe(function(){var e,r=(e=function*({id:e}){if(e){t._available.setValue(e);const r=t.selectedMetadata=t._store.getData(e);t._metadata=r?.layout,t._relationsManager.setRelations(r.relations??[]),t._formGroup=yield t._formComponentControlBuilder.build(t._metadata),t._formInjector=z.z.create({parent:t._injector,providers:[{provide:J.O,useValue:t._formGroup}]}),t._changeDetector.detectChanges()}else t.selectedMetadata=null,t._relationsManager.setRelations([]);t._available.valueChanges.subscribe((e=>{t._router.navigate(["/relationsLayoutForm","form-preview",e],{skipLocationChange:!1,replaceUrl:!0})}))},function(){var t=this,r=arguments;return new Promise((function(o,a){var n=e.apply(t,r);function i(t){kt(n,o,a,i,s,"next",t)}function s(t){kt(n,o,a,i,s,"throw",t)}i(void 0)}))});return function(t){return r.apply(this,arguments)}}())}ngOnDestroy(){}_submit(){console.log(this._formGroup.value)}};Tt.ɵfac=function(t){return new(t||Tt)(O.Y(it.N),O.Y(M.U),O.Y(q.F0),O.Y(E.gz),O.Y(z.z),O.Y(ot),O.Y(U.s))},Tt.ɵcmp=P.Xp({type:Tt,selectors:[["form-preview-view"]],features:[T._([ot,tt.$,at.T,(0,nt.AL)(),(0,v.SH)(),(0,x.bW)(),(0,F.Hh)()])],decls:11,vars:11,consts:[[1,"flex-row"],[1,"margin-horizontal-small",3,"routerLink"],[1,"flex-1",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[3,"copyClick"],[1,"margin-horizontal-small"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"value","text"],[3,"formGroup","ngSubmit"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll","thin-scrollbar"],[3,"layoutComponentRenderer","layoutComponentRendererInjector"],["type","submit"]],template:function(t,e){1&t&&(D.Tg(0,"div",0)(1,"a",1),R._(2,"layout"),D.qZ(),D.Tg(3,"a",1),R._(4,"relations"),D.qZ(),D.Tg(5,"ng-select",2),dt.Y(6,Mt,1,2,"ng-option",3),D.qZ(),D.Tg(7,"debug-data",4)(8,"div",5),R._(9),D.qZ()()(),dt.Y(10,Nt,6,3,"form",6)),2&t&&(G.x(1),L.Q("routerLink",mt.VK(7,Ot,e._available.value)),G.x(2),L.Q("routerLink",mt.VK(9,Pt,e._available.value)),G.x(2),L.Q("formControl",e._available),G.x(1),L.Q("ngForOf",e._availableNames),G.x(1),L.Q("copyClick",e.selectedMetadata),G.x(2),pt.Oq(e._available.value),G.x(1),L.Q("ngIf",e._formGroup))},dependencies:[gt.sg,vt.O,yt._,ht.JJ,ht.JL,_t.o,wt.s,bt.x,Ct.w,Ft.v,xt.i,ft.r,j.v,I.o],encapsulation:2,changeDetection:0}),Tt=(0,o.gn)([(0,$.R)("","form-preview"),(0,p.N)({path:"form-preview"}),(0,p.N)({path:"form-preview/:id"}),(0,o.w6)("design:paramtypes",[it.N,M.U,q.F0,E.gz,z.z,ot,U.s])],Tt);var Dt=r(91861),Rt=r(80734),Yt=r(20809),Gt=r(85638),Lt=r(31166),Zt=r(61085);let It=class{get emptyMetadata(){return[]}constructor(t,e,r){this._store=t,this.history=e,this._layoutManager=r,this._metadata=[]}_getMetadata(t){return{relations:t}}_loadDemo(){this._metadata=Gt.F.demoRelationsComplexRelations}_loadRestDemo(){this._metadata=Gt.F.complexDemoRestRelations}_loadFullDemo(){this._metadata=Gt.F.complexDemoFullRelations}setMetadata(t){this._metadata=t?.relations??this.emptyMetadata,this._layoutManager.setLayout(t?.layout)}};It.ɵfac=function(t){return new(t||It)(O.Y(M.U),O.Y(Dt.nR),O.Y(Rt.n))},It.ɵcmp=P.Xp({type:It,selectors:[["form-relations-editor-view"]],features:[T._([y.z,{provide:Yt.te,useFactory:t=>new u.I((e=>t.getData(e)?.relations)),deps:[M.U]},(0,nt.$R)(),(0,v.qm)(),(0,x.Od)(),(0,C.vu)(),(0,b.Rn)(),(0,w.El)(),(0,F.pS)(),{provide:h.L,useClass:Lt.d}])],decls:6,vars:5,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsLayoutForm/relations",3,"store","getMetadataCallback","layoutControls","history","metadataChange"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(D.Tg(0,"div",0)(1,"button",1)(2,"span"),R._(3,"go back"),D.qZ()(),D.Tg(4,"load-save-new",2),Y.N("metadataChange",(function(t){return e.setMetadata(t)})),D.qZ()(),D._U(5,"relations-editor",3)),2&t&&(G.x(4),L.Q("store",e._store)("getMetadataCallback",e._getMetadata)("layoutControls",!1)("history",e.history),G.x(1),L.Q("metadata",e._metadata))},dependencies:[Z.z,Zt.Y,Q.Q],encapsulation:2,changeDetection:0}),(0,o.gn)([k.ru,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Array]),(0,o.w6)("design:returntype",Object)],It.prototype,"_getMetadata",null),It=(0,o.gn)([(0,p.N)({path:"relations"}),(0,p.N)({path:"relations/:id"}),(0,o.w6)("design:paramtypes",[M.U,_.Y,Rt.n])],It);const At=[Tt,S,It];var jt=r(53245),Qt=r(18567);let St=class{};St.ɵfac=function(t){return new(t||St)},St.ɵmod=P.oA({type:St}),St.ɵinj=K.cJ({providers:[{provide:d.qO,useFactory:t=>new u.I((e=>t.getData(e))),deps:[M.U]},(0,jt.Y)("LAYOUT_RELATIONS_FORM_DATA")],imports:[a.e,n.U,c.A,i.Bz,m.W,l.s,Qt.Qw]}),St=(0,o.gn)([(0,s.P)(At)],St)},38937:(t,e,r)=>{"use strict";var o;r.d(e,{Z:()=>o}),function(t){t.FormControl="FormControl",t.FormArray="FormArray",t.FormGroup="FormGroup"}(o||(o={}))},79898:(t,e,r)=>{"use strict";r.d(e,{O:()=>o});const o=new(r(88011).O)("FORM_COMPONENT_CONTROL")},30688:(t,e,r)=>{"use strict";r.d(e,{Wm:()=>D,sx:()=>T,Hh:()=>M,iS:()=>N,I1:()=>P,pS:()=>O});var o=r(18104),a=r(71083),n=r(47496),i=r(26038),s=r(8477),u=r(89651),l=r(91861),c=r(20809),d=r(80607),m=r(80056),p=r(36059);function f(t,e,r,o,a,n,i){try{var s=t[n](i),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(o,a)}class g{constructor(t){this._logger=t}tryToGet(t){var e,o=this;return(e=function*(){if("form-components"!==t.package)return null;try{return o._logger?.debug("FormDynamicModuleItemsProvider: trying to get item {{@item}}",{item:{name:t.name,package:t.package}}),yield r(54384)(`./${t.name}/type`)}catch(e){o._logger?.debug("FormDynamicModuleItemsProvider: item {{@item}} was not found, reason: "+e,{item:{name:t.name,package:t.package}})}return null},function(){var t=this,r=arguments;return new Promise((function(o,a){var n=e.apply(t,r);function i(t){f(n,o,a,i,s,"next",t)}function s(t){f(n,o,a,i,s,"throw",t)}i(void 0)}))})()}}function v(t,e,r,o,a,n,i){try{var s=t[n](i),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(o,a)}g.ɵfac=function(t){return new(t||g)(m.LF(d.bZ,8))},g.ɵprov=p.Yz({token:g,factory:g.ɵfac});class y{constructor(t){this._logger=t}tryToGet(t){var e,o=this;return(e=function*(){try{return o._logger?.debug("FormDynamicModuleTypesProvider: trying to get types for module {{@module}}",{module:{moduleName:t.package}}),"form-components"===t.package?yield r.e(6311).then(r.bind(r,36031)):null}catch(e){o._logger?.debug("FormDynamicModuleTypesProvider: module {{@module}} was not found, reason: "+e,{module:{moduleName:t.package}})}return null},function(){var t=this,r=arguments;return new Promise((function(o,a){var n=e.apply(t,r);function i(t){v(n,o,a,i,s,"next",t)}function s(t){v(n,o,a,i,s,"throw",t)}i(void 0)}))})()}}function h(t,e,r,o,a,n,i){try{var s=t[n](i),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(o,a)}y.ɵfac=function(t){return new(t||y)(m.LF(d.bZ,8))},y.ɵprov=p.Yz({token:y,factory:y.ɵfac});class _{constructor(t){this._logger=t}tryToGet(t){var e,o=this;return(e=function*(){try{return o._logger?.debug("FormDynamicModuleRelationsProvider: trying to get relations types for module {{@module}}",{module:{moduleName:t.package}}),"form-components"===t.package?yield r.e(5737).then(r.bind(r,75737)):null}catch(e){o._logger?.debug("FormDynamicModuleRelationsProvider: module {{@module}} was not found, reason: "+e,{module:{moduleName:t.package}})}return null},function(){var t=this,r=arguments;return new Promise((function(o,a){var n=e.apply(t,r);function i(t){h(n,o,a,i,s,"next",t)}function s(t){h(n,o,a,i,s,"throw",t)}i(void 0)}))})()}}_.ɵfac=function(t){return new(t||_)(m.LF(d.bZ,8))},_.ɵprov=p.Yz({token:_,factory:_.ɵfac});const w={provide:s.Aw,useClass:g,multi:!0},b={provide:u.sc,useClass:y,multi:!0},C={provide:l.GP,useClass:_,multi:!0},F={provide:l.n7,useClass:g,multi:!0},x={provide:c.B6,useClass:g,multi:!0};var k=r(38937);function M(){return[w]}function N(){return[w,b,(0,i.XW)("form-components")]}function O(){return[C,F,(0,i.XW)("form-components"),...M()]}function P(){return[...M(),x]}function T(t,e,r=k.Z.FormControl,o){return e&&t?e.get(t)??D(r,o):D(r,o)}function D(t,e){switch(t){case k.Z.FormArray:return new o.Oe([]);case k.Z.FormGroup:return new a.cw(e??{});default:return new n.NI(e)}}},66888:(t,e,r)=>{"use strict";r.d(e,{W:()=>u});var o=r(11650),a=r(22654),n=r(79842),i=r(5549),s=r(36059);class u{static withProviders(){return{ngModule:u,providers:[(0,n.$R)()]}}static withStaticComponents(t){return{ngModule:u,providers:[(0,n.Sf)(t)]}}}u.ɵfac=function(t){return new(t||u)},u.ɵmod=i.oA({type:u}),u.ɵinj=s.cJ({imports:[o.c,a.Y]})},54384:(t,e,r)=>{var o={"./checkbox/type":[34757,4757],"./datepicker/type":[96425,6425],"./formGroup/type":[70613,613],"./numberField/type":[90560,560],"./period/type":[13487,3487],"./radio/type":[41197,1197],"./select/type":[98746,8746],"./textField/type":[80477,477],"./textarea/type":[25552,5552]};function a(t){if(!r.o(o,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=o[t],a=e[0];return r.e(e[1]).then((()=>r(a)))}a.keys=()=>Object.keys(o),a.id=54384,t.exports=a}}]);
//# sourceMappingURL=5170.chunk.5c81d0d27279d26528eb.js.map