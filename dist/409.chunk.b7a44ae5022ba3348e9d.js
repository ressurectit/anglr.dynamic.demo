"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[409],{20409:(t,e,n)=>{n.r(e),n.d(e,{TransformDataRelationsEditorMetadata:()=>k});var o=n(93917),a=n(66506),i=n(36266),s=n(71386),r=n(13724),d=n(32141),c=n(65206),l=n(73943),u=n(12009),p=n(36893),m=n(80033),h=n(49276),f=n(25413),g=n(85410),v=n(5327),y=n(78190),C=n(88809),M=n(95741),w=n(13315),b=n(43335),E=n(10065),x=n(57284),D=n(13757),T=n(46363);function j(t,e,n,o,a,i,s){try{var r=t[i](s),d=r.value}catch(t){return void n(t)}r.done?e(d):Promise.resolve(d).then(o,a)}p.Mj.typescript.typescriptDefaults.addExtraLib("/**\n * Transforms data to another form of data\n * @param data - Data to be transformed\n */\nexport type TransformData<TData = any, TResult = any> = (data: TData) => TResult;","file:///node_modules/@types/transformData/index.d.ts");class L extends i.M{constructor(t,e,n){super(t,e),this.dialog=n}showCodeEditor(){var t,e=this;return(t=function*(){var t;const n=yield(0,u.n)(e.dialog.open(o.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:e.metadata?.nodeMetadata?.options?.content??"",languageModel:(0,a.A)("import {TransformData} from 'transformData';\n\n/**\n * Transformer function that performs transformation\n */\nconst transformer: TransformData<any, any> = data =>\n{\n    return data;\n};\n \nexport default transformer;\n")}}).afterClosed());e.metadata?.relationsOptions&&n&&e.metadata.nodeMetadata&&(e.metadata.relationsOptions.code=n.code,(t=e.metadata.nodeMetadata).options??(t.options={content:""}),e.metadata.nodeMetadata.options.content=n.content,e.history.getNewState())},function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function s(t){j(i,o,a,s,r,"next",t)}function r(t){j(i,o,a,s,r,"throw",t)}s(void 0)}))})()}metadataSet(){var t;this.metadata?.relationsOptions&&((t=this.metadata.relationsOptions).id??(t.id=(0,l.Ox)(12)))}}L.ɵfac=function(t){return new(t||L)(m.Y(h.s),m.Y(f.SB),m.Y(T.J))},L.ɵcmp=g.Xp({type:L,selectors:[["transform-data-node"]],standalone:!0,features:[v.q,y.j],decls:20,vars:20,consts:[[3,"parent","destroySubject","name"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"input"],["name","data",3,"parentCoordiantes","zoomLevel","parent"],[1,"outputs"],[1,"output"],["name","transformedData",3,"parentCoordiantes","zoomLevel","parent"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"click"]],template:function(t,e){1&t&&(C._U(0,"relations-node-header",0),M.AL(1,"firstUppercaseLocalize"),C.Tg(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),C._U(6,"relation-node-input",5),C.Tg(7,"div"),w._(8),M.AL(9,"firstUppercaseLocalize"),C.qZ()()(),C.Tg(10,"div",6)(11,"div",7)(12,"div"),w._(13),M.AL(14,"firstUppercaseLocalize"),C.qZ(),C._U(15,"relation-node-output",8),C.qZ()()(),C.Tg(16,"button",9),b.N("click",(function(){return e.showCodeEditor()})),C.Tg(17,"span"),w._(18),M.AL(19,"firstUppercaseLocalize"),C.qZ()()()),2&t&&(E.Q("parent",e)("destroySubject",e.destroySubject)("name",M.lc(1,12,"transform data")),x.x(6),E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e),x.x(2),D.Oq(M.lc(9,14,"data")),x.x(5),D.Oq(M.lc(14,16,"transformed data")),x.x(2),E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e),x.x(3),D.Oq(M.lc(19,18,"code")))},dependencies:[s.e,r.P,d.n,c.R],encapsulation:2,changeDetection:0});class k{constructor(){this.metaInfo={name:"Transform data",description:"Code that allows data tranformation",group:"Data"},this.nodeDefinition=L,Object.freeze(this)}}},93917:(t,e,n)=>{n.d(e,{I:()=>k});var o=n(69363),a=n(80033),i=n(85410),s=n(88731),r=n(88809),d=n(43335),c=n(13315),l=n(95741),u=n(32603),p=n(26116),m=n(10065),h=n(57284),f=n(13757),g=n(52552),v=n(45148),y=n(52038),C=n(73943),M=n(36893);(0,C.yJ)((t=>{(0,C.fp)(t.ngDynamicMonacoPath)&&(t.ngDynamicMonacoPath="dist")})),self.MonacoEnvironment={getWorkerUrl:function(t,e){return"json"===e?"dist/json.worker.js":"css"===e||"scss"===e||"less"===e?"dist/css.worker.js":"html"===e||"handlebars"==e?"dist/html.worker.js":"typescript"===e||"javascript"===e?"dist/ts.worker.js":"dist/editor.worker.js"}};const w={target:M.Mj.typescript.ScriptTarget.ES2020,module:M.Mj.typescript.ModuleKind.CommonJS,moduleResolution:M.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noEmitOnError:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:M.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};M.Mj.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),M.Mj.typescript.typescriptDefaults.setCompilerOptions(w);var b=n(25413),E=n(56949);function x(t,e,n,o,a,i,s){try{var r=t[i](s),d=r.value}catch(t){return void n(t)}r.done?e(d):Promise.resolve(d).then(o,a)}function D(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function s(t){x(i,o,a,s,r,"next",t)}function r(t){x(i,o,a,s,r,"throw",t)}s(void 0)}))}}class T{constructor(t){this.element=t,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new y.v,this.contentChange=new y.v}ngOnChanges(t){(0,C.$0)("languageModel")in t&&this.languageModel&&(0,C.$0)("content")in t&&(0,C.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){var t=this;return D((function*(){t.openedFile&&t.codeEditor&&t.languageModel&&t.save.emit({content:t.openedFile.getValue(),code:yield t.languageModel.compiledCode(t.codeEditor)})}))()}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){var t=this;this.codeEditor=M.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},bracketPairColorization:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(M.DC.CtrlCmd|M.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent(D((function*(){t.openedFile&&t.languageModel&&t.codeEditor&&t.contentChange.emit({content:t.openedFile.getValue(),code:yield t.languageModel.compiledCode(t.codeEditor)})})))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,C.fp)(this.content)&&(this.openedFile=M.j6.createModel((this.content||this.languageModel.initialData)??"",this.languageModel.language,M.Sf.file(`file:///index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}T.monacoInit=!0,T.ɵfac=function(t){return new(t||T)(a.Y(b.SB))},T.ɵcmp=i.Xp({type:T,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[E.T],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0});var j=n(65206);function L(t,e,n,o,a,i,s){try{var r=t[i](s),d=r.value}catch(t){return void n(t)}r.done?e(d):Promise.resolve(d).then(o,a)}class k{constructor(t,e){this.data=t,this.dialog=e,this.editorContent=null}saveAndClose(t){var e,n=this;return(e=function*(){yield t.saveContent(),n.dialog.close(n.editorContent)},function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(t){L(i,o,a,s,r,"next",t)}function r(t){L(i,o,a,s,r,"throw",t)}s(void 0)}))})()}}k.ɵfac=function(t){return new(t||k)(a.Y(o.m),a.Y(g.s))},k.ɵcmp=i.Xp({type:k,selectors:[["code-editor-dialog"]],decls:11,vars:9,consts:[[2,"height","calc(70vh - 46px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"dynamic-flex-row","dynamic-flex-end","dynamic-action-buttons"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-primary",3,"click"]],template:function(t,e){if(1&t){const t=s.E();r.Tg(0,"code-editor",0,1),d.N("save",(function(t){return e.editorContent=t})),r.qZ(),r.Tg(2,"div",2)(3,"button",3)(4,"span"),c._(5),l.AL(6,"firstUppercaseLocalize"),r.qZ()(),r.Tg(7,"button",4),d.N("click",(function(){u.CH(t);const n=p.M(1);return u.Kt(e.saveAndClose(n))})),r.Tg(8,"span"),c._(9),l.AL(10,"firstUppercaseLocalize"),r.qZ()()()}2&t&&(m.Q("content",e.data.content)("languageModel",e.data.languageModel),h.x(3),m.Q("mat-dialog-close",null),h.x(2),f.Oq(l.lc(6,5,"cancel")),h.x(4),f.Oq(l.lc(10,7,"ok")))},dependencies:[v.ZT,T,j.R],encapsulation:2,changeDetection:0})},87552:(t,e,n)=>{n.d(e,{y:()=>o});class o{constructor(t,e,n,o){this.language=t,this.extension=e,this.compiledCode=n,this.initialData=o}}},66506:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(36893),a=n(87552);function i(t,e,n,o,a,i,s){try{var r=t[i](s),d=r.value}catch(t){return void n(t)}r.done?e(d):Promise.resolve(d).then(o,a)}const s=t=>new a.y("typescript","ts",function(){var t,e=(t=function*(t){const e=t.getModel()?.uri;if(!e)return"";const n=yield o.Mj.typescript.getTypeScriptWorker(),a=yield n(e);return(yield a.getEmitOutput(e.toString())).outputFiles[0].text},function(){var e=this,n=arguments;return new Promise((function(o,a){var s=t.apply(e,n);function r(t){i(s,o,a,r,d,"next",t)}function d(t){i(s,o,a,r,d,"throw",t)}r(void 0)}))});return function(t){return e.apply(this,arguments)}}(),t)}}]);
//# sourceMappingURL=409.chunk.b7a44ae5022ba3348e9d.js.map