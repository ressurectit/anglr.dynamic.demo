"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[3627],{63627:(e,t,n)=>{n.r(t),n.d(t,{DataTemplateRelationsEditorMetadata:()=>z});var o=n(63375),i=n(93551),a=n(52580),s=n(60901),r=n(85478),d=n(71309),l=n(69784),c=n(7199),p=n(28903),u=n(15554),h=n(86870),m=n(8530),g=n(5549),v=n(91513),f=n(83052),y=n(94353),C=n(21179),M=n(78581),w=n(45473),b=n(31246),E=n(55640),L=n(23527),x=n(34984);function j(e,t,n,o,i,a,s){try{var r=e[a](s),d=r.value}catch(e){return void n(e)}r.done?t(d):Promise.resolve(d).then(o,i)}class k extends i.M{constructor(e,t,n){super(e,t),this.dialog=n}showCodeEditor(){var e,t=this;return(e=function*(){const e=yield(0,p.n)(t.dialog.open(d.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:t.metadata?.relationsOptions?.template??"",languageModel:l.d}}).afterClosed());(0,c.EN)(e)&&t.metadata?.relationsOptions&&(t.metadata.relationsOptions.template=e.content,t.history.getNewState())},function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){j(a,o,i,s,r,"next",e)}function r(e){j(a,o,i,s,r,"throw",e)}s(void 0)}))})()}}k.ɵfac=function(e){return new(e||k)(u.Y(h.s),u.Y(m.SB),u.Y(x.J))},k.ɵcmp=g.Xp({type:k,selectors:[["data-template-node"]],standalone:!0,features:[v.q,f.j],decls:25,vars:26,consts:[[3,"parent","destroySubject","name"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"input"],["name","template",3,"parentCoordiantes","zoomLevel","parent"],["name","data",3,"parentCoordiantes","zoomLevel","parent"],[1,"outputs"],[1,"output"],["name","output",3,"parentCoordiantes","zoomLevel","parent"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"click"]],template:function(e,t){1&e&&(y._U(0,"relations-node-header",0),C.AL(1,"firstUppercaseLocalize"),y.Tg(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),y._U(6,"relation-node-input",5),y.Tg(7,"div"),M._(8),C.AL(9,"firstUppercaseLocalize"),y.qZ()(),y.Tg(10,"div",4),y._U(11,"relation-node-input",6),y.Tg(12,"div"),M._(13),C.AL(14,"firstUppercaseLocalize"),y.qZ()()(),y.Tg(15,"div",7)(16,"div",8)(17,"div"),M._(18),C.AL(19,"firstUppercaseLocalize"),y.qZ(),y._U(20,"relation-node-output",9),y.qZ()()(),y.Tg(21,"button",10),w.N("click",(function(){return t.showCodeEditor()})),y.Tg(22,"span"),M._(23),C.AL(24,"firstUppercaseLocalize"),y.qZ()()()),2&e&&(b.Q("parent",t)("destroySubject",t.destroySubject)("name",C.lc(1,16,"data template")),E.x(6),b.Q("parentCoordiantes",t.nodePosition)("zoomLevel",t.zoomLevel)("parent",t),E.x(2),L.Oq(C.lc(9,18,"template")),E.x(3),b.Q("parentCoordiantes",t.nodePosition)("zoomLevel",t.zoomLevel)("parent",t),E.x(2),L.Oq(C.lc(14,20,"data")),E.x(5),L.Oq(C.lc(19,22,"output")),E.x(2),b.Q("parentCoordiantes",t.nodePosition)("zoomLevel",t.zoomLevel)("parent",t),E.x(3),L.Oq(C.lc(24,24,"template")))},dependencies:[a.e,s.P,r.n,o.R],encapsulation:2,changeDetection:0});class z{constructor(){this.metaInfo={name:"Data template",description:"Renders data into template",group:"Data"},this.nodeDefinition=k,Object.freeze(this)}}},71309:(e,t,n)=>{n.d(t,{I:()=>D});var o=n(16311),i=n(15554),a=n(5549),s=n(97710),r=n(94353),d=n(45473),l=n(78581),c=n(21179),p=n(71325),u=n(38459),h=n(31246),m=n(55640),g=n(23527),v=n(69553),f=n(58328),y=n(79077),C=n(7199),M=n(58654);(0,C.yJ)((e=>{(0,C.fp)(e.ngDynamicMonacoPath)&&(e.ngDynamicMonacoPath="dist")})),self.MonacoEnvironment={getWorkerUrl:function(e,t){return"json"===t?"dist/json.worker.js":"css"===t||"scss"===t||"less"===t?"dist/css.worker.js":"html"===t||"handlebars"==t?"dist/html.worker.js":"typescript"===t||"javascript"===t?"dist/ts.worker.js":"dist/editor.worker.js"}};const w={target:M.Mj.typescript.ScriptTarget.ES2020,module:M.Mj.typescript.ModuleKind.CommonJS,moduleResolution:M.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noEmitOnError:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:M.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};M.Mj.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),M.Mj.typescript.typescriptDefaults.setCompilerOptions(w);var b=n(8530),E=n(28539);function L(e,t,n,o,i,a,s){try{var r=e[a](s),d=r.value}catch(e){return void n(e)}r.done?t(d):Promise.resolve(d).then(o,i)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){L(a,o,i,s,r,"next",e)}function r(e){L(a,o,i,s,r,"throw",e)}s(void 0)}))}}class j{constructor(e){this.element=e,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new y.v,this.contentChange=new y.v}ngOnChanges(e){(0,C.$0)("languageModel")in e&&this.languageModel&&(0,C.$0)("content")in e&&(0,C.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){var e=this;return x((function*(){e.openedFile&&e.codeEditor&&e.languageModel&&e.save.emit({content:e.openedFile.getValue(),code:yield e.languageModel.compiledCode(e.codeEditor)})}))()}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){var e=this;this.codeEditor=M.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},bracketPairColorization:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(M.DC.CtrlCmd|M.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent(x((function*(){e.openedFile&&e.languageModel&&e.codeEditor&&e.contentChange.emit({content:e.openedFile.getValue(),code:yield e.languageModel.compiledCode(e.codeEditor)})})))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,C.fp)(this.content)&&(this.openedFile=M.j6.createModel((this.content||this.languageModel.initialData)??"",this.languageModel.language,M.Sf.file(`file:///index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}j.monacoInit=!0,j.ɵfac=function(e){return new(e||j)(i.Y(b.SB))},j.ɵcmp=a.Xp({type:j,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[E.T],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0});var k=n(63375);function z(e,t,n,o,i,a,s){try{var r=e[a](s),d=r.value}catch(e){return void n(e)}r.done?t(d):Promise.resolve(d).then(o,i)}class D{constructor(e,t){this.data=e,this.dialog=t,this.editorContent=null}saveAndClose(e){var t,n=this;return(t=function*(){yield e.saveContent(),n.dialog.close(n.editorContent)},function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(e){z(a,o,i,s,r,"next",e)}function r(e){z(a,o,i,s,r,"throw",e)}s(void 0)}))})()}}D.ɵfac=function(e){return new(e||D)(i.Y(o.m),i.Y(v.s))},D.ɵcmp=a.Xp({type:D,selectors:[["code-editor-dialog"]],decls:11,vars:9,consts:[[2,"height","calc(70vh - 46px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"dynamic-flex-row","dynamic-flex-end","dynamic-action-buttons"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-primary",3,"click"]],template:function(e,t){if(1&e){const e=s.E();r.Tg(0,"code-editor",0,1),d.N("save",(function(e){return t.editorContent=e})),r.qZ(),r.Tg(2,"div",2)(3,"button",3)(4,"span"),l._(5),c.AL(6,"firstUppercaseLocalize"),r.qZ()(),r.Tg(7,"button",4),d.N("click",(function(){p.CH(e);const n=u.M(1);return p.Kt(t.saveAndClose(n))})),r.Tg(8,"span"),l._(9),c.AL(10,"firstUppercaseLocalize"),r.qZ()()()}2&e&&(h.Q("content",t.data.content)("languageModel",t.data.languageModel),m.x(3),h.Q("mat-dialog-close",null),m.x(2),g.Oq(c.lc(6,5,"cancel")),m.x(4),g.Oq(c.lc(10,7,"ok")))},dependencies:[f.ZT,j,k.R],encapsulation:2,changeDetection:0})},69784:(e,t,n)=>{n.d(t,{d:()=>o});const o=new(n(53136).y)("handlebars","hbs",(e=>e.getModel()?.getValue()??""))},53136:(e,t,n)=>{n.d(t,{y:()=>o});class o{constructor(e,t,n,o){this.language=e,this.extension=t,this.compiledCode=n,this.initialData=o}}}}]);
//# sourceMappingURL=3627.chunk.bacd4f8ad3f652394add.js.map