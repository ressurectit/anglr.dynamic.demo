(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[8320],{24405:(e,t,n)=>{var i={"./styleBlock/type":[1571,8284,3110]};function r(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(r)))}r.keys=()=>Object.keys(i),r.id=24405,e.exports=r},15033:(e,t,n)=>{var i={"./checkbox/type":[32363,1752,2363],"./datepicker/type":[18915,7817,1795,7322,8030,2375,8915],"./expansionPanel/type":[46560,2424,2475],"./numberField/type":[81388,7817,7322,2375,1388],"./period/type":[69876,7817,7322,2375,9876],"./radio/type":[74447,2351,4447],"./select/type":[47594,7817,851,2375,7594],"./tab/type":[52027,1209,2027],"./tabGroup/type":[37861,1209,7861],"./textField/type":[80516,7817,7322,2375,516],"./textarea/type":[2556,7817,7322,2375,2556]};function r(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(r)))}r.keys=()=>Object.keys(i),r.id=15033,e.exports=r},37185:(e,t,n)=>{"use strict";n.d(t,{I3:()=>g,vQ:()=>f,WH:()=>y,El:()=>v});var i=n(68339),r=n(41842),a=n(83762),o=n(95127),s=n(32779),d=n(85086);function c(e,t,n,i,r,a,o){try{var s=e[a](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,r)}class l{constructor(e){this._logger=e}tryToGet(e){var t,i=this;return(t=function*(){if("css-components"!==e.package)return null;try{return i._logger?.debug("CssDynamicModuleItemsProvider: trying to get item {{@item}}",{item:{name:e.name,package:e.package}}),yield n(24405)(`./${e.name}/type`)}catch(t){i._logger?.debug("CssDynamicModuleItemsProvider: item {{@item}} was not found, reason: "+t,{item:{name:e.name,package:e.package}})}return null},function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function o(e){c(a,i,r,o,s,"next",e)}function s(e){c(a,i,r,o,s,"throw",e)}o(void 0)}))})()}}function p(e,t,n,i,r,a,o){try{var s=e[a](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,r)}l.ɵfac=function(e){return new(e||l)(s.LF(o.bZ,8))},l.ɵprov=d.Yz({token:l,factory:l.ɵfac});class u{constructor(e){this._logger=e}tryToGet(e){var t,i=this;return(t=function*(){try{return i._logger?.debug("CssDynamicModuleTypesProvider: trying to get types for module {{@module}}",{module:{moduleName:e.package}}),"css-components"===e.package?yield n.e(4396).then(n.bind(n,64396)):null}catch(t){i._logger?.debug("CssDynamicModuleTypesProvider: module {{@module}} was not found, reason: "+t,{module:{moduleName:e.package}})}return null},function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function o(e){p(a,i,r,o,s,"next",e)}function s(e){p(a,i,r,o,s,"throw",e)}o(void 0)}))})()}}u.ɵfac=function(e){return new(e||u)(s.LF(o.bZ,8))},u.ɵprov=d.Yz({token:u,factory:u.ɵfac});const h={provide:r.Aw,useClass:l,multi:!0},m={provide:a.sc,useClass:u,multi:!0};function g(){return[h]}function f(){return[h,m,(0,i.XW)("css-components")]}function v(){return[...g()]}function y(){return[...g()]}},35981:(e,t,n)=>{"use strict";n.d(t,{y:()=>a});var i=n(5290),r=n(85086);class a extends i.L{constructor(){super("LAYOUT_PACKAGES_STORE")}}a.ɵfac=function(e){return new(e||a)},a.ɵprov=r.Yz({token:a,factory:a.ɵfac})},18910:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ht});var i=n(58853),r=n(93002),a=n(27398),o=n(10134),s=n(65206),d=n(44508),c=n(26843),l=n(73943),p=n(25689),u=n(97881),h=n(95127),m=n(32779),g=n(83762),f=n(85410);class v{constructor(){this._defaultsOverride=(0,m.f3)(g.An,{optional:!0})}transform(e){return{metadata:{id:"",displayName:this._defaultsOverride?.getDisplayName(e.itemSource.package,e.itemSource.name)||"",package:e.itemSource.package,name:e.itemSource.name,options:(0,l.l7)(!0,{},this._defaultsOverride?.getOptions(e.itemSource.package,e.itemSource.name,e.metadata.metaInfo?.defaultOptions)??e.metadata.metaInfo?.defaultOptions)},parentId:null,index:null}}}v.ɵfac=function(e){return new(e||v)},v.ɵpipe=f.Yj({name:"toLayoutDragData",type:v,pure:!0,standalone:!0});var y=n(53289),b=n(88809),w=n(13315),D=n(95741),C=n(67942),P=n(57284),x=n(13757),I=n(88731),E=n(43335),T=n(32603),S=n(46430),k=n(10065),M=n(52622),O=n(80033),A=n(49276),L=n(56949),_=n(78190),R=n(5290),Y=n(87003),N=n(4539),z=n(22517),j=n(62708),Z=n(52038),q=n(25413),F=n(99114),U=n(67166),Q=n(83602),$=n(5059);let G;class V{constructor(e,t,n,i,r){this.dnd=e,this.paletteItemElement=t,this.draggingSvc=n,this.bus=i,this.zone=r,this.initSubscriptions=new p.w0,this.itemDrop=new Z.v,this.drag=this.dnd.dragSource("METADATA",{beginDrag:()=>{this.draggingSvc.setDragging(!0);const e=(0,l.l7)(!0,{},this.dragData);if(e.metadata){const t=(0,l.Ox)(16),n=`${e.metadata.name}-${t}`;e.metadata.id=n,e.metadata.displayName=e?.metadata.displayName&&""!=e?.metadata.displayName?`${e?.metadata.displayName}-${t}`:n}return{dragData:e}},endDrag:e=>{if(e.didDrop()){const t=e.getItem(),n=e.getDropResult();if(!t)return;t.dragData.index=n.index,this.bus.setDropData({data:t.dragData,id:n.id}),this.itemDrop.emit()}this.bus.setDropPlaceholderPreview(null),this.draggingSvc.setDragging(!1)}},this.initSubscriptions),this.connectDragToItem()}ngOnInit(){if(!this.dragData)throw new Error("DndCoreDesignerDirective: missing drag data!")}ngOnChanges(e){(0,l.$0)("customDragType")in e&&((0,l.fp)(this.customDragType)||this.drag.setType(this.customDragType))}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.itemConnection?.unsubscribe(),this.itemConnection=null,this.dragPreviewConnection?.unsubscribe(),this.dragPreviewConnection=null,this.drag.unsubscribe()}connectDragToItem(){this.zone.runOutsideAngular((()=>{this.itemConnection?.unsubscribe(),this.itemConnection=this.drag.connectDragSource(this.paletteItemElement.nativeElement,{dropEffect:"copy"}),this.dragPreviewConnection=this.drag.connectDragPreview((G||(G=new Image,G.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),G))}))}}function X(e,t,n,i,r,a,o){try{var s=e[a](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,r)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){X(a,i,r,o,s,"next",e)}function s(e){X(a,i,r,o,s,"throw",e)}o(void 0)}))}}function H(e,t){if(1&e&&(b.Tg(0,"div",8),w._(1),D.AL(2,"firstUppercaseLocalize"),b.qZ()),2&e){const e=C.o().$implicit;P.x(1),x.Oq(D.lc(2,1,null==e.metadata.metaInfo?null:e.metadata.metaInfo.description))}}function K(e,t){if(1&e){const e=I.E();b.Tg(0,"div",4)(1,"div",5),E.N("itemDrop",(function(){T.CH(e);const t=C.o(2);return T.Kt(t.refreshPipe=!t.refreshPipe)})),D.AL(2,"toLayoutDragData"),b.Tg(3,"div",6),w._(4),D.AL(5,"firstUppercaseLocalize"),b.qZ(),S.Y(6,H,3,3,"div",7),b.qZ()()}if(2&e){const e=t.$implicit;let n,i;P.x(1),k.Q("dndCorePaletteItem",D.lc(2,4,e))("customDragType",null==e.metadata.customDragType||null==(n=e.metadata.customDragType())?null:n.layout),P.x(3),x.Oq(D.lc(5,6,null!==(i=null==e.metadata.metaInfo?null:e.metadata.metaInfo.name)&&void 0!==i?i:e.itemSource.name)),P.x(2),k.Q("ngIf",null==e.metadata.metaInfo?null:e.metadata.metaInfo.description)}}function J(e,t){if(1&e&&(M.yn(0),b.Tg(1,"div",2),w._(2),D.AL(3,"firstUppercaseLocalize"),b.qZ(),S.Y(4,K,7,8,"div",3),M.BQ()),2&e){const e=t.$implicit;P.x(2),x.hi("",D.lc(3,2,e.key)," "),P.x(2),k.Q("ngForOf",e.value)}}V.ɵfac=function(e){return new(e||V)(O.Y(U.f),O.Y(q.SB),O.Y(Q.z),O.Y($.E),O.Y(F.R0))},V.ɵdir=f.lG({type:V,selectors:[["","dndCorePaletteItem",""]],inputs:{dragData:["dndCorePaletteItem","dragData"],customDragType:"customDragType"},outputs:{itemDrop:"itemDrop"},features:[L.T]});class W{get usedPackages(){return this.packages??this.packageManager.usedPackages}constructor(e,t,n,i,r,a){this.moduleTypesLoader=e,this.changeDetector=t,this.packageManager=n,this.metadataExtractor=i,this._refreshObservables=r,this.logger=a,this.initSubscriptions=new p.w0,this.allItems=[],this.whiteListedPackages=[],this.groupedItems={},this.refreshPipe=!1}ngOnInit(){var e=this;return B((function*(){if(e.initSubscriptions.add(e.packageManager.usedPackagesChange.subscribe((()=>e.initItems()))),e._refreshObservables&&Array.isArray(e._refreshObservables))for(const t of e._refreshObservables)e.initSubscriptions.add(t.subscribe((()=>e.initItems())));yield e.initItems()}))()}ngOnChanges(e){var t=this;return B((function*(){if((0,l.$0)("whiteList")in e&&(t.whiteListedPackages=[],Array.isArray(t.whiteList)))for(const e of t.whiteList)t.whiteListedPackages.find((t=>t==e.package))||t.whiteListedPackages.push(e.package);((0,l.$0)("whiteList")in e||(0,l.$0)("blackList")in e||(0,l.$0)("packages")in e)&&(yield t.initItems())}))()}ngOnDestroy(){this.initSubscriptions.unsubscribe()}initItems(){var e=this;return B((function*(){var t;e.groupedItems={},e.allItems=[];for(const t of e.usedPackages){const n=(yield e.moduleTypesLoader.loadItem({package:t,name:"types"}))?.data??[];for(const i of n){if(e.whiteListedPackages.find((e=>t==e))){if(!e.whiteList?.find((e=>e.package==t&&e.name==i)))continue}else if(e.blackList?.find((e=>e.package==t&&e.name==i)))continue;const n={package:t,name:i},r=yield e.metadataExtractor.extractMetadata(n);r?e.allItems.push({itemSource:n,metadata:r}):e.logger?.warn("ComponentsPaletteSAComponent: Failed to obtain layout editor metadata {{@source}}",{source:n})}}e.groupedItems[""]=[];for(const n of e.allItems){const i=n.metadata.metaInfo?.group??"";(t=e.groupedItems)[i]??(t[i]=[]),e.groupedItems[i].push(n)}e.changeDetector.detectChanges()}))()}}W.ɵfac=function(e){return new(e||W)(O.Y(g.QT),O.Y(A.s),O.Y(R.L),O.Y(Y.T),O.Y(g.dK,8),O.Y(h.bZ,8))},W.ɵcmp=f.Xp({type:W,selectors:[["components-palette"]],inputs:{packages:"packages",whiteList:"whiteList",blackList:"blackList"},standalone:!0,features:[L.T,_.j],decls:3,vars:3,consts:[[1,"dynamic-flex-column"],[4,"ngFor","ngForOf"],[1,"dynamic-text-spread","dynamic-text-small-caps","dynamic-margin-left-extra-small","dynamic-margin-horizontal-small","dynamic-bold"],["class","palette-droplist",4,"ngFor","ngForOf"],[1,"palette-droplist"],[1,"editor-component","mat-elevation-z2",3,"dndCorePaletteItem","customDragType","itemDrop"],[1,"editor-component-name"],["class","editor-component-description",4,"ngIf"],[1,"editor-component-description"]],template:function(e,t){1&e&&(b.Tg(0,"div",0),S.Y(1,J,5,4,"ng-container",1),D.AL(2,"keyvalue"),b.qZ()),2&e&&(P.x(1),k.Q("ngForOf",D.lc(2,1,t.groupedItems)))},dependencies:[i.e,N.sg,z.O,j.N,y.N,V,v,s.R],encapsulation:2,changeDetection:0}),(0,u.gn)([(0,l.CY)(10),(0,l.Sw)(),(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[]),(0,u.w6)("design:returntype",Promise)],W.prototype,"initItems",null);var ee=n(31530),te=n(24702),ne=n(38248),ie=n(93253),re=n(24296),ae=n(20570),oe=n(3717),se=n(77217),de=n(26116),ce=n(66898),le=n(3101),pe=n(96189),ue=n(61923),he=n(16301),me=n(37484),ge=n(39085),fe=n(82619),ve=n(72435),ye=n(38933);const be="TREE_COMPONENT";class we{get metadata(){if(!this.dragData.metadata)throw new Error("DndCoreTreeItemDirective: invalid drag data without metadata!");return this.dragData.metadata}get canDrop(){return this.manager.getComponent(this.metadata.id)?.canDrop??!1}constructor(e,t,n,i,r,a,o,s){this.dnd=e,this.designerElement=t,this.draggingSvc=n,this.manager=i,this.bus=r,this.zone=a,this.injector=o,this.document=s,this.ngZone=(0,m.f3)(F.R0),this.initSubscriptions=new p.w0,this.dragDisabled=!1,this.dropMetadata=new Z.v,this.placeholderDrop=this.dnd.dropTarget(be,{canDrop:()=>!0,drop:e=>{const t=e.getItem();let n=this.bus.dropPlaceholderPreviewIndex;return t&&(0,l.EN)(t.dragData.index)&&(0,l.EN)(n)&&n>t.dragData.index&&n--,{index:n,id:this.metadata?.id}}},this.initSubscriptions),this.containerDrop=this.dnd.dropTarget(be,{canDrop:e=>this.canDropAncestors(this.metadata.id,e.getItem()?.dragData.metadata?.id)[0]&&e.isOver({shallow:!0}),drop:e=>{const[t,n]=this.getFixedDropCoordinates(e,!1);return{index:t,id:n}},hover:e=>{if(e.isOver({shallow:!0})){const[t,n]=this.getDropCoordinates(e,!1);if((0,l.fp)(t)||(0,l.fp)(n))return;this.bus.setDropPlaceholderPreview({index:t,parentId:n,placeholder:{height:0,width:0}})}}},this.initSubscriptions),this.drag=this.dnd.dragSource(be,{beginDrag:()=>(this.draggingSvc.setDragging(!0),this.designerElement.nativeElement.classList.add("is-dragged"),{dragData:this.dragData}),canDrag:()=>!this.dragDisabled,endDrag:e=>{if(this.designerElement.nativeElement.classList.remove("is-dragged"),e.didDrop()){const t=e.getItem(),n=e.getDropResult();if(!t)return;t.dragData.index=n.index,this.bus.setDropData({data:t.dragData,id:n.id})}this.bus.setDropPlaceholderPreview(null),this.draggingSvc.setDragging(!1)}},this.initSubscriptions),this.dropzone=this.dnd.dropTarget(be,{canDrop:e=>(this.canDrop&&!this.hasAncestor(this.metadata.id,e.getItem()?.dragData.metadata?.id)||this.canDropAncestors(this.metadata.id,e.getItem()?.dragData.metadata?.id)[0])&&e.isOver({shallow:!0}),drop:e=>{const[t,n]=this.getFixedDropCoordinates(e,this.canDrop);return{index:t,id:n}},hover:e=>{if(e.isOver({shallow:!0})&&(this.manager.dragOverComponent(this.metadata.id),e.canDrop())){const[t,n]=this.getDropCoordinates(e,this.canDrop);if((0,l.fp)(t)||(0,l.fp)(n))return;this.bus.setDropPlaceholderPreview({index:t,parentId:n,placeholder:{height:0,width:0}})}}},this.initSubscriptions),this.connectDropToContainer()}ngOnInit(){const e=this.manager.getComponent(this.metadata.id);if(e?.editorMetadata?.customDragType){const t=e.editorMetadata.customDragType();this.drag.setType(t.tree)}if(e?.editorMetadata?.customDropTypes){const t=e.editorMetadata.customDropTypes();this.dropzone.setTypes(t.tree),this.placeholderDrop.setTypes(t.tree)}if(!this.dropzoneElement)throw new Error("DndCoreDesignerDirective: missing dropzone element!");if(!this.containerElement)throw new Error("DndCoreDesignerDirective: missing container element!");if(!this.dragData)throw new Error("DndCoreDesignerDirective: missing drag data!");this.initSubscriptions.add(this.bus.dropDataChange.pipe((0,ye.h)((e=>e.id===this.metadata.id))).subscribe((e=>{this.ngZone.run((()=>this.dropMetadata.emit(e.data)))}))),this.initSubscriptions.add(this.bus.oldDropPlaceholderPreviewChange.pipe((0,ye.h)((e=>e.parentId===this.metadata.id))).subscribe((()=>{this.ngZone.run((()=>{this.placeholderPreviewElement?.remove(),this.placeholderPreviewElement=null}))}))),this.initSubscriptions.add(this.bus.newDropPlaceholderPreviewChange.pipe((0,ye.h)((e=>e.parentId===this.metadata.id))).subscribe((e=>{this.ngZone.run((()=>this.showPlaceholderPreview(e)))})))}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.placeholderConnection?.unsubscribe(),this.placeholderConnection=null,this.containerConnection?.unsubscribe(),this.containerConnection=null,this.drag.unsubscribe(),this.dropzone.unsubscribe(),this.placeholderDrop.unsubscribe(),this.containerDrop.unsubscribe()}getDropCoordinates(e,t){if(t)return this.getDropCoordinatesForChildren(e);const[n,i,r]=this.canDropAncestors(this.metadata.id,e.getItem()?.dragData.metadata?.id);if(!n||(0,l.fp)(i))return[null,null];const a=this.manager.getComponent(i),o=this.manager.getComponent(r)?.index??0,s=e.getItem();return s&&(0,l.EN)(s.dragData.index)&&s.dragData.metadata?.id===this.metadata.id?[s.dragData.index,s.dragData.parentId??""]:a?[o+this.getIndexIncrement(e),i]:[null,null]}getDropCoordinatesForChildren(e){const t=e=>{const t=e.children[0]?.getBoundingClientRect(),n=t?.y;return n+t?.height/2};if(!this.containerElement)return[null,null];let n=0;const i=e.getClientOffset();if(!i)return[null,null];const r=i.y;for(let e=0;e<this.containerElement.children.length;e++){const i=this.containerElement.children[e];if(!i.classList.contains("drag-placeholder")){if(r<=t(i))return[n,this.metadata.id];n++}}return[n,this.metadata.id]}getFixedDropCoordinates(e,t){const[n,i]=this.getDropCoordinates(e,t);let r=n;const a=e.getItem();return a&&(0,l.EN)(r)&&(0,l.EN)(a.dragData.index)&&i===a.dragData.parentId&&r>a.dragData.index&&r--,[r,i]}getIndexIncrement(e){const t=this.dropzoneElement.getBoundingClientRect(),n=e.getClientOffset();return n?n.y-t.y<=t.height/2?0:1:0}showPlaceholderPreview(e){this.containerElement&&(this.placeholderPreviewElement??(this.placeholderPreviewElement=this.document.createElement("div")),this.placeholderPreviewElement.classList.add("drag-placeholder"),this.placeholderPreviewElement.remove(),this.connectDropToPlaceholder(),this.containerElement.insertBefore(this.placeholderPreviewElement,this.containerElement.children[e.index]))}connectDropToPlaceholder(){this.zone.runOutsideAngular((()=>{this.placeholderConnection?.unsubscribe(),this.placeholderPreviewElement&&(this.placeholderConnection=this.placeholderDrop.connectDropTarget(this.placeholderPreviewElement))}))}connectDropToContainer(){this.zone.runOutsideAngular((()=>{this.containerConnection?.unsubscribe(),this.containerConnection=this.containerDrop.connectDropTarget(this.designerElement.nativeElement)}))}canDropAncestors(e,t){(0,l.fp)(e)&&(e=this.metadata.id);const n=this.manager.getComponentDef(e);return!n?.parent||(0,l.EN)(t)&&this.hasAncestor(n.component.id,t)?[!1,null,e]:n.parent.component.canDrop?[!0,n.parent.component.id,e]:this.canDropAncestors(n.parent.component.id,t)}hasAncestor(e,t){if(!t)return!1;const n=this.manager.getComponentDef(e);return n?.component?.id===t||!!n?.parent&&this.hasAncestor(n.parent.component?.id,t)}}function De(e,t,n,i,r,a,o){try{var s=e[a](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,r)}function Ce(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Ce=function(e){this.s=e,this.n=e.next},Ce.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Ce(e)}function Pe(e,t){if(1&e&&b._U(0,"span",10),2&e){const e=C.o();k.Q("ngClass",e.open?"fa-chevron-down":"fa-chevron-right")}}function xe(e,t){if(1&e&&(b.Tg(0,"div",11),b._U(1,"components-tree-item",12),b.qZ()),2&e){const e=t.$implicit,n=t.index,i=C.o();P.x(1),k.Q("data",e)("parentId",null==i.data?null:i.data.id)("index",n)}}we.ɵfac=function(e){return new(e||we)(O.Y(U.f),O.Y(q.SB),O.Y(Q.z),O.Y(ue.t),O.Y($.E),O.Y(F.R0),O.Y(ee.z),O.Y(ve.K))},we.ɵdir=f.lG({type:we,selectors:[["","dndCoreTreeItem",""]],inputs:{dropzoneElement:"dropzoneElement",containerElement:"containerElement",dragData:["dndCoreTreeItem","dragData"],dragDisabled:"dragDisabled"},outputs:{dropMetadata:"dropMetadata"},exportAs:["dndCoreTreeItem"]}),(0,u.gn)([l.ru,(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[Object]),(0,u.w6)("design:returntype",void 0)],we.prototype,"showPlaceholderPreview",null);const Ie=(e,t,n)=>({metadata:e,parentId:t,index:n});class Ee{get hasChildren(){return!!this.children&&this.children.length>0}get dragDisabled(){return!this.parentId||!this.data||!0===this.manager.getComponent(this.data.id)?.dragDisabled}constructor(e,t,n,i){this.manager=e,this.changeDetector=t,this.draggingSvc=n,this.iteratorSvc=i,this.initSubscriptions=new p.w0,this.children=[],this.injector=(0,m.f3)(ee.z),this.index=0,this.open=!0}ngOnInit(){this.initSubscriptions.add(this.manager.layoutChange.subscribe((()=>{this.initChildren()}))),this.initSubscriptions.add((0,te.D)(this.manager.selectedComponent,{injector:this.injector}).pipe((0,ie.T)(1)).subscribe((()=>{this.changeDetector.detectChanges()}))),this.initSubscriptions.add((0,te.D)(this.manager.highlightedComponent,{injector:this.injector}).pipe((0,ie.T)(1)).subscribe((()=>this.changeDetector.detectChanges()))),this.initSubscriptions.add((0,te.D)(this.manager.draggedOverComponent,{injector:this.injector}).pipe((0,ie.T)(1)).subscribe((()=>this.handleDragOver()))),this.initSubscriptions.add(this.manager.displayNameChange.subscribe((()=>this.changeDetector.detectChanges()))),this.initChildren()}ngOnDestroy(){this.initSubscriptions.unsubscribe()}toggle(){this.open=!this.open}expand(e){if(!e)return this.open=!0,!0;if(this.data?.id===e)return!0;if(this.hasChildren)for(const t of this.childrenNodes?.toArray())if(t.expand(e))return this.expand(),!0;return!1}addDescendant(e){this.data&&this.manager.getComponent(this.data.id)?.addDescendant(e)}expandAll(){this.childrenNodes?.forEach((e=>e.expandAll())),this.expand(),this.changeDetector.detectChanges()}collapse(){this.open=!1}collapseAll(){this.childrenNodes?.forEach((e=>e.collapseAll())),this.collapse(),this.changeDetector.detectChanges()}initChildren(){var e,t=this;return(e=function*(){if(t.children=[],t.data){var e,n=!1,i=!1;try{for(var r,a=function(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new Ce(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(t.iteratorSvc.getChildrenIteratorFor(t.data));n=!(r=yield a.next()).done;n=!1){const e=r.value;t.children.push(e.metadata)}}catch(t){i=!0,e=t}finally{try{n&&null!=a.return&&(yield a.return())}finally{if(i)throw e}}}t.changeDetector.detectChanges()},function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){De(a,i,r,o,s,"next",e)}function s(e){De(a,i,r,o,s,"throw",e)}o(void 0)}))})()}highlight(e,t){e.preventDefault(),e.stopPropagation(),this.manager.highlightComponent(t)}handleDragOver(){if(this.manager.draggedOverComponent()!=this.data?.id)return this.dragOverSubscription?.unsubscribe(),void(this.dragOverSubscription=null);this.open||(this.dragOverSubscription=(0,ae.H)(500).subscribe((()=>{this.expand(),this.changeDetector.detectChanges()})))}cancelHighlight(e){e.preventDefault(),e.stopPropagation(),this.manager.cancelHighlightedComponent()}}Ee.ɵfac=function(e){return new(e||Ee)(O.Y(ue.t),O.Y(A.s),O.Y(Q.z),O.Y(he.$))},Ee.ɵcmp=f.Xp({type:Ee,selectors:[["components-tree-item"]],viewQuery:function(e,t){if(1&e&&se.Gf(Ee,5),2&e){let e;se.iG(e=se.CR())&&(t.childrenNodes=e)}},hostBindings:function(e,t){1&e&&E.N("mouseleave",(function(e){return t.cancelHighlight(e)}))},inputs:{data:"data",index:"index",parentId:"parentId",open:"open"},exportAs:["componentsTreeItem"],standalone:!0,features:[_.j],decls:12,vars:23,consts:[[3,"dndCoreTreeItem","dropzoneElement","containerElement","dragDisabled","dragSource","noHTML5Preview","dropMetadata"],["dndCoreTree","dndCoreTreeItem","dropzone",""],[1,"designer-dropzone",3,"dropTarget"],[1,"flex","dynamic-align-items-center",3,"ngClass"],["type","button","mat-icon-button","",3,"disabled","click"],["class","fa",3,"ngClass",4,"ngIf"],[3,"mouseover","click"],[1,"node-children"],["childrenContainer",""],["class","node-child",4,"ngFor","ngForOf"],[1,"fa",3,"ngClass"],[1,"node-child"],[3,"data","parentId","index"]],template:function(e,t){if(1&e&&(b.Tg(0,"div",0,1),E.N("dropMetadata",(function(e){return t.addDescendant(e)})),b.Tg(3,"div",2)(4,"div",3)(5,"button",4),E.N("click",(function(){return t.toggle()})),S.Y(6,Pe,1,1,"span",5),b.qZ(),b.Tg(7,"div",6),E.N("mouseover",(function(e){return t.highlight(e,null==t.data?null:t.data.id)}))("click",(function(){return t.manager.selectComponent(null==t.data?null:t.data.id)})),w._(8),b.qZ()(),b.Tg(9,"div",7,8),S.Y(11,xe,2,3,"div",9),b.qZ()()()),2&e){const e=de.M(1),n=de.M(2),i=de.M(10);k.Q("dndCoreTreeItem",ce.kE(19,Ie,t.data,t.parentId,t.index))("dropzoneElement",n)("containerElement",i)("dragDisabled",t.dragDisabled)("dragSource",e.drag)("noHTML5Preview",!0),P.x(3),k.Q("dropTarget",e.dropzone),P.x(1),k.Q("ngClass",t.hasChildren?"nested-node-tree":"node-tree"),P.x(1),k.Q("disabled",!t.hasChildren),le.u("aria-label","Toggle"),P.x(1),k.Q("ngIf",t.hasChildren),P.x(1),pe.ek("selected",(null==t.data?null:t.data.id)===t.manager.selectedComponent())("highlighted",(null==t.data?null:t.data.id)===t.manager.highlightedComponent()),P.x(1),x.Oq((null==t.data?null:t.data.displayName)||(null==t.data?null:t.data.id)),P.x(1),pe.ek("hidden",!t.open),P.x(2),k.Q("ngForOf",t.children)}},dependencies:[Ee,i.e,me.m,N.sg,z.O,ne.o,ge.R,re.c8,fe.$d,fe.Li,y.N,we,oe.c],encapsulation:2,changeDetection:0}),(0,u.gn)([(0,l.CY)(10),(0,l.Sw)(),(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[]),(0,u.w6)("design:returntype",Promise)],Ee.prototype,"initChildren",null);var Te=n(80354);function Se(e,t){if(1&e){const e=I.E();b.Tg(0,"div",1)(1,"button",2),E.N("click",(function(){T.CH(e);const t=C.o();return T.Kt(null==t.rootTreeItem?null:t.rootTreeItem.collapseAll())})),D.AL(2,"firstUppercaseLocalize"),b._U(3,"span",3),b.qZ(),b.Tg(4,"button",2),E.N("click",(function(){T.CH(e);const t=C.o();return T.Kt(null==t.rootTreeItem?null:t.rootTreeItem.expandAll())})),D.AL(5,"firstUppercaseLocalize"),b._U(6,"span",4),b.qZ(),b._U(7,"components-tree-item",5),b.qZ()}if(2&e){const e=C.o();P.x(1),le.u("aria-label",D.lc(2,3,"collapse all")),P.x(3),le.u("aria-label",D.lc(5,5,"Expand all")),P.x(3),k.Q("data",e.root)}}class ke{constructor(e,t){this.manager=e,this.changeDetector=t,this.initSubscriptions=new p.w0,this.injector=(0,m.f3)(ee.z)}ngOnInit(){this.initSubscriptions.add(this.manager.layoutChange.subscribe((()=>{this.root=this.manager.getMetadata(),this.changeDetector.detectChanges()}))),this.initSubscriptions.add((0,te.D)(this.manager.selectedComponent,{injector:this.injector}).pipe((0,ie.T)(1)).subscribe((()=>{this.rootTreeItem?.expand(this.manager.selectedComponent()),this.changeDetector.detectChanges()}))),this.initSubscriptions.add((0,te.D)(this.manager.highlightedComponent,{injector:this.injector}).pipe((0,ie.T)(1)).subscribe((()=>this.changeDetector.detectChanges()))),this.initSubscriptions.add(this.manager.displayNameChange.subscribe((()=>this.changeDetector.detectChanges()))),this.root=this.manager.getMetadata()}ngOnDestroy(){this.initSubscriptions.unsubscribe()}}ke.ɵfac=function(e){return new(e||ke)(O.Y(ue.t),O.Y(A.s))},ke.ɵcmp=f.Xp({type:ke,selectors:[["components-tree"]],viewQuery:function(e,t){if(1&e&&se.Gf(Ee,5),2&e){let e;se.iG(e=se.CR())&&(t.rootTreeItem=e.first)}},standalone:!0,features:[Te._([Q.z,$.E]),_.j],decls:1,vars:1,consts:[["class","component-tree",4,"ngIf"],[1,"component-tree"],["type","button","mat-icon-button","",3,"click"],[1,"fa","fa-minus-square"],[1,"fa","fa-plus-square"],[3,"data"]],template:function(e,t){1&e&&S.Y(0,Se,8,7,"div",0),2&e&&k.Q("ngIf",t.root)},dependencies:[i.e,z.O,ne.o,ge.R,Ee,s.R],encapsulation:2,changeDetection:0});var Me=n(58418),Oe=n(14829),Ae=n(30626),Le=n(68339),_e=n(37071),Re=n(23382);class Ye{constructor(e,t,n){this.document=e,this.element=t,this.ngZone=n,this.lastXCoordinate=null,this.size=new Z.v}dragStart(e){this.ngZone.runOutsideAngular((()=>{this.document.addEventListener("mousemove",this.drag),this.document.addEventListener("mouseup",this.dragEnd)})),this.element.nativeElement.classList.add("hovering"),e.stopImmediatePropagation(),e.preventDefault(),this.lastXCoordinate=e.clientX}drag(e){(0,l.fp)(this.lastXCoordinate)||(this.size.emit(e.clientX-this.lastXCoordinate),e.stopImmediatePropagation(),e.preventDefault(),this.lastXCoordinate=e.clientX)}dragEnd(e){this.ngZone.runOutsideAngular((()=>{this.document.removeEventListener("mousemove",this.drag),this.document.removeEventListener("mouseup",this.dragEnd)})),this.element.nativeElement.classList.remove("hovering"),e.stopImmediatePropagation(),e.preventDefault(),this.lastXCoordinate=null}}Ye.ɵfac=function(e){return new(e||Ye)(O.Y(ve.K),O.Y(q.SB),O.Y(F.R0))},Ye.ɵdir=f.lG({type:Ye,selectors:[["","widthResizer",""]],hostBindings:function(e,t){1&e&&E.N("mousedown",(function(e){return t.dragStart(e)}))},outputs:{size:"size"},standalone:!0}),(0,u.gn)([l.ru,(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[MouseEvent]),(0,u.w6)("design:returntype",void 0)],Ye.prototype,"drag",null),(0,u.gn)([l.ru,(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[MouseEvent]),(0,u.w6)("design:returntype",void 0)],Ye.prototype,"dragEnd",null);var Ne=n(36273),ze=n(19684),je=n(17640),Ze=n(48049),qe=n(48074),Fe=n(24900),Ue=n(31400);function Qe(e,t,n,i,r,a,o){try{var s=e[a](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,r)}function $e(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){Qe(a,i,r,o,s,"next",e)}function s(e){Qe(a,i,r,o,s,"throw",e)}o(void 0)}))}}function Ge(e,t){if(1&e){const e=I.E();b.Tg(0,"div",1)(1,"button",2),E.N("click",(function(){T.CH(e);const t=C.o();return T.Kt(t.toggleCollapsed())})),b.Tg(2,"span",3),w._(3),D.AL(4,"firstUppercaseLocalize"),b.qZ()()()}2&e&&(P.x(3),x.Oq(D.lc(4,1,"properties")))}function Ve(e,t){if(1&e&&M.Gk(0,16),2&e){const e=t.$implicit,n=C.o().$implicit;k.Q("propertiesControl",e)("form",n.form)("propertiesMetadata",n.metadata)}}function Xe(e,t){if(1&e&&Ne.Sj(0,Ve,1,3,"ng-container",16,Ne.x6),2&e){const e=t.$implicit;Ne.wJ(e.controls)}}function Be(e,t){if(1&e&&(b.Tg(0,"div",10)(1,"div",11)(2,"label",12),w._(3),D.AL(4,"firstUppercaseLocalize"),b.qZ(),b.Tg(5,"div",13),w._(6),b.qZ(),b.Tg(7,"label",12),w._(8),D.AL(9,"firstUppercaseLocalize"),b.qZ(),b.Tg(10,"div",13),w._(11),b.qZ(),b.Tg(12,"label",12),w._(13),D.AL(14,"firstUppercaseLocalize"),b.qZ(),b._U(15,"input",14),b.qZ()(),b.Tg(16,"div",15),Ne.Sj(17,Xe,2,0,null,null,Ne.x6),b.qZ()),2&e){const e=C.o(2);let t;P.x(3),x.Oq(D.lc(4,6,"type")),P.x(3),x.Oq(null!==(t=null==e.metadata||null==e.metadata.metaInfo?null:e.metadata.metaInfo.name)&&void 0!==t?t:null==e.component.options||null==e.component.options.typeMetadata?null:e.component.options.typeMetadata.name),P.x(2),x.Oq(D.lc(9,8,"id")),P.x(3),x.Oq(null==e.component.options||null==e.component.options.typeMetadata?null:e.component.options.typeMetadata.id),P.x(2),x.Oq(D.lc(14,10,"display name")),P.x(2),k.Q("formControl",e.displayName),P.x(2),Ne.wJ(e.propertiesData)}}function He(e,t){if(1&e){const e=I.E();b.Tg(0,"div",4)(1,"div",5)(2,"div",6),w._(3),D.AL(4,"firstUppercaseLocalize"),b.qZ(),b.Tg(5,"button",7),E.N("click",(function(){T.CH(e);const t=C.o();return T.Kt(t.toggleCollapsed())})),b._U(6,"span",8),b.qZ()(),S.Y(7,Be,19,12),b.qZ(),b.Tg(8,"div",9),E.N("size",(function(t){T.CH(e);const n=C.o();return T.Kt(n.updateSize(t))})),b.qZ()}if(2&e){const e=C.o();pe.Ud("width",e.state.width,"px"),P.x(3),x.Oq(D.lc(4,4,"properties")),P.x(4),Ne.um(7,e.component?7:-1)}}const Ke="PROPERTIES_EDITOR_STATE";class Je{constructor(e,t,n,i,r,a,o,s,d){this.manager=e,this.metadataExtractor=t,this.propertyExtractor=n,this.formModelBuilder=i,this.changeDetector=r,this.layoutEditorRenderer=a,this.storage=o,this.history=s,this.logger=d,this.initSubscriptions=new p.w0,this.optionsFormSubscription=null,this.lastComponentId=null,this.lastComponent=null,this.injector=(0,m.f3)(ee.z),this.component=null,this.metadata=null,this.displayName=new Me.NI(null),this.propertiesData=[],this.state={opened:!1,width:350}}ngOnInit(){var e=this;return $e((function*(){const t=e.storage.get(Ke);t&&(e.state=t),e.initSubscriptions.add(e.manager.layoutChange.subscribe((()=>e.initProperties()))),e.initSubscriptions.add((0,te.D)(e.manager.selectedComponent,{injector:e.injector}).pipe((0,ie.T)(1)).subscribe((()=>e.initProperties()))),e.displayName.valueChanges.subscribe(function(){var t=$e((function*(t){if(e.component?.options?.typeMetadata&&(0,l.EN)(t)){e.component.options.typeMetadata.displayName=t;const n={};(0,Le.mv)(n,"options",e.component.options,e.component.options),e.component.options=e.component.options,yield e.component.dynamicOnChanges?.(n),e.component.invalidateVisuals(),e.manager.displayNameUpdated(),e.history.getNewState()}}));return function(e){return t.apply(this,arguments)}}()),yield e.initProperties()}))()}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.optionsFormSubscription?.unsubscribe(),this.optionsFormSubscription=null}toggleCollapsed(){this.state.opened=!this.state.opened,this.storage.set(Ke,this.state)}updateSize(e){this.state.width-=e,this.storage.set(Ke,this.state),this.changeDetector.detectChanges()}initProperties(){var e=this;return $e((function*(){const t=e.manager.selectedComponent();if((0,l.EN)(t)){const n=e.manager.getComponent(t);if(e.lastComponent==n&&e.lastComponentId==t)return;e.lastComponent=n,e.lastComponentId=t,n?(e.component=n,yield e.getMetadata()):e.hide()}else e.hide()}))()}getMetadata(){var e=this;return $e((function*(){if(e.optionsFormSubscription?.unsubscribe(),e.optionsFormSubscription=new p.w0,e.propertiesData=[],e.component?.options?.typeMetadata){if(e.displayName.setValue(e.component.options.typeMetadata.displayName||e.component.options.typeMetadata.id,{emitEvent:!1}),e.metadata=yield e.metadataExtractor.extractMetadata(e.component.options?.typeMetadata),e.metadata||(e.logger.error("PropertiesEditorSAComponent: unable to get metadata {{@source}}",{source:{package:e.component.options?.typeMetadata.package,name:e.component.options?.typeMetadata.name}}),e.hide()),e.metadata?.metaInfo?.optionsMetadata?.propertiesMetadata?.length)for(const t of e.metadata?.metaInfo?.optionsMetadata?.propertiesMetadata)e.initDynamicProperty(t);if(e.component){const t=e.manager.getParent(e.component.id);if(t?.options?.typeMetadata){const n=yield e.metadataExtractor.extractMetadata(t.options?.typeMetadata);if(n?.metaInfo?.optionsMetadata?.childPropertiesMetadata?.length)for(const t of n?.metaInfo?.optionsMetadata?.childPropertiesMetadata)e.initDynamicProperty(t)}}}else e.hide();e.changeDetector.detectChanges()}))()}hide(){this.lastComponent=null,this.lastComponentId=null,this.component=null,this.metadata=null,this.propertiesData=[],this.optionsFormSubscription?.unsubscribe(),this.optionsFormSubscription=null,this.changeDetector.detectChanges()}initDynamicProperty(e){var t=this;const n=this.formModelBuilder.build(new e.modelType(this.component?.options?.typeMetadata.options)),i=this.propertyExtractor.extract(e.modelType);this.optionsFormSubscription&&(this.optionsFormSubscription.add(n.valueChanges.subscribe(function(){var e=$e((function*(e){if(t.component?.options?.typeMetadata){const n=(0,l.l7)(!0,{},t.component.options.typeMetadata.options);if((0,l.l7)(t.component.options.typeMetadata.options,(0,l.l7)(!0,{},e)),(0,_e.Z)(n,t.component.options.typeMetadata.options))return;const i={};(0,Le.mv)(i,"options",t.component.options,t.component.options),yield t.component.dynamicOnChanges?.(i),t.component.invalidateVisuals();const r=t.layoutEditorRenderer.get(t.component.id);if(!r?.component)throw new Error("PropertiesEditorSAComponent: missing component!");const a={};(0,Le.mv)(a,"options",t.component.options.typeMetadata.options,t.component.options.typeMetadata.options),yield r.component.instance.dynamicOnChanges?.(a),r.component.instance.invalidateVisuals(),t.history.getNewState()}}));return function(t){return e.apply(this,arguments)}}())),this.propertiesData.push({form:n,metadata:i,controls:e.propertiesControls}))}}Je.ɵfac=function(e){return new(e||Je)(O.Y(ue.t),O.Y(Y.T),O.Y(ze.L),O.Y(Ae.p),O.Y(A.s),O.Y(je.e),O.Y(h.T0),O.Y(g.dB),O.Y(h.bZ))},Je.ɵcmp=f.Xp({type:Je,selectors:[["properties-editor"]],standalone:!0,features:[Te._([Ae.p]),_.j],decls:2,vars:1,consts:[["class","properties-toolbar"],[1,"properties-toolbar"],["type","button",1,"dynamic-btn-icon","props-buttons",3,"click"],[1,"dynamic-text-vertical"],[1,"properties-main"],[1,"header"],[1,"header-title"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-times"],["widthResizer","",1,"properties-resizer",3,"size"],[1,"static-properties"],[1,"properties-form-group"],[1,"properties-control-label"],[1,"properties-form-static"],["type","text",1,"properties-form-control",3,"formControl"],[1,"dynamic-thin-scrollbar","properties-controls"],[3,"propertiesControl","form","propertiesMetadata"]],template:function(e,t){1&e&&S.Y(0,Ge,5,3,"div",0)(1,He,9,6),2&e&&Ne.um(0,t.state.opened?1:0)},dependencies:[Oe.U,Ze.Fj,qe.JJ,Fe.o,Re.L,Ue._,Ye,s.R],encapsulation:2,changeDetection:0}),(0,u.gn)([(0,l.CY)(10),(0,l.Sw)(),(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[]),(0,u.w6)("design:returntype",Promise)],Je.prototype,"initProperties",null);class We{}We.ɵfac=function(e){return new(e||We)},We.ɵcmp=f.Xp({type:We,selectors:[["layout-editor-drag-preview"]],inputs:{layoutMetadata:"layoutMetadata"},standalone:!0,features:[_.j],decls:4,vars:2,consts:[[1,"dynamic-semi-bold"],[1,"dynamic-margin-left-extra-small","dynamic-small-text"]],template:function(e,t){1&e&&(b.Tg(0,"span",0),w._(1),b.qZ(),b.Tg(2,"span",1),w._(3),b.qZ()),2&e&&(P.x(1),x.Oq(null==t.layoutMetadata?null:t.layoutMetadata.name),P.x(2),x.hi("#",(null==t.layoutMetadata?null:t.layoutMetadata.displayName)||(null==t.layoutMetadata?null:t.layoutMetadata.id),""))},encapsulation:2,changeDetection:0});var et=n(35891),tt=n(85696);class nt{constructor(e){this.template=e}static ngTemplateContextGuard(e,t){return!0}}nt.ɵfac=function(e){return new(e||nt)(O.Y(tt.Rg))},nt.ɵdir=f.lG({type:nt,selectors:[["","dndCorePreviewTemplate",""]],inputs:{type:["dndCorePreviewTemplateType","type"]}});var it=n(26066);class rt{constructor(e,t){this.viewContainer=e,this.dnd=t,this.initSubscriptions=new p.w0}ngOnInit(){this.initSubscriptions.add(this.dnd.dragLayer(this.initSubscriptions).listen((e=>({dragging:e.isDragging(),item:e.getItem(),coordinates:e.getClientOffset(),type:e.getItemType()}))).subscribe((e=>{if(!e.dragging)return void this.removeDragPreview();if(!e.item)return;const t=e.type;["COMPONENT","METADATA"].indexOf(t)<0||(this.dragPreviewElement??(this.dragPreviewElement=this.renderDragPreview(e.item)),this.dragPreviewElement&&(this.dragPreviewElement.style.position="fixed",this.dragPreviewElement.style.top=`${e.coordinates?.y}px`,this.dragPreviewElement.style.left=`${e.coordinates?.x}px`,this.dragPreviewElement.style.zIndex="21312"))})))}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.removeDragPreview()}renderDragPreview(e){return this.dndCorePreviewTemplate?(this.dragPreviewView=this.viewContainer.createEmbeddedView(this.dndCorePreviewTemplate,{$implicit:e}),this.dragPreviewElement=this.dragPreviewView.rootNodes[0],this.dragPreviewView.detectChanges(),this.dragPreviewElement??null):null}removeDragPreview(){this.dragPreviewElement?.remove(),this.dragPreviewView?.destroy(),this.dragPreviewElement=null,this.dragPreviewView=null}}rt.ɵfac=function(e){return new(e||rt)(O.Y(it.s_),O.Y(U.f))},rt.ɵcmp=f.Xp({type:rt,selectors:[["dnd-core-drag-preview"]],contentQueries:function(e,t,n){if(1&e&&se.Su(n,nt,7,tt.Rg),2&e){let e;se.iG(e=se.CR())&&(t.dndCorePreviewTemplate=e.first)}},decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0});var at=n(15712),ot=n(64657),st=n(54068);class dt{transform(e){return(0,l.EN)(e)}static ɵfac=function(e){return new(e||dt)};static ɵpipe=f.Yj({name:"isPresent",type:dt,pure:!0,standalone:!0})}var ct=n(50093);function lt(e,t){1&e&&b._U(0,"package-manager")}function pt(e,t){1&e&&M.Gk(0)}function ut(e,t){if(1&e&&b._U(0,"layout-editor-drag-preview",7),2&e){const e=t.$implicit;k.Q("layoutMetadata",e.dragData.metadata)}}class ht{constructor(e,t,n){this.history=e,this.changeDetector=t,this.hotkeys=n,this.initSubscriptions=new p.w0,this.metadata=null,n?.init()}ngOnInit(){this.initSubscriptions.add(this.history.pop.subscribe((e=>{this.metadata=e,this.changeDetector.detectChanges()}))),this.hotkeys&&(this.initSubscriptions.add(this.hotkeys.undo.subscribe((()=>this.history.undo()))),this.initSubscriptions.add(this.hotkeys.redo.subscribe((()=>this.history.redo()))))}ngOnChanges(e){(0,l.$0)("metadata")in e&&(this.history.clean(),this.metadata&&this.history.setInitialState(this.metadata))}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.hotkeys?.destroy()}}ht.ɵfac=function(e){return new(e||ht)(O.Y(g.dB),O.Y(A.s),O.Y(et.z,8))},ht.ɵcmp=f.Xp({type:ht,selectors:[["layout-editor"]],inputs:{metadata:"metadata",packages:"packages",whiteList:"whiteList",blackList:"blackList"},standalone:!0,features:[Te._([$.E]),L.T,_.j],decls:17,vars:17,consts:[[1,"dynamic-flex-row","dynamic-margin-top-big","dynamic-flex-1"],[3,"label"],[4,"ngIf"],[3,"packages","whiteList","blackList"],[1,"dynamic-flex-1","layout-content","dynamic-thin-scrollbar"],[4,"layoutComponentRenderer"],["class","mat-elevation-z4",3,"layoutMetadata",4,"dndCorePreviewTemplate"],[1,"mat-elevation-z4",3,"layoutMetadata"]],template:function(e,t){1&e&&(b.Tg(0,"div",0)(1,"mat-tab-group")(2,"mat-tab",1),D.AL(3,"asRequired"),D.AL(4,"firstUppercaseLocalize"),b._U(5,"components-tree"),b.qZ(),b.Tg(6,"mat-tab",1),D.AL(7,"asRequired"),D.AL(8,"firstUppercaseLocalize"),S.Y(9,lt,1,0,"package-manager",2),D.AL(10,"isPresent"),b._U(11,"components-palette",3),b.qZ()(),b.Tg(12,"div",4),S.Y(13,pt,1,0,"ng-container",5),b.qZ(),b._U(14,"properties-editor"),b.qZ(),b.Tg(15,"dnd-core-drag-preview"),S.Y(16,ut,1,1,"layout-editor-drag-preview",6),b.qZ()),2&e&&(P.x(2),k.Q("label",D.lc(3,7,D.lc(4,9,"hierarchy"))),P.x(4),k.Q("label",D.lc(7,11,D.lc(8,13,"palette"))),P.x(3),k.Q("ngIf",!D.lc(10,15,t.packages)),P.x(2),k.Q("packages",t.packages)("whiteList",t.whiteList)("blackList",t.blackList),P.x(2),k.Q("layoutComponentRenderer",t.metadata))},dependencies:[ke,W,Je,y.N,rt,nt,We,a.i,c.F,at.X,r.N,ot.u,st.S,i.e,z.O,o.W,dt,s.R,d.A,ct.i],styles:["[_nghost-%COMP%]{display: flex;}"],changeDetection:0})},3717:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var i=n(25689),r=n(80033),a=n(25413),o=n(85410),s=n(83602);class d{constructor(e,t){this.draggingSvc=e,this.element=t,this.initSubscriptions=new i.w0,this.isDropZone=!1}ngOnInit(){this.initSubscriptions.add(this.draggingSvc.draggingChange.subscribe((()=>this.processDragValue())))}ngOnDestroy(){this.initSubscriptions.unsubscribe()}processDragValue(){setTimeout((()=>{this.draggingSvc.dragging&&this.isDropZone?this.element.nativeElement.classList.add("drag-active"):this.element.nativeElement.classList.remove("drag-active")}))}}d.ɵfac=function(e){return new(e||d)(r.Y(s.z),r.Y(a.SB))},d.ɵdir=o.lG({type:d,selectors:[["",8,"designer-dropzone"]],inputs:{isDropZone:"isDropZone"},standalone:!0})},83775:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var i=n(49353),r=n(18910),a=n(35516),o=n(85410),s=n(85086);class d{static withProviders(e=!0){return{ngModule:d,providers:[(0,a._T)(e)]}}}d.ɵfac=function(e){return new(e||d)},d.ɵmod=o.oA({type:d}),d.ɵinj=s.cJ({imports:[r.Z,i.u]})},53289:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});var i=n(85410),r=n(85086);class a{}a.ɵfac=function(e){return new(e||a)},a.ɵmod=i.oA({type:a}),a.ɵinj=r.cJ({})},5059:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});var i=n(15045),r=n(85086);class a{constructor(){this.dropDataChangeSubject=new i.x,this.dropPlaceholderPreview=null,this.newDropPlaceholderPreviewSubject=new i.x,this.oldDropPlaceholderPreviewSubject=new i.x}get dropDataChange(){return this.dropDataChangeSubject.asObservable()}get newDropPlaceholderPreviewChange(){return this.newDropPlaceholderPreviewSubject.asObservable()}get oldDropPlaceholderPreviewChange(){return this.oldDropPlaceholderPreviewSubject.asObservable()}get dropPlaceholderPreviewIndex(){return this.dropPlaceholderPreview?.index??null}setDropData(e){this.dropDataChangeSubject.next(e)}setDropPlaceholderPreview(e){e?.index===this.dropPlaceholderPreview?.index&&e?.parentId===this.dropPlaceholderPreview?.parentId||(this.dropPlaceholderPreview&&this.oldDropPlaceholderPreviewSubject.next(this.dropPlaceholderPreview),this.dropPlaceholderPreview=e,this.dropPlaceholderPreview&&this.newDropPlaceholderPreviewSubject.next(this.dropPlaceholderPreview))}}a.ɵfac=function(e){return new(e||a)},a.ɵprov=r.Yz({token:a,factory:a.ɵfac})},31400:(e,t,n)=>{"use strict";n.d(t,{_:()=>c});var i=n(95127),r=n(80033),a=n(26066),o=n(85410),s=n(56949);function d(e,t,n,i,r,a,o){try{var s=e[a](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,r)}class c{constructor(e,t){this._viewContainerRef=e,this._logger=t,this._componentRef=null,this.propertiesMetadata=null}ngOnChanges(){var e,t=this;return(e=function*(){if(t._logger?.debug("PropertiesControlRendererDirective: rendering properties control {{@type}}",{type:t.type?.name}),t.ngOnDestroy(),t._viewContainerRef.clear(),t.type){const e=t._viewContainerRef.injector;if(t._componentRef=t._viewContainerRef.createComponent(t.type,{injector:e}),t._componentRef){const e=t._componentRef.instance;e.propertiesMetadata=t.propertiesMetadata,e.form=t.form,yield e.initialize(),e.invalidateVisuals()}}},function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){d(a,i,r,o,s,"next",e)}function s(e){d(a,i,r,o,s,"throw",e)}o(void 0)}))})()}ngOnDestroy(){this._componentRef&&(this._logger?.debug("PropertiesControlRendererDirective: destroying properties control {{@type}}",{type:this.type?.name}),this._componentRef?.destroy(),this._componentRef=null)}}c.ɵfac=function(e){return new(e||c)(r.Y(a.s_),r.Y(i.bZ,8))},c.ɵdir=o.lG({type:c,selectors:[["","propertiesControl",""]],inputs:{form:"form",propertiesMetadata:"propertiesMetadata",type:["propertiesControl","type"]},features:[s.T]})},23382:(e,t,n)=>{"use strict";n.d(t,{L:()=>l});var i=n(58853),r=n(90366),a=n(44508),o=n(95173),s=n(23682),d=n(85410),c=n(85086);class l{}l.ɵfac=function(e){return new(e||l)},l.ɵmod=d.oA({type:l}),l.ɵinj=c.cJ({imports:[i.e,r.z,s.i,o.j,a.A]})},23682:(e,t,n)=>{"use strict";n.d(t,{i:()=>c});var i=n(58853),r=n(14829),a=n(44508),o=n(62555),s=n(85410),d=n(85086);class c{}c.ɵfac=function(e){return new(e||c)},c.ɵmod=s.oA({type:c}),c.ɵinj=d.cJ({imports:[i.e,r.U,a.A,o.F]})},27398:(e,t,n)=>{"use strict";n.d(t,{i:()=>h});var i=n(32779),r=n(26066),a=n(95127),o=n(19630),s=n(73943),d=n(41842),c=n(14611),l=n(85410),p=n(80354),u=n(56949);class h{constructor(){this.id=(0,s.Ox)(15),this.viewContainer=(0,i.f3)(r.s_),this.renderer=(0,i.f3)(c.t),this.parentRendererDirective=(0,i.f3)(h,{optional:!0,skipSelf:!0}),this.logger=(0,i.f3)(a.bZ),this.scopeId=(0,i.f3)(o.H$,{optional:!0}),this.childExtensions=(0,i.f3)(d.X5,{optional:!0,skipSelf:!0})}ngOnChanges(e){if((0,s.$0)("componentMetadata")in e){const t=e[(0,s.$0)("componentMetadata")];if((0,s.EN)(t.currentValue)&&(0,s.fp)(t.previousValue)){const e=t.currentValue;this.logger.debug('LayoutComponentRendererSADirective: registering component for rendering "{{id}}" inside renderer "{{rendererId}}" with parent renderer "{{parentRenderer}}" and parent component "{{parentComponent}}"',{id:e.id,rendererId:this.id,parentRenderer:this.parentRendererDirective?.id,parentComponent:this.parentRendererDirective?.componentMetadata?.id}),this.renderer.registerRenderer(this.id,this.parentRendererDirective?.id,this.viewContainer,e,this.parentRendererDirective?.componentMetadata,this.scopeId,this.childExtensions,this.renderedCallback,this.customInjector)}else if((0,s.EN)(t.currentValue)&&(0,s.EN)(t.previousValue)){this.logger.debug('LayoutComponentRendererSADirective: unregistering component from rendering "{{id}}"',{id:this.id}),this.renderer.unregisterRenderer(this.id);const e=t.currentValue;this.logger.debug('LayoutComponentRendererSADirective: registering component for rendering "{{id}}" inside renderer "{{rendererId}}" with parent renderer "{{parentRenderer}}" and parent component "{{parentComponent}}"',{id:e.id,rendererId:this.id,parentRenderer:this.parentRendererDirective?.id,parentComponent:this.parentRendererDirective?.componentMetadata?.id}),this.renderer.registerRenderer(this.id,this.parentRendererDirective?.id,this.viewContainer,e,this.parentRendererDirective?.componentMetadata,this.scopeId,this.childExtensions,this.renderedCallback,this.customInjector)}else(0,s.fp)(t.currentValue)&&(0,s.EN)(t.previousValue)&&(this.logger.debug('LayoutComponentRendererSADirective: unregistering component from rendering "{{id}}"',{id:this.id}),this.renderer.unregisterRenderer(this.id))}}ngOnDestroy(){this.logger.debug('LayoutComponentRendererSADirective: destroying renderer "{{id}}" with component "{{componentId}}"',{id:this.id,componentId:this.componentMetadata?.id}),this.renderer.destroyRenderer(this.id)}}h.ɵfac=function(e){return new(e||h)},h.ɵdir=l.lG({type:h,selectors:[["","layoutComponentRenderer",""]],inputs:{componentMetadata:["layoutComponentRenderer","componentMetadata"],renderedCallback:["layoutComponentRendererCallback","renderedCallback"],customInjector:["layoutComponentRendererInjector","customInjector"]},standalone:!0,features:[p._([{provide:d.X5,useValue:null}]),u.T]})},49353:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});var i=n(85410),r=n(85086);class a{}a.ɵfac=function(e){return new(e||a)},a.ɵmod=i.oA({type:a}),a.ɵinj=r.cJ({})},12919:(e,t,n)=>{"use strict";n.d(t,{bW:()=>C,m_:()=>P,Ur:()=>E,Od:()=>I,sQ:()=>x});var i=n(68339),r=n(41842),a=n(83762),o=n(93463),s=n(66201),d=n(95127),c=n(32779),l=n(85086);function p(e,t,n,i,r,a,o){try{var s=e[a](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,r)}class u{constructor(e){this._logger=e}tryToGet(e){var t,i=this;return(t=function*(){if("material-components"!==e.package)return null;try{return i._logger?.debug("MaterialDynamicModuleItemsProvider: trying to get item {{@item}}",{item:{name:e.name,package:e.package}}),yield n(15033)(`./${e.name}/type`)}catch(t){i._logger?.debug("MaterialDynamicModuleItemsProvider: item {{@item}} was not found, reason: "+t,{item:{name:e.name,package:e.package}})}return null},function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function o(e){p(a,i,r,o,s,"next",e)}function s(e){p(a,i,r,o,s,"throw",e)}o(void 0)}))})()}}function h(e,t,n,i,r,a,o){try{var s=e[a](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,r)}u.ɵfac=function(e){return new(e||u)(c.LF(d.bZ,8))},u.ɵprov=l.Yz({token:u,factory:u.ɵfac});class m{constructor(e){this._logger=e}tryToGet(e){var t,i=this;return(t=function*(){try{return i._logger?.debug("MaterialDynamicModuleTypesProvider: trying to get types for module {{@module}}",{module:{moduleName:e.package}}),"material-components"===e.package?yield n.e(9244).then(n.bind(n,89244)):null}catch(t){i._logger?.debug("MaterialDynamicModuleTypesProvider: module {{@module}} was not found, reason: "+t,{module:{moduleName:e.package}})}return null},function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function o(e){h(a,i,r,o,s,"next",e)}function s(e){h(a,i,r,o,s,"throw",e)}o(void 0)}))})()}}function g(e,t,n,i,r,a,o){try{var s=e[a](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,r)}m.ɵfac=function(e){return new(e||m)(c.LF(d.bZ,8))},m.ɵprov=l.Yz({token:m,factory:m.ɵfac});class f{constructor(e){this._logger=e}tryToGet(e){var t,i=this;return(t=function*(){try{return i._logger?.debug("MaterialDynamicModuleRelationsProvider: trying to get relations types for module {{@module}}",{module:{moduleName:e.package}}),"material-components"===e.package?yield n.e(3711).then(n.bind(n,63711)):null}catch(t){i._logger?.debug("MaterialDynamicModuleRelationsProvider: module {{@module}} was not found, reason: "+t,{module:{moduleName:e.package}})}return null},function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function o(e){g(a,i,r,o,s,"next",e)}function s(e){g(a,i,r,o,s,"throw",e)}o(void 0)}))})()}}f.ɵfac=function(e){return new(e||f)(c.LF(d.bZ,8))},f.ɵprov=l.Yz({token:f,factory:f.ɵfac});const v={provide:r.Aw,useClass:u,multi:!0},y={provide:a.sc,useClass:m,multi:!0},b={provide:s.GP,useClass:f,multi:!0},w={provide:s.n7,useClass:u,multi:!0},D={provide:o.B6,useClass:u,multi:!0};function C(){return[v]}function P(){return[v,y,(0,i.XW)("material-components")]}function x(){return[b,w,(0,i.XW)("material-components")]}function I(){return[...x(),...C()]}function E(){return[...C(),D]}},44508:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(85410),r=n(85086);class a{static ɵfac=function(e){return new(e||a)};static ɵmod=i.oA({type:a});static ɵinj=r.cJ({})}}}]);
//# sourceMappingURL=8320.chunk.6960b97223b302a0fe7b.js.map