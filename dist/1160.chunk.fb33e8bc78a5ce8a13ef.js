"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[1160],{31400:(t,e,o)=>{o.d(e,{_:()=>p});var n=o(95127),r=o(80033),i=o(26066),s=o(85410),a=o(56949);function c(t,e,o,n,r,i,s){try{var a=t[i](s),c=a.value}catch(t){return void o(t)}a.done?e(c):Promise.resolve(c).then(n,r)}class p{constructor(t,e){this._viewContainerRef=t,this._logger=e,this._componentRef=null,this.propertiesMetadata=null}ngOnChanges(){var t,e=this;return(t=function*(){if(e._logger?.debug("PropertiesControlRendererDirective: rendering properties control {{@type}}",{type:e.type?.name}),e.ngOnDestroy(),e._viewContainerRef.clear(),e.type){const t=e._viewContainerRef.injector;if(e._componentRef=e._viewContainerRef.createComponent(e.type,{injector:t}),e._componentRef){const t=e._componentRef.instance;t.propertiesMetadata=e.propertiesMetadata,t.form=e.form,yield t.initialize(),t.invalidateVisuals()}}},function(){var e=this,o=arguments;return new Promise((function(n,r){var i=t.apply(e,o);function s(t){c(i,n,r,s,a,"next",t)}function a(t){c(i,n,r,s,a,"throw",t)}s(void 0)}))})()}ngOnDestroy(){this._componentRef&&(this._logger?.debug("PropertiesControlRendererDirective: destroying properties control {{@type}}",{type:this.type?.name}),this._componentRef?.destroy(),this._componentRef=null)}}p.ɵfac=function(t){return new(t||p)(r.Y(i.s_),r.Y(n.bZ,8))},p.ɵdir=s.lG({type:p,selectors:[["","propertiesControl",""]],inputs:{form:"form",propertiesMetadata:"propertiesMetadata",type:["propertiesControl","type"]},features:[a.T]})},23382:(t,e,o)=>{o.d(e,{L:()=>l});var n=o(58853),r=o(90366),i=o(44508),s=o(95173),a=o(23682),c=o(85410),p=o(85086);class l{}l.ɵfac=function(t){return new(t||l)},l.ɵmod=c.oA({type:l}),l.ɵinj=p.cJ({imports:[n.e,r.z,a.i,s.j,i.A]})},23682:(t,e,o)=>{o.d(e,{i:()=>p});var n=o(58853),r=o(14829),i=o(44508),s=o(62555),a=o(85410),c=o(85086);class p{}p.ɵfac=function(t){return new(t||p)},p.ɵmod=a.oA({type:p}),p.ɵinj=c.cJ({imports:[n.e,r.U,i.A,s.F]})},67136:(t,e,o)=>{o.r(e),o.d(e,{CustomComponentLayoutEditorMetadata:()=>I});var n=o(67229),r=o(2068),i=o(32779),s=o(31530),a=o(58853),c=o(30626),p=o(57399),l=o(23382),m=o(73943),u=o(85410);class d{transform(t,e){return e?.editorMetadata.metaInfo?.optionsMetadata?.propertiesMetadata?.find((e=>e.modelType.name==t))?.propertiesControls??[]}}d.ɵfac=function(t){return new(t||d)},d.ɵpipe=u.Yj({name:"getControls",type:d,pure:!0,standalone:!0});var f=o(71862),C=o(55055),y=o(65947),h=o(25271),g=o(52622),v=o(95741),M=o(67942),_=o(57284),k=o(10065),w=o(46430),F=o(88809),O=o(13315),R=o(13757),b=o(46735),P=o(80354),j=o(5327),x=o(78190),A=o(4539),L=o(62708),Q=o(31400);function Y(t,e,o,n,r,i,s){try{var a=t[i](s),c=a.value}catch(t){return void o(t)}a.done?e(c):Promise.resolve(c).then(n,r)}function T(t,e){if(1&t&&(g.yn(0),g.Gk(1,3),v.AL(2,"propertiesMetadata"),v.AL(3,"getModel"),g.BQ()),2&t){const t=e.$implicit,o=M.o().$implicit,n=M.o().$implicit,r=M.o();_.x(1),k.Q("propertiesControl",t)("form",r.usedComponentsForms[n.key][o.key])("propertiesMetadata",v.lc(2,3,v.xi(3,5,o.key,r.customComponentContentMetadata[n.key])))}}function $(t,e){if(1&t&&(g.yn(0),w.Y(1,T,4,8,"ng-container",0),v.AL(2,"getControls"),g.BQ()),2&t){const t=e.$implicit,o=M.o().$implicit,n=M.o();_.x(1),k.Q("ngForOf",v.xi(2,1,t.key,n.customComponentContentMetadata[o.key]))}}function z(t,e){if(1&t&&(g.yn(0),F.Tg(1,"div",1),O._(2),F.qZ(),w.Y(3,$,3,4,"ng-container",0),v.AL(4,"keyvalue"),F._U(5,"div",2),g.BQ()),2&t){const t=e.$implicit,o=M.o();_.x(2),R.Oq(null==o.customComponentContentMetadata[t.key]||null==o.customComponentContentMetadata[t.key].metadata?null:o.customComponentContentMetadata[t.key].metadata.displayName),_.x(1),k.Q("ngForOf",v.lc(4,2,t.value))}}class B extends p.k{constructor(){super(...arguments),this.injector=(0,i.f3)(s.z),this.formModelBuilder=(0,i.f3)(c.p),this.customComponentsRegister=(0,i.f3)(h.t),this.customComponentContentMetadata={},this.usedProperties={},this.usedComponentsForms={}}_initialize(){var t,e=this;return(t=function*(){if(!e.form)return;const t=e.form.value.name??"",o=yield(0,y.Qd)(t,e.injector);if(!o)return;e.customComponentContentMetadata=o.contentMetadata,e.customComponentMetadata=o.metadata;const n=yield e.customComponentsRegister.getConfigurationForComponent(t);if(n){e.usedProperties=n.configurableProperties??{};for(const t in e.usedProperties)e.customComponentContentMetadata[t]||delete e.usedProperties[t];e.initForms()}},function(){var e=this,o=arguments;return new Promise((function(n,r){var i=t.apply(e,o);function s(t){Y(i,n,r,s,a,"next",t)}function a(t){Y(i,n,r,s,a,"throw",t)}s(void 0)}))})()}initForms(){var t;this.usedComponentsForms={};for(const e in this.usedProperties)for(const o in this.usedProperties[e]){const n=this.customComponentContentMetadata[e]?.editorMetadata.metaInfo?.optionsMetadata?.propertiesMetadata.find((t=>t.modelType.name==o))?.modelType,r=this.usedProperties[e][o];if(!n)continue;const i=(0,m.l7)(!0,{},this.customComponentContentMetadata[e]?.editorMetadata.metaInfo?.defaultOptions,this.customComponentContentMetadata[e]?.metadata.options,this.form?.controls.contentOptions.value[e]);(t=this.usedComponentsForms)[e]??(t[e]={});const s=new n(i);for(const t of Object.keys(s))r.indexOf(t)<0&&delete s[t];(this.usedComponentsForms[e][o]=this.formModelBuilder.build(s)).valueChanges.subscribe((t=>{const o=this.form?.controls.contentOptions.value??{};o[e]??(o[e]={}),(0,m.l7)(o[e],t),this.form?.controls.contentOptions.patchValue(o)}))}}}B.ɵfac=(()=>{let t;return function(e){return(t||(t=b.n5(B)))(e||B)}})(),B.ɵcmp=u.Xp({type:B,selectors:[["content-options"]],standalone:!0,features:[P._([c.p]),j.q,x.j],decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],[1,"dynamic-margin-top-small","dynamic-bold","dynamic-text-uppercase","dynamic-margin-left-extra-small"],[1,"component-separator"],[3,"propertiesControl","form","propertiesMetadata"]],template:function(t,e){1&t&&(w.Y(0,z,6,4,"ng-container",0),v.AL(1,"keyvalue")),2&t&&k.Q("ngForOf",v.lc(1,1,e.usedProperties))},dependencies:[a.e,A.sg,L.N,l.L,Q._,d,f.m,C.l],encapsulation:2,changeDetection:0});class D{constructor(t){this.name="",this.contentOptions={},m.Rl.bind(this)(t)}}class I{constructor(){this.metaInfo={group:"Components",optionsMetadata:{propertiesMetadata:[{modelType:n.k,propertiesControls:[r.e]},{modelType:D,propertiesControls:[B]}]},defaultOptions:{}},Object.freeze(this)}}},52988:(t,e,o)=>{o.d(e,{j:()=>c});var n=o(58418),r=o(95127),i=o(73943),s=o(80033),a=o(85410);class c{_logger;constructor(t){this._logger=t}transform(t,e){return(0,i.fp)(t)?null:t instanceof n.NI?t:(this._logger?.warn("Failed to cast AbstractControl to FormControl"),null)}static ɵfac=function(t){return new(t||c)(s.Y(r.bZ,24))};static ɵpipe=a.Yj({name:"asFormControl",type:c,pure:!0})}},44508:(t,e,o)=>{o.d(e,{A:()=>i});var n=o(85410),r=o(85086);class i{static ɵfac=function(t){return new(t||i)};static ɵmod=n.oA({type:i});static ɵinj=r.cJ({})}}}]);
//# sourceMappingURL=1160.chunk.fb33e8bc78a5ce8a13ef.js.map