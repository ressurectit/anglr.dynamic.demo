"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[739],{66739:(t,e,n)=>{n.r(e),n.d(e,{DefaultModule:()=>ae});var o=n(14392),a=n(35375),i=n(89001),r=n(27052),s=n(63789),c=n(989),l=n(38223),d=n(63152),p=n(84773),u=n(80827),m=n(72891),g=n(43870),h=n(6845),_=n(86357),f=n(66794),y=n(73301),v=n(94727),b=n(15686),x=n(85320),D=n(79440),C=n(68961),k=n(13691),M=n(55436),w=n(82568),T=n(41853),P=n(47286),L=n(83434),O=n(43649),I=n(12311),S=n(21651),N=n(41623),F=n(99055),Y=n(23208);function E(t,e){if(1&t){const t=p.E();u.Tg(0,"button",4),m.N("click",(function(){g.CH(t);const e=h.o();return g.Kt(e.toggle())})),u._U(1,"span",5),u.qZ()}if(2&t){const t=h.o();_.u("aria-label","Toggle"),f.x(1),y.Q("ngClass",t.open?"fa-chevron-down":"fa-chevron-right")}}const Q=function(t,e){return{metadata:t,parentId:e}};function R(t,e){if(1&t&&(u.Tg(0,"div",8),u._U(1,"components-tree-item",9),u.qZ()),2&t){const t=e.$implicit;y.Q("cdkDragData",v.WL(3,Q,null==t.component.options?null:t.component.options.typeMetadata,null==t.parent||null==t.parent.component?null:t.parent.component.id))("cdkDragDisabled",t.component.dragDisabled),f.x(1),y.Q("data",t)}}function q(t,e){if(1&t){const t=p.E();u.Tg(0,"div",6),m.N("cdkDropListDropped",(function(e){g.CH(t);const n=h.o();return g.Kt(null==n.data||null==n.data.component?null:n.data.component.addDescendant(e))})),b.Y(1,R,2,6,"div",7),u.qZ()}if(2&t){const t=h.o();x.ek("hidden",!t.open),y.Q("cdkDropListEnterPredicate",t._canDrop)("id","component-tree-"+(null==t.data||null==t.data.component||null==t.data.component.options||null==t.data.component.options.typeMetadata?null:t.data.component.options.typeMetadata.id)),f.x(1),y.Q("ngForOf",null==t.data?null:t.data.children)}}class A{constructor(t,e){this._manager=t,this._changeDetector=e,this._initSubscriptions=new l.w,this.open=!0,this._canDrop=()=>this.data?.component?.canDrop()??!1}get hasChildren(){return!!this.data?.children&&this.data?.children.length>0}ngOnInit(){this._initSubscriptions.add(this._manager.layoutChange.subscribe((()=>{this._changeDetector.detectChanges()}))),this._initSubscriptions.add(this._manager.selectedChange.subscribe((()=>{this._changeDetector.detectChanges()}))),this._initSubscriptions.add(this._manager.highlightedChange.subscribe((()=>this._changeDetector.detectChanges()))),this._initSubscriptions.add(this._manager.displayNameChange.subscribe((()=>this._changeDetector.detectChanges())))}ngOnDestroy(){this._initSubscriptions.unsubscribe()}toggle(){this.open=!this.open}expand(t){if(!t)return this.open=!0,!0;if(this.data?.component?.options?.typeMetadata?.id===t)return!0;if(this.hasChildren)for(const e of this._childrenNodes?.toArray())if(e.expand(t))return this.expand(),!0;return!1}expandAll(){this._childrenNodes?.forEach((t=>t.expandAll())),this.expand(),this._changeDetector.detectChanges()}collapse(){this.open=!1}collapseAll(){this._childrenNodes?.forEach((t=>t.collapseAll())),this.collapse(),this._changeDetector.detectChanges()}highlight(t,e){t.preventDefault(),t.stopPropagation(),this._manager.highlightComponent(e)}_cancelHighlight(t){t.preventDefault(),t.stopPropagation(),this._manager.cancelHighlightedComponent()}}function Z(t,e){if(1&t){const t=p.E();u.Tg(0,"div",1)(1,"button",2),m.N("click",(function(){g.CH(t);const e=h.o();return g.Kt(null==e.rootTreeItem?null:e.rootTreeItem.collapseAll())})),u._U(2,"span",3),u.qZ(),u.Tg(3,"button",4),m.N("click",(function(){g.CH(t);const e=h.o();return g.Kt(null==e.rootTreeItem?null:e.rootTreeItem.expandAll())})),u._U(4,"span",5),u.qZ(),u._U(5,"components-tree-item",6),u.qZ()}if(2&t){const t=h.o();f.x(5),y.Q("data",t.root)}}A.ɵfac=function(t){return new(t||A)(D.Y(L.t),D.Y(C.s))},A.ɵcmp=k.Xp({type:A,selectors:[["components-tree-item"]],viewQuery:function(t,e){if(1&t&&M.Gf(A,5),2&t){let t;M.iG(t=M.CR())&&(e._childrenNodes=t)}},hostBindings:function(t,e){1&t&&m.N("mouseleave",(function(t){return e._cancelHighlight(t)}))},inputs:{data:"data",open:"open"},exportAs:["componentsTreeItem"],standalone:!0,features:[w.j],decls:5,vars:8,consts:[[1,"flex","align-items-center",3,"ngClass"],["mat-icon-button","",3,"click",4,"ngIf"],[3,"mouseover","click"],["class","node-children","cdkDropList","","connectDropLists","","connectDropListsPrefix","component-tree-",3,"cdkDropListEnterPredicate","id","hidden","cdkDropListDropped",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"fa",3,"ngClass"],["cdkDropList","","connectDropLists","","connectDropListsPrefix","component-tree-",1,"node-children",3,"cdkDropListEnterPredicate","id","cdkDropListDropped"],["cdkDrag","","class","node-child",3,"cdkDragData","cdkDragDisabled",4,"ngFor","ngForOf"],["cdkDrag","",1,"node-child",3,"cdkDragData","cdkDragDisabled"],[3,"data"]],template:function(t,e){1&t&&(u.Tg(0,"div",0),b.Y(1,E,2,2,"button",1),u.Tg(2,"div",2),m.N("mouseover",(function(t){return e.highlight(t,null==e.data||null==e.data.component||null==e.data.component.options||null==e.data.component.options.typeMetadata?null:e.data.component.options.typeMetadata.id)}))("click",(function(){return e._manager.selectComponent(null==e.data||null==e.data.component||null==e.data.component.options||null==e.data.component.options.typeMetadata?null:e.data.component.options.typeMetadata.id)})),T._(3),u.qZ()(),b.Y(4,q,2,5,"div",3)),2&t&&(y.Q("ngClass",e.hasChildren?"nested-node-tree":"node-tree"),f.x(1),y.Q("ngIf",e.hasChildren),f.x(1),x.ek("selected",(null==e.data||null==e.data.component||null==e.data.component.options||null==e.data.component.options.typeMetadata?null:e.data.component.options.typeMetadata.id)===e._manager.selectedComponent)("highlighted",(null==e.data||null==e.data.component||null==e.data.component.options||null==e.data.component.options.typeMetadata?null:e.data.component.options.typeMetadata.id)===e._manager.highlightedComponent),f.x(1),P.Oq((null==e.data||null==e.data.component||null==e.data.component.options||null==e.data.component.options.typeMetadata?null:e.data.component.options.typeMetadata.displayName)||(null==e.data||null==e.data.component||null==e.data.component.options||null==e.data.component.options.typeMetadata?null:e.data.component.options.typeMetadata.id)),f.x(1),y.Q("ngIf",e.hasChildren||e._canDrop()))},dependencies:[A,r.e,O.m,I.s,S.O,s.o,N.l,c._,F.W,Y.Z,d.z],styles:["[_nghost-%COMP%]\n{\n    display: block;\n}\n\n.highlighted[_ngcontent-%COMP%]\n{\n    text-shadow: 0 0 2px #666;\n}\n\n.selected[_ngcontent-%COMP%]\n{\n    text-shadow: 0 0 2px #009cd7;\n}\n\n.node-tree[_ngcontent-%COMP%], .nested-node-tree[_ngcontent-%COMP%]\n{\n    min-height: 48px;\n}\n\n.node-children[_ngcontent-%COMP%] \n{\n  padding-left: 20px;\n  min-height: 10px;\n}\n\n.node-child[_ngcontent-%COMP%]\n{\n    padding-left: 20px;\n}"],changeDetection:0});class U{constructor(t,e){this._manager=t,this._changeDetector=e,this._initSubscriptions=new l.w}ngOnInit(){this._initSubscriptions.add(this._manager.layoutChange.subscribe((()=>{this.root=this._manager.root,this._changeDetector.detectChanges()}))),this._initSubscriptions.add(this._manager.selectedChange.subscribe((()=>{this.rootTreeItem?.expand(this._manager.selectedComponent),this._changeDetector.detectChanges()}))),this._initSubscriptions.add(this._manager.highlightedChange.subscribe((()=>this._changeDetector.detectChanges()))),this._initSubscriptions.add(this._manager.displayNameChange.subscribe((()=>this._changeDetector.detectChanges()))),this.root=this._manager.root}ngOnDestroy(){this._initSubscriptions.unsubscribe()}hasChild(t){return!!t.children&&t.children.length>0}}U.ɵfac=function(t){return new(t||U)(D.Y(L.t),D.Y(C.s))},U.ɵcmp=k.Xp({type:U,selectors:[["components-tree"]],viewQuery:function(t,e){if(1&t&&M.Gf(A,5),2&t){let t;M.iG(t=M.CR())&&(e.rootTreeItem=t.first)}},standalone:!0,features:[w.j],decls:1,vars:1,consts:[["class","component-tree",4,"ngIf"],[1,"component-tree"],["mat-icon-button","","aria-label","Collapse all",3,"click"],[1,"fa","fa-minus-square"],["mat-icon-button","","aria-label","Expand all",3,"click"],[1,"fa","fa-plus-square"],[3,"data"]],template:function(t,e){1&t&&b.Y(0,Z,6,1,"div",0),2&t&&y.Q("ngIf",e.root)},dependencies:[r.e,S.O,s.o,N.l,c._,A],styles:["[_nghost-%COMP%]\n{\n    display: block;\n    background-color: #fafafa;\n    border-right: 1px solid #ccc;\n}"],changeDetection:0});var z=n(46480),$=n(57466),j=n(43939);class H{transform(t,e){const n=`${t.itemSource.name}-${e}`;return{metadata:{id:n,displayName:n,package:t.itemSource.package,name:t.itemSource.name,options:(0,$.l7)(!0,{},t.metadata.metaInfo?.defaultOptions)},parentId:null}}}H.ɵfac=function(t){return new(t||H)},H.ɵpipe=k.Yj({name:"toLayoutDragData",type:H,pure:!0,standalone:!0});var B=n(69307),J=n(53015),V=n(65589),K=n(4477),G=n(87606),X=n(13457),W=n(11776),tt=n(38327);function et(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}class nt{constructor(t,e,n){this._providers=t,this._extractors=e,this._logger=n,this._cachedDynamicModuleTypes={},Array.isArray(this._providers)||(this._logger?.error("DynamicModuleTypesLoader: missing providers!"),this._providers=[]),Array.isArray(this._extractors)||(this._logger?.error("DynamicModuleTypesLoader: missing extractors!"),this._extractors=[])}loadTypes(t){var e,n=this;return(e=function*(){let e=null;if(n._cachedDynamicModuleTypes[t])return n._logger?.verbose("DynamicModuleTypesLoader: Loading from cache {@source}",{moduleName:t}),n._cachedDynamicModuleTypes[t];for(const o of n._providers){const n=o.tryToGet(t);if(e=n?yield(0,G.K)(n):null,e)break}if(!e)return n._logger?.debug("DynamicModuleTypesLoader: Failed to get dynamic module {@source}",{moduleName:t}),null;for(const o of n._extractors){const a=o.tryToExtract(e);if(a)return n._cachedDynamicModuleTypes[t]=a,a}return n._logger?.debug("DynamicModuleTypesLoader: Failed to extract dynamic module types {@source}",{moduleName:t}),null},function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function r(t){et(i,o,a,r,s,"next",t)}function s(t){et(i,o,a,r,s,"throw",t)}r(void 0)}))})()}}nt.ɵfac=function(t){return new(t||nt)(W.LF(X.Cf),W.LF(X.WU),W.LF(z.bZ,8))},nt.ɵprov=tt.Yz({token:nt,factory:nt.ɵfac,providedIn:"root"});var ot=n(85902),at=n(32434),it=n(10866),rt=n(22549);function st(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}function ct(t,e){1&t&&u._U(0,"layout-editor-drag-placeholder",10)}function lt(t,e){if(1&t&&(u._U(0,"layout-editor-drag-preview",11),V.AL(1,"toLayoutDragData")),2&t){const t=h.o().$implicit,e=h.o(2);y.Q("editorMetadata",t.metadata)("layoutMetadata",V.xi(1,2,t,e._newCompnentId).metadata)}}function dt(t,e){if(1&t&&(u.Tg(0,"div",12),T._(1),u.qZ()),2&t){const t=h.o().$implicit;f.x(1),P.Oq(null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function pt(t,e){if(1&t){const t=p.E();u.Tg(0,"div",4)(1,"div",5),m.N("cdkDragDropped",(function(){g.CH(t);const e=h.o(2);return g.Kt(e._generateNewId())}))("cdkDragEnded",(function(){g.CH(t);const e=h.o().$implicit,n=h.o();return g.Kt(n._onDragEnded(e.key))}))("cdkDragStarted",(function(e){const n=g.CH(t).$implicit,o=h.o().$implicit,a=h.o();return g.Kt(a._onDragStarted(e,o.key,n))})),V.AL(2,"toLayoutDragData"),b.Y(3,ct,1,0,"layout-editor-drag-placeholder",6),b.Y(4,lt,2,5,"layout-editor-drag-preview",7),u.Tg(5,"div",8),T._(6),u.qZ(),b.Y(7,dt,2,1,"div",9),u.qZ()()}if(2&t){const t=e.$implicit,n=h.o(2);let o;y.Q("cdkDropListConnectedTo",n._designerDropLists),f.x(1),y.Q("cdkDragData",V.xi(2,4,t,n._newCompnentId)),f.x(5),P.Oq(null!==(o=null==t.metadata.metaInfo?null:t.metadata.metaInfo.name)&&void 0!==o?o:t.itemSource.name),f.x(1),y.Q("ngIf",null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function ut(t,e){if(1&t&&(K.yn(0),u.Tg(1,"div",2),T._(2),u.qZ(),b.Y(3,pt,8,7,"div",3),K.BQ()),2&t){const t=e.$implicit;f.x(2),P.hi("",t.key," "),f.x(1),y.Q("ngForOf",t.value)}}class mt{constructor(t,e,n,o,a){this._moduleTypesLoader=t,this._changeDetector=e,this._metadataExtractor=n,this._metadataManager=o,this._logger=a,this._initSubscriptions=new l.w,this._allItems=[],this._groupedItems={},this._designerDropLists=[],this._newCompnentId=(0,$.Ox)(16),this._isDragOverPalette=!1}ngOnInit(){var t,e=this;return(t=function*(){var t;e._initSubscriptions.add(e._metadataManager.layoutChange.subscribe((()=>e._getDesignerDropLists()))),e._getDesignerDropLists();const n=(yield e._moduleTypesLoader.loadTypes("basic-components"))??[];for(const t of n){const n={package:"basic-components",name:t},o=yield e._metadataExtractor.extractMetadata(n);o?e._allItems.push({itemSource:n,metadata:o}):e._logger?.warn("ComponentsPaletteSAComponent: Failed to obtain layout editor metadata {@source}",n)}e._groupedItems[""]=[];for(const n of e._allItems){const o=n.metadata.metaInfo?.group??"";(t=e._groupedItems)[o]??(t[o]=[]),e._groupedItems[o].push(n)}e._changeDetector.detectChanges()},function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){st(i,o,a,r,s,"next",t)}function s(t){st(i,o,a,r,s,"throw",t)}r(void 0)}))})()}ngOnDestroy(){this._initSubscriptions.unsubscribe()}_generateNewId(){this._newCompnentId=(0,$.Ox)(16)}_onDragEnded(t){(0,j.EN)(t)&&(this._groupedItems[t]=[...this._groupedItems[t].filter((t=>!t.temp))])}_onDragStarted(t,e,n){const o=t.source.dropContainer.getSortedItems().findIndex((e=>e.data?.metadata?.id===t.source.data?.metadata?.id));(0,j.EN)(o)&&this._groupedItems[e]?.splice(o+1,0,{...n,temp:!0})}_getDesignerDropLists(){this._designerDropLists=this._metadataManager.flatTree.map((t=>t.component.id)).reverse()}}mt.ɵfac=function(t){return new(t||mt)(D.Y(nt),D.Y(C.s),D.Y(ot.T),D.Y(L.t),D.Y(z.bZ,8))},mt.ɵcmp=k.Xp({type:mt,selectors:[["components-palette"]],standalone:!0,features:[w.j],decls:3,vars:3,consts:[[1,"flex-column"],[4,"ngFor","ngForOf"],[1,"text-spread","text-small-caps","margin-left-extra-small","margin-horizontal-small","bold"],["cdkDropList","","cdkDropListSortingDisabled","","class","palette-droplist",3,"cdkDropListConnectedTo",4,"ngFor","ngForOf"],["cdkDropList","","cdkDropListSortingDisabled","",1,"palette-droplist",3,"cdkDropListConnectedTo"],["cdkDrag","",1,"editor-component","mat-elevation-z2",3,"cdkDragData","cdkDragDropped","cdkDragEnded","cdkDragStarted"],["class","mat-elevation-z6",4,"cdkDragPlaceholder"],["class","mat-elevation-z4",3,"editorMetadata","layoutMetadata",4,"cdkDragPreview"],[1,"editor-component-name"],["class","editor-component-description",4,"ngIf"],[1,"mat-elevation-z6"],[1,"mat-elevation-z4",3,"editorMetadata","layoutMetadata"],[1,"editor-component-description"]],template:function(t,e){1&t&&(u.Tg(0,"div",0),b.Y(1,ut,4,2,"ng-container",1),V.AL(2,"keyvalue"),u.qZ()),2&t&&(f.x(1),y.Q("ngForOf",V.lc(2,1,e._groupedItems)))},dependencies:[r.e,I.s,S.O,at.N,c._,F.W,Y.Z,it.p,rt.H,J.s,B.a,H],styles:[".editor-component[_ngcontent-%COMP%]\n{\n    margin: 2px 10px;\n    padding: 4px 8px;\n\n    border-radius: 6px;\n    border: 1px solid #F0F0F0;\n    background-color: #FAFAFA;\n}\n\n.editor-component-name[_ngcontent-%COMP%]\n{\n    font-weight: 500;\n}\n\n.editor-component-description[_ngcontent-%COMP%]\n{\n    margin-left: 4px;\n    margin-top: 2px;\n    font-size: .8em;\n}\n\n.palette-droplist[_ngcontent-%COMP%]   layout-editor-drag-placeholder[_ngcontent-%COMP%]\n{\n    display: none;\n}"],changeDetection:0});var gt=n(70625),ht=n(4644),_t=n(71791),ft=n(39163),yt=n(77880),vt=n(59951);class bt{}bt.ɵfac=function(t){return new(t||bt)},bt.ɵmod=k.oA({type:bt}),bt.ɵinj=tt.cJ({imports:[r.e,ft.z,vt.i,yt.j]});var xt=n(73379),Dt=n(4820);class Ct{constructor(t,e){this._layoutPropertiesSymbols=t,this._logger=e}extract(t){if(!t)return null;this._logger?.debug(`LayoutEditorPropertyMetadataExtractor: Trying to extract properties metadata '${t.name}'`);const e={};for(const n of this._layoutPropertiesSymbols){const o=Reflect.get(t.prototype,n);(0,$.l7)(!0,e,o)}return e}}Ct.ɵfac=function(t){return new(t||Ct)(W.LF(Dt.R),W.LF(z.bZ,8))},Ct.ɵprov=tt.Yz({token:Ct,factory:Ct.ɵfac,providedIn:"root"});var kt=n(49280),Mt=n(77470),wt=n(27635),Tt=n(15783),Pt=n(36973);function Lt(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}class Ot{constructor(t,e){this._viewContainerRef=t,this._logger=e,this._componentRef=null,this.propertiesMetadata=null}ngOnChanges(){var t,e=this;return(t=function*(){if(e._logger?.debug("PropertiesControlRendererDirective: rendering properties control {@type}",{type:e.type?.name}),e.ngOnDestroy(),e._viewContainerRef.clear(),e.type){const t=e._viewContainerRef.injector;if(e._componentRef=e._viewContainerRef.createComponent(e.type,{injector:t}),e._componentRef){const t=e._componentRef.instance;t.propertiesMetadata=e.propertiesMetadata,t.form=e.form,yield(0,G.K)(t.initialize()),t.invalidateVisuals()}}},function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){Lt(i,o,a,r,s,"next",t)}function s(t){Lt(i,o,a,r,s,"throw",t)}r(void 0)}))})()}ngOnDestroy(){this._componentRef&&(this._logger?.debug("PropertiesControlRendererDirective: destroying properties control {@type}",{type:this.type?.name}),this._componentRef?.destroy(),this._componentRef=null)}}function It(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}function St(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){It(i,o,a,r,s,"next",t)}function s(t){It(i,o,a,r,s,"throw",t)}r(void 0)}))}}function Nt(t,e){if(1&t&&(K.yn(0),K.Gk(1,8),K.BQ()),2&t){const t=e.$implicit,n=h.o().$implicit;f.x(1),y.Q("propertiesControl",t)("form",n.form)("propertiesMetadata",n.metadata)}}function Ft(t,e){if(1&t&&(K.yn(0),b.Y(1,Nt,2,3,"ng-container",7),K.BQ()),2&t){const t=e.$implicit;f.x(1),y.Q("ngForOf",t.controls)}}function Yt(t,e){if(1&t&&(u.Tg(0,"div",1)(1,"div",2),T._(2,"Properties "),u.Tg(3,"span",3),T._(4),u.qZ()(),u.Tg(5,"div",4)(6,"label",5),T._(7,"Display name"),u.qZ(),u._U(8,"input",6),u.qZ(),b.Y(9,Ft,2,1,"ng-container",7),u.qZ()),2&t){const t=h.o();let e;f.x(4),P.As("",null!==(e=null==t._metadata||null==t._metadata.metaInfo?null:t._metadata.metaInfo.name)&&void 0!==e?e:null==t._component||null==t._component.options||null==t._component.options.typeMetadata?null:t._component.options.typeMetadata.name," - ",null==t._component||null==t._component.options||null==t._component.options.typeMetadata?null:t._component.options.typeMetadata.id,""),f.x(4),y.Q("formControl",t._displayName),f.x(1),y.Q("ngForOf",t._propertiesData)}}Ot.ɵfac=function(t){return new(t||Ot)(D.Y(Tt.s_),D.Y(z.bZ,8))},Ot.ɵdir=k.lG({type:Ot,selectors:[["","propertiesControl",""]],inputs:{form:"form",propertiesMetadata:"propertiesMetadata",type:["propertiesControl","type"]},features:[Pt.T]});class Et{constructor(t,e,n,o,a,i){this._manager=t,this._metadataExtractor=e,this._propertyExtractor=n,this._formModelBuilder=o,this._changeDetector=a,this._logger=i,this._initSubscriptions=new l.w,this._optionsFormSubscription=null,this._visible=!1,this._component=null,this._metadata=null,this._displayName=new gt.NI(null),this._propertiesData=[]}ngOnInit(){this._initSubscriptions.add(this._manager.layoutChange.subscribe((()=>this._initProperties()))),this._initSubscriptions.add(this._manager.selectedChange.subscribe((()=>this._initProperties()))),this._displayName.valueChanges.subscribe((t=>{this._component?.options?.typeMetadata&&(0,j.EN)(t)&&(this._component.options.typeMetadata.displayName=t,this._component.options=this._component.options,this._manager.displayNameUpdated())})),this._initProperties()}ngOnDestroy(){this._initSubscriptions.unsubscribe(),this._optionsFormSubscription?.unsubscribe(),this._optionsFormSubscription=null}_initProperties(){var t=this;return St((function*(){if((0,j.EN)(t._manager.selectedComponent)){t._visible=!0;const e=t._manager.getComponent(t._manager.selectedComponent);e?(t._visible=!0,t._component=e,yield t._getMetadata()):t._hide()}else t._hide()}))()}_getMetadata(){var t=this;return St((function*(){if(t._component?.options?.typeMetadata){if(t._displayName.setValue(t._component.options.typeMetadata.displayName||t._component.options.typeMetadata.id,{emitEvent:!1}),t._metadata=yield t._metadataExtractor.extractMetadata(t._component.options?.typeMetadata),t._metadata||(t._logger?.error("PropertiesEditorSAComponent: unable to get metadata {@source}",{package:t._component.options?.typeMetadata.package,name:t._component.options?.typeMetadata.name}),t._hide()),t._optionsFormSubscription?.unsubscribe(),t._optionsFormSubscription=new l.w,t._propertiesData=[],t._metadata?.metaInfo?.optionsMetadata?.propertiesMetadata?.length)for(const e of t._metadata?.metaInfo?.optionsMetadata?.propertiesMetadata){const n=t._formModelBuilder.build(new e.modelType(t._component?.options?.typeMetadata.options)),o=t._propertyExtractor.extract(e.modelType);t._optionsFormSubscription.add(n.valueChanges.subscribe((e=>{t._component?.options?.typeMetadata&&((0,$.l7)(!0,t._component.options.typeMetadata.options,e),t._component.options=t._component.options,t._component.invalidateVisuals())}))),t._propertiesData.push({form:n,metadata:o,controls:e.propertiesControls})}if(t._component){const e=t._manager.getParent(t._component.id);if(e?.options?.typeMetadata){const n=yield t._metadataExtractor.extractMetadata(e.options?.typeMetadata);if(n?.metaInfo?.optionsMetadata?.childPropertiesMetadata?.length)for(const e of n?.metaInfo?.optionsMetadata?.childPropertiesMetadata){const n=t._formModelBuilder.build(new e.modelType(t._component?.options?.typeMetadata.options)),o=t._propertyExtractor.extract(e.modelType);t._optionsFormSubscription.add(n.valueChanges.subscribe((e=>{t._component?.options?.typeMetadata&&((0,$.l7)(!0,t._component.options.typeMetadata.options,e),t._component.options=t._component.options,t._component.invalidateVisuals())}))),t._propertiesData.push({form:n,metadata:o,controls:e.propertiesControls})}}}}else t._hide();t._changeDetector.detectChanges()}))()}_hide(){this._visible=!1,this._component=null,this._metadata=null,this._propertiesData=[],this._optionsFormSubscription?.unsubscribe(),this._optionsFormSubscription=null,this._changeDetector.detectChanges()}}Et.ɵfac=function(t){return new(t||Et)(D.Y(L.t),D.Y(ot.T),D.Y(Ct),D.Y(_t.p),D.Y(C.s),D.Y(z.bZ,8))},Et.ɵcmp=k.Xp({type:Et,selectors:[["properties-editor"]],standalone:!0,features:[xt._([_t.p]),w.j],decls:1,vars:1,consts:[["class","properties-main",4,"ngIf"],[1,"properties-main"],[1,"header"],[1,"bold"],[1,"form-group"],[1,"control-label"],["type","text",1,"form-control",3,"formControl"],[4,"ngFor","ngForOf"],[3,"propertiesControl","form","propertiesMetadata"]],template:function(t,e){1&t&&b.Y(0,Yt,10,4,"div",0),2&t&&y.Q("ngIf",e._visible)},dependencies:[r.e,I.s,S.O,ht.U,kt.Fj,Mt.JJ,wt.oH,bt,Ot],styles:["[_nghost-%COMP%]\n{\n    display: flex;\n    flex-direction: column;\n}\n\n.properties-main[_ngcontent-%COMP%]\n{\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    min-height: 0;\n    border: 1px solid #bbb;\n    background-color: #F5F5F5;\n}\n\n.header[_ngcontent-%COMP%]\n{\n    padding: 2px 8px;\n    background-color: #bbb;\n}\n\n.form-group[_ngcontent-%COMP%]\n{\n    margin: 4px 6px 0;\n}"],changeDetection:0});var Qt,Rt,qt=n(65715),At=n(15467),Zt=n(94761);!function(t){t[t.Light=200]="Light",t[t.Normal=400]="Normal",t[t.SemiBold=600]="SemiBold",t[t.Bold=700]="Bold"}(Qt||(Qt={})),function(t){t[t.px=0]="px",t[t.pt=1]="pt",t[t.em=2]="em"}(Rt||(Rt={}));var Ut=n(22164);const zt="LAYOUT_DATA";class $t{constructor(t){this._storage=t}setLayoutData(t,e){const n=this._storage.get(zt)??{};n[t]=e,this._storage.set(zt,n)}getLayoutData(t){return this._storage.get(zt)?.[t]??null}removeLayoutData(t){const e=this._storage.get(zt)??{};delete e[t],this._storage.set(zt,e)}getStoredLayouts(){const t=this._storage.get(zt)??{};return Object.keys(t)}}$t.ɵfac=function(t){return new(t||$t)(W.LF(z.T0))},$t.ɵprov=tt.Yz({token:$t,factory:$t.ɵfac,providedIn:"root"});var jt=n(4489),Ht=n(68965),Bt=n(31686),Jt=n(60405),Vt=n(47e3),Kt=n(75464);function Gt(t,e){if(1&t&&u._U(0,"ng-option",13),2&t){const t=e.$implicit;y.Q("value",t)("text",t)}}let Xt=class{constructor(t,e,n,o){this._manager=t,this._store=e,this._router=n,this._route=o,this._metadata=null,this._available=new gt.NI(""),this._name=new gt.NI(null),this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStoredLayouts(),this._route.params.subscribe((({id:t})=>{t?(this._name.setValue(t),this._available.setValue(t),this._metadata=this._store.getLayoutData(this._available.value)):(this._metadata={id:`stackPanel-${(0,$.Ox)(10)}`,package:"basic-components",name:"stackPanel",options:{children:[]}},this._name.setValue(""),this._available.setValue(""))}))}ngOnDestroy(){}_load(){this._metadata=this._store.getLayoutData(this._available.value),this._name.setValue(this._available.value),this._router.navigate(["/editor",this._available.value],{skipLocationChange:!1,replaceUrl:!0})}_save(){this._store.setLayoutData(this._name.value,this._manager.getMetadata()),this._availableNames=this._store.getStoredLayouts(),this._router.navigate(["/editor",this._name.value],{skipLocationChange:!1,replaceUrl:!0})}_delete(){this._store.removeLayoutData(this._available.value),this._availableNames=this._store.getStoredLayouts(),this._router.navigate(["/editor"],{skipLocationChange:!1,replaceUrl:!0})}_new(){this._metadata={id:`stackPanel-${(0,$.Ox)(10)}`,package:"basic-components",name:"stackPanel",options:{children:[]}},this._name.setValue(""),this._available.setValue(""),this._router.navigate(["/editor"],{skipLocationChange:!1,replaceUrl:!0})}_loadDemo(){this._metadata={id:"gridPanelTest",package:"basic-components",name:"gridPanel",options:{columns:[{width:"1fr"},{width:"2fr"},{width:"1fr"},{width:"100px"}],rows:[{height:"300px"}],cells:[{id:"celltest",package:"basic-components",name:"gridPanelCell",options:{gridColumnStart:2,gridColumnEnd:3,gridRowStart:1,gridRowEnd:2,component:{id:"stackPanelTest",package:"basic-components",name:"stackPanel",options:{padding:{top:"20px"},children:[{package:"basic-components",id:"textTest",name:"textBlock",options:{text:"toto je text",margin:{top:"10px",bottom:"6px",left:"12px",right:"14pt"},padding:{top:"8px",bottom:"8px",left:"12px",right:"12px"},textStyling:{fontSize:"20px"},flex:"1"}},{package:"basic-components",id:"text2Test",name:"textBlock",options:{text:"druhý riadok je toto",textStyling:{fontWeight:Qt.Bold}}}]}}}},{id:"anotherCell",package:"basic-components",name:"gridPanelCell",options:{gridColumnStart:3,gridColumnEnd:4,gridRowStart:1,gridRowEnd:2,component:{package:"basic-components",id:"textJeTo",name:"textBlock",options:{text:"nový text"}}}},{id:"gridCellxxx",package:"basic-components",name:"gridPanelCell",options:{gridColumnStart:4,gridColumnEnd:5,gridRowStart:1,gridRowEnd:2,component:{id:"stackPanelxxx",package:"basic-components",name:"stackPanel",options:{horizontal:!0,children:[]}}}}]}}}};Xt.ɵfac=function(t){return new(t||Xt)(D.Y(L.t),D.Y($t),D.Y(qt.F0),D.Y(At.gz))},Xt.ɵcmp=k.Xp({type:Xt,selectors:[["layout-editor-view"]],features:[xt._([Ut.N,L.t])],decls:29,vars:8,consts:[[1,"flex-row"],[2,"width","180px",3,"formControl"],["text","*unsaved*",3,"value"],[3,"value","text",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-danger",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","text",3,"formControl"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-row","margin-top-big","flex-1"],["label","Hierarchy"],["label","Palette"],[1,"flex-1"],[3,"layoutComponentRenderer"],[3,"value","text"]],template:function(t,e){1&t&&(u.Tg(0,"div",0)(1,"ng-select",1),u._U(2,"ng-option",2),b.Y(3,Gt,1,2,"ng-option",3),u.qZ(),u.Tg(4,"button",4),m.N("click",(function(){return e._delete()})),u.Tg(5,"span"),T._(6,"remove"),u.qZ()(),u.Tg(7,"button",5),m.N("click",(function(){return e._load()})),u.Tg(8,"span"),T._(9,"load"),u.qZ()(),u._U(10,"input",6),u.Tg(11,"button",5),m.N("click",(function(){return e._save()})),u.Tg(12,"span"),T._(13,"save"),u.qZ()(),u.Tg(14,"button",7),m.N("click",(function(){return e._new()})),u.Tg(15,"span"),T._(16,"new"),u.qZ()(),u.Tg(17,"button",7),m.N("click",(function(){return e._loadDemo()})),u.Tg(18,"span"),T._(19,"demo"),u.qZ()()(),u.Tg(20,"div",8)(21,"mat-tab-group")(22,"mat-tab",9),u._U(23,"components-tree"),u.qZ(),u.Tg(24,"mat-tab",10),u._U(25,"components-palette"),u.qZ()(),u.Tg(26,"div",11),K.Gk(27,12),u.qZ(),u._U(28,"properties-editor"),u.qZ()),2&t&&(f.x(1),y.Q("formControl",e._available),f.x(1),y.Q("value",""),f.x(1),y.Q("ngForOf",e._availableNames),f.x(1),y.Q("disabled",!e._available.value),f.x(3),y.Q("disabled",!e._available.value),f.x(3),y.Q("formControl",e._name),f.x(1),y.Q("disabled",!e._name.value),f.x(16),y.Q("layoutComponentRenderer",e._metadata))},dependencies:[I.s,kt.Fj,Mt.JJ,wt.oH,jt.x,Ht.w,Bt.v,Jt.i,U,mt,Et,Vt.SP,Kt.u],encapsulation:2,changeDetection:0}),Xt=(0,o.gn)([(0,Zt.N)({path:"editor"}),(0,Zt.N)({path:"editor/:id"}),(0,o.w6)("design:paramtypes",[L.t,$t,qt.F0,At.gz])],Xt);var Wt=n(80149);function te(t,e){if(1&t&&u._U(0,"ng-option",5),2&t){const t=e.$implicit;y.Q("value",t)("text",t)}}let ee=class{constructor(t,e,n){this._store=t,this._router=e,this._route=n,this._available=new gt.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStoredLayouts(),this._route.params.subscribe((({id:t})=>{t&&(this._available.setValue(t),this._metadata=this._store.getLayoutData(t)),this._available.valueChanges.subscribe((t=>{this._router.navigate(["/preview",t],{skipLocationChange:!1,replaceUrl:!0})}))}))}ngOnDestroy(){}};ee.ɵfac=function(t){return new(t||ee)(D.Y($t),D.Y(qt.F0),D.Y(At.gz))},ee.ɵcmp=k.Xp({type:ee,selectors:[["layout-preview-view"]],features:[xt._([L.t])],decls:6,vars:3,consts:[[3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll"],[3,"layoutComponentRenderer"],[3,"value","text"]],template:function(t,e){1&t&&(u.Tg(0,"div")(1,"ng-select",0),b.Y(2,te,1,2,"ng-option",1),u.qZ()(),u.Tg(3,"div",2)(4,"div",3),K.Gk(5,4),u.qZ()()),2&t&&(f.x(1),y.Q("formControl",e._available),f.x(1),y.Q("ngForOf",e._availableNames),f.x(3),y.Q("layoutComponentRenderer",e._metadata))},dependencies:[I.s,Mt.JJ,wt.oH,jt.x,Ht.w,Bt.v,Jt.i],encapsulation:2,changeDetection:0}),ee=(0,o.gn)([(0,Wt.R)("","preview"),(0,Zt.N)({path:"preview"}),(0,Zt.N)({path:"preview/:id"}),(0,o.w6)("design:paramtypes",[$t,qt.F0,At.gz])],ee);const ne=[Xt,ee];var oe=n(42983);let ae=class{};ae.ɵfac=function(t){return new(t||ae)},ae.ɵmod=k.oA({type:ae}),ae.ɵinj=tt.cJ({imports:[oe._J,oe.No,oe.nP,U,mt,Et,a.N]}),ae=(0,o.gn)([(0,i.P)(ne)],ae)},4820:(t,e,n)=>{n.d(e,{R:()=>v,Y:()=>b});var o=n(40296),a=n(39273),i=n(43801),r=n(13691),s=n(47098),c=n(80827),l=n(65589),d=n(73301),p=n(49280),u=n(77470),m=n(27635),g=n(61939);class h extends a.L{}h.ɵfac=function(){let t;return function(e){return(t||(t=i.n5(h)))(e||h)}}(),h.ɵcmp=r.Xp({type:h,selectors:[["input-string"]],features:[s.q],decls:2,vars:3,consts:[["type","text",1,"form-control",3,"formControl"]],template:function(t,e){1&t&&(c._U(0,"input",0),l.AL(1,"asRequired")),2&t&&d.Q("formControl",l.lc(1,1,e._control))},dependencies:[p.Fj,u.JJ,m.oH,g.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0});var _=n(70983);class f extends a.L{}f.ɵfac=function(){let t;return function(e){return(t||(t=i.n5(f)))(e||f)}}(),f.ɵcmp=r.Xp({type:f,selectors:[["input-boolean"]],features:[s.q],decls:2,vars:3,consts:[["type","checkbox",1,"form-control",3,"formControl"]],template:function(t,e){1&t&&(c._U(0,"input",0),l.AL(1,"asRequired")),2&t&&d.Q("formControl",l.lc(1,1,e._control))},dependencies:[_.W,u.JJ,m.oH,g.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0});var y=n(94596);const v=new o.O("LAYOUT_EDITOR_PROPERTY_METADATA_PROPERTIES",{providedIn:"root",factory:()=>[y.$]}),b=new o.O("LAYOUT_EDITOR_PROPERTY_TYPE_CONTROLS",{providedIn:"root",factory:()=>({inputString:h,inputBoolean:f})})},94596:(t,e,n)=>{n.d(e,{$:()=>o});const o=Symbol("LayoutPropertyMetadata")},39273:(t,e,n)=>{n.d(e,{L:()=>l});var o=n(87606),a=n(79440),i=n(68961),r=n(13691);function s(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){s(i,o,a,r,c,"next",t)}function c(t){s(i,o,a,r,c,"throw",t)}r(void 0)}))}}class l{constructor(t){this._changeDetector=t,this._initialized=!1,this.values=[]}get control(){return this._control}set control(t){this._control=t,this._controlSet()}ngOnInit(){var t=this;return c((function*(){t._initialized||(t._initialized=!0,yield(0,o.K)(t._initialize()))}))()}initialize(){var t=this;return c((function*(){yield(0,o.K)(t.ngOnInit())}))()}invalidateVisuals(){this._changeDetector.detectChanges()}_initialize(){}_controlSet(){}}l.ɵfac=function(t){return new(t||l)(a.Y(i.s))},l.ɵdir=r.lG({type:l,inputs:{control:"control",values:"values"}})},59951:(t,e,n)=>{n.d(e,{i:()=>l});var o=n(27052),a=n(4644),i=n(5348),r=n(25626),s=n(13691),c=n(38327);class l{}l.ɵfac=function(t){return new(t||l)},l.ɵmod=s.oA({type:l}),l.ɵinj=c.cJ({imports:[o.e,a.U,i.A,r.F]})}}]);
//# sourceMappingURL=739.chunk.cecb0fb42b61cfa4c3ad.js.map