"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[309],{20309:(t,e,s)=>{s.r(e),s.d(e,{default:()=>$});var n=s(2032),i=s(95176),r=s(64253),a=s(48488),o=s(9718),u=s(36759),l=s(89402),c=s(6552),p=s(46480),h=s(87929),f=s(71975),m=s(43939),g=s(21340),d=s(11776),v=s(38327);class y{constructor(t){this._dateApi=t}serializeObject(t,e=""){if(!(0,m.wV)(t))return null;const s=[],n=(t,i)=>{(0,m.fp)(i)||(0,m.mf)(i)||(Array.isArray(i)?i.forEach(((e,s)=>{n((0,m.wV)(e)?`${t}[${s}]`:t,e)})):this._dateApi.isDate(i)?s.push(`${e}${t}=${this._dateApi.toString(i)}`):(0,m.HD)(i)?s.push(`${e}${t}=${i}`):(0,m.hj)(i)||(0,m.jn)(i)?s.push(`${e}${t}=${i.toString()}`):(0,m.wV)(i)&&s.push(this.serializeObject(i,`${t}.`)))};return Object.keys(t).forEach((e=>{const s=t[e];n(e,s)})),s.join("&")}serializeObjectToParams(t){const e=this.serializeObject(t);return(0,m.fp)(e)?null:new f.L({fromString:e})}}function O(t,e){t.transformFn&&(t.value=t.transformFn(t.value)),t.value instanceof Object&&(t.value=JSON.stringify(t.value)),e[t.key]=t.value}function b(t,e){t.transformFn&&(t.value=t.transformFn(t.value)),e[t.key]=t.value}function k(t,e){return t.transformFn&&(t.value=t.transformFn(t.value)),e.replace("{"+t.key+"}",t.value)}function w(t,e,s){t.transformFn&&(t.value=t.transformFn(t.value));const n=s.serializeObject(t.value);n&&e.push(n)}y.ɵfac=function(t){return new(t||y)(d.LF(g.uD))},y.ɵprov=v.Yz({token:y,factory:y.ɵfac,providedIn:"root"});var R=s(48050),j=s(88842);function A(t,e,s,n,i,r,a){try{var o=t[r](a),u=o.value}catch(t){return void s(t)}o.done?e(u):Promise.resolve(u).then(n,i)}const P=function(){var t,e=(t=function*(){return new((yield Promise.all([s.e(4623),s.e(8654),s.e(9678),s.e(7537)]).then(s.bind(s,68226))).RestRelationsEditorMetadata)},function(){var e=this,s=arguments;return new Promise((function(n,i){var r=t.apply(e,s);function a(t){A(r,n,i,a,o,"next",t)}function o(t){A(r,n,i,a,o,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();let S=class{constructor(t){this.emptyParam=[],this.success={test:!0},this.error=null,this.http=t.get(r.e),this.logger=t.get(p.bZ),this.queryStringSerializer=t.get(y),this.progressIndicator=t.get(h.u)}get relationsOptions(){return this.ɵRelationsOptions}set relationsOptions(t){this.ɵRelationsOptions=t,this.initialize()}ngOnChanges(t){this.makeRequest()}invalidateVisuals(){}initialize(){if(this.relationsOptions&&this.relationsOptions.params&&Array.isArray(this.relationsOptions.params))for(const t in this.relationsOptions.params){const e=this.relationsOptions.params[t];this.emptyParam.push(!0),e.configurable&&e.name&&Object.defineProperty(this,e.name,{configurable:!0,enumerable:!0,set:s=>{e.value=s,this.emptyParam[t]=(0,m.fp)(s)}})}this.relationsOptions?.runImmediately&&this.makeRequest()}makeRequest(){if(this.emptyParam.find((t=>t)))return;if(this.runningRequestSubscription&&(this.runningRequestSubscription.unsubscribe(),this.progressIndicator.hideProgress()),!this.relationsOptions||!this.relationsOptions.method||!this.relationsOptions.url)return void this.logger.warn("RestRelations: missing options for craeting http request {@data}",this.relationsOptions);let t=null,e=this.relationsOptions.url;const s={},n={},i=[];if(this.relationsOptions.params&&Array.isArray(this.relationsOptions.params))for(const r of this.relationsOptions.params){if(!r.name)continue;const a={index:0,key:r.name,value:r.value,transformFn:null};switch(r.type){case"PATH":e=k(a,e);break;case"BODY":t=r.value;break;case"QUERY":O(a,s);break;case"QUERY OBJECT":w(a,i,this.queryStringSerializer);break;case"HEADER":b(a,n)}}let r=new a.a(this.relationsOptions.method,e,t,{reportProgress:!1,responseType:"json"});if((0,m.Qr)(s)||(r=r.clone({setParams:s})),(0,m.Qr)(n)||(r=r.clone({setHeaders:n})),i.length){const t=function(t,e){const s=t.join("&"),n=new f.L({fromString:s});return n.keys().forEach((t=>{const s=n.getAll(t);s&&s.forEach(((s,n)=>{e=n?e.append(t,s):e.set(t,s)}))})),e}(i,r.params);r=r.clone({params:t})}this.runningRequestSubscription=this.http.request(r).pipe((0,R.K)((t=>(this.success=null,this.error=t,j.E)))).subscribe((t=>{if(t.type==o.dt.Response&&t.status>=200&&t.status<=300)return this.success=t.body,void(this.error=null)}))}};(0,n.gn)([(0,u.A)(),(0,n.w6)("design:type",Object)],S.prototype,"success",void 0),(0,n.gn)([(0,u.A)(),(0,n.w6)("design:type",Object)],S.prototype,"error",void 0),S=(0,n.gn)([(0,l.H)(),(0,c.i)(P),(0,n.w6)("design:paramtypes",[i.z])],S);const $=S}}]);
//# sourceMappingURL=309.chunk.da6f063f98b175bbde42.js.map