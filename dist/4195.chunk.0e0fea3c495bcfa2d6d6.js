(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[4195],{25048:(t,e,n)=>{var o={"./en.json":[79587,9587],"./sk.json":[5930,5930]};function i(t){if(!n.o(o,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=o[t],i=e[0];return n.e(e[1]).then((()=>n.t(i,19)))}i.keys=()=>Object.keys(o),i.id=25048,t.exports=i},79141:(t,e,n)=>{"use strict";n.d(e,{Qw:()=>i.Q,mx:()=>s.m,oK:()=>r.o,$u:()=>V});var o,i=n(44275),s=n(69722),r=n(63325),a=n(78278),c=n(30486),u=n(6688),l=n(75250),d=n(55136),p=n(88809),g=n(95741),h=n(10065),m=n(13315),f=n(36273),v=n(67942),y=n(57284),b=n(13757),C=n(80033),_=n(85410),w=n(78190),x=n(43335),O=n(46430),R=n(96189),I=n(53902),S=n(48074),P=n(64909),L=n(87905),D=n(69813),k=n(48907),E=n(14225),T=n(72620),N=n(27669),M=n(36391),A=n(87764);function F(t,e){if(1&t&&(p._U(0,"ng-option",10),g.AL(1,"translate")),2&t){const t=e.$implicit;h.Q("text",g.lc(1,2,t))("value",t)}}function j(t,e){if(1&t&&p._U(0,"ng-option",10),2&t){const t=e.$implicit;h.Q("text",t.name)("value",null==t?null:t.lang)}}function z(t,e){if(1&t&&(p.Tg(0,"div",6)(1,"div",7),m._(2),g.AL(3,"translate"),p.qZ(),p.Tg(4,"div")(5,"ng-select",8),f.Sj(6,F,2,4,"ng-option",10,f.x6),p.qZ()(),p.Tg(8,"div",7),m._(9),g.AL(10,"translate"),p.qZ(),p.Tg(11,"div")(12,"ng-select",9),f.Sj(13,j,1,2,"ng-option",10,f.x6),p.qZ()()()),2&t){const t=v.o();h.Q("formGroup",t.generalSettingsForm),y.x(2),b.Oq(g.lc(3,3,"theme")),y.x(4),f.wJ(t.themes),y.x(3),b.Oq(g.lc(10,5,"language")),y.x(4),f.wJ(t.languages)}}function Y(t,e){if(1&t&&p._U(0,"ng-option",10),2&t){const t=e.$implicit;h.Q("text",t.name)("value",null==t?null:t.value)}}function U(t,e){if(1&t&&(p.Tg(0,"div",6)(1,"div",7),m._(2),g.AL(3,"translate"),p.qZ(),p.Tg(4,"div")(5,"ng-select",11),f.Sj(6,Y,1,2,"ng-option",10,f.x6),p.qZ()()()),2&t){const t=v.o();h.Q("formGroup",t.loggingSettingsForm),y.x(2),b.Oq(g.lc(3,2,"console log")),y.x(4),f.wJ(t.logLevels)}}function q(t,e){if(1&t&&(p.Tg(0,"div",6)(1,"div",7),m._(2),g.AL(3,"translate"),p.qZ(),p.Tg(4,"div"),p._U(5,"mat-slide-toggle",12),p.qZ(),p.Tg(6,"div",7),m._(7),g.AL(8,"translate"),p.qZ(),p.Tg(9,"div"),p._U(10,"mat-slide-toggle",13),p.qZ()()),2&t){const t=v.o();h.Q("formGroup",t.debuggingSettingsForm),y.x(2),b.Oq(g.lc(3,3,"console")),y.x(5),b.Oq(g.lc(8,5,"debug data"))}}!function(t){t[t.General=0]="General",t[t.Logging=1]="Logging",t[t.Debugging=2]="Debugging"}(o||(o={}));class V{constructor(t,e,n){this.themes=c.v.configuration.themes,this.languages=c.v.configuration.languages,this.logLevels=[],this.activeSection=o.General,this.UserSettingsSections=o;const i=t.settings,s=t.settingsDebugging,r=t.settingsLogging;this._getLogLevels(),this.generalSettingsForm=e.group({language:i.language,theme:i.theme}),this.debuggingSettingsForm=e.group({consoleEnabled:s.consoleEnabled,debugData:s.debugData}),this.loggingSettingsForm=e.group({consoleLogLevel:a.i[r.consoleLogLevel]}),this.generalSettingsForm.valueChanges.subscribe((e=>{t.setSettings(e)})),this.debuggingSettingsForm.valueChanges.subscribe((e=>{n.setEnabled(e.debugData),t.setDebuggingSettings(e)})),this.loggingSettingsForm.valueChanges.subscribe((e=>{t.setLoggingSettings({consoleLogLevel:a.i[+e.consoleLogLevel]})}))}_getLogLevels(){Object.keys(a.i).forEach((t=>{const e=+t;isNaN(e)||this.logLevels.push({name:a.i[e],value:t})}))}}V.ɵfac=function(t){return new(t||V)(C.Y(u.g),C.Y(I.qu),C.Y(D.H))},V.ɵcmp=_.Xp({type:V,selectors:[["user-settings"]],standalone:!0,features:[w.j],decls:20,vars:18,consts:[[1,"flex-column","settings-menu"],[1,"btn-line",3,"click"],[1,"fas","fa-cog"],[1,"fas","fa-pen"],[1,"fas","fa-bug"],["class","settings-items",3,"formGroup"],[1,"settings-items",3,"formGroup"],[1,"text-capitalize"],["formControlName","theme","absolute",""],["formControlName","language","absolute",""],[3,"text","value"],["formControlName","consoleLogLevel","absolute",""],["formControlName","consoleEnabled"],["formControlName","debugData"]],template:function(t,e){1&t&&(p.Tg(0,"div",0)(1,"a",1),x.N("click",(function(){return e.activeSection=e.UserSettingsSections.General})),p._U(2,"span",2),p.Tg(3,"span"),m._(4),g.AL(5,"translate"),p.qZ()(),p.Tg(6,"a",1),x.N("click",(function(){return e.activeSection=e.UserSettingsSections.Logging})),p._U(7,"span",3),p.Tg(8,"span"),m._(9),g.AL(10,"translate"),p.qZ()(),p.Tg(11,"a",1),x.N("click",(function(){return e.activeSection=e.UserSettingsSections.Debugging})),p._U(12,"span",4),p.Tg(13,"span"),m._(14),g.AL(15,"translate"),p.qZ()()(),p.Tg(16,"div"),O.Y(17,z,15,7,"div",5)(18,U,8,4,"div",5)(19,q,11,7,"div",5),p.qZ()),2&t&&(y.x(1),R.ek("active",e.activeSection==e.UserSettingsSections.General),y.x(3),b.Oq(g.lc(5,12,"general")),y.x(2),R.ek("active",e.activeSection==e.UserSettingsSections.Logging),y.x(3),b.Oq(g.lc(10,14,"logging")),y.x(2),R.ek("active",e.activeSection==e.UserSettingsSections.Debugging),y.x(3),b.Oq(g.lc(15,16,"debug")),y.x(3),f.um(17,e.activeSection==e.UserSettingsSections.General?17:-1),y.x(1),f.um(18,e.activeSection==e.UserSettingsSections.Logging?18:-1),y.x(1),f.um(19,e.activeSection==e.UserSettingsSections.Debugging?19:-1))},dependencies:[l._,k.X,d.N,S.JJ,S.JL,P.s,L.u,E.Rr,T.x,N.w,M.v,A.M],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row}.settings-menu[_ngcontent-%COMP%]{width:120px;font-size:1.1em;margin-right:48px}.settings-menu[_ngcontent-%COMP%]   span[class^=fa][_ngcontent-%COMP%], .settings-menu[_ngcontent-%COMP%]   span[class^=fas][_ngcontent-%COMP%], .settings-menu[_ngcontent-%COMP%]   span[class^=glyphicon][_ngcontent-%COMP%]{margin-right:10px}.settings-items[_ngcontent-%COMP%]{width:300px;display:grid;grid-template-columns:auto 160px;grid-template-rows:auto;column-gap:10px;row-gap:4px;align-items:center}"],changeDetection:0})},44275:(t,e,n)=>{"use strict";n.d(e,{Q:()=>Pt});var o=n(52038),i=n(58853),s=n(49882),r=n(58418),a=n(14829),c=n(59098),u=n(19630),l=n(76600),d=n(12009),p=n(96935),g=n(30626),h=n(69363),m=n(90366),f=n(65206),v=n(85410);class y{transform(t,e,n,o){return!!t[e]?.[n]&&t[e][n].indexOf(o)>=0}}y.ɵfac=function(t){return new(t||y)},y.ɵpipe=v.Yj({name:"propertySelected",type:y,pure:!0,standalone:!0});var b=n(71862),C=n(55055),_=n(88809),w=n(13315),x=n(67942),O=n(10065),R=n(57284),I=n(13757),S=n(88731),P=n(43335),L=n(32603),D=n(95741),k=n(46430),E=n(52622),T=n(80033),N=n(80354),M=n(78190),A=n(66898),F=n(21593),j=n(4539),z=n(22517),Y=n(62708),U=n(45148),q=n(35332),V=n(43371),Z=n(48074),$=n(24900),G=n(24311);function Q(t,e){if(1&t&&(_.Tg(0,"option",11),w._(1),_.qZ()),2&t){const t=e.$implicit,n=x.o();O.Q("value",t),R.x(1),I.Oq(null==n.data.customComponentContentMetadata[t]||null==n.data.customComponentContentMetadata[t].metadata?null:n.data.customComponentContentMetadata[t].metadata.displayName)}}function B(t,e){if(1&t&&_._U(0,"span",20),2&t){const t=e.ngIf;O.Q("tooltip",t)}}function H(t,e){if(1&t){const t=S.E();_.Tg(0,"div")(1,"label")(2,"input",18),P.N("change",(function(){const e=L.CH(t).$implicit,n=x.o().$implicit,o=x.o().$implicit,i=x.o();return L.Kt(i.toggleSelected(o.key,n.key,e))})),D.AL(3,"propertySelected"),_.qZ(),_.Tg(4,"span"),w._(5),D.AL(6,"propertiesMetadata"),D.AL(7,"getModel"),_.qZ(),k.Y(8,B,1,1,"span",19),D.AL(9,"propertiesMetadata"),D.AL(10,"getModel"),_.qZ()()}if(2&t){const t=e.$implicit,n=x.o().$implicit,o=x.o().$implicit,i=x.o();let s,r;R.x(2),O.Q("checked",D.tD(3,3,i.usedProperties,o.key,n.key,t)),R.x(3),I.Oq(null!==(s=null==(s=D.xi(6,8,D.xi(7,11,n.key,i.data.customComponentContentMetadata[o.key]),i.data.propsMetadataExtractor))||null==s[t]?null:s[t].name)&&void 0!==s?s:t),R.x(3),O.Q("ngIf",null==(r=D.xi(9,14,D.xi(10,17,n.key,i.data.customComponentContentMetadata[o.key]),i.data.propsMetadataExtractor))||null==r[t]?null:r[t].description)}}function J(t,e){if(1&t&&(E.yn(0),k.Y(1,H,11,20,"div",17),E.BQ()),2&t){const t=e.$implicit;R.x(1),O.Q("ngForOf",t.value)}}function X(t,e){if(1&t){const t=S.E();_.Tg(0,"div",12)(1,"div",13)(2,"span",14),w._(3),_.qZ(),_.Tg(4,"a",15),P.N("click",(function(){const e=L.CH(t).$implicit,n=x.o();return L.Kt(n.removeComponent(e.key))})),_._U(5,"span",16),_.qZ()(),k.Y(6,J,2,1,"ng-container",17),D.AL(7,"keyvalue"),_.qZ()}if(2&t){const t=e.$implicit,n=x.o();R.x(3),I.Oq(null==n.data.customComponentContentMetadata[t.key]||null==n.data.customComponentContentMetadata[t.key].metadata?null:n.data.customComponentContentMetadata[t.key].metadata.displayName),R.x(3),O.Q("ngForOf",D.lc(7,2,n.availableProperties[t.key]))}}const K=t=>({configurableProperties:t,displayName:"",description:""});class W{constructor(t,e,n){var o,i,s;this.data=t,this.dialog=e,this.component=new r.NI,this.usedProperties={},this.availableProperties={},this.contentComponents=[],this.contentComponents=Object.keys(t.customComponentContentMetadata),this.nameDescriptionForm=n.build({displayName:"",description:""});for(const t in this.data.configuration.configurableProperties){const e=this.data.configuration.configurableProperties[t];(o=this.usedProperties)[t]??(o[t]={});for(const n in e){const o=e[n];this.usedProperties[t][n]=[...o]}}const a=Object.keys(this.usedProperties);this.contentComponents=this.contentComponents.filter((t=>a.indexOf(t)<0));for(const e in t.customComponentContentMetadata){const n=t.customComponentContentMetadata[e];if(n?.editorMetadata.metaInfo?.optionsMetadata?.propertiesMetadata)for(const t of n.editorMetadata.metaInfo.optionsMetadata.propertiesMetadata){const n=new t.modelType(void 0);if(!Object.keys(n).length)continue;const o=t.modelType.name;(i=this.availableProperties)[e]??(i[e]={}),(s=this.availableProperties[e])[o]??(s[o]=[]);for(const t in n)this.availableProperties[e][o].push(t)}}}addComponent(){if(!this.component.value)return;this.usedProperties[this.component.value]={};const t=this.contentComponents.indexOf(this.component.value);t>=0&&(this.contentComponents.splice(t,1),this.component.setValue(this.contentComponents[0]??null))}removeComponent(t){delete this.usedProperties[t],this.contentComponents.push(t),1==this.contentComponents.length&&this.component.setValue(this.contentComponents[0])}toggleSelected(t,e,n){var o,i;(o=this.usedProperties)[t]??(o[t]={}),(i=this.usedProperties[t])[e]??(i[e]=[]);const s=this.usedProperties[t][e].indexOf(n);s>=0?(this.usedProperties[t][e].splice(s,1),this.usedProperties[t][e]=[...this.usedProperties[t][e]]):this.usedProperties[t][e]=[...this.usedProperties[t][e],n]}}W.ɵfac=function(t){return new(t||W)(T.Y(h.m),T.Y(F.z),T.Y(g.p))},W.ɵcmp=v.Xp({type:W,selectors:[["custom-component-options"]],standalone:!0,features:[N._([g.p]),M.j],decls:21,vars:18,consts:[[1,"dynamic-margin-bottom-small","dynamic-flex-row"],[1,"dynamic-flex-1","dynamic-margin-right-small"],[1,"dynamic-control-label"],[1,"dynamic-form-control",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"dynamic-btn-icon","dynamic-margin-left-small","dynamic-large-text",3,"click"],[1,"fas","fa-plus"],["class","dynamic-margin-bottom-small",4,"ngFor","ngForOf"],[1,"dynamic-flex-row","dynamic-flex-end","dynamic-action-buttons"],["type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"mat-dialog-close"],[3,"value"],[1,"dynamic-margin-bottom-small"],[1,"dynamic-bold","dynamic-flex-row"],[1,"dynamic-margin-right-small"],[1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-times"],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","change"],["class","fas fa-info-circle dynamic-margin-left-extra-small",3,"tooltip",4,"ngIf"],[1,"fas","fa-info-circle","dynamic-margin-left-extra-small",3,"tooltip"]],template:function(t,e){1&t&&(_.Tg(0,"div",0)(1,"div",1)(2,"label",2),w._(3),D.AL(4,"firstUppercaseLocalize"),_.qZ(),_.Tg(5,"select",3),k.Y(6,Q,2,2,"option",4),_.qZ()(),_.Tg(7,"a",5),P.N("click",(function(){return e.addComponent()})),_._U(8,"span",6),_.qZ()(),_.Tg(9,"div"),k.Y(10,X,8,4,"div",7),D.AL(11,"keyvalue"),_.qZ(),_.Tg(12,"div",8)(13,"button",9)(14,"span"),w._(15),D.AL(16,"firstUppercaseLocalize"),_.qZ()(),_.Tg(17,"button",10)(18,"span"),w._(19),D.AL(20,"firstUppercaseLocalize"),_.qZ()()()),2&t&&(R.x(3),I.Oq(D.lc(4,8,"available content components")),R.x(2),O.Q("formControl",e.component),R.x(1),O.Q("ngForOf",e.contentComponents),R.x(4),O.Q("ngForOf",D.lc(11,10,e.usedProperties)),R.x(3),O.Q("mat-dialog-close",void 0),R.x(2),I.Oq(D.lc(16,12,"cancel")),R.x(2),O.Q("mat-dialog-close",A.VK(16,K,e.usedProperties)),R.x(2),I.Oq(D.lc(20,14,"ok")))},dependencies:[i.e,j.sg,z.O,Y.N,p.I,U.ZT,a.U,q.Y,V.Kr,q.E,Z.JJ,$.o,y,b.m,C.l,m.z,G.i,f.R],encapsulation:2,changeDetection:0});var tt=n(65947),et=n(31530),nt=n(25413),ot=n(56949),it=n(46363),st=n(25271),rt=n(19684);function at(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}function ct(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){at(s,o,i,r,a,"next",t)}function a(t){at(s,o,i,r,a,"throw",t)}r(void 0)}))}}class ut{constructor(t,e,n,o,i){this.injector=t,this.dialogSvc=e,this.customComponentsRegister=n,this.propsMetadataExtractor=o,this.element=i,this.customComponentContentMetadata={}}ngOnChanges(){var t=this;return ct((function*(){if(!t.name)return;const e=yield(0,tt.Qd)(t.name,t.injector);e&&(t.customComponentContentMetadata=e.contentMetadata,t.customComponentMetadata=e.metadata)}))()}ngOnInit(){var t=this;return ct((function*(){if(!t.name&&!t.element.nativeElement.disabled)throw new Error("Please provide name of custom component for its options")}))()}show(t){var e=this;return ct((function*(){t.preventDefault(),t.stopPropagation();const n=yield(0,d.n)(e.dialogSvc.open(W,{title:"custom component options",width:"75vw",data:{customComponentContentMetadata:e.customComponentContentMetadata,configuration:(yield e.customComponentsRegister.getConfigurationForComponent(e.name??""))??{},propsMetadataExtractor:e.propsMetadataExtractor}}).afterClosed());n&&(yield e.customComponentsRegister.setConfigurationForComponent(e.name??"",n))}))()}}ut.ɵfac=function(t){return new(t||ut)(T.Y(et.z),T.Y(it.J),T.Y(st.t),T.Y(rt.L),T.Y(nt.SB))},ut.ɵdir=v.lG({type:ut,selectors:[["","showCustomComponentOptions",""]],hostBindings:function(t,e){1&t&&P.N("click",(function(t){return e.show(t)}))},inputs:{name:["showCustomComponentOptions","name"]},standalone:!0,features:[ot.T]});var lt=n(73943),dt=n(25689),pt=n(49276),gt=n(1737),ht=n(34326),mt=n(57283),ft=n(35891),vt=n(48049),yt=n(28007),bt=n(72620),Ct=n(27669),_t=n(36391),wt=n(14225);function xt(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}function Ot(t,e){if(1&t&&_._U(0,"ng-option",9),2&t){const t=e.$implicit;O.Q("value",t)("text",t)}}function Rt(t,e){1&t&&(E.yn(0),w._(1,"*"),E.BQ())}function It(t,e){if(1&t){const t=S.E();E.yn(0),_.Tg(1,"mat-slide-toggle",10),P.N("change",(function(){L.CH(t);const e=x.o();return L.Kt(e.liveEvents.setEnabled(!e.liveEvents.enabled))})),w._(2,"live events"),_.qZ(),_.Tg(3,"button",11),w._(4,"CC options"),_.qZ(),E.BQ()}if(2&t){const t=x.o();R.x(1),O.Q("checked",t.liveEvents.enabled),R.x(2),O.Q("showCustomComponentOptions",t._available.value)("disabled",!t._component.value)}}function St(t,e){if(1&t&&(_.Tg(0,"label",12),_._U(1,"input",13),w._(2," component"),_.qZ()),2&t){const t=x.o();R.x(1),O.Q("formControl",t._component)}}class Pt{constructor(t,e,n,i,s,a,c){this._router=t,this._route=e,this._metaManager=n,this._changeDetector=i,this.liveEvents=s,this._customComponentsRegister=a,this._hotkeys=c,this._metadata=null,this._available=new r.NI(""),this._component=new r.NI(!1),this._name=new r.NI(null),this._availableNames=[],this.initSubscriptions=new dt.w0,this.history=null,this.componentMarking=!1,this.layoutControls=!0,this.metadataChange=new o.v}ngOnInit(){var t=this;this.componentMarking&&(this._available.valueChanges.subscribe(function(){var e,n=(e=function*(e){if(!e)return;const n=yield t._customComponentsRegister?.getRegisteredComponents();t._component.setValue(n.indexOf(e)>=0,{emitEvent:!1})},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function r(t){xt(s,o,i,r,a,"next",t)}function a(t){xt(s,o,i,r,a,"throw",t)}r(void 0)}))});return function(t){return n.apply(this,arguments)}}()),this._component.valueChanges.subscribe((()=>this._customComponentsRegister?.toggleRegisteredComponent(this._available.value)))),this._hotkeys&&this.initSubscriptions.add(this._hotkeys.save.subscribe((()=>this._save()))),this.history&&(this.initSubscriptions.add(this.history.historyChange.subscribe((()=>this._changeDetector.detectChanges()))),this.initSubscriptions.add(this.history.pop.subscribe((()=>this._changeDetector.detectChanges())))),this._availableNames=this.store.getStored(),this._route.params.subscribe((({id:t})=>{t?(this._name.setValue(t),this._available.setValue(t),this._metadata=this.store.getData(this._available.value),this.metadataChange.next(this._metadata)):(this._metadata=null,this.metadataChange.next(this._metadata),this._name.setValue(""),this._available.setValue(""))}))}ngOnDestroy(){this.initSubscriptions.unsubscribe()}_load(){this._metadata=this.store.getData(this._available.value),this.metadataChange.next(this._metadata),this._name.setValue(this._available.value),this._router.navigate([this.routePath,this._available.value],{skipLocationChange:!1,replaceUrl:!0})}_save(){this._saveData(this._metaManager.getMetadata())}_delete(){this.store.removeData(this._available.value),this._availableNames=this.store.getStored(),this._router.navigate([this.routePath],{skipLocationChange:!1,replaceUrl:!0})}_new(){this._metadata=null,this.metadataChange.next(this._metadata),this._name.setValue(""),this._available.setValue(""),this._router.navigate([this.routePath],{skipLocationChange:!1,replaceUrl:!0})}_saveData(t){const e=this.store.getData(this._name.value)??{};this.history?.save(),this.store.setData(this._name.value,(0,lt.l7)(e,this.getMetadataCallback(t))),this._availableNames=this.store.getStored(),this._changeDetector.detectChanges(),this._router.navigate([this.routePath,this._name.value],{skipLocationChange:!1,replaceUrl:!0})}}Pt.ɵfac=function(t){return new(t||Pt)(T.Y(gt.F0),T.Y(ht.gz),T.Y(u.K),T.Y(pt.s),T.Y(mt._),T.Y(l.K,8),T.Y(ft.z,8))},Pt.ɵcmp=v.Xp({type:Pt,selectors:[["load-save-new"]],inputs:{store:"store",history:"history",routePath:"routePath",getMetadataCallback:"getMetadataCallback",componentMarking:"componentMarking",layoutControls:"layoutControls"},outputs:{metadataChange:"metadataChange"},standalone:!0,features:[M.j],decls:19,vars:10,consts:[[2,"width","180px",3,"formControl"],["text","*unsaved*",3,"value"],[3,"value","text",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-danger",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","text",3,"formControl"],[4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],["class","margin-horizontal-extra-small",4,"ngIf"],[3,"value","text"],[3,"checked","change"],["type","button",1,"btn","btn-primary",3,"showCustomComponentOptions","disabled"],[1,"margin-horizontal-extra-small"],["type","checkbox",3,"formControl"]],template:function(t,e){if(1&t&&(_.Tg(0,"ng-select",0),_._U(1,"ng-option",1),k.Y(2,Ot,1,2,"ng-option",2),_.qZ(),_.Tg(3,"button",3),P.N("click",(function(){return e._delete()})),_.Tg(4,"span"),w._(5,"remove"),_.qZ()(),_.Tg(6,"button",4),P.N("click",(function(){return e._load()})),_.Tg(7,"span"),w._(8,"load"),_.qZ()(),_._U(9,"input",5),_.Tg(10,"button",4),P.N("click",(function(){return e._save()})),_.Tg(11,"span"),w._(12,"save "),k.Y(13,Rt,2,0,"ng-container",6),_.qZ()(),_.Tg(14,"button",7),P.N("click",(function(){return e._new()})),_.Tg(15,"span"),w._(16,"new"),_.qZ()(),k.Y(17,It,5,3,"ng-container",6)(18,St,3,1,"label",8)),2&t){let t;O.Q("formControl",e._available),R.x(1),O.Q("value",""),R.x(1),O.Q("ngForOf",e._availableNames),R.x(1),O.Q("disabled",!e._available.value),R.x(3),O.Q("disabled",!e._available.value),R.x(3),O.Q("formControl",e._name),R.x(1),O.Q("disabled",!e._name.value),R.x(3),O.Q("ngIf",!(null===(t=null==e.history?null:e.history.saved)||void 0===t||t)),R.x(4),O.Q("ngIf",e.layoutControls),R.x(1),O.Q("ngIf",e.componentMarking)}},dependencies:[a.U,vt.Fj,yt.W,Z.JJ,$.o,c.A,bt.x,Ct.w,_t.v,i.e,j.sg,z.O,ut,s.r,wt.Rr],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row}"],changeDetection:0})},69722:(t,e,n)=>{"use strict";n.d(e,{m:()=>_});var o=n(97881),i=n(49276),s=n(25657),r=n(81293),a=n(7312),c=n(73943);function u(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}const l=function(){var t,e=(t=function*(){return new((yield Promise.all([n.e(7052),n.e(8748),n.e(5666),n.e(854)]).then(n.bind(n,50854))).RelationsResultRelationsEditorMetadata)},function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){u(s,o,i,r,a,"next",t)}function a(t){u(s,o,i,r,a,"throw",t)}r(void 0)}))});return function(){return e.apply(this,arguments)}}();var d,p=n(80033),g=n(85410),h=n(56949),m=n(78190),f=n(88809),v=n(13315),y=n(57284),b=n(13757);function C(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}let _=d=class{static get relationsId(){return"relations-result"}constructor(t,e,n){this._changeDetector=t,this._relationsProcessor=e,this._componentManager=n}ngOnInit(){var t,e=this;return(t=function*(){e._componentManager.registerComponent(d.relationsId,e),yield e._relationsProcessor.initialized,e._relationsProcessor.updateRelations(d.relationsId)},function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){C(s,o,i,r,a,"next",t)}function a(t){C(s,o,i,r,a,"throw",t)}r(void 0)}))})()}ngOnDestroy(){this._relationsProcessor.destroyComponent(d.relationsId),this._componentManager.unregisterComponent(d.relationsId)}ngOnChanges(t){(0,c.$0)("vstup")in t&&this.vstup&&console.log("vstup sa zmenil v result",this.vstup)}invalidateVisuals(){this._changeDetector.detectChanges()}};_.ɵfac=function(t){return new(t||_)(p.Y(i.s),p.Y(s.v),p.Y(r.s))},_.ɵcmp=g.Xp({type:_,selectors:[["relations-result"]],inputs:{vstup:"vstup"},standalone:!0,features:[h.T,m.j],decls:2,vars:1,template:function(t,e){1&t&&(f.Tg(0,"div"),v._(1),f.qZ()),2&t&&(y.x(1),b.hi("VSTUP: ",e.vstup,""))},encapsulation:2,changeDetection:0}),_=d=(0,o.gn)([(0,a.i)(l),(0,o.w6)("design:paramtypes",[i.s,s.v,r.s])],_)},63325:(t,e,n)=>{"use strict";n.d(e,{o:()=>P});var o=n(97881),i=n(49276),s=n(58418),r=n(14829),a=n(76311),c=n(25657),u=n(81293),l=n(7312),d=n(73943);function p(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}const g=function(){var t,e=(t=function*(){return new((yield Promise.all([n.e(7052),n.e(8748),n.e(5666),n.e(8346)]).then(n.bind(n,58346))).RelationsSampleClickRelationsEditorMetadata)},function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){p(s,o,i,r,a,"next",t)}function a(t){p(s,o,i,r,a,"throw",t)}r(void 0)}))});return function(){return e.apply(this,arguments)}}();var h,m=n(80033),f=n(85410),v=n(56949),y=n(78190),b=n(88809),C=n(13315),_=n(57284),w=n(13757),x=n(10065),O=n(48049),R=n(48074),I=n(24900);function S(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}let P=h=class{static get relationsId(){return"relations-sample-click"}constructor(t,e,n){this._changeDetector=t,this._relationsProcessor=e,this._componentManager=n,this._vystupForm=new s.NI(""),this._vystupForm.valueChanges.subscribe((t=>this.vystup=t))}ngOnInit(){var t,e=this;return(t=function*(){e._componentManager.registerComponent(h.relationsId,e),yield e._relationsProcessor.initialized,e._relationsProcessor.updateRelations(h.relationsId)},function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){S(s,o,i,r,a,"next",t)}function a(t){S(s,o,i,r,a,"throw",t)}r(void 0)}))})()}ngOnDestroy(){this._relationsProcessor.destroyComponent(h.relationsId),this._componentManager.unregisterComponent(h.relationsId)}ngOnChanges(t){(0,d.$0)("vstup")in t&&this.vstup&&console.log("vstup sa zmenil",this.vstup)}invalidateVisuals(){this._changeDetector.detectChanges()}};P.ɵfac=function(t){return new(t||P)(m.Y(i.s),m.Y(c.v),m.Y(u.s))},P.ɵcmp=f.Xp({type:P,selectors:[["relations-sample-click"]],inputs:{vstup:"vstup"},standalone:!0,features:[v.T,y.j],decls:4,vars:2,consts:[["type","text",3,"formControl"]],template:function(t,e){1&t&&(b.Tg(0,"div"),C._(1),b.qZ(),b.Tg(2,"div"),b._U(3,"input",0),b.qZ()),2&t&&(_.x(1),w.hi("VSTUP: ",e.vstup,""),_.x(2),x.Q("formControl",e._vystupForm))},dependencies:[r.U,O.Fj,R.JJ,I.o],encapsulation:2,changeDetection:0}),(0,o.gn)([(0,a.A)(),(0,o.w6)("design:type",String)],P.prototype,"vystup",void 0),P=h=(0,o.gn)([(0,l.i)(g),(0,o.w6)("design:paramtypes",[i.s,c.v,u.s])],P)},54195:(t,e,n)=>{"use strict";n.r(e);var o={};n.r(o),n.d(o,{default:()=>Te}),n(44649),n(35494),n(54191);var i=n(73943),s=n(37346),r=n(30486);const a=s.y.prototype.subscribe;s.y.prototype.subscribe=function(t,e,n){return!(0,i.fp)(e)&&(0,i.mf)(e)||(e=t=>{r.v.configuration.debug&&console.log(t)}),a.call(this,t,e,n)};var c=n(66200),u=n(87157),l=n(93167),d=n(26565),p=n(98029),g=n(45693),h=n(68118),m=n(72435),f=n(58853),v=n(54004),y=n(95127),b=n(25436),C=n(82307),_=n(21465),w=n(85207),x=n(12388),O=n(27147),R=n(98205),I=n(89357),S=n(40958),P=n(89911);const L=(0,P.X$)("routeAnimations",[(0,P.eR)("void <=> *, none <=> *",[(0,P.IO)(":enter",(0,P.pV)(),{optional:!0})]),(0,P.eR)("* => login",[(0,P.IO)(".main-content",[(0,P.oB)({position:"relative",perspective:"10000px"}),(0,P.IO)(":enter, :leave",[(0,P.oB)({position:"absolute",top:0,left:0,width:"100%",height:"100%"})]),(0,P.IO)(":enter",[(0,P.oB)({transform:"rotateY(-90deg)",opacity:0})]),(0,P.IO)(":leave",(0,P.pV)()),(0,P.ru)([(0,P.IO)(":leave",[(0,P.jt)("350ms ease-out",(0,P.oB)({transform:"rotateY(90deg)",opacity:0}))]),(0,P.IO)(":enter",[(0,P.jt)("350ms 350ms ease-out",(0,P.oB)({transform:"rotateY(0)",opacity:1}))])]),(0,P.IO)(":enter",(0,P.pV)())])]),(0,P.eR)("login => *",[(0,P.IO)(".main-content",[(0,P.oB)({position:"relative",perspective:"10000px"}),(0,P.IO)(":enter, :leave",[(0,P.oB)({position:"absolute",top:0,left:0,width:"100%",height:"100%"})]),(0,P.IO)(":enter",[(0,P.oB)({transform:"rotateY(-90deg)",opacity:0})]),(0,P.IO)(":leave",(0,P.pV)()),(0,P.ru)([(0,P.IO)(":leave",[(0,P.jt)("350ms ease-out",(0,P.oB)({transform:"rotateY(90deg)",opacity:0}))]),(0,P.IO)(":enter",[(0,P.jt)("350ms 350ms ease-out",(0,P.oB)({transform:"rotateY(0)",opacity:1}))])]),(0,P.IO)(":enter",(0,P.pV)())])]),(0,P.eR)("* => *",[(0,P.IO)(".main-content",[(0,P.oB)({position:"relative"}),(0,P.IO)(":enter, :leave",[(0,P.oB)({position:"absolute",top:0,left:0,width:"100%",height:"100%"})]),(0,P.IO)(":enter",[(0,P.oB)({opacity:0})]),(0,P.IO)(":leave",(0,P.pV)()),(0,P.ru)([(0,P.IO)(":leave",[(0,P.jt)("350ms ease-out",(0,P.oB)({opacity:0}))]),(0,P.IO)(":enter",[(0,P.jt)("350ms ease-out",(0,P.oB)({opacity:1}))])]),(0,P.IO)(":enter",(0,P.pV)())])])]),D=(0,P.X$)("loaderAnimation",[(0,P.eR)(":leave",[])]);var k=n(6688);const E=JSON.parse('{"i":"1.0.0-beta.20231229220249"}');var T=n(91940),N=n(85410),M=n(85086);class A{}A.ɵfac=function(t){return new(t||A)},A.ɵmod=N.oA({type:A}),A.ɵinj=M.cJ({imports:[T.s]});var F=n(75250),j=(n(55136),n(45044));class z{}z.ɵfac=function(t){return new(t||z)},z.ɵmod=N.oA({type:z}),z.ɵinj=M.cJ({imports:[j.z]});var Y=n(31276);class U{}U.ɵfac=function(t){return new(t||U)},U.ɵmod=N.oA({type:U}),U.ɵinj=M.cJ({imports:[F._,Y.V]});var q=n(88809),V=n(10065),Z=n(80033),$=n(49276),G=n(77217),Q=n(80354),B=n(78190),H=n(13315),J=n(46430),X=n(57284),K=n(13757),W=n(76099),tt=n(22517),et=n(87821),nt=n(53221),ot=n(45678),it=n(79141),st=n(43335),rt=n(46363),at=n(40551),ct=n(30957);class ut{constructor(t){this._dialog=t}openSettings(){this._dialog.open(it.$u,{title:"user settings",maxHeight:"80vh"})}}function lt(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}ut.ɵfac=function(t){return new(t||ut)(Z.Y(rt.J))},ut.ɵcmp=N.Xp({type:ut,selectors:[["main-menu"]],decls:19,vars:0,consts:[[1,"flex-row"],["routerLink","/layout/preview","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/layout/editor","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/relationsEditor","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/relationsStatic","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/relationsWithEditor","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/relationsWithLayoutEditor/preview","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/relationsComplex/preview","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/relationsLayoutForm/form-preview","routerLinkActive","active",1,"margin-horizontal-small"],[1,"flex-1"],[1,"fas","fa-cog",3,"click"]],template:function(t,e){1&t&&(q.Tg(0,"div",0)(1,"a",1),H._(2,"Preview"),q.qZ(),q.Tg(3,"a",2),H._(4,"Editor"),q.qZ(),q.Tg(5,"a",3),H._(6,"Relations editor"),q.qZ(),q.Tg(7,"a",4),H._(8,"Relations"),q.qZ(),q.Tg(9,"a",5),H._(10,"Relations with editor"),q.qZ(),q.Tg(11,"a",6),H._(12,"Relations with layout editor"),q.qZ(),q.Tg(13,"a",7),H._(14,"Relations complex"),q.qZ(),q.Tg(15,"a",8),H._(16,"Relations form"),q.qZ(),q._U(17,"div",9),q.Tg(18,"a",10),st.N("click",(function(){return e.openSettings()})),q.qZ()())},dependencies:[at.r,ct.O],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{padding:0}"],changeDetection:0});const dt=["outlet"];function pt(t,e){1&t&&q._U(0,"console"),2&t&&V.Q("@consoleAnimation",void 0)}function gt(t,e){1&t&&(q.Tg(0,"div",6),q._U(1,"div"),q.qZ()),2&t&&V.Q("@loaderAnimation",void 0)}class ht{constructor(t,e,n,o,s,r){this._changeDetector=e,this._appHotkeys=n,this.consoleVisible=!1,this.routeComponentState="none",this.guiVersion=E.i,this.initialized=!1,s.verbose("Application is starting, main component constructed."),r.body.classList.add("app-page",o.settings.theme),this._theme=o.settings.theme,this._settingsChangeSubscription=o.settingsChange.subscribe((e=>{e==(0,i.$0)("theme")&&(r.body.classList.remove(this._theme),this._theme=o.settings.theme,r.body.classList.add(this._theme)),e==(0,i.$0)("language")&&(t.use(o.settings.language),this._changeDetector.detectChanges())})),this._settingsDebuggingChangeSubscription=o.settingsDebuggingChange.subscribe((t=>{t==(0,i.$0)("consoleEnabled")&&this._toggleConsoleHotkey()})),t.setDefaultLang("en"),t.use(o.settings.language),o.settingsDebugging?.consoleEnabled&&this._toggleConsoleHotkey()}ngOnInit(){var t,e=this;return(t=function*(){e._changeDetector.detectChanges()},function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){lt(s,o,i,r,a,"next",t)}function a(t){lt(s,o,i,r,a,"throw",t)}r(void 0)}))})()}ngAfterViewInit(){this._routerOutletActivatedSubscription=this.routerOutlet?.activateEvents.subscribe((()=>{this.routeComponentState=this.routerOutlet?.activatedRouteData.animation||(this.routerOutlet?.activatedRoute.component).name})),this.initialized=!0}ngOnDestroy(){this._routerOutletActivatedSubscription?.unsubscribe(),this._routerOutletActivatedSubscription=null,this._settingsChangeSubscription?.unsubscribe(),this._settingsDebuggingChangeSubscription?.unsubscribe(),this._appHotkeys.destroy()}_toggleConsoleHotkey(){const t=this._appHotkeys.hotkeys.get("~");t?this._appHotkeys.hotkeys.remove(t):this._appHotkeys.hotkeys.add(new S.q("~",(()=>(this.consoleVisible=!this.consoleVisible,this._changeDetector.detectChanges(),!1)),void 0,"Show console"))}}ht.ɵfac=function(t){return new(t||ht)(Z.Y(W.sK),Z.Y($.s),Z.Y(w.H),Z.Y(k.g),Z.Y(y.bZ),Z.Y(m.K))},ht.ɵcmp=N.Xp({type:ht,selectors:[["app"]],viewQuery:function(t,e){if(1&t&&G.Gf(dt,5),2&t){let t;G.iG(t=G.CR())&&(e.routerOutlet=t.first)}},standalone:!0,features:[Q._([w.H]),B.j],decls:13,vars:3,consts:[[1,"content","relative"],[1,"main-content"],["outlet","outlet"],[1,"gui-version"],[4,"ngIf"],["class","loading-indicator",4,"ngIf"],[1,"loading-indicator"]],template:function(t,e){1&t&&(q._U(0,"main-menu")(1,"progress-indicator")(2,"internal-server-error")(3,"global-notifications")(4,"hotkeys-cheatsheet"),q.Tg(5,"div",0)(6,"div",1),q._U(7,"router-outlet",null,2),q.qZ()(),q.Tg(9,"div",3),H._(10),q.qZ(),J.Y(11,pt,1,1,"console",4)(12,gt,2,1,"div",5)),2&t&&(X.x(10),K.hi("GUI version: ",e.guiVersion,""),X.x(1),V.Q("ngIf",e.consoleVisible),X.x(1),V.Q("ngIf",!e.initialized))},dependencies:[f.e,tt.O,v.Bz,et.lC,O.X,b._,nt.B,I.J,ot.u,U,ut,C.y,x.m],styles:[".content[_ngcontent-%COMP%]{display:grid;flex:1;min-height:0;min-width:0;overflow:hidden}.content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:0;min-width:0}.gui-version[_ngcontent-%COMP%]{text-align:center;font-size:.7em}console[_ngcontent-%COMP%]{z-index:1}"],data:{animation:[L,R.I,_.K,D]},changeDetection:0});var mt=n(56886),ft=n(32779),vt=n(77269),yt=n(45235),bt=n(75016),Ct=n(96935),_t=n(67812),wt=n(57691),xt=n(24178),Ot=n(92504),Rt=n(26374),It=n(30962),St=n(78278),Pt=n(60637),Lt=n(47368),Dt=n(81735),kt=n(69813),Et=n(54575),Tt=n(43245),Nt=n(75267),Mt=n(6123),At=n(38770),Ft=n(50450),jt=n(72522),zt=n(82974),Yt=n(13108),Ut=n(38924),qt=n(10025),Vt=n(30821),Zt=n(68754),$t=n(52452),Gt=n(24459),Qt=n(80767),Bt=n(16201),Ht=n(97407),Jt=n(78209),Xt=n(54492),Kt=n(19913),Wt=n(33329),te=n(36390),ee=n(40560),ne=n(69572),oe=n(82410),ie=n(67386),se=n(94931),re=n(93543),ae=n(28295),ce=n(25937),ue=n(69833),le=n(30863),de=n(49418),pe=n(34109),ge=n(5112),he=n(21255),me=n(85860),fe=n(93463),ve=n(44167),ye=n(31530),be=n(76523),Ce=n(81293),_e=n(44902),we=n(15045),xe=n(46735);const Oe="COMPONENT_DEBUGGER_PROPERTY";class Re extends be.Y{constructor(){super(...arguments),this.injector=(0,ft.f3)(ye.z),this.logger=(0,ft.f3)(y.bZ,{optional:!0}),this.stepChangeSubject=new we.x,this.currentStepIndex=0,this.components=[],this.steps=[],this.componentDefs={}}get relationsComponentManager(){return this.ɵrelationsComponentManager??(this.ɵrelationsComponentManager=this.injector.get(Ce.s))}get stepChange(){return this.stepChangeSubject.asObservable()}initialize(t,e){const n=t=>{this.addOutputDef(t.outputComponentId,t.outputName),this.addInputDef(t.inputComponentId,t.inputName)};for(const e in t){const o=t[e];for(const t of o.inputOutputs??[])n(t)}for(const t in e){const o=e[t];for(const t of o)n(t)}}registerComponent(t,e){this.tryToGetEndpoints(t,e);let n=this.getLastComponents();if(n[t]&&n[t].indexOf(e.ɵɵRelationsComponentId??"")>=0)this.logger?.warn('RelationsDebugger: component "{{@id}}" has already been registered',{id:`${t}--${e.ɵɵRelationsComponentId}`});else{if(this.components.push((0,i.l7)(!0,{},n)),n=this.getLastComponents(),n[t]??(n[t]=[]),n[t].push(e.ɵɵRelationsComponentId??""),!Reflect.getOwnPropertyDescriptor(e,Oe)){Reflect.defineProperty(e,Oe,{configurable:!0,enumerable:!1,writable:!1,value:!0});let n,o=e;do{if(n=Reflect.getOwnPropertyDescriptor(o,(0,i.$0)("relationsOptions")))break}while(o=Reflect.getPrototypeOf(o));const s=this;if(n){const o=n.get,r=n.set;if(!o||!r)throw new Error("RelationsDebugger: relations options property must have getter and setter!");Reflect.defineProperty(e,(0,i.$0)("relationsOptions"),{configurable:!0,enumerable:!1,get:function(){return o.call(this)},set:function(n){r.call(this,n),s.tryToGetEndpoints(t,e),s.readComponentState(t),s.setComponentRelationsOptions(t,n)}})}else Reflect.defineProperty(e,(0,i.$0)("relationsOptions"),{configurable:!0,enumerable:!1,get:function(){return this["ɵrelationsOptions"]},set:function(n){this["ɵrelationsOptions"]=n,s.tryToGetEndpoints(t,e),s.readComponentState(t),s.setComponentRelationsOptions(t,n)}})}this.steps.push({timestamp:Date.now(),componentRegistration:{componentId:t,componentInternalId:e.ɵɵRelationsComponentId??""},componentState:null,componentUnregistration:null,dataTransfer:null,componentRelationsOptions:null,previousStep:this.getLastStepData()})}}unregisterComponent(t,e){let n,o=this.getLastComponents();!o[t]||(n=o[t].indexOf(e.ɵɵRelationsComponentId??""))<0?this.logger?.warn('RelationsDebugger: component "{{@id}}" does not exists!',{id:`${t}--${e.ɵɵRelationsComponentId}`}):(this.components.push((0,i.l7)(!0,{},o)),o=this.getLastComponents(),o[t].splice(n,1),o[t].length||delete o[t],Reflect.getOwnPropertyDescriptor(e,Oe)&&(Reflect.deleteProperty(e,Oe),Reflect.deleteProperty(e,(0,i.$0)("relationsOptions"))),this.steps.push({timestamp:Date.now(),componentRegistration:null,componentState:null,componentUnregistration:{componentId:t,componentInternalId:e.ɵɵRelationsComponentId??""},dataTransfer:null,componentRelationsOptions:null,previousStep:this.getLastStepData()}))}transferData(t,e){t.ɵuniqueId??(t.ɵuniqueId=(0,i.Ox)(16));const n=t.applyChanges;t.applyChanges=(()=>{n.call(t);const o=this.getLastComponents();this.components.push((0,i.l7)(!0,{},o)),this.steps.push({timestamp:Date.now(),componentRegistration:null,componentState:null,componentUnregistration:null,dataTransfer:{change:t.changes[e.inputName],inputComponentId:e.inputComponentId,inputName:e.inputName,outputComponentId:e.outputComponentId,outputName:e.outputName,scope:e.scope,ɵuniqueId:t.ɵuniqueId??""},componentRelationsOptions:null,previousStep:this.getLastStepData()}),this.readComponentState(e.inputComponentId),this.readComponentState(e.outputComponentId);const s=this.getLastStepData();if(!s)throw Error("RelationsDebugger: no step available!");if(s.componentState)for(const t of s.componentState[e.inputComponentId])t.inputs[e.inputName]=s.dataTransfer?.change.currentValue}).bind(t)}getCurrentComponents(){return this.components.length?this.components[this.currentStepIndex]:{}}getComponentDef(t){return this.componentDefs[t]??null}getComponentState(t){let e=this.getCurrentStep();if(!e)return[];do{if(e.componentState?.[t])return e.componentState[t]}while(e=e.previousStep);return[]}getComponentRelationsOptions(t){let e=this.getCurrentStep();if(e)do{if(e.componentRelationsOptions?.[t])return e.componentRelationsOptions[t]}while(e=e.previousStep)}getLastStep(){return this.steps.length&&this.steps.length-1!=this.currentStepIndex?(this.currentStepIndex=this.steps.length-1,this.stepChangeSubject.next(),this.steps[this.currentStepIndex]):null}getFirstStep(){return this.steps.length&&0!=this.currentStepIndex?(this.currentStepIndex=0,this.stepChangeSubject.next(),this.steps[this.currentStepIndex]):null}getNextStep(){return this.steps.length&&this.steps.length-1!=this.currentStepIndex?(this.currentStepIndex++,this.stepChangeSubject.next(),this.steps[this.currentStepIndex]):null}getPreviousStep(){return this.steps.length&&0!=this.currentStepIndex?(this.currentStepIndex--,this.stepChangeSubject.next(),this.steps[this.currentStepIndex]):null}getCurrentStep(){return this.steps.length?this.steps[this.currentStepIndex]:null}clearSteps(){this.currentStepIndex=0,this.stepChangeSubject.next(),this.steps=[],this.components=[]}readComponentState(t){let e=this.relationsComponentManager.get(t);if(!e)return void this.logger?.warn("RelationsDebugger: unable to find component with id {{@id}}",{id:t});Array.isArray(e)||(e=[e]);const n=e.map((e=>{const n=this.componentDefs[t],o=e,i={},s={};if(n){for(const t of n.inputs)try{i[t]=o[t]}catch(e){this.logger?.warn(`RelationsDebugger: failed reading input '${t}', {{@error}}`,{error:e}),i[t]=void 0}for(const t of n.outputs)try{s[t]??(s[t]={assigned:void 0,skipInit:void 0,value:void 0}),s[t].value=o[t],s[t].assigned=o[`${t}Assigned`],s[t].skipInit=o[`${t}SkipInit`]}catch(e){this.logger?.warn(`RelationsDebugger: failed reading output '${t}', {{@error}}`,{error:e}),s[t]={assigned:void 0,skipInit:void 0,value:void 0}}}return{componentId:t,componentInternalId:e.ɵɵRelationsComponentId??"",inputs:i,outputs:s}})),o=this.getLastStepData();if(!o)throw Error("RelationsDebugger: no step available!");o.componentState??(o.componentState={}),o.componentState[t]=n}setComponentRelationsOptions(t,e){const n=this.getLastStepData();if(!n)throw Error("RelationsDebugger: no step available!");n.componentRelationsOptions??(n.componentRelationsOptions={}),n.componentRelationsOptions[t]=e}getLastStepData(){return this.steps.length>0?this.steps[this.steps.length-1]:null}getLastComponents(){return this.components.length?this.components[this.components.length-1]:{}}tryToGetEndpoints(t,e){const n=(0,_e.s)(Reflect.getPrototypeOf(e).constructor);if(n){if(n.inputs)for(const e of n.inputs)this.addInputDef(t,e);if(n.outputs)for(const e of n.outputs)this.addOutputDef(t,e);if(n.dynamicEndpointsGetter){const o=n.dynamicEndpointsGetter(e,e.ɵɵinjector??this.injector);for(const e of o.inputs)this.addInputDef(t,e);for(const e of o.outputs)this.addOutputDef(t,e)}}}addInputDef(t,e){var n;(n=this.componentDefs)[t]??(n[t]={inputs:[],outputs:[]}),this.componentDefs[t].inputs.indexOf(e)<0&&this.componentDefs[t].inputs.push(e)}addOutputDef(t,e){var n;(n=this.componentDefs)[t]??(n[t]={inputs:[],outputs:[]}),this.componentDefs[t].outputs.indexOf(e)<0&&this.componentDefs[t].outputs.push(e)}}Re.ɵfac=(()=>{let t;return function(e){return(t||(t=xe.n5(Re)))(e||Re)}})(),Re.ɵprov=M.Yz({token:Re,factory:Re.ɵfac});var Ie=n(66201),Se=n(97881),Pe=n(7312),Le=n(40840);function De(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}const ke=function(){var t,e=(t=function*(){return new((yield Promise.all([n.e(7052),n.e(9289),n.e(5666),n.e(2336)]).then(n.bind(n,92336))).DebuggerNodeRelationsEditorMetadata)},function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){De(s,o,i,r,a,"next",t)}function a(t){De(s,o,i,r,a,"throw",t)}r(void 0)}))});return function(){return e.apply(this,arguments)}}();let Ee=class{};Ee=(0,Se.gn)([(0,Le.H)(),(0,Pe.i)(ke)],Ee);const Te=Ee;function Ne(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class Me{constructor(t){this._logger=t}tryToGet(t){return(e=function*(){return"relations-debugger"===t.package?o:null},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function r(t){Ne(s,o,i,r,a,"next",t)}function a(t){Ne(s,o,i,r,a,"throw",t)}r(void 0)}))})();var e}}Me.ɵfac=function(t){return new(t||Me)(ft.LF(y.bZ,8))},Me.ɵprov=M.Yz({token:Me,factory:Me.ɵfac});const Ae={provide:Ie.n7,useClass:Me,multi:!0};var Fe=n(65283),je=n(48193),ze=n(63580),Ye=n(24296),Ue=n(79370),qe=n(41214);const Ve={path:"accessDenied",loadComponent:()=>n.e(3286).then(n.bind(n,33286)).then((({AccessDeniedComponent:t})=>t))},Ze={path:"**",loadComponent:()=>n.e(170).then(n.bind(n,40170)).then((({NotFoundComponent:t})=>t))},$e=[{path:"",redirectTo:"/layout/preview",pathMatch:"full"},{path:"layout",loadChildren:()=>Promise.all([n.e(3095),n.e(175)]).then(n.bind(n,20175)).then((({LayoutModule:t})=>t))},{path:"layout",loadChildren:()=>Promise.all([n.e(1209),n.e(1795),n.e(5584),n.e(3095),n.e(8320),n.e(5237)]).then(n.bind(n,87277)).then((({LayoutEditorModule:t})=>t))},{path:"relationsStatic",loadChildren:()=>Promise.all([n.e(5584),n.e(2433)]).then(n.bind(n,82433)).then((({RelationsStaticModule:t})=>t))},{path:"relationsEditor",loadChildren:()=>Promise.all([n.e(7052),n.e(5666),n.e(5584),n.e(3095),n.e(3002),n.e(8297)]).then(n.bind(n,68297)).then((({RelationsEditorModule:t})=>t))},{path:"relationsWithEditor",loadChildren:()=>Promise.all([n.e(7052),n.e(5666),n.e(5584),n.e(3095),n.e(3002),n.e(9347)]).then(n.bind(n,29347)).then((({RelationsWithEditorModule:t})=>t))},{path:"relationsWithLayoutEditor",loadChildren:()=>Promise.all([n.e(7052),n.e(1209),n.e(1795),n.e(5666),n.e(5584),n.e(3095),n.e(3002),n.e(8320),n.e(9728)]).then(n.bind(n,79728)).then((({RelationsWithLayoutEditorModule:t})=>t))},{path:"relationsComplex",loadChildren:()=>Promise.all([n.e(7052),n.e(1209),n.e(1795),n.e(5666),n.e(5584),n.e(3095),n.e(3002),n.e(8320),n.e(5048),n.e(2159)]).then(n.bind(n,82159)).then((({RelationsComplexModule:t})=>t))},{path:"relationsLayoutForm",loadChildren:()=>Promise.all([n.e(7052),n.e(1209),n.e(1795),n.e(5666),n.e(5584),n.e(3095),n.e(3002),n.e(8320),n.e(5048),n.e(4253)]).then(n.bind(n,84253)).then((({RelationsLayoutFormModule:t})=>t))},...(0,n(45799).I)([]),Ve,Ze];var Ge=n(59958);class Qe extends xt.v{get locale(){return"en"}get localeChange(){return Ge.E}}Qe.ɵfac=(()=>{let t;return function(e){return(t||(t=xe.n5(Qe)))(e||Qe)}})(),Qe.ɵprov=M.Yz({token:Qe,factory:Qe.ɵfac});var Be=n(3803);function He(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class Je{getTranslation(t){return new s.y((e=>{var o;(o=function*(){const o=yield n(25048)(`./${t}.json`);e.next(o.default),e.complete()},function(){var t=this,e=arguments;return new Promise((function(n,i){var s=o.apply(t,e);function r(t){He(s,n,i,r,a,"next",t)}function a(t){He(s,n,i,r,a,"throw",t)}r(void 0)}))})()}))}}Je.ɵfac=function(t){return new(t||Je)},Je.ɵprov=M.Yz({token:Je,factory:Je.ɵfac});class Xe{constructor(t){this._logger=t}handle(t){return this._logger.debug(`MISSING TRANSLATION: ${t.key}`),`MISSING: '${t.key}'`}}Xe.ɵfac=function(t){return new(t||Xe)(ft.LF(y.bZ))},Xe.ɵprov=M.Yz({token:Xe,factory:Xe.ɵfac});const Ke=[(0,bt.bU)($e,(0,bt.E_)(),(0,bt.jK)()),(0,vt.ly)(),(0,yt.h_)((0,yt.MP)()),(0,mt.T1)({eventCoalescing:!0,runCoalescing:!0}),(0,u.RI)(Fe.aw.forRoot({loader:{provide:je.Z,useClass:Je},...r.v.configuration.debugTranslations?{missingTranslationHandler:{provide:ze.g,useClass:Xe}}:{},useDefaultLang:!r.v.configuration.debugTranslations})),Nt.t,Mt.H,At.w,Ft.Q,wt.B,{useFactory:()=>new jt.b("Server je mimo prevádzky."),provide:jt.b},{useFactory:()=>new zt.R("Server neodpovedal v stanovenom čase."),provide:zt.R},{provide:xt.v,useClass:Qe},(0,Yt.jX)([Ut.M]),qt.E,(0,Yt.Th)($t.p),(0,Gt.dq)(Qt.G),(0,Gt.WP)(Ht.U),(0,Gt.Ui)({texts:{loading:"Nahrávam dáta ...",noData:"Neboli nájdené dáta odpovedajúce zadaným parametrom",notLoaded:"Neboli načítané žiadne dáta zatiaľ"}}),(0,Gt.hg)({itemsPerPageValues:[15,30,60],initialItemsPerPage:15}),(0,Gt.hu)({showButtonVisible:!1}),(0,Gt.Hi)({storageIppName:"all-grid-ipp"}),(0,Gt.hQ)({cssClasses:{containerDiv:"table-container thin-scrollbar"}}),{provide:Bt.ss,useValue:{cssClasses:{thDefault:"header-default fixed-header"}}},{provide:re.M,useValue:{texts:{nothingSelected:"Nothing selected"}}},{provide:y.oF,useClass:Tt.H},(0,Ot.F0)(_t.Q),(0,Rt.L2)((t=>t.writeTo((t=>t.writeTo(It.f).minimumLevel((()=>{const t=(0,ft.f3)(k.g);return()=>St.i[t.settingsLogging.consoleLogLevel]})))).writeTo((t=>t.writeTo(Pt.n).minimumLevel(St.i.Off).filter(((t,e)=>!!e.message.match(/^(?:)RelationsProcessor|RelationsChangeDetector/))))).writeTo((t=>t.writeTo(Pt.n).minimumLevel(St.i.Off).filter(((t,e)=>!!e.message.match(/^(?:)LayoutComponentRendererSADirective|LayoutRenderer|LayoutEditorRenderer|LayoutDesignerSAComponent/))))).writeTo((t=>t.writeTo(Pt.n).minimumLevel(St.i.Off).filter(((t,e)=>!!e.message.match(/^(?:)BasicDynamicModuleItemsProvider|defaultExportExtractor|extensionsExportsExtractor|DynamicItemLoader/))))).writeTo(Pt.n).enrichWith(Lt.D).enrichWith(Dt.V).minimumLevel(St.i.Off).messageTemplate("{{timestamp}} [{{logLevel}}] {{messageLog}}"))),{provide:Be.L,useClass:k.l},{provide:kt.H,useFactory:()=>{const t=(0,ft.f3)(k.g),e=new kt.H;return e.setEnabled(t.settingsDebugging?.debugData),e}},{provide:ce.R2,useClass:ue.Fh},le.V,ue.Dx,{provide:le.v,useValue:{locale:qe.Z}},{provide:Jt.xY,useValue:{required:"Položka je povinná.",number:"Položka musí byť číslo.",pattern:"Položka nie je v požadovanom formáte.",minValue:"Nedodržaná minimálna povolená hodnota.",maxValue:"Nedodržaná maximálna povolená hodnota.",minlength:"Nedodržaná minimálna dĺžka.",maxlength:"Nedodržaná maximálna dĺžka.",birthNumber:"Nesprávny formát rodného čísla.",email:"Položka musí byť email.",availableUsername:"Prihlasovacie meno je použité"}},{provide:Jt.gt,useValue:{container:Xt.f}},(0,ae.S)(),Et.d,{provide:ne.H,useExisting:y.wn},{provide:Vt._k,useExisting:y.wn},{provide:Vt.wN,useExisting:y.wn},(0,u.RI)(Ct.I),rt.J,{provide:Kt.r,useValue:new Kt.r(Wt.b)},(0,te.t)({cssClasses:{closeButton:"btn btn-danger margin-right-small"},confirmationText:"Prajete si pokračovať?",dialogCancelText:"Nie",dialogConfirmText:"Áno"}),(0,Ot.NK)(ee.c),{provide:ne.w,useValue:{assetsPathPrefix:"dist/md",baseUrl:"/pomoc"}},(0,me.m)(),oe.Q,(0,de.F7)([pe.U,ge.m,he.L,ie.H,se.L]),(0,Yt.WL)((t=>t?.error?.errors?t?.error?.errors:(0,i.HD)(t?.error)?[t?.error]:[])),(0,Yt.MP)((t=>t?.error?.validationErrors?t?.error?.validationErrors:null)),(0,Yt.s)({400:"Chyba spracovania dát!",404:"Záznam pre požadované ID sa nenašiel!"}),(0,Yt.Xi)({404:Zt.D}),[Ae,ve.md,ve.Oq,{provide:fe.bE,useValue:Re}],(0,u.RI)(Ye.c8.forRoot({backend:Ue.PD}))];(0,c.G)();const We=[...Ke,(0,l.iQ)(),{provide:g.g,useFactory:()=>new g.g(r.v.configuration.debug,!1)},(0,u.RI)(h.m.forRoot({cheatSheetCloseEsc:!0}))];(0,p.yA)((0,d.Cg)(ht,{providers:We}),(t=>{}),r.v.configuration.debug)},3803:(t,e,n)=>{"use strict";n.d(e,{L:()=>o});const o=new(n(30891).O)("SETTINGS_STORAGE")},75250:(t,e,n)=>{"use strict";n.d(e,{_:()=>p});var o=n(58853),i=n(54004),s=n(10134),r=n(66257),a=n(90366),c=n(94734),u=n(65283),l=n(85410),d=n(85086);class p{}p.ɵfac=function(t){return new(t||p)},p.ɵmod=l.oA({type:p}),p.ɵinj=d.cJ({imports:[o.e,i.Bz,s.W,r.F,a.z,u.aw,c.N]})},55136:(t,e,n)=>{"use strict";n.d(e,{N:()=>p});var o=n(14829),i=n(49882),s=n(59098),r=n(69697),a=n(62555),c=n(56393),u=n(95173),l=n(85410),d=n(85086);class p{}p.ɵfac=function(t){return new(t||p)},p.ɵmod=l.oA({type:p}),p.ɵinj=d.cJ({imports:[o.U,i.r,a.F,s.A,r.r,c.F,u.j]})},6688:(t,e,n)=>{"use strict";n.d(e,{l:()=>m,g:()=>u});var o=n(73943),i=n(15045),s=n(3803),r=n(32779),a=n(75920),c=n(85086);class u{get settings(){return this._settings}get settingsDebugging(){return this._settingsDebugging}get settingsLogging(){return this._settingsLogging}get settingsChange(){return this._settingsChangeSubject.asObservable()}get settingsDebuggingChange(){return this._settingsDebuggingChangeSubject.asObservable()}constructor(t,e){this._storage=e,this._settings=this._storage.get(),this._settingsDebugging=this._storage.getDebugging(),this._settingsLogging=this._storage.getLogging(),this._settingsChangeSubject=new i.x,this._settingsDebuggingChangeSubject=new i.x,this._settingsValueDiff=t.find(this._settings).create(),this._settingsValueDiff.diff(this._settings),this._settingsDebuggingValueDiff=t.find(this._settingsDebugging).create(),this._settingsDebuggingValueDiff.diff(this._settingsDebugging)}setSettings(t){this._settings=(0,o.l7)(!0,{},this._settings,t),this._storage.set(t);const e=this._settingsValueDiff.diff(t);e&&e.forEachChangedItem((t=>{this._settingsChangeSubject.next(t.key)}))}setDebuggingSettings(t){this._settingsDebugging=(0,o.l7)(!0,{},this._settingsDebugging,t),this._storage.setDebugging(t);const e=this._settingsDebuggingValueDiff.diff(t);e&&e.forEachChangedItem((t=>{this._settingsDebuggingChangeSubject.next(t.key)}))}setLoggingSettings(t){this._settingsLogging=(0,o.l7)(!0,{},this._settingsLogging,t),this._storage.setLogging(t)}}u.ɵfac=function(t){return new(t||u)(r.LF(a.a),r.LF(s.L))},u.ɵprov=c.Yz({token:u,factory:u.ɵfac,providedIn:"root"});var l=n(95127),d=n(30486);const p="general-settings",g="debugging-settings",h="logging-settings";class m{constructor(t){this._storage=t}get(){let t=this._storage.get(p);return t=(0,o.l7)(!0,{},{theme:d.v.general.theme,language:d.v.general.language},t),t}set(t){this._storage.set(p,t)}getDebugging(){let t=this._storage.get(g);return t=(0,o.l7)(!0,{},{consoleEnabled:d.v.debug.consoleEnabled,debugData:d.v.debug.debugData},t),t}setDebugging(t){this._storage.set(g,t)}getLogging(){let t=this._storage.get(h);return t=(0,o.l7)(!0,{},{consoleLogLevel:d.v.logging.consoleLogLevel},t),t}setLogging(t){this._storage.set(h,t)}}m.ɵfac=function(t){return new(t||m)(r.LF(l.T0))},m.ɵprov=c.Yz({token:m,factory:m.ɵfac})},29415:(t,e,n)=>{"use strict";n.d(e,{T:()=>i,u:()=>s});const o=Symbol("descendantsGetter");function i(t){return function(e){return Object.defineProperty(e,o,{writable:!1,configurable:!1,enumerable:!1,value:t}),e}}function s(t){return o in t?t[o]:null}},83762:(t,e,n)=>{"use strict";n.d(e,{An:()=>P,RI:()=>_,Yh:()=>w,dB:()=>I,FX:()=>x,QT:()=>R,sc:()=>O,dK:()=>S});var o=n(30891),i=n(17220),s=n(13022),r=n(46735),a=n(85410),c=n(5327),u=n(88809),l=n(95741),d=n(10065),p=n(28007),g=n(48074),h=n(24900),m=n(50093);class f extends s.L{}f.ɵfac=(()=>{let t;return function(e){return(t||(t=r.n5(f)))(e||f)}})(),f.ɵcmp=a.Xp({type:f,selectors:[["input-boolean"]],features:[c.q],decls:2,vars:3,consts:[["type","checkbox",1,"properties-form-control",3,"formControl"]],template:function(t,e){1&t&&(u._U(0,"input",0),l.AL(1,"asRequired")),2&t&&d.Q("formControl",l.lc(1,1,e._control))},dependencies:[p.W,g.JJ,h.o,m.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0});var v=n(39413),y=n(48049);class b extends s.L{}b.ɵfac=(()=>{let t;return function(e){return(t||(t=r.n5(b)))(e||b)}})(),b.ɵcmp=a.Xp({type:b,selectors:[["textarea-input"]],features:[c.q],decls:2,vars:3,consts:[[1,"properties-form-control",3,"formControl"]],template:function(t,e){1&t&&(u._U(0,"textarea",0),l.AL(1,"asRequired")),2&t&&d.Q("formControl",l.lc(1,1,e._control))},dependencies:[y.Fj,g.JJ,h.o,m.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0});var C=n(19310);const _=new o.O("LAYOUT_EDITOR_PROPERTY_METADATA_PROPERTIES"),w=new o.O("LAYOUT_EDITOR_PROPERTY_TYPE_CONTROLS",{providedIn:"root",factory:()=>({inputString:i.q,inputBoolean:f,selectValue:v.f,textarea:b,inputNumber:C.l})}),x=new o.O("LAYOUT_MODULE_TYPES_DATA_EXTRACTORS"),O=new o.O("LAYOUT_MODULE_TYPES_PROVIDERS"),R=new o.O("LAYOUT_MODULE_TYPES_LOADER"),I=new o.O("LAYOUT_HISTORY_MANAGER"),S=new o.O("REFRESH_PALETTE_OBSERVABLES"),P=new o.O("LAYOUT_DEFAULTS_OVERRIDE")},69130:(t,e,n)=>{"use strict";n.d(e,{$:()=>o});const o=Symbol("LayoutPropertyMetadata")},35516:(t,e,n)=>{"use strict";n.d(e,{Gl:()=>z,CK:()=>j,_T:()=>F});var o=n(43998),i=n(73943),s=n(32779),r=n(42383),a=n(93584),c=n(48015),u=n(19630),l=n(78344),d=n(14611),p=n(41842),g=n(95127),h=n(17640),m=n(85086);function f(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class v{constructor(t){this._logger=t}tryToGet(t){var e,o=this;return(e=function*(){if("@anglr/dynamic/layout-editor"!=t.package)return null;try{if(o._logger?.debug("LayoutDesignerDynamicModuleItemsProvider: trying to get item {{@item}}",{item:{name:t.name,package:t.package}}),"layout-designer"==t.name)return yield Promise.all([n.e(590),n.e(565)]).then(n.bind(n,34306))}catch(e){o._logger?.warn("LayoutDesignerDynamicModuleItemsProvider: item {{@item}} was not found, reason:"+e,{item:{name:t.name,package:t.package}})}return o._logger?.debug("LayoutDesignerDynamicModuleItemsProvider: item {{@item}} was not found",{item:{name:t.name,package:t.package}}),null},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function r(t){f(s,o,i,r,a,"next",t)}function a(t){f(s,o,i,r,a,"throw",t)}r(void 0)}))})()}}v.ɵfac=function(t){return new(t||v)(s.LF(g.bZ,8))},v.ɵprov=m.Yz({token:v,factory:v.ɵfac});var y=n(61923),b=n(83762),C=n(69130),_=n(47628);function w(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}const x=function(){var t,e=(t=function*(t,e){const n=yield(0,a.L)(t,e),o=yield(0,_.k)(t,e),i=n?.data,s=t;if(e?.debug("layoutDesignerTypeExtractor: trying to extract default dynamic data"),!i?.layoutEditorDesignerType)return null;const r=yield i?.layoutEditorDesignerType;return r?{data:r,displayName:s?.displayName,description:s?.description,group:s?.group,childExtensions:o?.childExtensions,extensions:o?.extensions}:null},function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){w(s,o,i,r,a,"next",t)}function a(t){w(s,o,i,r,a,"throw",t)}r(void 0)}))});return function(t,n){return e.apply(this,arguments)}}(),O={provide:d.t,useExisting:h.e},R={provide:p.gM,useFactory:()=>new r.$([x],(0,s.f3)(g.bZ)),multi:!0},I={provide:p.Aw,useClass:v,multi:!0},S={provide:b.FX,useFactory:()=>new r.$([a.L],(0,s.f3)(g.bZ)),multi:!0},P={provide:b.RI,useValue:[C.$]},L={provide:b.QT,useFactory:()=>new c.S((0,s.f3)(b.sc),(0,s.f3)(b.FX),z,(0,s.f3)(g.bZ),!0)},D={provide:u.K,useExisting:y.t},k={provide:b.dB,useClass:l.Y};var E=n(87003),T=n(19684),N=n(83602),M=n(57283),A=n(16301);function F(t=!0){return[...t?[R]:[],...(0,o._)(),I,S,P,L,E.T,T.L,y.t,N.z,M._,A.$,h.e,k,D,O]}function j(t){return{provide:b.An,useClass:t}}const z=function(t){return!((0,i.fp)(t?.data)||!Array.isArray(t.data))}},19310:(t,e,n)=>{"use strict";n.d(e,{l:()=>f});var o=n(13022),i=n(46735),s=n(85410),r=n(5327),a=n(88809),c=n(95741),u=n(10065),l=n(48049),d=n(48074),p=n(24900),g=n(36733),h=n(37612),m=n(50093);class f extends o.L{}f.ɵfac=(()=>{let t;return function(e){return(t||(t=i.n5(f)))(e||f)}})(),f.ɵcmp=s.Xp({type:f,selectors:[["input-number"]],features:[r.q],decls:2,vars:3,consts:[["type","text","number","",1,"properties-form-control",3,"formControl"]],template:function(t,e){1&t&&(a._U(0,"input",0),c.AL(1,"asRequired")),2&t&&u.Q("formControl",c.lc(1,1,e._control))},dependencies:[l.Fj,d.JJ,p.o,g.N,h.L,m.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0})},17220:(t,e,n)=>{"use strict";n.d(e,{q:()=>h});var o=n(13022),i=n(46735),s=n(85410),r=n(5327),a=n(88809),c=n(95741),u=n(10065),l=n(48049),d=n(48074),p=n(24900),g=n(50093);class h extends o.L{}h.ɵfac=(()=>{let t;return function(e){return(t||(t=i.n5(h)))(e||h)}})(),h.ɵcmp=s.Xp({type:h,selectors:[["input-string"]],features:[r.q],decls:2,vars:3,consts:[["type","text",1,"properties-form-control",3,"formControl"]],template:function(t,e){1&t&&(a._U(0,"input",0),c.AL(1,"asRequired")),2&t&&u.Q("formControl",c.lc(1,1,e._control))},dependencies:[l.Fj,d.JJ,p.o,g.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0})},13022:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var o=n(80033),i=n(49276),s=n(85410);function r(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function a(t){r(s,o,i,a,c,"next",t)}function c(t){r(s,o,i,a,c,"throw",t)}a(void 0)}))}}class c{get control(){return this._control}set control(t){this._control=t,this._controlSet()}constructor(t){this._changeDetector=t,this._initialized=!1,this.values=[]}ngOnInit(){var t=this;return a((function*(){t._initialized||(t._initialized=!0,yield t._initialize())}))()}initialize(){var t=this;return a((function*(){yield t.ngOnInit()}))()}invalidateVisuals(){this._changeDetector.detectChanges()}_initialize(){}_controlSet(){}}c.ɵfac=function(t){return new(t||c)(o.Y(i.s))},c.ɵdir=s.lG({type:c,inputs:{control:"control",values:"values"}})},39413:(t,e,n)=>{"use strict";n.d(e,{f:()=>b});var o=n(13022),i=n(88809),s=n(10065),r=n(46735),a=n(85410),c=n(5327),u=n(95741),l=n(46430),d=n(57284),p=n(4539),g=n(35332),h=n(43371),m=n(48074),f=n(24900),v=n(50093);function y(t,e){if(1&t&&i._U(0,"option",2),2&t){const t=e.$implicit;s.Q("value",t)("text",t)}}class b extends o.L{}b.ɵfac=(()=>{let t;return function(e){return(t||(t=r.n5(b)))(e||b)}})(),b.ɵcmp=a.Xp({type:b,selectors:[["select-value"]],features:[c.q],decls:3,vars:4,consts:[[1,"properties-form-control",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"]],template:function(t,e){1&t&&(i.Tg(0,"select",0),u.AL(1,"asRequired"),l.Y(2,y,1,2,"option",1),i.qZ()),2&t&&(s.Q("formControl",u.lc(1,2,e._control)),d.x(2),s.Q("ngForOf",e.values))},dependencies:[p.sg,g.Y,h.Kr,g.E,m.JJ,f.o,v.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0})},83602:(t,e,n)=>{"use strict";n.d(e,{z:()=>s});var o=n(15045),i=n(85086);class s{constructor(){this._dragging=!1,this._draggingChange=new o.x}get dragging(){return this._dragging}get draggingChange(){return this._draggingChange.asObservable()}setDragging(t){this._dragging!=t&&(this._dragging=t,this._draggingChange.next())}}s.ɵfac=function(t){return new(t||s)},s.ɵprov=i.Yz({token:s,factory:s.ɵfac})},16301:(t,e,n)=>{"use strict";n.d(e,{$:()=>v});var o=n(41842),i=n(95127),s=n(97881),r=n(95987),a=n(48015),c=n(29415);function u(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){u(s,o,i,r,a,"next",t)}function a(t){u(s,o,i,r,a,"throw",t)}r(void 0)}))}}let d=class{[Symbol.asyncIterator](){let t=0;const e=this.initPromise??(this.initPromise=this.getInitPromise()),n=this.items;return{next:()=>l((function*(){return yield e,t<n.length?{value:n[t++],done:!1}:{value:n[t-1],done:!0}}))()}}constructor(t,e,n){this.layoutMetadata=t,this.loader=e,this.logger=n,this.items=[],this.initialized=!1,this.initPromise=null}forEach(t){var e=this;return l((function*(){yield e.initPromise??(e.initPromise=e.getInitPromise());for(const n of e.items)t(n.metadata,n.parent,n.levelIndex,n.level)}))()}getComponents(){var t=this;return l((function*(){yield t.getComponent(t.layoutMetadata,null,0,0)}))()}getComponent(t,e,n,o){var i=this;return l((function*(){const s={metadata:t,parent:e,levelIndex:n,level:o};i.items.push(s);const r=yield i.loader.loadItem(t);if(!r)return void i.logger?.debug("LayoutComponentsIterator: failed to get dynamic component type for iterator! {{@data}}",{data:{package:t.package,name:t.name}});const a=(0,c.u)(r.data);if(!a)return;const u=a(t.options);for(let t=0;t<u.length;t++)yield i.getComponent(u[t],s,t,o+1)}))()}getInitPromise(){var t=this;return l((function*(){t.initialized||(t.initialized=!0,yield t.getComponents())}))()}};function p(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}function g(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){p(s,o,i,r,a,"next",t)}function a(t){p(s,o,i,r,a,"throw",t)}r(void 0)}))}}d=(0,s.gn)([(0,s.fM)(1,(0,r.tB)(o.Vl)),(0,s.w6)("design:paramtypes",[Object,a.S,Object])],d);let h=class{[Symbol.asyncIterator](){let t=0;const e=this.initPromise??(this.initPromise=this.getInitPromise()),n=this.items;return{next:()=>g((function*(){return yield e,t<n.length?{value:n[t++],done:!1}:{value:n[t-1],done:!0}}))()}}constructor(t,e,n){this.layoutMetadata=t,this.loader=e,this.logger=n,this.items=[],this.initialized=!1,this.initPromise=null}getChildren(){var t=this;return g((function*(){yield t.getComponent(t.layoutMetadata)}))()}getComponent(t){var e=this;return g((function*(){const n=yield e.loader.loadItem(t);if(!n)return void e.logger?.debug("LayoutComponentsChildrenIterator: failed to get dynamic component type for children iterator! {{@data}}",{data:{package:t.package,name:t.name}});const o=(0,c.u)(n.data);if(!o)return;const i=o(t.options);for(let t=0;t<i.length;t++)e.items.push({index:t,metadata:i[t]})}))()}getInitPromise(){var t=this;return g((function*(){t.initialized||(t.initialized=!0,yield t.getChildren())}))()}};h=(0,s.gn)([(0,s.fM)(1,(0,r.tB)(o.Vl)),(0,s.w6)("design:paramtypes",[Object,a.S,Object])],h);var m=n(32779),f=n(85086);class v{constructor(t,e){this.loader=t,this.logger=e}getIteratorFor(t){return new d(t,this.loader,this.logger)}getChildrenIteratorFor(t){return new h(t,this.loader,this.logger)}}v.ɵfac=function(t){return new(t||v)(m.LF(o.Vl),m.LF(i.bZ,8))},v.ɵprov=f.Yz({token:v,factory:v.ɵfac})},87003:(t,e,n)=>{"use strict";n.d(e,{T:()=>c});var o=n(41842),i=n(95127),s=n(32779),r=n(85086);function a(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class c{constructor(t,e){this._loader=t,this._logger=e,this._cache={}}extractMetadata(t){var e,n=this;return(e=function*(){const e=`${t.package}-${t.name}`;if(n._cache[e])return n._cache[e];const o=yield n._loader.loadItem(t);if(!o)return null;const i=o.data;if(!i.layoutEditorMetadata)return n._logger?.warn("LayoutEditorMetadataExtractor: Missing metadata! ",{package:t.package,name:t.name}),null;n._logger?.debug("LayoutEditorMetadataExtractor: Reading metadata! ",{package:t.package,name:t.name});const s=yield i.layoutEditorMetadata;return Object.freeze(s),n._cache[e]=s,s},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function r(t){a(s,o,i,r,c,"next",t)}function c(t){a(s,o,i,r,c,"throw",t)}r(void 0)}))})()}}c.ɵfac=function(t){return new(t||c)(s.LF(o.Vl),s.LF(i.bZ,8))},c.ɵprov=r.Yz({token:c,factory:c.ɵfac})},61923:(t,e,n)=>{"use strict";n.d(e,{t:()=>d});var o=n(22299),i=n(95127),s=n(73943),r=n(25689),a=n(15045),c=n(32779),u=n(85086),l=n(35891);class d{get selectedComponent(){return this.ɵselectedComponent.asReadonly()}get highlightedComponent(){return this.ɵhighlightedComponent.asReadonly()}get draggedOverComponent(){return this.ɵdraggedOverComponent.asReadonly()}get root(){return(0,s.fp)(this.rootComponentId)?null:this.components[this.rootComponentId]}get layoutChange(){return this.layoutChangeSubject.asObservable()}get displayNameChange(){return this.displayNameChangesSubject.asObservable()}constructor(t,e){this.editorHotkeys=t,this.logger=e,this.initSubscriptions=new r.w0,this.components={},this.rootComponentId=null,this.ɵselectedComponent=(0,o.t)(null),this.ɵhighlightedComponent=(0,o.t)(null),this.layoutChangeSubject=new a.x,this.displayNameChangesSubject=new a.x,this.ɵdraggedOverComponent=(0,o.t)(null),this.initSubscriptions.add(this.editorHotkeys.delete.subscribe((()=>{const t=this.selectedComponent();if(!t)return;const e=this.components[t];e?.parent&&(e.parent.component.removeDescendant(t),e.parent.component.invalidateVisuals())}))),this.initSubscriptions.add(this.editorHotkeys.copy.subscribe((()=>{const t=this.selectedComponent();if(!t)return;const e=this.components[t];this.metadataClipboard=e.component.options?.typeMetadata}))),this.initSubscriptions.add(this.editorHotkeys.cut.subscribe((()=>{const t=this.selectedComponent();if(!t)return;const e=this.components[t];e?.parent&&(this.metadataClipboard=e.component.options?.typeMetadata,e.parent.component.removeDescendant(t),e.parent.component.invalidateVisuals())}))),this.initSubscriptions.add(this.editorHotkeys.paste.subscribe((()=>{const t=this.selectedComponent();if(!t||!this.metadataClipboard)return;const e=this.components[t],n=`${this.metadataClipboard.name}-${(0,s.Ox)(12)}`;e.component.canDrop?e.component.addDescendant({index:0,metadata:(0,s.l7)({},this.metadataClipboard,{id:n,displayName:n}),parentId:null}):e.parent?.component.canDrop&&e.parent.component.addDescendant({index:e.component.index+1,metadata:(0,s.l7)({},this.metadataClipboard,{id:n,displayName:n}),parentId:null})})))}ngOnDestroy(){this.initSubscriptions.unsubscribe()}selectComponent(t){const e=this.ɵselectedComponent();this.ɵselectedComponent.set(t??null),(0,s.EN)(e)&&this.components[e]?.component.invalidateVisuals(),(0,s.EN)(t)&&this.components[t]?.component.invalidateVisuals()}unselectComponent(){const t=this.ɵselectedComponent();this.ɵselectedComponent.set(null),(0,s.EN)(t)&&this.components[t]?.component.invalidateVisuals()}highlightComponent(t){const e=this.ɵhighlightedComponent();this.ɵhighlightedComponent.set(t??null),(0,s.EN)(e)&&this.components[e]?.component.invalidateVisuals(),(0,s.EN)(t)&&this.components[t]?.component.invalidateVisuals()}cancelHighlightedComponent(){const t=this.ɵhighlightedComponent();this.ɵhighlightedComponent.set(null),(0,s.EN)(t)&&this.components[t]?.component.invalidateVisuals()}dragOverComponent(t){t!==this.ɵdraggedOverComponent()&&this.ɵdraggedOverComponent.set(t??null)}cancelDragOverComponent(){this.ɵdraggedOverComponent.set(null)}registerLayoutDesignerComponent(t,e,n){if((0,s.fp)(n)&&(this.rootComponentId=e),this.components[e])return this.logger.error(`LayoutEditorMetadataManager: Component with id ${e} is already registered!`),!1;const o=n?this.components[n]:null,i={component:t,parent:o,children:[]};return this.components[e]=i,o&&o.children.push(i),this.layoutChangeSubject.next(),this.logger.debug("LayoutEditorMetadataManager: Registering component {{@id}}",{id:e}),!0}getComponent(t){return this.components[t]?.component??null}getParent(t){return this.components[t]?.parent?.component??null}getChildren(t){return this.components[t]?.children?.map((t=>t.component))??[]}getComponentDef(t){return this.components[t]??null}unregisterLayoutDesignerComponent(t){const e=this.components[t];if(delete this.components[t],e?.parent){const t=e.parent.children.indexOf(e);e.parent.children.splice(t,1)}t===this.rootComponentId&&(this.rootComponentId=null),this.layoutChangeSubject.next(),this.logger.debug("LayoutEditorMetadataManager: Unregistering component {{@id}}",{id:t})}displayNameUpdated(){this.displayNameChangesSubject.next()}updateLayout(){this.layoutChangeSubject.next()}getMetadata(){return(0,s.fp)(this.rootComponentId)||!this.components[this.rootComponentId]?null:this.components[this.rootComponentId].component.options?.typeMetadata??null}}d.ɵfac=function(t){return new(t||d)(c.LF(l.z),c.LF(i.bZ))},d.ɵprov=u.Yz({token:d,factory:d.ɵfac})},19684:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var o=n(95127),i=n(73943),s=n(83762),r=n(32779),a=n(85086);class c{constructor(t,e){this._layoutPropertiesSymbols=t,this._logger=e}extract(t){if(!t)return null;this._logger?.debug(`LayoutEditorPropertyMetadataExtractor: Trying to extract properties metadata '${t.name}'`);const e={};for(const n of this._layoutPropertiesSymbols){const o=Reflect.get(t.prototype,n);(0,i.l7)(!0,e,o)}return e}}c.ɵfac=function(t){return new(t||c)(r.LF(s.RI),r.LF(o.bZ,8))},c.ɵprov=a.Yz({token:c,factory:c.ɵfac})},17640:(t,e,n)=>{"use strict";n.d(e,{e:()=>g});var o=n(31530),i=n(19630),s=n(68339),r=n(14793),a=n(13555),c=n(52409),u=n(41842),l=n(46735),d=n(85086);function p(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class g extends r.G{constructor(){super(...arguments),this.syncPromise=Promise.resolve(),this.registeredCalls=0}get(t){return this.components[t]}registerRenderer(t,e,n,r,l,d,g,h,m){var f,v=this;return(f=function*(){v.registeredCalls++;const p=v.syncPromise;let f;v.syncPromise=new Promise((t=>f=t)),yield p,v.logger.debug("LayoutEditorRenderer: registering renderer {{@(4)renderer}}",{renderer:{id:t,parentId:e,metadata:r,parentMetadata:l,scopeId:d}});let y,b=!1;const C=v.components[r.id],_=`${r.id}-designer`;if(C){if(!C||C.id!=e||C.component||C.componentViewContainer)throw new Error(`LayoutEditorRenderer: component with ID ${r.id} already exists!`);y=C,y.componentViewContainer=n,y.componentRendererId=t,v.renderers[t]=y}else b=!0,y={id:t,parentId:e,viewContainer:n,metadata:r,parentMetadata:l,scopeId:d,childExtensions:g,component:null,layoutDesigner:null,componentViewContainer:null,componentRendererId:null},v.components[r.id]=y,v.renderers[t]=y;v.logger.verbose('LayoutEditorRenderer: getting type "{{@id}}" isDesigner: {{isDesigner}} for {{@dynamicItem}}',{id:r?.id,isDesigner:b,dynamicItem:{package:r.package,name:r.name}});const w=m??n.injector,x=r.scope,O=yield v.loader.loadItem(b?{id:_,package:"@anglr/dynamic/layout-editor",name:"layout-designer",options:{typeMetadata:r}}:r);if(v.logger.verbose("LayoutEditorRenderer: rendering component {{@id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b}),!O){switch(v.logger.warn("LayoutEditorRenderer: Unable to find layout component type {{@type}} isDesigner: {{isDesigner}}",{type:{name:r.name,package:r.package},isDesigner:b}),v.options.missingTypeBehavior){default:n.createComponent(a.n);break;case c.q.Ignore:break;case c.q.ThrowError:throw new Error(`LayoutEditorRenderer: Unable to find layout component type Name: ${r.name} Package: ${r.package}`)}return}v.logger.verbose("LayoutEditorRenderer: rendering component {{@id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b});const R=o.z.create({parent:w,providers:[{provide:i.H$,useValue:x??d??null},{provide:u.X5,useValue:O.childExtensions}]}),I=n.createComponent(O.data,{injector:R});b?y.layoutDesigner=I:y.component=I,I.changeDetectorRef.detach(),v.logger.verbose("LayoutEditorRenderer: component rendered {{@id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b});const S=I.instance;S.registerExtensions([...g?.map((t=>new t(r)))??[],...O?.extensions?.map((t=>new t(r)))??[]]);const P=b?{typeMetadata:r}:r.options,L={};(0,s.mv)(L,"options",P,S.options,!0),v.logger.verbose("LayoutEditorRenderer: setting options for component {{id}}, isDesigner: {{isDesigner}}, options: {{@(4)options}}",{id:r?.id,options:P,isDesigner:b}),S.options=P,v.logger.verbose("LayoutEditorRenderer: set options for component {{id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b}),v.logger.verbose("LayoutEditorRenderer: setting changes for component {{id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b}),yield S.dynamicOnChanges?.(L),v.logger.verbose("LayoutEditorRenderer: set changes for component {{id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b}),v.logger.verbose("LayoutEditorRenderer: initializing component {{id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b}),yield S.dynamicOnInit?.(),v.logger.verbose("LayoutEditorRenderer: initialized component {{id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b}),v.logger.verbose("LayoutEditorRenderer: invalidating component visuals {{id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b}),S.invalidateVisuals(),v.logger.verbose("LayoutEditorRenderer: invalidated component visuals {{id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b}),v.logger.verbose("LayoutEditorRenderer: after view initializing {{id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b}),yield S.dynamicAfterViewInit?.(),v.logger.verbose("LayoutEditorRenderer: after view initialized {{id}} isDesigner: {{isDesigner}}",{id:r?.id,isDesigner:b}),b||h?.(y),I.changeDetectorRef.reattach(),f?.(),v.registeredCalls--,0===v.registeredCalls&&v.renderingFinishedSubject.next()},function(){var t=this,e=arguments;return new Promise((function(n,o){var i=f.apply(t,e);function s(t){p(i,n,o,s,r,"next",t)}function r(t){p(i,n,o,s,r,"throw",t)}s(void 0)}))})()}destroyRenderer(t){this.logger.debug('LayoutEditorRenderer: destroying renderer "{{id}}", current renderers register: {{@(4)renderers}}',{id:t,renderers:Object.keys(this.renderers)});const e=this.renderers[t];e&&(this.logger.verbose('LayoutEditorRenderer: removing renderer from registry "{{id}}"',{id:t}),delete this.components[e.metadata.id],delete this.renderers[t])}unregisterRenderer(t){this.logger.debug('LayoutEditorRenderer: ungregistering renderer "{{id}}", current renderers register: {{@(4)renderers}}',{id:t,renderers:Object.keys(this.renderers)});const e=this.renderers[t];e&&(this.logger.verbose('LayoutEditorRenderer: destroying component "{{id}}"',{id:t}),e.viewContainer.clear(),this.logger.verbose('LayoutEditorRenderer: component destroyed "{{id}}"',{id:t}),delete this.components[e.metadata.id],delete this.renderers[t])}}g.ɵfac=(()=>{let t;return function(e){return(t||(t=l.n5(g)))(e||g)}})(),g.ɵprov=d.Yz({token:g,factory:g.ɵfac})},57283:(t,e,n)=>{"use strict";n.d(e,{_:()=>c});var o=n(95127),i=n(15045),s=n(32779),r=n(85086);const a="LIVE_EVENTS_STATUS";class c{get enabled(){return this.ɵenabled}get enabledChange(){return this.ɵenabledChange.asObservable()}constructor(t){this.storage=t,this.ɵenabled=!1,this.ɵenabledChange=new i.x,this.ɵenabled=this.storage.get(a)??!1}setEnabled(t){this.ɵenabled!=t&&(this.storage.set(a,t),this.ɵenabled=t,this.ɵenabledChange.next())}}c.ɵfac=function(t){return new(t||c)(s.LF(o.T0))},c.ɵprov=r.Yz({token:c,factory:c.ɵfac})},65947:(t,e,n)=>{"use strict";n.d(e,{Qd:()=>at,Wh:()=>st,Kc:()=>it,Ao:()=>ot,AL:()=>tt,Fy:()=>et,$R:()=>nt,Sf:()=>rt});var o=n(43998),i=n(41842),s=n(28990),r=n(58329),a=n(8124),c=n(66201),u=n(44167),l=n(80157),d=n(35516),p=n(16301),g=n(87003),h=n(68339),m=n(95127),f=n(83762),v=n(93463),y=n(32779),b=n(85086),C=n(94885);function _(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class w{constructor(t,e){this._componentsRegister=t,this._logger=e}tryToGet(t){var e,n=this;return(e=function*(){if("layout-components"!=t.package)return null;n._logger?.debug("LayoutComponentsRelationsNodesProvider: trying to get node {{@item}}",{item:{name:t.name,package:t.package}});const e=yield n._componentsRegister.getType(t.name);return e?{default:e,displayName:yield n._componentsRegister.getDisplayName(t.name),scope:yield n._componentsRegister.getScope(t.name),name:yield n._componentsRegister.getComponentName(t.name),package:yield n._componentsRegister.getComponentPackage(t.name)}:null},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function r(t){_(s,o,i,r,a,"next",t)}function a(t){_(s,o,i,r,a,"throw",t)}r(void 0)}))})()}}function x(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}w.ɵfac=function(t){return new(t||w)(y.LF(C.C),y.LF(m.bZ,8))},w.ɵprov=b.Yz({token:w,factory:w.ɵfac});class O{constructor(t,e,n){this._componentsRegister=t,this._loader=e,this._logger=n}tryToGet(t){var e,n=this;return(e=function*(){if("layout-components"!=t.package)return null;n._logger?.debug("LayoutComponentsRelationsTypesProvider: trying to get relations types {{@item}}",{item:{name:t.name,package:t.package}});const e=yield n._componentsRegister.types;if(!e)return null;const o=[];for(const t of e){const e=yield n._loader.loadItem({package:"layout-components",name:t});e?.data&&o.push(t)}return{default:o}},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function r(t){x(s,o,i,r,a,"next",t)}function a(t){x(s,o,i,r,a,"throw",t)}r(void 0)}))})()}}O.ɵfac=function(t){return new(t||O)(y.LF(C.C),y.LF(c.fI),y.LF(m.bZ,8))},O.ɵprov=b.Yz({token:O,factory:O.ɵfac});var R=n(25271);function I(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class S{constructor(t,e){this._customComponentRegister=t,this._logger=e}tryToGet(t){var e,o=this;return(e=function*(){if("custom-components"!=t.package)return null;switch(o._logger?.debug("CustomComponentsDynamicModuleItemsProvider: trying to get node {{@item}}",{item:{name:t.name,package:t.package}}),t.name){case"placeholder":return yield n.e(7961).then(n.bind(n,77961));case"placeholderContainer":return yield n.e(5193).then(n.bind(n,55193));case"componentInputs":return yield n.e(4738).then(n.bind(n,64738));case"componentOutputs":return yield n.e(9888).then(n.bind(n,99888));default:{const e=yield n.e(7819).then(n.bind(n,27819)),i=yield o._customComponentRegister?.getConfigurationForComponent(t.name),s={...e,displayName:i?.displayName,description:i?.description,group:i?.group};return Object.freeze(s),s}}},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function r(t){I(s,o,i,r,a,"next",t)}function a(t){I(s,o,i,r,a,"throw",t)}r(void 0)}))})()}}function P(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}S.ɵfac=function(t){return new(t||S)(y.LF(R.t,8),y.LF(m.bZ,8))},S.ɵprov=b.Yz({token:S,factory:S.ɵfac});class L{constructor(t,e){this._componentsRegister=t,this._logger=e}tryToGet(t){var e,n=this;return(e=function*(){if("custom-components"!=t.package)return null;n._logger?.debug("CustomComponentsDynamicModuleTypesProvider: trying to get relations types {{@item}}",{item:{name:t.name,package:t.package}});const e=yield n._componentsRegister.getRegisteredComponents();return e.length?{default:[...e,"placeholder"]}:{default:["placeholder"]}},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function r(t){P(s,o,i,r,a,"next",t)}function a(t){P(s,o,i,r,a,"throw",t)}r(void 0)}))})()}}function D(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}L.ɵfac=function(t){return new(t||L)(y.LF(R.t),y.LF(m.bZ,8))},L.ɵprov=b.Yz({token:L,factory:L.ɵfac});class k{constructor(t){this._logger=t}tryToGet(t){var e,n=this;return(e=function*(){return"custom-components"!=t.package?null:(n._logger?.debug("CustomComponentsDynamicModuleRelationsProvider: trying to get relations types {{@item}}",{item:{name:t.name,package:t.package}}),{default:["componentInputs","componentOutputs"]})},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function r(t){D(s,o,i,r,a,"next",t)}function a(t){D(s,o,i,r,a,"throw",t)}r(void 0)}))})()}}k.ɵfac=function(t){return new(t||k)(y.LF(m.bZ,8))},k.ɵprov=b.Yz({token:k,factory:k.ɵfac});var E=n(89852);function T(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class N{constructor(t,e){this.logger=t,this.customRelationsRegister=e}tryToGet(t){var e,n=this;return(e=function*(){return"custom-relations"!=t.package?null:(n.logger.debug("CustomRelationsDynamicModuleRelationsProvider: trying to get relations types {{@item}}",{item:{name:t.name,package:t.package}}),{default:[...(yield n.customRelationsRegister?.getRegisteredComponents())??[],"relationsInputs","relationsOutputs"]})},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function r(t){T(s,o,i,r,a,"next",t)}function a(t){T(s,o,i,r,a,"throw",t)}r(void 0)}))})()}}function M(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}N.ɵfac=function(t){return new(t||N)(y.LF(m.bZ),y.LF(E.F,8))},N.ɵprov=b.Yz({token:N,factory:N.ɵfac});class A{constructor(t,e){this.logger=t,this.customRelationsRegister=e}tryToGet(t){var e,o=this;return(e=function*(){if("custom-relations"!=t.package)return null;switch(o.logger.debug("CustomRelationsDynamicModuleItemsProvider: trying to get node {{@item}}",{item:{name:t.name,package:t.package}}),t.name){case"relationsInputs":{const t=yield n.e(4738).then(n.bind(n,64738));if(!t)return null;const e={...t,displayName:"Relations inputs",description:"Definition of relations inputs",group:"Relations"};return Object.freeze(e),e}case"relationsOutputs":{const t=yield n.e(9888).then(n.bind(n,99888));if(!t)return null;const e={...t,displayName:"Relations outputs",description:"Definition of relations outputs",group:"Relations"};return Object.freeze(e),e}default:{const e=yield n.e(8526).then(n.bind(n,78526)),i=yield o.customRelationsRegister?.getConfigurationForComponent(t.name),s={...e,displayName:i?.displayName,description:i?.description,group:i?.group};return Object.freeze(s),s}}},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function r(t){M(s,o,i,r,a,"next",t)}function a(t){M(s,o,i,r,a,"throw",t)}r(void 0)}))})()}}A.ɵfac=function(t){return new(t||A)(y.LF(m.bZ),y.LF(E.F,8))},A.ɵprov=b.Yz({token:A,factory:A.ɵfac});const F={provide:c.n7,useClass:w,multi:!0},j={provide:c.GP,useClass:O,multi:!0},z={provide:i.Aw,useClass:S,multi:!0},Y={provide:f.sc,useClass:L,multi:!0},U={provide:c.GP,useClass:k,multi:!0},q={provide:c.n7,useClass:S,multi:!0},V=(v.B6,{provide:c.GP,useClass:N,multi:!0}),Z={provide:c.n7,useClass:A,multi:!0},$={provide:v.B6,useClass:A,multi:!0};var G=n(76498),Q=n(97881),B=n(73943),H=n(25689);function J(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class X extends a.a{constructor(t,e){super(),this.layoutManager=t,this.componentRegister=e,this.initSubscriptions=new H.w0,this.initSubscriptions.add(this.layoutManager.layoutChange.subscribe((()=>this.getScopes()))),this.getScopes()}ngOnDestroy(){this.initSubscriptions.unsubscribe()}getScopes(){var t,e=this;return(t=function*(){e.ɵScopes=[];const t=yield e.componentRegister.types;for(const n of t){let t=null;(t=yield e.componentRegister.getScope(n))&&e.ɵScopes.indexOf(t)<0&&e.ɵScopes.push(t)}e.scopesChangeSubject.next()},function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){J(s,o,i,r,a,"next",t)}function a(t){J(s,o,i,r,a,"throw",t)}r(void 0)}))})()}}function K(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}function W(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return W=function(t){this.s=t,this.n=t.next},W.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new W(t)}function tt(){return[...(0,o._)(),...(0,s.Aq)()]}function et(){return[...tt(),z,$]}function nt(){const t=(0,r.TN)();return t.splice(t.indexOf(a.a),1),[...(0,d._T)(!1),...t,F,j,G.n,C.C,p.$,{provide:a.a,useClass:X},{provide:c.dK,useFactory:t=>t.layoutChange,deps:[G.n],multi:!0},(0,h.XW)("layout-components")]}function ot(t=E.F){return[Z,V,$,(0,h.XW)("custom-relations"),{provide:E.F,useClass:t}]}function it(t,e=R.t){return[q,U,z,(0,h.XW)("custom-components"),{provide:R.t,useClass:e},...t]}function st(t,e=R.t){return[z,Y,(0,h.XW)("custom-components"),{provide:R.t,useClass:e},...t]}function rt(t){return[...nt(),u.I_,u.UB,{provide:l.w,useClass:t},(0,h.XW)("static-components")]}function at(t,e){return ct.apply(this,arguments)}function ct(){var t;return t=function*(t,e){const n=e.get(i.qO),o=yield n.getMetadata(t),s=e.get(m.bZ);if(!o)return s.warn("ContentOptionsPropertiesControlSAComponent: missing layout metadata for custom component!"),null;const r=e.get(p.$).getIteratorFor(o),a=e.get(g.T),c={};var u,l=!1,d=!1;try{for(var h,f=function(t){var e,n,o,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,o=Symbol.iterator);i--;){if(n&&null!=(e=t[n]))return e.call(t);if(o&&null!=(e=t[o]))return new W(e.call(t));n="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}(r);l=!(h=yield f.next()).done;l=!1){const t=h.value;{const e=yield a.extractMetadata(t.metadata);if(!e){s.warn("ContentOptionsPropertiesControlSAComponent: missing metadata for component!");continue}c[t.metadata.id]={metadata:t.metadata,editorMetadata:e}}}}catch(t){d=!0,u=t}finally{try{l&&null!=f.return&&(yield f.return())}finally{if(d)throw u}}return{contentMetadata:c,metadata:o}},ct=function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){K(s,o,i,r,a,"next",t)}function a(t){K(s,o,i,r,a,"throw",t)}r(void 0)}))},ct.apply(this,arguments)}X.ɵfac=function(t){return new(t||X)(y.LF(G.n),y.LF(C.C))},X.ɵprov=b.Yz({token:X,factory:X.ɵfac}),(0,Q.gn)([(0,B.CY)(10),(0,B.Sw)(),(0,Q.w6)("design:type",Function),(0,Q.w6)("design:paramtypes",[]),(0,Q.w6)("design:returntype",Promise)],X.prototype,"getScopes",null)},71862:(t,e,n)=>{"use strict";n.d(e,{m:()=>i});var o=n(85410);class i{transform(t,e){return e?.editorMetadata.metaInfo?.optionsMetadata?.propertiesMetadata?.find((e=>e.modelType.name==t))?.modelType??null}}i.ɵfac=function(t){return new(t||i)},i.ɵpipe=o.Yj({name:"getModel",type:i,pure:!0,standalone:!0})},55055:(t,e,n)=>{"use strict";n.d(e,{l:()=>r});var o=n(80033),i=n(85410),s=n(19684);class r{constructor(t){this.propertyExtractor=t}transform(t,e){if(!t)return null;if(this.propertyExtractor??(this.propertyExtractor=e),!this.propertyExtractor)throw new Error("Please provide LayoutEditorPropertyMetadataExtractor for propertiesMetadata pipe!");return this.propertyExtractor.extract(t)}}r.ɵfac=function(t){return new(t||r)(o.Y(s.L,24))},r.ɵpipe=i.Yj({name:"propertiesMetadata",type:r,pure:!0,standalone:!0})},25271:(t,e,n)=>{"use strict";n.d(e,{t:()=>r});var o=n(76600),i=n(46735),s=n(85086);class r extends o.K{}r.ɵfac=(()=>{let t;return function(e){return(t||(t=i.n5(r)))(e||r)}})(),r.ɵprov=s.Yz({token:r,factory:r.ɵfac})},76600:(t,e,n)=>{"use strict";n.d(e,{K:()=>i});var o=n(85086);class i{getRegisteredComponents(){return[]}getConfigurationForComponent(t){return null}setConfigurationForComponent(t,e){}}i.ɵfac=function(t){return new(t||i)},i.ɵprov=o.Yz({token:i,factory:i.ɵfac})},89852:(t,e,n)=>{"use strict";n.d(e,{F:()=>r});var o=n(76600),i=n(46735),s=n(85086);class r extends o.K{}r.ɵfac=(()=>{let t;return function(e){return(t||(t=i.n5(r)))(e||r)}})(),r.ɵprov=s.Yz({token:r,factory:r.ɵfac})},94885:(t,e,n)=>{"use strict";n.d(e,{C:()=>p});var o=n(41842),i=n(25689),s=n(32779),r=n(85086),a=n(76498),c=n(16301);function u(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){u(s,o,i,r,a,"next",t)}function a(t){u(s,o,i,r,a,"throw",t)}r(void 0)}))}}function d(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return d=function(t){this.s=t,this.n=t.next},d.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new d(t)}class p{get types(){return this.initPromise??(this.initPromise=this.initializeTypes()),this.initPromise.then((()=>Object.keys(this.definedTypes)))}constructor(t,e,n){this.layoutManager=t,this.loader=e,this.iteratorSvc=n,this.initSubscriptions=new i.w0,this.definedTypes={},this.initPromise=null,this.initSubscriptions.add(this.layoutManager.layoutChange.subscribe((()=>this.initPromise=null)))}ngOnDestroy(){this.initSubscriptions.unsubscribe()}getType(t){var e=this;return l((function*(){return yield e.initPromise??(e.initPromise=e.initializeTypes()),e.definedTypes[t]?.type??null}))()}getDisplayName(t){var e=this;return l((function*(){return yield e.initPromise??(e.initPromise=e.initializeTypes()),e.definedTypes[t]?.displayName??void 0}))()}getScope(t){var e=this;return l((function*(){return yield e.initPromise??(e.initPromise=e.initializeTypes()),e.definedTypes[t]?.scope}))()}getComponentName(t){var e=this;return l((function*(){return yield e.initPromise??(e.initPromise=e.initializeTypes()),e.definedTypes[t]?.name??null}))()}getComponentPackage(t){var e=this;return l((function*(){return yield e.initPromise??(e.initPromise=e.initializeTypes()),e.definedTypes[t]?.package??null}))()}initializeTypes(){var t=this;return l((function*(){if(t.definedTypes={},!t.layoutManager.layout)return;const e=t.iteratorSvc.getIteratorFor(t.layoutManager.layout);var n,o=!1,i=!1;try{for(var s,r=function(t){var e,n,o,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,o=Symbol.iterator);i--;){if(n&&null!=(e=t[n]))return e.call(t);if(o&&null!=(e=t[o]))return new d(e.call(t));n="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}(e);o=!(s=yield r.next()).done;o=!1){const e=s.value;{const n=yield t.loader.loadItem(e.metadata);if(!n)continue;t.definedTypes[e.metadata.id]={type:n.data,displayName:e.metadata.displayName,name:e.metadata.name,scope:e.metadata.scope??void 0,package:e.metadata.package}}}}catch(t){i=!0,n=t}finally{try{o&&null!=r.return&&(yield r.return())}finally{if(i)throw n}}}))()}}p.ɵfac=function(t){return new(t||p)(s.LF(a.n),s.LF(o.Vl),s.LF(c.$))},p.ɵprov=r.Yz({token:p,factory:p.ɵfac})},76498:(t,e,n)=>{"use strict";n.d(e,{n:()=>r});var o=n(15045),i=n(37071),s=n(85086);class r{constructor(){this._layout=null,this._layoutChange=new o.x}get layout(){return this._layout}get layoutChange(){return this._layoutChange.asObservable()}setLayout(t){(0,i.Z)(this._layout,t)||(this._layout=t,this._layoutChange.next())}}r.ɵfac=function(t){return new(t||r)},r.ɵprov=s.Yz({token:r,factory:r.ɵfac})},13555:(t,e,n)=>{"use strict";n.d(e,{n:()=>d});var o=n(96837),i=n(85410),s=n(78190),r=n(88809),a=n(13315),c=n(95741),u=n(57284),l=n(13757);class d{}d.ɵfac=function(t){return new(t||d)},d.ɵcmp=i.Xp({type:d,selectors:[["not-found-layout-type"]],standalone:!0,features:[s.j],decls:6,vars:3,consts:[[1,"fas","fa-minus-circle"]],template:function(t,e){1&t&&(r.Tg(0,"div"),r._U(1,"span",0),r.Tg(2,"span"),a._(3),c.AL(4,"localize"),r.qZ(),r._U(5,"span",0),r.qZ()),2&t&&(u.x(3),l.Oq(c.lc(4,1,"NOT FOUND")))},dependencies:[o.v],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0})},52409:(t,e,n)=>{"use strict";var o;n.d(e,{q:()=>o}),function(t){t[t.ShowNotFound=0]="ShowNotFound",t[t.Ignore=1]="Ignore",t[t.ThrowError=2]="ThrowError"}(o||(o={}))},43998:(t,e,n)=>{"use strict";n.d(e,{_:()=>m});var o=n(32779),i=n(95127),s=n(42383),r=n(93584),a=n(47628),c=n(48015),u=n(41842),l=n(73943);const d=function(t){return!((0,l.fp)(t?.data)||!(0,l.P9)(t.data)||(0,l.EN)(t?.childExtensions)&&(!Array.isArray(t.childExtensions)||t.childExtensions.some((t=>!(0,l.P9)(t))))||(0,l.EN)(t?.extensions)&&(!Array.isArray(t.extensions)||t.extensions.some((t=>!(0,l.P9)(t)))))};var p=n(14611);const g={provide:u.gM,useFactory:()=>new s.$([r.L,a.k],(0,o.f3)(i.bZ)),multi:!0},h={provide:u.Vl,useFactory:()=>new c.S((0,o.f3)(u.Aw),(0,o.f3)(u.gM),d,(0,o.f3)(i.bZ))};function m(...t){const e=[],n=[];for(const o of t)e.push(o.prependProviders),n.push(o.providers);return[...e,h,g,p.t,n]}},41842:(t,e,n)=>{"use strict";n.d(e,{Aw:()=>r,Vl:()=>a,X5:()=>i,gM:()=>s,qO:()=>c});var o=n(30891);const i=new o.O("LAYOUT_COMPONENT_CHILD_EXTENSIONS"),s=new o.O("LAYOUT_COMPONENTS_MODULE_DATA_EXTRACTORS"),r=new o.O("LAYOUT_COMPONENTS_MODULE_PROVIDERS"),a=new o.O("LAYOUT_COMPONENTS_LOADER"),c=new o.O("LAYOUT_METADATA_STORAGE")},14793:(t,e,n)=>{"use strict";n.d(e,{G:()=>d});var o=n(32779),i=n(95127),s=n(15045),r=n(41842),a=n(73943),c=n(52409);class u{constructor(t){this.missingTypeBehavior=c.q.ShowNotFound,(0,a.EN)(t)&&(this.missingTypeBehavior=t)}}var l=n(85086);class d{get rootRenderer(){const t=Object.keys(this.renderers);for(const e of t){const t=this.renderers[e];if(t?.parentId)return this.renderers[t.parentId]}return null}get renderingFinished(){return this.renderingFinishedSubject.asObservable()}constructor(){this.logger=(0,o.f3)(i.bZ),this.loader=(0,o.f3)(r.Vl),this.renderingFinishedSubject=new s.x,this.renderers={},this.components={};const t=(0,o.f3)(u,{optional:!0});this.options=t&&t instanceof u?t:new u}hasComponent(t){return!!this.components[t]}hasRenderer(t){return!!this.renderers[t]}destroyRenderer(t){this.logger.debug('LayoutRenderer: destroying renderer "{{id}}"',{id:t});const e=this.renderers[t];e&&(this.logger.verbose('LayoutRenderer: removing renderer from registry "{{id}}"',{id:t}),delete this.components[e.metadata.id],delete this.renderers[t])}unregisterRenderer(t){this.logger.debug('LayoutRenderer: ungregistering renderer "{{id}}"',{id:t});const e=this.renderers[t];e&&(this.logger.verbose('LayoutRenderer: destroying component "{{id}}"',{id:t}),e.viewContainer.clear(),this.logger.verbose('LayoutRenderer: component destroyed "{{id}}"',{id:t}),delete this.components[e.metadata.id],delete this.renderers[t])}}d.ɵfac=function(t){return new(t||d)},d.ɵprov=l.Yz({token:d,factory:d.ɵfac})},14611:(t,e,n)=>{"use strict";n.d(e,{t:()=>g});var o=n(31530),i=n(19630),s=n(68339),r=n(41842),a=n(52409),c=n(13555),u=n(14793),l=n(46735),d=n(85086);function p(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class g extends u.G{constructor(){super(...arguments),this.syncPromise=Promise.resolve(),this.registeredCalls=0}registerRenderer(t,e,n,u,l,d,g,h,m){var f,v=this;return(f=function*(){v.registeredCalls++;const p=v.syncPromise;let f;if(v.syncPromise=new Promise((t=>f=t)),yield p,v.logger.debug("LayoutRenderer: registering renderer {{@(4)renderer}}",{renderer:{id:t,parentId:e,metadata:u,parentMetadata:l,scopeId:d}}),v.components[u.id])throw new Error(`LayoutRenderer: component with ID ${u.id} already exists!`);const y={id:t,parentId:e,viewContainer:n,metadata:u,parentMetadata:l,scopeId:d,childExtensions:g,component:null};v.components[u.id]=y,v.renderers[t]=y;const b=m??n.injector,C=u.scope,_=yield v.loader.loadItem(u);if(!_){switch(v.logger.warn("LayoutRenderer: Unable to find layout component type {{@type}}",{type:{name:u.name,package:u.package}}),v.options?.missingTypeBehavior){default:n.createComponent(c.n);break;case a.q.Ignore:break;case a.q.ThrowError:throw new Error(`LayoutRenderer: Unable to find layout component type Name: ${u.name} Package: ${u.package}`)}return}const w=o.z.create({parent:b,providers:[{provide:i.H$,useValue:C??d??null},{provide:r.X5,useValue:_.childExtensions}]}),x=n.createComponent(_.data,{injector:w});y.component=x,x.changeDetectorRef.detach(),v.logger.verbose("LayoutRenderer: component rendered {{@id}}",{id:u?.id});const O=x.instance;O.registerExtensions([...g?.map((t=>new t(u)))??[],..._?.extensions?.map((t=>new t(u)))??[]]);const R={};(0,s.mv)(R,"options",u.options,O.options,!0),v.logger.verbose("LayoutRenderer: setting options for component {{id}}, options: {{@(4)options}}",{id:u?.id,options:u.options}),O.options=u.options,v.logger.verbose("LayoutRenderer: set options for component {{id}}",{id:u?.id}),v.logger.verbose("LayoutRenderer: setting changes for component {{id}}",{id:u?.id}),yield O.dynamicOnChanges?.(R),v.logger.verbose("LayoutRenderer: set changes for component {{id}}",{id:u?.id}),v.logger.verbose("LayoutRenderer: initializing component {{id}}",{id:u?.id}),yield O.dynamicOnInit?.(),v.logger.verbose("LayoutRenderer: initialized component {{id}}",{id:u?.id}),v.logger.verbose("LayoutRenderer: invalidating component visuals {{id}}",{id:u?.id}),O.invalidateVisuals(),v.logger.verbose("LayoutRenderer: invalidated component visuals {{id}}",{id:u?.id}),v.logger.verbose("LayoutRenderer: after view initializing {{id}}",{id:u?.id}),yield O.dynamicAfterViewInit?.(),v.logger.verbose("LayoutRenderer: after view initialized {{id}}",{id:u?.id}),h?.(y),x.changeDetectorRef.reattach(),f?.(),v.registeredCalls--,0===v.registeredCalls&&v.renderingFinishedSubject.next()},function(){var t=this,e=arguments;return new Promise((function(n,o){var i=f.apply(t,e);function s(t){p(i,n,o,s,r,"next",t)}function r(t){p(i,n,o,s,r,"throw",t)}s(void 0)}))})()}}g.ɵfac=(()=>{let t;return function(e){return(t||(t=l.n5(g)))(e||g)}})(),g.ɵprov=d.Yz({token:g,factory:g.ɵfac})},7312:(t,e,n)=>{"use strict";n.d(e,{i:()=>i});var o=n(27834);function i(t){return(0,o.R)(t,"relationsEditorMetadata")}},44167:(t,e,n)=>{"use strict";n.d(e,{AL:()=>R,aU:()=>I,md:()=>O,Ub:()=>D,P_:()=>L,xt:()=>S,Oq:()=>P,UB:()=>x,I_:()=>w});var o=n(32779),i=n(42383),s=n(93584),r=n(48015),a=n(19630),c=n(78344),u=n(95127),l=n(66201),d=n(39574);function p(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}const g=function(){var t,e=(t=function*(t,e){const n=yield(0,d.j)(t,e);if(e?.debug("relationsNodeExtractor: trying to extract dynamic node"),!n)return null;const o=n.data;if(!o)return null;const i=yield o.relationsEditorMetadata;return i?{data:i.nodeDefinition,metaInfo:i.metaInfo}:null},function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){p(s,o,i,r,a,"next",t)}function a(t){p(s,o,i,r,a,"throw",t)}r(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();function h(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}const m=function(){var t,e=(t=function*(t,e){const n=t;if(e?.debug("componentRelationsNodeExtractor: trying to extract dynamic node"),!n)return null;const o=n.default;if(!o)return null;const i=yield o.relationsEditorMetadata;return i?{data:i.nodeDefinition,metaInfo:i.metaInfo,singleton:!0,displayName:n.displayName,scope:n.scope,name:n.name,package:n.package}:null},function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){h(s,o,i,r,a,"next",t)}function a(t){h(s,o,i,r,a,"throw",t)}r(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();var f=n(85086),v=n(80157);class y{constructor(t,e){this._componentsRegister=t,this._logger=e}tryToGet(t){if("static-components"!=t.package)return null;this._logger?.debug("StaticComponentsRelationsNodesProvider: trying to get node {{@item}}",{item:{name:t.name,package:t.package}});const e=this._componentsRegister.getType(t.name);return e?{default:e}:null}}y.ɵfac=function(t){return new(t||y)(o.LF(v.w),o.LF(u.bZ,8))},y.ɵprov=f.Yz({token:y,factory:y.ɵfac});class b{constructor(t,e){this._componentsRegister=t,this._logger=e}tryToGet(t){if("static-components"!=t.package)return null;this._logger?.debug("StaticComponentsRelationsTypesProvider: trying to get relations types {{@item}}",{item:{name:t.name,package:t.package}});const e=this._componentsRegister.types;return e?{default:e}:null}}b.ɵfac=function(t){return new(t||b)(o.LF(v.w),o.LF(u.bZ,8))},b.ɵprov=f.Yz({token:b,factory:b.ɵfac});var C=n(52539),_=n(58329);const w={provide:l.n7,useClass:y,multi:!0},x={provide:l.GP,useClass:b,multi:!0},O={provide:l.yh,useFactory:()=>new i.$([g],(0,o.f3)(u.bZ)),multi:!0},R={provide:l.yh,useFactory:()=>new i.$([m],(0,o.f3)(u.bZ)),multi:!0},I={provide:l.DZ,useFactory:()=>new i.$([s.L],(0,o.f3)(u.bZ)),multi:!0},S={provide:l.Bj,useFactory:()=>new r.S((0,o.f3)(l.GP),(0,o.f3)(l.DZ),_.CQ,(0,o.f3)(u.bZ),!0)},P={provide:l.fI,useFactory:()=>new r.S((0,o.f3)(l.n7),(0,o.f3)(l.yh),_.Zl,(0,o.f3)(u.bZ))},L={provide:a.K,useExisting:C.J},D={provide:l.nR,useClass:c.Y}},66201:(t,e,n)=>{"use strict";n.d(e,{Bj:()=>r,DZ:()=>i,GP:()=>s,dK:()=>l,fI:()=>u,fs:()=>p,n7:()=>c,nR:()=>d,yh:()=>a});var o=n(30891);const i=new o.O("RELATIONS_MODULE_TYPES_DATA_EXTRACTORS"),s=new o.O("RELATIONS_MODULE_TYPES_PROVIDERS"),r=new o.O("RELATIONS_MODULE_TYPES_LOADER"),a=new o.O("RELATIONS_NODES_DATA_EXTRACTORS"),c=new o.O("RELATIONS_NODES_PROVIDERS"),u=new o.O("RELATIONS_NODES_LOADER"),l=new o.O("REFRESH_PALETTE_OBSERVABLES"),d=new o.O("RELATIONS_HISTORY_MANAGER"),p=new o.O("RELATIONS_DEFAULTS_OVERRIDE")},58329:(t,e,n)=>{"use strict";n.d(e,{CQ:()=>d,TN:()=>g,Wg:()=>f,Zl:()=>p,hE:()=>h,qV:()=>m,uZ:()=>l});var o=n(68339),i=n(73943),s=n(44167),r=n(52539),a=n(8124),c=n(80157),u=n(66201);function l(t,e,n){return Math.min(Math.max(t,e),n)}const d=function(t){return!((0,i.fp)(t?.data)||!Array.isArray(t.data))},p=function(t){return!((0,i.fp)(t?.data)||!(0,i.P9)(t.data)||(0,i.EN)(t.singleton)&&!(0,i.jn)(t.singleton)||(0,i.EN)(t.displayName)&&!(0,i.HD)(t.displayName)||(0,i.EN)(t?.metaInfo)&&!(0,i.wV)(t.metaInfo))};function g(){return[s.md,s.AL,s.aU,s.xt,s.Oq,r.J,a.a,s.P_,s.Ub]}function h(t){return[...g(),s.I_,s.UB,{provide:c.w,useClass:t},(0,o.XW)("static-components")]}function m(t){return{provide:u.fs,useClass:t}}function f(t){let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);let n="#";for(let t=0;t<3;t++)n+=("00"+(e>>8*t&255).toString(16)).substr(-2);return n}},52539:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var o=n(15045),i=n(85086);class s{constructor(){this._nodes={},this._waitingInputRelations={},this._nodesChange=new o.x,this._activeNodeChange=new o.x,this._nodeRegisterChange=new o.x,this._nodeUnregisterChange=new o.x}get nodes(){return this._nodes}get nodesChange(){return this._nodesChange.asObservable()}get activeNode(){return this._activeNode}get activeNodeChange(){return this._activeNodeChange.asObservable()}get nodeRegisterChange(){return this._nodeRegisterChange.asObservable()}get nodeUnregisterChange(){return this._nodeUnregisterChange.asObservable()}setActiveInput(t){this._activeInput=t}getActiveInput(){return this._activeInput}registerNode(t){var e,n;if(this._nodes[t.id]=t,this._nodesChange.next(),this._nodeRegisterChange.next(t),t.metadata?.outputs&&Array.isArray(t.metadata?.outputs))for(const o of t.metadata?.outputs){if(!o.inputs||!Array.isArray(o.inputs))continue;const i=t.outputs[o.outputName];if(i)for(const t of o.inputs){const o=this._nodes[t.id],s=i.startRelation();if(!o){(e=this._waitingInputRelations)[n=t.id]??(e[n]=[]),this._waitingInputRelations[t.id].push({inputName:t.inputName,relation:s});continue}const r=o.inputs[t.inputName];r&&r.endRelation(s)}}if(this._waitingInputRelations[t.id]){const e=this._waitingInputRelations[t.id],n=this._nodes[t.id];if(!n)return;for(const o of e){const e=n.inputs[o.inputName];e&&(e.endRelation(o.relation),delete this._waitingInputRelations[t.id])}}}unregisterNode(t){delete this._nodes[t.id],this._nodesChange.next(),this._nodeUnregisterChange.next(t)}getMetadata(){const t=[],e=Object.keys(this._nodes);for(const n of e){const e=this._nodes[n];if(!e.metadata)continue;const o={id:n,name:e.metadata.name,package:e.metadata.package,displayName:e.metadata.displayName,relationsOptions:e.metadata.relationsOptions,nodeMetadata:e.metadata.nodeMetadata,scope:e.metadata.scope,outputs:[]};if(e.allOutputs){for(const t of e.allOutputs){if(!t.relations)continue;if(!t.name)continue;const e={outputName:t.name,inputs:[]};for(const n of t.relations)n.input?.name&&e.inputs.push({id:n.input.parentId,inputName:n.input.name});o.outputs?.push(e)}t.push(o)}}return t}setActiveNode(t){this._activeNode=t,this._activeNodeChange.next()}}s.ɵfac=function(t){return new(t||s)},s.ɵprov=i.Yz({token:s,factory:s.ɵfac})},8124:(t,e,n)=>{"use strict";n.d(e,{a:()=>s});var o=n(15045),i=n(85086);class s{constructor(){this.ɵScopes=[],this.scopesChangeSubject=new o.x}get scopes(){return this.ɵScopes}get scopesChange(){return this.scopesChangeSubject.asObservable()}}s.ɵfac=function(t){return new(t||s)},s.ɵprov=i.Yz({token:s,factory:s.ɵfac})},80157:(t,e,n)=>{"use strict";n.d(e,{w:()=>i});var o=n(85086);class i{constructor(){this._definedTypes=this.getDefinedTypes()}get types(){return Object.keys(this._definedTypes)}getType(t){return this._definedTypes[t]??null}}i.ɵfac=function(t){return new(t||i)},i.ɵprov=o.Yz({token:i,factory:i.ɵfac})},44902:(t,e,n)=>{"use strict";n.d(e,{h:()=>s,s:()=>i});const o=Symbol("DebugData");function i(t){return Reflect.get(t,o)}function s(t){return function(t){return t}}},76311:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var o=n(15045),i=n(28990),s=n(81293),r=n(31040);function a(t){return function(e,n){const a=n;Object.defineProperty(e,`${a}Change`,{get:function(){return this[`ɵ${a}Change`]||(this[`ɵ${a}Change`]=new o.x),this[`ɵ${a}Change`]}}),Object.defineProperty(e,a,{get:function(){return this[`ɵ${a}`]},set:function(e){if(this[`ɵ${a}`]=e,(0,i.gE)(this,a),t?.sync)this[`${a}Change`].next();else{const t=this.ɵɵinjector;if(!t)return;const e=t.get(s.s),n=t.get(r.H),o=e.getId(this);if(!o)return;n.markForCheck({componentId:o,outputName:a})}}}),t?.skipInit&&(0,i.pG)(e,a)}}},40840:(t,e,n)=>{"use strict";function o(t){return!!t.__ɵɵRelationsComponent}function i(){return function(t){return t.__ɵɵRelationsComponent=!0,t}}n.d(e,{H:()=>i,O:()=>o})},39574:(t,e,n)=>{"use strict";n.d(e,{j:()=>s});var o=n(73943),i=n(40840);const s=(t,e)=>{const n=t;return e?.debug("relationsExportExtractor: trying to extract dynamic relations"),(0,o.EN)(n.relations)&&(0,o.P9)(n.relations)&&(0,i.O)(n.relations)?{data:n.relations}:(0,o.EN)(n.default)&&(0,o.P9)(n.default)&&(0,i.O)(n.default)?{data:n.default}:null}},93463:(t,e,n)=>{"use strict";n.d(e,{B6:()=>s,TZ:()=>r,bE:()=>u,fX:()=>c,te:()=>a,u7:()=>i});var o=n(30891);const i=new o.O("RELATIONS_COMPONENTS_MODULE_DATA_EXTRACTORS"),s=new o.O("RELATIONS_COMPONENTS_MODULE_PROVIDERS"),r=new o.O("RELATIONS_COMPONENTS_LOADER"),a=new o.O("RELATIONS_METADATA_STORAGE"),c=new o.O("RELATIONS_PROCESSOR_SKIP_INIT"),u=new o.O("RELATIONS_DEBUGGER_TYPE")},28990:(t,e,n)=>{"use strict";n.d(e,{gE:()=>w,pG:()=>C,nP:()=>x,Xt:()=>v,Vr:()=>_,Aq:()=>b,kw:()=>y});var o=n(73943),i=n(32779),s=n(42383),r=n(48015),a=n(95127),c=n(93463),u=n(39574);const l={provide:c.u7,useFactory:()=>new s.$([u.j],(0,i.f3)(a.bZ)),multi:!0},d={provide:c.TZ,useFactory:()=>new r.S((0,i.f3)(c.B6),(0,i.f3)(c.u7),v,(0,i.f3)(a.bZ))};var p=n(81293),g=n(54619),h=n(25657),m=n(31040),f=n(36560);const v=function(t){return!((0,o.fp)(t?.data)||!(0,o.P9)(t.data))};function y(){return[]}function b(){return[l,d,p.s,g.N,h.v,m.H,f.J]}function C(t,e){const n=`${e}SkipInit`;Reflect.has(t,n)||Object.defineProperty(t,n,{value:!0})}function _(t,e){return t[`${e}SkipInit`]}function w(t,e){const n=`${e}Assigned`;Reflect.has(t,n)||Object.defineProperty(t,n,{value:!0})}function x(t,e){return t[`${e}Assigned`]}},36560:(t,e,n)=>{"use strict";n.d(e,{J:()=>c});var o=n(72435),i=n(73943),s=n(32779),r=n(85086);function a(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class c{constructor(t){this.document=t,this.loadedDataCache={}}loadData(t,e){var n,o=this;return(n=function*(){if(o.loadedDataCache[t])return o.loadedDataCache[t];const n=o.document.createElement("script"),s=`loadType${(0,i.Ox)(12)}`;let r=null;return n.innerText=`\n        (function(exports, loadType, require)\n        {\n            ${e}\n\n            loadType(exports);\n        })({}, ${s}.loadType, ${s}.require);`,window[s]={loadType:t=>r=t.default??null,require:t=>(console.log(t),null)},o.document.getElementsByTagName("head")[0].appendChild(n),delete window[s],n.remove(),o.loadedDataCache[t]=r,r},function(){var t=this,e=arguments;return new Promise((function(o,i){var s=n.apply(t,e);function r(t){a(s,o,i,r,c,"next",t)}function c(t){a(s,o,i,r,c,"throw",t)}r(void 0)}))})()}}c.ɵfac=function(t){return new(t||c)(s.LF(o.K))},c.ɵprov=r.Yz({token:c,factory:c.ɵfac})},31040:(t,e,n)=>{"use strict";n.d(e,{H:()=>p});var o=n(97881),i=n(32779),s=n(95127),r=n(73943),a=n(81293),c=n(25657);class u{constructor(t){this.detectionInSingleRun=!0,(0,r.EN)(t)&&(this.detectionInSingleRun=t)}}var l=n(31530),d=n(85086);class p{get relationsProcessor(){return this.ɵrelationsProcessor??(this.ɵrelationsProcessor=this.injector.get(c.v))}get relationsComponentManager(){return this.ɵrelationsComponentManager??(this.ɵrelationsComponentManager=this.injector.get(a.s))}get outputsComponents(){return(0,r.Qr)(this.ɵoutputsComponents)&&this.parent?this.parent.outputsComponents:this.ɵoutputsComponents}constructor(t,e,n){this.injector=t,this.logger=e,this.markedBeforeInit=[],this.ɵoutputsComponents={},this.parent=(0,i.f3)(p,{optional:!0,skipSelf:!0}),this.firstRunChanges=[],this.secondRunChanges=[],this.checkRunning=!1,n&&n instanceof u||(n=new u),this.options=n}markForCheck(t){const e=(0,r.HD)(t.componentId)?t.componentId:this.relationsComponentManager.getId(t.componentId);if(!e)return void this.logger.warn("RelationsChangeDetector: Unable to find component!");this.logger.debug("RelationsChangeDetector: marking for check {{@id}}",{id:{componentId:e,outputName:t.outputName}});const n=this.outputsComponents[e]?.[t.outputName]??[],o=this.checkRunning&&!this.options.detectionInSingleRun?this.secondRunChanges:this.firstRunChanges;if(n.length){for(const t of n){const e=o.find((e=>e.id==t.inputComponentId));e?e.inputs.indexOf(t.inputName)>=0||e.inputs.push(t.inputName):o.push({id:t.inputComponentId,inputs:[t.inputName]})}this.timeout||(this.timeout=setTimeout(this.runCheck,0))}else this.markedBeforeInit.push(t)}initialize(t){var e,n,o;this.logger.debug("RelationsChangeDetector: initializing {{@relations}}",{relations:t}),this.ɵoutputsComponents={};for(const i in t){const s=t[i];if((e=this.ɵoutputsComponents)[i]??(e[i]={}),s.inputOutputs)for(const t of s.inputOutputs)(n=this.ɵoutputsComponents[i])[o=t.outputName]??(n[o]=[]),this.ɵoutputsComponents[i][t.outputName].push(t)}const i=[...this.markedBeforeInit];this.markedBeforeInit=[];for(const t of i)this.markForCheck(t)}runCheck(){this.logger.debug("RelationsChangeDetector: running check"),this.checkRunning=!0;for(const t of this.firstRunChanges)this.relationsProcessor.transferInputsData(t.id,!0,t.inputs).applyChanges();this.options.detectionInSingleRun?this.firstRunChanges=[]:(this.firstRunChanges=this.secondRunChanges,this.secondRunChanges=[]),this.checkRunning=!1,this.timeout=null}}p.ɵfac=function(t){return new(t||p)(i.LF(l.z),i.LF(s.bZ),i.LF(u,8))},p.ɵprov=d.Yz({token:p,factory:p.ɵfac}),(0,o.gn)([r.ru,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[]),(0,o.w6)("design:returntype",void 0)],p.prototype,"runCheck",null)},81293:(t,e,n)=>{"use strict";n.d(e,{s:()=>u});var o=n(32779),i=n(31530),s=n(95127),r=n(73943),a=n(85086),c=n(76523);class u{constructor(t,e){this.logger=t,this.relationsDebugger=e,this.scopeId=null,this.components={},this.scopes={},this.parent=null,this.childrenCache={},this.injector=(0,o.f3)(i.z)}ngOnDestroy(){if(this.scopes)for(const t in this.scopes){const e=this.scopes[t];if(e)for(const t of e)t.ngOnDestroy();delete this.scopes[t]}for(const t in this.components)this.removeCacheFromHierarchy(t);if(this.parent&&this.scopeId){const t=this.parent.scopes[this.scopeId];if(t){const e=t.indexOf(this);e>=0&&t.splice(e,1)}}}registerComponent(t,e){this.components[t]?this.logger?.warn(`RelationsComponentManager: Component with id '${t}' is already registered, provide unique id.`):(e.ɵɵRelationsComponentId??(e.ɵɵRelationsComponentId=(0,r.Ox)(12)),this.removeCacheFromHierarchy(t),this.components[t]=e,e.ɵɵinjector=this.injector)}unregisterComponent(t){this.components[t]?(this.removeCacheFromHierarchy(t),this.components[t],delete this.components[t]):this.logger?.warn(`RelationsComponentManager: Component with id '${t}' has already been unregistered.`)}get(t){const e=this.components[t];if(e)return e;if(this.childrenCache[t])return this.childrenCache[t];return this.getChildrenComponents(t)||this.getParentComponents(t)}getId(t){for(const e in this.components)if(this.components[e]===t)return e;return null}openScope(t){var e;(e=this.scopes)[t]??(e[t]=[]);const n=new u(this.logger);return n.scopeId=t,n.parent=this,this.scopes[t].push(n),n}removeCacheFromHierarchy(t){this.parent&&this.parent.childrenCache[t]&&(delete this.parent.childrenCache[t],this.parent.removeCacheFromHierarchy(t))}getChildrenComponents(t){const e=e=>{const n=this.scopes[e],o=[];for(const e of n){const n=e.components[t];if(n){o.push(n);continue}const i=e.getChildrenComponents(t);if(!Array.isArray(i))return null;for(const t of i)o.push(t)}return o.length?o:null};for(const n in this.scopes){const o=e(n);if(o)return this.childrenCache[t]=o,o}return null}getParentComponents(t){if(!this.parent)return null;return(this.parent.components[t]??null)||this.parent.getParentComponents(t)}}u.ɵfac=function(t){return new(t||u)(o.LF(s.bZ,8),o.LF(c.Y,8))},u.ɵprov=a.Yz({token:u,factory:u.ɵfac})},76523:(t,e,n)=>{"use strict";n.d(e,{Y:()=>i});var o=n(85086);class i{}i.ɵfac=function(t){return new(t||i)},i.ɵprov=o.Yz({token:i,factory:i.ɵfac})},54619:(t,e,n)=>{"use strict";n.d(e,{N:()=>s});var o=n(15045),i=n(85086);class s{constructor(){this._relations=[],this._relationsChange=new o.x}get relations(){return this._relations}get relationsChange(){return this._relationsChange.asObservable()}setRelations(t){this._relations!=t&&(this._relations=t,this._relationsChange.next())}}s.ɵfac=function(t){return new(t||s)},s.ɵprov=i.Yz({token:s,factory:s.ɵfac})},25657:(t,e,n)=>{"use strict";n.d(e,{v:()=>b});var o=n(32779),i=n(95127),s=n(73943),r=n(25689),a=n(37346),c=n(93463);class u{get changes(){return this._changes}constructor(t){this.components=t,this._changes={}}applyChanges(){for(const t of this.components)if(t&&!(0,s.Qr)(this._changes)){for(const e in this._changes){const n=this._changes[e];t[e]=n.currentValue}t.dynamicOnChanges?.(this._changes),t.invalidateVisuals()}}}var l=n(28990),d=n(31040),p=n(76523),g=n(31530),h=n(85086),m=n(54619),f=n(81293);function v(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}function y(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){v(s,o,i,r,a,"next",t)}function a(t){v(s,o,i,r,a,"throw",t)}r(void 0)}))}}class b{get relations(){return this.parent?this.parent.relations:this.ɵRelations}set relations(t){this.ɵRelations=t}get backwardRelations(){return this.parent?this.parent.backwardRelations:this.ɵBackwardRelations}set backwardRelations(t){this.ɵBackwardRelations=t}get initialized(){return this.ɵInitialized}constructor(t,e,n,i,a,c){this.relationsManager=t,this.componentManager=e,this.injector=n,this.loader=i,this.logger=a,this.ɵInitialized=Promise.resolve(),this.ɵRelations={},this.ɵBackwardRelations={},this.resolveInitialized=s.ZT,this.initSubscriptions=new r.w0,this.parent=null,this.scopeId=null,this.relationsChangeDetector=(0,o.f3)(d.H),this.relationsDebugger=(0,o.f3)(p.Y,{optional:!0}),c||(this.initSubscriptions.add(this.relationsManager.relationsChange.subscribe((()=>this.initializeRelations()))),this.initializeRelations())}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.destroyRelations()}updateRelations(t){this.logger?.debug("RelationsProcessor: Updating relations for {{@id}}",{id:t});const e=this.relations[t],n=this.backwardRelations[t];let o=this.componentManager.get(t);if(e&&o){if(this.initOptions(o,e),n?.length&&n.forEach((t=>{this.initBackwardRelation(t)})),e?.inputOutputs){Array.isArray(o)||(o=[o]);for(const n of o){n.ɵɵRelationsOutputsChangeSubscriptions?.forEach((t=>t.unsubscribe())),n.ɵɵRelationsOutputsChangeSubscriptions=[];for(const o of e.inputOutputs){let e=this.componentManager.get(o.inputComponentId);e&&!Array.isArray(e)&&(e=[e]),this.logger?.verbose("RelationsProcessor: processing input outputs {{@data}} ",{data:{id:t,inputOutput:o}});const i=n[`${o.outputName}Change`];if(i instanceof a.y)if(n.ɵɵRelationsOutputsChangeSubscriptions.push(i.subscribe((()=>{let t=this.componentManager.get(o.inputComponentId);if(t){Array.isArray(t)||(t=[t]);for(const e of t)this.transferData(n,e,o,!1)}else this.logger?.warn("RelationsProcessor: Missing input components {{@data}} on output change",{data:o})}))),e&&Array.isArray(e))for(const t of e){const e=`${t.ɵɵRelationsComponentId}-${n.ɵɵRelationsComponentId}`;(0,l.Vr)(n,o.outputName)||o.initialized[e]||!(0,l.nP)(n,o.outputName)||(o.initialized[e]=this.transferData(n,t,o,!0))}else this.logger?.warn("RelationsProcessor: Missing input components {{@data}}",{data:o});else this.logger?.warn("RelationsProcessor: Output on component {{@data}} is not observable",{data:o})}}}}else this.logger?.warn("RelationsProcessor: No relations for {{@id}}",{id:t})}destroyComponent(t){const e=this.relations[t],n=this.backwardRelations[t];if(n)for(const t of n)t.initialized={};if(e){let n=this.componentManager.get(t);if(n){if(!n)return;Array.isArray(n)||(n=[n]);for(const t of n)t.ɵɵRelationsOutputsChangeSubscriptions?.forEach((t=>t.unsubscribe())),t.ɵɵRelationsOutputsChangeSubscriptions=[],t.ɵɵRelationsOptionsInitialized=!1}if(e.inputOutputs&&Array.isArray(e.inputOutputs))for(const t of e.inputOutputs)t.initialized={};if(e.autoCreated){let e=this.componentManager.get(t);if(!e)return;Array.isArray(e)||(e=[e]),this.componentManager.unregisterComponent(t);for(const t of e)t.relationsOnDestroy?.()}}}openScope(t,e,n){const o=new b(this.relationsManager,e,n,this.loader,this.logger,!0);o.scopeId=t,o.parent=this;for(const i in this.relations){const s=this.relations[i];if(s.scope===t&&s.componentType){const t=new s.componentType(n);e.registerComponent(i,t),o.updateRelations(i)}}return o}destroyScope(){for(const t in this.relations)this.relations[t].scope===this.scopeId&&this.destroyComponent(t)}transferOutputsData(t,e=!1,n=!1){var o;const i={},r=this.relations[t];let a=this.componentManager.get(t);if(!r||!a)return this.logger?.warn("RelationsProcessor: No relations for {{@id}}",{id:t}),e?i:null;if(r?.inputOutputs){Array.isArray(a)||(a=[a]);for(const t of a)for(const e of r.inputOutputs){let r=this.componentManager.get(e.inputComponentId);if(r&&!Array.isArray(r)&&(r=[r]),r&&Array.isArray(r)){i[o=e.inputComponentId]??(i[o]=new u(r));for(const o of r){if(!t||!o)continue;const r=o[e.inputName],a=t[e.outputName];!n&&(0,s.tR)(r,a)||(i[e.inputComponentId].changes[e.inputName]={previousValue:r,currentValue:a,firstChange:!1,isFirstChange:()=>!1})}}else this.logger?.warn("RelationsProcessor: Missing input components {{@data}}",{data:e})}if(!e)for(const t in i)i[t].applyChanges()}return e?i:null}transferInputsData(t,e=!1,n){const o=this.backwardRelations[t],i=this.componentManager.get(t);if(!o)return this.logger?.warn("RelationsProcessor: No backward relations for {{@id}}",{id:t}),e?new u([]):null;if(!i)return this.logger?.warn("RelationsProcessor: Missing input components for {{@id}}",{id:t}),e?new u([]):null;if(Array.isArray(i))return this.logger?.error("RelationsProcessor: Only one component must be available for id {{@id}}",{id:t}),e?new u([]):null;const r=new u([i]);for(const e of o){if(n&&n.indexOf(e.inputName)<0)continue;const o=this.componentManager.get(e.outputComponentId);if(Array.isArray(o)){this.logger?.error("RelationsProcessor: Only one output component must be available for id {{@id}}",{id:t});continue}if(!o||!i)continue;const a=i[e.inputName],c=o[e.outputName];(0,s.tR)(a,c)||(r.changes[e.inputName]={previousValue:a,currentValue:c,firstChange:!1,isFirstChange:()=>!1})}return e||r.applyChanges(),e?r:null}initializeRelations(){var t=this;return y((function*(){if(yield t.destroyRelations(),t.setInitializePromise(),t.logger?.debug("RelationsProcessor: initializing relations"),t.relationsManager.relations.length){for(const e of t.relationsManager.relations){const n=[];if(e.outputs){for(const o of e.outputs)if(o.inputs)for(const i of o.inputs){const s={inputComponentId:i.id,outputComponentId:e.id,inputName:i.inputName,outputName:o.outputName,initialized:{}};n.push(s),t.backwardRelations[i.id]||(t.backwardRelations[i.id]=[]),t.backwardRelations[i.id].push(s)}yield t.initComponent(e,n)}}t.relationsChangeDetector.initialize(t.relations),t.resolveInitialized()}else t.resolveInitialized()}))()}initBackwardRelation(t){let e=this.componentManager.get(t.outputComponentId),n=this.componentManager.get(t.inputComponentId);if((0,s.fp)(e)||Array.isArray(e)&&!e.length||(0,s.fp)(n)||Array.isArray(n)&&!n.length)this.logger?.warn("RelationsProcessor: missing metadata for backward relations {{@data}}",{data:t});else{Array.isArray(n)||(n=[n]),Array.isArray(e)||(e=[e]);for(const o of n)for(const n of e){const e=`${o.ɵɵRelationsComponentId}-${n.ɵɵRelationsComponentId}`;(0,l.Vr)(n,t.outputName)||t.initialized[e]||!(0,l.nP)(n,t.outputName)||(t.initialized[e]=this.transferData(n,o,t,!0))}}}transferData(t,e,n,o){if(!t||!e)return!1;const i=e[n.inputName],r=t[n.outputName],a=new u([e]);return!(0,s.tR)(i,r)&&(a.changes[n.inputName]={previousValue:i,currentValue:r,firstChange:o,isFirstChange:()=>o},a.applyChanges(),!0)}initComponent(t,e){var n=this;return y((function*(){if(n.componentManager.get(t.id))return n.initRelation(!1,t,e,null,null),void n.updateRelations(t.id);const o=yield n.loader.loadItem(t);if(!o)return n.initRelation(!1,t,e,null,null),void n.logger?.warn("RelationsProcessor: Unable to load relations component! {{@meta}}",{meta:{package:t.package,name:t.name}});if(!t.scope){const e=new o.data(n.injector);n.componentManager.registerComponent(t.id,e)}n.initRelation(!0,t,e,t.scope??null,t.scope?o.data:null),n.updateRelations(t.id)}))()}initRelation(t,e,n,o,i){this.relations[e.id]={autoCreated:t,inputOutputs:n,metadataOptions:e.relationsOptions,componentType:i,scope:o}}initOptions(t,e){if(Array.isArray(t))for(const n of t)n.ɵɵRelationsOptionsInitialized||(n.relationsOptions=e.metadataOptions,n.ɵɵRelationsOptionsInitialized=!0);else t.ɵɵRelationsOptionsInitialized||(t.relationsOptions=e.metadataOptions,t.ɵɵRelationsOptionsInitialized=!0)}setInitializePromise(){this.ɵInitialized=new Promise((t=>this.resolveInitialized=t))}destroyRelations(){var t=this;return y((function*(){yield t.ɵInitialized,Object.keys(t.relations).forEach((e=>t.destroyComponent(e))),t.relations={},t.backwardRelations={}}))()}}b.ɵfac=function(t){return new(t||b)(o.LF(m.N),o.LF(f.s),o.LF(g.z),o.LF(c.TZ),o.LF(i.bZ,8),o.LF(c.fX,8))},b.ɵprov=h.Yz({token:b,factory:b.ɵfac})},27834:(t,e,n)=>{"use strict";n.d(e,{R:()=>i});var o=n(73943);function i(t,e){return function(n){return n[e]=t(),n}}(0,o.yJ)((t=>{(0,o.fp)(t.ngDesignerMetadata)&&(t.ngDesignerMetadata=!0)}))},93584:(t,e,n)=>{"use strict";n.d(e,{L:()=>i});var o=n(73943);const i=(t,e)=>{const n=t;return e?.debug("defaultExportExtractor: trying to extract default dynamic data"),(0,o.EN)(n.default)?{data:n.default}:null}},47628:(t,e,n)=>{"use strict";n.d(e,{k:()=>i});var o=n(73943);const i=(t,e)=>{const n=t,i=n.extensions;return e?.debug("extensionsExportsExtractor: trying to extract dynamic item extensions"),i&&(0,o.wV)(i)&&(i.extensions||i.childExtensions)?{extensions:i.extensions,childExtensions:i.childExtensions}:n.childExtensions||n.extensions?{extensions:n.extensions,childExtensions:n.childExtensions}:null}},19630:(t,e,n)=>{"use strict";n.d(e,{BG:()=>s,H$:()=>r,K:()=>i});var o=n(30891);const i=new o.O("METADATA_STATE_MANAGER"),s=new o.O("PACKAGE_SOURCES"),r=new o.O("SCOPE_ID")},68339:(t,e,n)=>{"use strict";n.d(e,{LK:()=>a,ML:()=>c,XW:()=>r,mv:()=>s});var o=n(3179),i=n(19630);function s(t,e,n,o,i=!1){t[e]={currentValue:n,previousValue:o,firstChange:i,isFirstChange:()=>i}}function r(t){return{provide:i.BG,useValue:{packages:[t],packagesChange:o.C,refresh(){}},multi:!0}}function a(t){try{return JSON.parse(t)}catch{return null}}function c(t){return"function"==typeof t?.destroy}},48015:(t,e,n)=>{"use strict";function o(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}n.d(e,{S:()=>i});class i{constructor(t,e,n,o,i){this.providers=t,this.extractors=e,this.validatorFn=n,this.logger=o,this.noCache=i,this.cachedDynamicItems={},Array.isArray(this.providers)||(this.logger.error("DynamicItemLoader: missing providers!"),this.providers=[]),Array.isArray(this.extractors)||(this.logger.error("DynamicItemLoader: missing extractors!"),this.extractors=[])}loadItem(t){var e,n=this;return(e=function*(){let e=null;const o=`${t.package}-${t.name}`;if(o in n.cachedDynamicItems&&!n.noCache)return n.logger.verbose("DynamicItemLoader: Loading from cache {{@source}}",{source:{name:t.name,package:t.package}}),n.cachedDynamicItems[o];for(const o of n.providers){const n=o.tryToGet(t);if(e=n?yield n:null,e)break}if(!e)return n.logger.debug("DynamicItemLoader: Failed to get dynamic module {{@source}}",{source:{name:t.name,package:t.package}}),null;for(const i of n.extractors){const s=yield i.tryToExtract(e);if(s)return n.cachedDynamicItems[o]=n.validatorFn(s)?s:null,n.cachedDynamicItems[o]||n.logger.warn("DynamicItemLoader: Found dynamic item {{@source}} is not of requested type",{source:{name:t.name,package:t.package}}),n.cachedDynamicItems[o]}return n.logger.debug("DynamicItemLoader: Failed to extract dynamic item {{@source}}",{source:{name:t.name,package:t.package}}),n.cachedDynamicItems[o]=null,null},function(){var t=this,n=arguments;return new Promise((function(i,s){var r=e.apply(t,n);function a(t){o(r,i,s,a,c,"next",t)}function c(t){o(r,i,s,a,c,"throw",t)}a(void 0)}))})()}}},42383:(t,e,n)=>{"use strict";n.d(e,{$:()=>s});var o=n(73943);function i(t,e,n,o,i,s,r){try{var a=t[s](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class s{constructor(t,e){this.extractorFunctions=t,this.logger=e,Array.isArray(this.extractorFunctions)||(this.logger.error("DynamicModuleDataExtractor: missing extractor functions!"),this.extractorFunctions=[])}tryToExtract(t){var e,n=this;return(e=function*(){const e={};for(const i of n.extractorFunctions)(0,o.l7)(!0,e,yield i(t,n.logger));return(0,o.Qr)(e)?null:e},function(){var t=this,n=arguments;return new Promise((function(o,s){var r=e.apply(t,n);function a(t){i(r,o,s,a,c,"next",t)}function c(t){i(r,o,s,a,c,"throw",t)}a(void 0)}))})()}}},35891:(t,e,n)=>{"use strict";n.d(e,{z:()=>c});var o=n(40958),i=n(15045),s=n(32779),r=n(85086),a=n(85207);class c{get undo(){return this.undoSubject.asObservable()}get redo(){return this.redoSubject.asObservable()}get save(){return this.saveSubject.asObservable()}get copy(){return this.copySubject.asObservable()}get cut(){return this.cutSubject.asObservable()}get paste(){return this.pasteSubject.asObservable()}get delete(){return this.deleteSubject.asObservable()}constructor(t){this.hotkeys=t,this.undoSubject=new i.x,this.redoSubject=new i.x,this.saveSubject=new i.x,this.copySubject=new i.x,this.pasteSubject=new i.x,this.cutSubject=new i.x,this.deleteSubject=new i.x}destroy(){this.hotkeys.destroy()}init(){this.hotkeys.hotkeys.add(new o.q("ctrl+s",(()=>(this.saveSubject.next(),!1)),["INPUT","TEXTAREA"],"Emits save event")),this.hotkeys.hotkeys.add(new o.q("ctrl+z",(()=>(this.undoSubject.next(),!1)),["INPUT","TEXTAREA"],"Emits undo event")),this.hotkeys.hotkeys.add(new o.q("ctrl+y",(()=>(this.redoSubject.next(),!1)),["INPUT","TEXTAREA"],"Emits redo event")),this.hotkeys.hotkeys.add(new o.q("del",(()=>(this.deleteSubject.next(),!1)),[],"Emits delete event")),this.hotkeys.hotkeys.add(new o.q("ctrl+c",(()=>(this.copySubject.next(),!1)),[],"Emits copy event")),this.hotkeys.hotkeys.add(new o.q("ctrl+v",(()=>(this.pasteSubject.next(),!1)),[],"Emits paste event")),this.hotkeys.hotkeys.add(new o.q("ctrl+x",(()=>(this.cutSubject.next(),!1)),[],"Emits cut event"))}}c.ɵfac=function(t){return new(t||c)(s.LF(a.H))},c.ɵprov=r.Yz({token:c,factory:c.ɵfac})},78344:(t,e,n)=>{"use strict";n.d(e,{Y:()=>c});var o=n(73943),i=n(15045),s=n(19630),r=n(32779),a=n(85086);class c{get canUndo(){return!(0,o.fp)(this.activeIndex)&&this.activeIndex>0}get canRedo(){return!(0,o.fp)(this.activeIndex)&&this.activeIndex+1<this.states.length}get saved(){return this.activeIndex===this.saveIndex}get pop(){return this.popSubject.asObservable()}get historyChange(){return this.historyChangeSubject.asObservable()}get state(){return(0,o.fp)(this.activeIndex)?null:JSON.parse(this.states[this.activeIndex])}constructor(t){this.metadataState=t,this.activeIndex=null,this.saveIndex=null,this.states=[],this.enabled=!0,this.popSubject=new i.x,this.historyChangeSubject=new i.x}undo(){this.canUndo&&!(0,o.fp)(this.activeIndex)&&(this.activeIndex--,this.popSubject.next(JSON.parse(this.states[this.activeIndex])))}redo(){this.canRedo&&!(0,o.fp)(this.activeIndex)&&(this.activeIndex++,this.popSubject.next(JSON.parse(this.states[this.activeIndex])))}getNewState(){if(!this.enabled)return;this.states.length>=200&&this.states.shift(),(0,o.EN)(this.activeIndex)&&this.activeIndex+1<this.states.length&&this.states.splice(this.activeIndex+1,this.states.length-(this.activeIndex+1));const t=this.metadataState.getMetadata();t&&(this.states.push(JSON.stringify(t)),this.activeIndex=this.states.length-1,this.historyChangeSubject.next())}save(){this.saveIndex=this.activeIndex}setInitialState(t){this.states.push(JSON.stringify(t)),this.activeIndex=this.states.length-1,this.save()}clean(){this.activeIndex=null,this.saveIndex=null,this.states=[]}enable(){this.enabled=!0}disable(){this.enabled=!1}}c.ɵfac=function(t){return new(t||c)(r.LF(s.K))},c.ɵprov=a.Yz({token:c,factory:c.ɵfac})}}]);
//# sourceMappingURL=4195.chunk.0e0fea3c495bcfa2d6d6.js.map