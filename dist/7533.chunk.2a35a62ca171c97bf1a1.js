"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[7533],{18978:(t,e,n)=>{n.r(e),n.d(e,{RestRelationsEditorMetadata:()=>ot});var o=n(27052),a=n(68624),i=n(93551),r=n(88735),s=n(60901),l=n(85478),c=n(71791),u=n(57466),p=n(30621),m=n(9249);class d{constructor(t){this.type="PATH",this.configurable=!1,this.value="",this.name=null,u.Rl.bind(this)(t)}}var f=n(80827),g=n(41853),v=n(79440),T=n(13691),h=n(73379),_=n(82568),O=n(15686),E=n(73301),b=n(66794),P=n(21651),C=n(24881),R=n(17790),q=n(49280),Z=n(70983),x=n(77470),S=n(86170),y=n(66163),L=n(80943);function Y(t,e){1&t&&(f.Tg(0,"option",13),g._(1,"BODY"),f.qZ())}class D{constructor(t,e){this.data=t,this.form=e.build(new d(t.parameter)),this.form.valueChanges.subscribe((e=>(0,u.l7)(t.parameter,e)))}}D.ɵfac=function(t){return new(t||D)(v.Y(m.m),v.Y(c.p))},D.ɵcmp=T.Xp({type:D,selectors:[["configure-rest-parameter"]],standalone:!0,features:[h._([c.p]),_.j],decls:29,vars:4,consts:[[3,"formGroup"],[1,"form-group","margin-bottom-extra-small"],[1,"control-label","text-uppercase"],["formControlName","type",1,"form-control"],["value","BODY",4,"ngIf"],["value","PATH"],["value","QUERY"],["type","text","formControlName","value",1,"form-control"],["type","text","formControlName","name",1,"form-control"],["type","checkbox","formControlName","configurable",1,"form-control"],[1,"flex-row","flex-end"],[1,"btn","btn-info","margin-right-extra-small",3,"mat-dialog-close"],[1,"btn","btn-primary",3,"mat-dialog-close"],["value","BODY"]],template:function(t,e){1&t&&(f.Tg(0,"div",0)(1,"div",1)(2,"label",2),g._(3,"type"),f.qZ(),f.Tg(4,"select",3),O.Y(5,Y,2,0,"option",4),f.Tg(6,"option",5),g._(7,"PATH"),f.qZ(),f.Tg(8,"option",6),g._(9,"QUERY"),f.qZ()()(),f.Tg(10,"div",1)(11,"label",2),g._(12,"value"),f.qZ(),f._U(13,"input",7),f.qZ(),f.Tg(14,"div",1)(15,"label",2),g._(16,"name"),f.qZ(),f._U(17,"input",8),f.qZ(),f.Tg(18,"div",1)(19,"label",2),g._(20,"configurable"),f.qZ(),f._U(21,"input",9),f.qZ()(),f.Tg(22,"div",10)(23,"button",11)(24,"span"),g._(25,"cancel"),f.qZ()(),f.Tg(26,"button",12)(27,"span"),g._(28,"ok"),f.qZ()()()),2&t&&(E.Q("formGroup",e.form),b.x(5),E.Q("ngIf",!e.data.hasBody),b.x(18),E.Q("mat-dialog-close",null),b.x(3),E.Q("mat-dialog-close",!0))},dependencies:[o.e,P.O,a.U,C.YN,R.Kr,q.Fj,Z.W,C.EJ,x.JJ,x.JL,S.s,y.u,p.I,L.ZT],encapsulation:2,changeDetection:0});class N{constructor(t){this.url="",this.method="GET",this.runImmediately=!0,u.Rl.bind(this)(t)}}var U=n(6845),A=n(84773),w=n(72891),Q=n(43870),I=n(6427),k=n(4477),H=n(68961),z=n(4905),B=n(47098),$=n(47826),J=n(12311),j=n(30084);function G(t,e,n,o,a,i,r){try{var s=t[i](r),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(o,a)}function K(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){G(i,o,a,r,s,"next",t)}function s(t){G(i,o,a,r,s,"throw",t)}r(void 0)}))}}function F(t,e){if(1&t&&f._U(0,"relation-node-input",29),2&t){const t=U.o(2).$implicit,e=U.o();E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}function V(t,e){if(1&t){const t=A.E();f.Tg(0,"div",23),O.Y(1,F,1,4,"relation-node-input",24),f.Tg(2,"div",25)(3,"div"),g._(4),f.qZ(),f.Tg(5,"button",26),w.N("click",(function(e){Q.CH(t);const n=U.o().$implicit,o=U.o();return e.preventDefault(),e.stopPropagation(),Q.Kt(o.configureRestParameter(n))})),f._U(6,"span",27),f.qZ(),f.Tg(7,"button",15),w.N("click",(function(e){Q.CH(t);const n=U.o().$implicit,o=U.o();return e.preventDefault(),e.stopPropagation(),Q.Kt(o.removeParam(n))})),f._U(8,"span",28),f.qZ()()()}if(2&t){const t=U.o().$implicit;b.x(1),E.Q("ngIf",t.configurable),b.x(3),I.hi("BODY: ",t.name,"")}}function M(t,e){if(1&t&&f._U(0,"relation-node-input",29),2&t){const t=U.o(2).$implicit,e=U.o();E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}function X(t,e){if(1&t){const t=A.E();f.Tg(0,"div",23),O.Y(1,M,1,4,"relation-node-input",24),f.Tg(2,"div",25)(3,"div"),g._(4),f.qZ(),f.Tg(5,"button",26),w.N("click",(function(){Q.CH(t);const e=U.o().$implicit,n=U.o();return Q.Kt(n.configureRestParameter(e))})),f._U(6,"span",27),f.qZ(),f.Tg(7,"button",15),w.N("click",(function(e){Q.CH(t);const n=U.o().$implicit,o=U.o();return e.preventDefault(),e.stopPropagation(),Q.Kt(o.removeParam(n))})),f._U(8,"span",28),f.qZ()()()}if(2&t){const t=U.o().$implicit;b.x(1),E.Q("ngIf",t.configurable),b.x(3),I.hi("PATH: ",t.name,"")}}function W(t,e){if(1&t&&f._U(0,"relation-node-input",29),2&t){const t=U.o(2).$implicit,e=U.o();E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}function tt(t,e){if(1&t){const t=A.E();f.Tg(0,"div",23),O.Y(1,W,1,4,"relation-node-input",24),f.Tg(2,"div",25)(3,"div"),g._(4),f.qZ(),f.Tg(5,"button",26),w.N("click",(function(){Q.CH(t);const e=U.o().$implicit,n=U.o();return Q.Kt(n.configureRestParameter(e))})),f._U(6,"span",27),f.qZ(),f.Tg(7,"button",15),w.N("click",(function(e){Q.CH(t);const n=U.o().$implicit,o=U.o();return e.preventDefault(),e.stopPropagation(),Q.Kt(o.removeParam(n))})),f._U(8,"span",28),f.qZ()()()}if(2&t){const t=U.o().$implicit;b.x(1),E.Q("ngIf",t.configurable),b.x(3),I.hi("QUERY: ",t.name,"")}}function et(t,e){if(1&t&&(k.yn(0)(1,21),O.Y(2,V,9,2,"div",22),O.Y(3,X,9,2,"div",22),O.Y(4,tt,9,2,"div",22),k.BQ()()),2&t){const t=e.$implicit;b.x(1),E.Q("ngSwitch",t.type),b.x(1),E.Q("ngSwitchCase","BODY"),b.x(1),E.Q("ngSwitchCase","PATH"),b.x(1),E.Q("ngSwitchCase","QUERY")}}class nt extends i.M{constructor(t,e,n,o){super(t,e),this.dialog=n,this.form=o.build(new N(null)),this.form.valueChanges.subscribe((t=>{this.metadata?.relationsOptions&&(0,u.l7)(this.metadata.relationsOptions,t)}))}get params(){var t,e;return this.metadata?((t=this.metadata).relationsOptions??(t.relationsOptions={params:[],url:null,method:null,runImmediately:!0}),(e=this.metadata.relationsOptions).params??(e.params=[])):[]}addParam(){var t=this;return K((function*(){const e={configurable:!1,name:null,type:"PATH",value:null};(yield t.configureRestParameter(e))&&t.params.push(e)}))()}removeParam(t){const e=this.params.indexOf(t);e>=0&&this.params.splice(e,1)}configureRestParameter(t){var e=this;return K((function*(){const n=JSON.parse(JSON.stringify(t)),o=yield e.dialog.open(D,{title:"configure rest parameter",width:"60vw",data:{parameter:t,hasBody:"BODY"!==t.type&&!!e.params.find((t=>"BODY"===t.type))}}).afterClosed().toPromise();return o||(0,u.l7)(t,n),o??!1}))()}metadataSet(){this.metadata?.relationsOptions&&this.form.patchValue(this.metadata.relationsOptions)}}nt.ɵfac=function(t){return new(t||nt)(v.Y(H.s),v.Y(z.SB),v.Y($.J),v.Y(c.p))},nt.ɵcmp=T.Xp({type:nt,selectors:[["rest-node"]],standalone:!0,features:[h._([c.p]),B.q,_.j],decls:38,vars:10,consts:[["name","rest",3,"parent","destroySubject"],[1,"node-content",3,"formGroup"],[1,"form-group","margin-bottom-extra-small"],[1,"control-label","text-uppercase"],["type","text","formControlName","url",1,"form-control"],["formControlName","method",1,"form-control"],["value","GET"],["value","POST"],["value","PUT"],["value","PATCH"],["value","DELETE"],["type","checkbox","formControlName","runImmediately",1,"form-control"],[1,"inputs-outputs"],[1,"inputs"],[4,"ngFor","ngForOf"],[1,"btn-icon",3,"click"],[1,"fas","fa-plus"],[1,"outputs"],[1,"output"],["name","success",3,"parentCoordiantes","zoomLevel","parent"],["name","error",3,"parentCoordiantes","zoomLevel","parent"],[3,"ngSwitch"],["class","input",4,"ngSwitchCase"],[1,"input"],[3,"parentCoordiantes","zoomLevel","name","parent",4,"ngIf"],[1,"flex-row"],[1,"btn-icon","margin-horizontal-extra-small",3,"click"],[1,"fas","fa-cog"],[1,"fas","fa-times"],[3,"parentCoordiantes","zoomLevel","name","parent"]],template:function(t,e){1&t&&(f._U(0,"relations-node-header",0),f.Tg(1,"div",1)(2,"div",2)(3,"label",3),g._(4,"url"),f.qZ(),f._U(5,"input",4),f.qZ(),f.Tg(6,"div",2)(7,"label",3),g._(8,"method"),f.qZ(),f.Tg(9,"select",5)(10,"option",6),g._(11,"GET"),f.qZ(),f.Tg(12,"option",7),g._(13,"POST"),f.qZ(),f.Tg(14,"option",8),g._(15,"PUT"),f.qZ(),f.Tg(16,"option",9),g._(17,"PATCH"),f.qZ(),f.Tg(18,"option",10),g._(19,"DELETE"),f.qZ()()(),f.Tg(20,"div",2)(21,"label",3),g._(22,"run immediately"),f.qZ(),f._U(23,"input",11),f.qZ(),f.Tg(24,"div",12)(25,"div",13),O.Y(26,et,5,4,"ng-container",14),f.Tg(27,"button",15),w.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.addParam()})),f._U(28,"span",16),f.qZ()(),f.Tg(29,"div",17)(30,"div",18)(31,"div"),g._(32,"success"),f.qZ(),f._U(33,"relation-node-output",19),f.qZ(),f.Tg(34,"div",18)(35,"div"),g._(36,"error"),f.qZ(),f._U(37,"relation-node-output",20),f.qZ()()()()),2&t&&(E.Q("parent",e)("destroySubject",e.destroySubject),b.x(1),E.Q("formGroup",e.form),b.x(25),E.Q("ngForOf",e.params),b.x(7),E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e),b.x(4),E.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e))},dependencies:[o.e,J.s,P.O,j.RF,j.n9,a.U,C.YN,R.Kr,q.Fj,Z.W,C.EJ,x.JJ,x.JL,S.s,y.u,r.e,s.P,l.n],encapsulation:2,changeDetection:0});class ot{constructor(){this.metaInfo={name:"Rest",description:"Restfull requests",group:"Http"},this.nodeDefinition=nt,Object.freeze(this)}}},91861:(t,e,n)=>{n.d(e,{Bj:()=>r,DZ:()=>a,GP:()=>i,dK:()=>u,fI:()=>c,n7:()=>l,nR:()=>p,yh:()=>s});var o=n(40296);const a=new o.O("RELATIONS_MODULE_TYPES_DATA_EXTRACTORS"),i=new o.O("RELATIONS_MODULE_TYPES_PROVIDERS"),r=new o.O("RELATIONS_MODULE_TYPES_LOADER"),s=new o.O("RELATIONS_NODES_DATA_EXTRACTORS"),l=new o.O("RELATIONS_NODES_PROVIDERS"),c=new o.O("RELATIONS_NODES_LOADER"),u=new o.O("REFRESH_PALETTE_OBSERVABLES"),p=new o.O("RELATIONS_HISTORY_MANAGER")},44677:(t,e,n)=>{n.d(e,{L:()=>a});var o=n(43939);const a=(t,e)=>{const n=t;return e?.debug("defaultExportExtractor: trying to extract default dynamic data"),(0,o.EN)(n.default)?{data:n.default}:null}},14389:(t,e,n)=>{n.d(e,{X:()=>r,m:()=>i});var o=n(88152),a=n(13457);function i(t,e,n,o,a=!1){t[e]={currentValue:n,previousValue:o,firstChange:a,isFirstChange:()=>a}}function r(t){return{provide:a.B,useValue:{packages:[t],packagesChange:o.C,refresh(){}},multi:!0}}}}]);
//# sourceMappingURL=7533.chunk.2a35a62ca171c97bf1a1.js.map