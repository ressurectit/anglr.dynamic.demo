(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[9728],{79728:(t,e,a)=>{"use strict";a.r(e),a.d(e,{RelationsWithLayoutEditorModule:()=>vt});var n=a(97881),o=a(54004),r=a(58853),i=a(14829),s=a(78561),l=a(59098),u=a(19555),c=a(63086),d=a(41842),g=a(83762),p=a(35516),m=a(42842),y=a(35891),h=a(21455),v=a(5290),_=a(78344),f=a(37185),b=a(42411),w=a(61487),k=a(12919),x=a(73943),M=a(75637),C=a(27103),N=a(35981),D=a(80033),L=a(85410),Y=a(80354),T=a(88809),U=a(13315),O=a(43335),P=a(57284),R=a(10065),F=a(38561),q=a(18910),Q=a(44275);let Z=class{get emptyMetadata(){return{id:`stackPanel-${(0,x.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}constructor(t,e){this._store=t,this.history=e,this._metadata=null}_getMetadata(t){return{layout:t}}_loadDemo(){this._metadata=M.F.demoLayoutWithRelations}};Z.ɵfac=function(t){return new(t||Z)(D.Y(C.U),D.Y(g.dB))},Z.ɵcmp=L.Xp({type:Z,selectors:[["layout-editor-view"]],features:[Y._([y.z,{provide:d.qO,useFactory:t=>new h.I((e=>t.getData(e)?.layout)),deps:[C.U]},(0,p._T)(),(0,m.rj)(),(0,k.m_)(),(0,f.vQ)(),(0,b.gJ)(),(0,w.hd)(),{provide:v.L,useClass:N.y}])],decls:9,vars:4,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/layout",3,"store","getMetadataCallback","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(T.Tg(0,"div",0)(1,"button",1)(2,"span"),U._(3,"go back"),T.qZ()(),T.Tg(4,"load-save-new",2),O.N("metadataChange",(function(t){let a;return e._metadata=null!==(a=null==t?null:t.layout)&&void 0!==a?a:e.emptyMetadata})),T.qZ(),T.Tg(5,"button",3),O.N("click",(function(){return e._loadDemo()})),T.Tg(6,"span"),U._(7,"demo"),T.qZ()()(),T._U(8,"layout-editor",4)),2&t&&(P.x(4),R.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history),P.x(4),R.Q("metadata",e._metadata))},dependencies:[F.z,q.Z,Q.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([x.ru,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",Object)],Z.prototype,"_getMetadata",null),Z=(0,n.gn)([(0,c.N)({path:"layout"}),(0,c.N)({path:"layout/:id"}),(0,n.w6)("design:paramtypes",[C.U,_.Y])],Z);var W=a(1737),z=a(34326),E=a(58418),A=a(54619),B=a(65947),I=a(83554),j=a(52622),G=a(46430),J=a(66898),$=a(40551),S=a(4539),X=a(48074),V=a(24900),K=a(72620),H=a(27669),tt=a(36391),et=a(27398);function at(t,e){if(1&t&&T._U(0,"ng-option",7),2&t){const t=e.$implicit;R.Q("value",t)("text",t)}}function nt(t,e){1&t&&j.Gk(0)}const ot=t=>["/relationsWithLayoutEditor/layout",t],rt=t=>["/relationsWithLayoutEditor/relations",t];let it=class{constructor(t,e,a,n){this._store=t,this._router=e,this._relationsManager=a,this._route=n,this._available=new E.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStored(),this._route.params.subscribe((({id:t})=>{if(t){this._available.setValue(t);const e=this._store.getData(t);this._metadata=e?.layout,this._relationsManager.setRelations(e.relations??[])}else this._relationsManager.setRelations([]);this._available.valueChanges.subscribe((t=>{this._router.navigate(["/relationsWithLayoutEditor/preview",t],{skipLocationChange:!1,replaceUrl:!0})}))}))}ngOnDestroy(){}};it.ɵfac=function(t){return new(t||it)(D.Y(C.U),D.Y(W.F0),D.Y(A.N),D.Y(z.gz))},it.ɵcmp=L.Xp({type:it,selectors:[["layout-preview-view"]],features:[Y._([{provide:d.qO,useFactory:t=>new h.I((e=>t.getData(e)?.layout)),deps:[C.U]},(0,B.AL)(),(0,m.mi)(),(0,k.Ur)(),(0,f.WH)(),(0,b.qN)(),(0,w.ag)(),(0,I.cg)()])],decls:10,vars:9,consts:[[1,"flex-row"],[1,"margin-horizontal-small",3,"routerLink"],[1,"flex-1",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll"],[4,"layoutComponentRenderer"],[3,"value","text"]],template:function(t,e){1&t&&(T.Tg(0,"div",0)(1,"a",1),U._(2,"layout"),T.qZ(),T.Tg(3,"a",1),U._(4,"relations"),T.qZ(),T.Tg(5,"ng-select",2),G.Y(6,at,1,2,"ng-option",3),T.qZ()(),T.Tg(7,"div",4)(8,"div",5),G.Y(9,nt,1,0,"ng-container",6),T.qZ()()),2&t&&(P.x(1),R.Q("routerLink",J.VK(5,ot,e._available.value)),P.x(2),R.Q("routerLink",J.VK(7,rt,e._available.value)),P.x(2),R.Q("formControl",e._available),P.x(1),R.Q("ngForOf",e._availableNames),P.x(3),R.Q("layoutComponentRenderer",e._metadata))},dependencies:[S.sg,X.JJ,V.o,$.r,K.x,H.w,tt.v,et.i],encapsulation:2,changeDetection:0}),it=(0,n.gn)([(0,c.N)({path:"preview"}),(0,c.N)({path:"preview/:id"}),(0,n.w6)("design:paramtypes",[C.U,W.F0,A.N,z.gz])],it);var st=a(66201),lt=a(76498),ut=a(93463),ct=a(20560),dt=a(33108);let gt=class{get emptyMetadata(){return[]}constructor(t,e,a){this._store=t,this.history=e,this._layoutManager=a,this._metadata=[]}_getMetadata(t){return{relations:t}}_loadDemo(){this._metadata=M.F.relationsWithLayoutDemo}setMetadata(t){this._metadata=t?.relations??this.emptyMetadata,this._layoutManager.setLayout(t?.layout)}};gt.ɵfac=function(t){return new(t||gt)(D.Y(C.U),D.Y(st.nR),D.Y(lt.n))},gt.ɵcmp=L.Xp({type:gt,selectors:[["relations-editor-view"]],features:[Y._([y.z,{provide:ut.te,useFactory:t=>new h.I((e=>t.getData(e)?.relations)),deps:[C.U]},(0,B.$R)(),(0,m.qm)(),(0,k.Od)(),(0,w.vu)(),(0,I.xb)(),(0,b.Rn)(),(0,f.El)(),{provide:v.L,useClass:ct.d}])],decls:9,vars:5,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/relations",3,"store","getMetadataCallback","layoutControls","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(T.Tg(0,"div",0)(1,"button",1)(2,"span"),U._(3,"go back"),T.qZ()(),T.Tg(4,"load-save-new",2),O.N("metadataChange",(function(t){return e.setMetadata(t)})),T.qZ(),T.Tg(5,"button",3),O.N("click",(function(){return e._loadDemo()})),T.Tg(6,"span"),U._(7,"demo"),T.qZ()()(),T._U(8,"relations-editor",4)),2&t&&(P.x(4),R.Q("store",e._store)("getMetadataCallback",e._getMetadata)("layoutControls",!1)("history",e.history),P.x(4),R.Q("metadata",e._metadata))},dependencies:[F.z,dt.Y,Q.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([x.ru,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Array]),(0,n.w6)("design:returntype",Object)],gt.prototype,"_getMetadata",null),gt=(0,n.gn)([(0,c.N)({path:"relations"}),(0,c.N)({path:"relations/:id"}),(0,n.w6)("design:paramtypes",[C.U,_.Y,lt.n])],gt);const pt=[it,Z,gt];var mt=a(79141),yt=a(96220),ht=a(85086);let vt=class{};vt.ɵfac=function(t){return new(t||vt)},vt.ɵmod=L.oA({type:vt}),vt.ɵinj=ht.cJ({providers:[(0,yt.Y)("LAYOUT_RELATIONS_DATA")],imports:[r.e,i.U,o.Bz,l.A,u.W,mt.Qw]}),vt=(0,n.gn)([(0,s.P)(pt)],vt)},19555:(t,e,a)=>{"use strict";a.d(e,{W:()=>l});var n=a(83775),o=a(49198),r=a(65947),i=a(85410),s=a(85086);class l{static withProviders(){return{ngModule:l,providers:[(0,r.$R)()]}}static withStaticComponents(t){return{ngModule:l,providers:[(0,r.Sf)(t)]}}}l.ɵfac=function(t){return new(t||l)},l.ɵmod=i.oA({type:l}),l.ɵinj=s.cJ({imports:[n.c,o.Y]})},83554:(t,e,a)=>{"use strict";a.d(e,{cg:()=>_,xb:()=>v,Gc:()=>h});var n=a(68339),o=a(66201),r=a(93463),i=a(95127),s=a(32779),l=a(85086);function u(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}class c{constructor(t){this._logger=t}tryToGet(t){var e,n=this;return(e=function*(){try{return n._logger?.debug("RestDynamicModuleRelationsProvider: trying to get relations types for module {{@module}}",{module:{moduleName:t.package}}),"rest-components"===t.package?yield a.e(1556).then(a.bind(a,21556)):null}catch(e){n._logger?.debug("RestDynamicModuleRelationsProvider: module {{@module}} was not found, reason: "+e,{module:{moduleName:t.package}})}return null},function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(t){u(r,n,o,i,s,"next",t)}function s(t){u(r,n,o,i,s,"throw",t)}i(void 0)}))})()}}function d(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}c.ɵfac=function(t){return new(t||c)(s.LF(i.bZ,8))},c.ɵprov=l.Yz({token:c,factory:c.ɵfac});class g{constructor(t){this._logger=t}tryToGet(t){var e,n=this;return(e=function*(){if("rest-components"!==t.package)return null;try{return n._logger?.debug("RestDynamicModuleItemsProvider: trying to get item {{@item}}",{item:{name:t.name,package:t.package}}),yield a(2721)(`./${t.name}/type`)}catch(e){n._logger?.debug("RestDynamicModuleItemsProvider: item {{@item}} was not found, reason: "+e,{item:{name:t.name,package:t.package}})}return null},function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(t){d(r,n,o,i,s,"next",t)}function s(t){d(r,n,o,i,s,"throw",t)}i(void 0)}))})()}}g.ɵfac=function(t){return new(t||g)(s.LF(i.bZ,8))},g.ɵprov=l.Yz({token:g,factory:g.ɵfac});const p={provide:o.GP,useClass:c,multi:!0},m={provide:o.n7,useClass:g,multi:!0},y={provide:r.B6,useClass:g,multi:!0};function h(){return[p,m,(0,n.XW)("rest-components")]}function v(){return[...h()]}function _(){return[y]}},2721:(t,e,a)=>{var n={"./rest/type":[92215,2215]};function o(t){if(!a.o(n,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],o=e[0];return a.e(e[1]).then((()=>a(o)))}o.keys=()=>Object.keys(n),o.id=2721,t.exports=o},38561:(t,e,a)=>{"use strict";a.d(e,{z:()=>s});var n=a(80033),o=a(85410),r=a(43335),i=a(36621);class s{_location;constructor(t){this._location=t}goBack(t){t.preventDefault(),t.stopPropagation(),this._location.back()}static ɵfac=function(t){return new(t||s)(n.Y(i.Y))};static ɵdir=o.lG({type:s,selectors:[["","goBack",""]],hostBindings:function(t,e){1&t&&r.N("click",(function(t){return e.goBack(t)}))},standalone:!0})}}}]);
//# sourceMappingURL=9728.chunk.21d8305e757e96ac2d06.js.map