"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[1172],{11172:(t,e,n)=>{n.r(e),n.d(e,{SyncValuesRelationsEditorMetadata:()=>ot});var a=n(27052),o=n(48659),r=n(71791),i=n(25626),s=n(93551),l=n(52580),c=n(60901),u=n(85478),d=n(57466),p=n(43939),m=n(64297);class f{constructor(t){this.triggerSync=!1,this.idleTimeout=0,d.Rl.bind(this)(t)}}var g=n(70625),y=n(30621),v=n(9249),h=n(79440),b=n(77842),_=n(82568),O=n(80827),x=n(41853),N=n(66794),w=n(73301),C=n(49280),P=n(77470),T=n(27635),q=n(80943);class S{constructor(t){this.control=new g.NI,this.control.setValue(t)}}S.ɵfac=function(t){return new(t||S)(h.Y(v.m))},S.ɵcmp=b.Xp({type:S,selectors:[["configure-sync-property"]],standalone:!0,features:[_.j],decls:11,vars:3,consts:[[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["type","text",1,"dynamic-form-control",3,"formControl"],[1,"dynamic-flex-row","dynamic-flex-end"],["type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"mat-dialog-close"]],template:function(t,e){1&t&&(O.Tg(0,"div",0)(1,"label",1),x._(2,"name"),O.qZ(),O._U(3,"input",2),O.qZ(),O.Tg(4,"div",3)(5,"button",4)(6,"span"),x._(7,"cancel"),O.qZ()(),O.Tg(8,"button",5)(9,"span"),x._(10,"ok"),O.qZ()()()),2&t&&(N.x(3),w.Q("formControl",e.control),N.x(2),w.Q("mat-dialog-close",null),N.x(3),w.Q("mat-dialog-close",e.control.value))},dependencies:[o.U,C.Fj,P.JJ,T.oH,y.I,q.ZT],encapsulation:2,changeDetection:0});var V=n(84773),Z=n(4477),Q=n(72891),k=n(43870),F=n(6845),Y=n(6427),j=n(68961),z=n(4905),L=n(73379),U=n(47098),E=n(15686),I=n(47826),D=n(15750),J=n(67406),G=n(12311),B=n(21651),M=n(24881),A=n(17790),R=n(71696),H=n(86170),K=n(66163);function $(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}function X(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function i(t){$(r,a,o,i,s,"next",t)}function s(t){$(r,a,o,i,s,"throw",t)}i(void 0)}))}}function W(t,e){1&t&&(O.Tg(0,"div",2)(1,"label",3),x._(2,"idle timeout"),O.qZ(),O._U(3,"input",14),O.qZ())}function tt(t,e){if(1&t){const t=V.E();Z.yn(0),O.Tg(1,"div",15),O._U(2,"relation-node-input",16),O.Tg(3,"div"),x._(4),O.qZ(),O.Tg(5,"button",17),Q.N("click",(function(e){const n=k.CH(t).index,a=F.o();return e.preventDefault(),e.stopPropagation(),k.Kt(a.configureSyncProperty(n))})),O._U(6,"span",18),O.qZ(),O.Tg(7,"button",7),Q.N("click",(function(e){const n=k.CH(t).index,a=F.o();return e.preventDefault(),e.stopPropagation(),k.Kt(a.removeProperty(n))})),O._U(8,"span",19),O.qZ()(),Z.BQ()}if(2&t){const t=e.$implicit,n=F.o();N.x(2),w.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",t)("parent",n),N.x(2),Y.Oq(t)}}function et(t,e){if(1&t&&(O.Tg(0,"div",15),O._U(1,"relation-node-input",20),O.Tg(2,"div"),x._(3,"trigger"),O.qZ()()),2&t){const t=F.o();N.x(1),w.Q("parentCoordiantes",t.nodePosition)("zoomLevel",t.zoomLevel)("parent",t)}}function nt(t,e){if(1&t&&(Z.yn(0),O.Tg(1,"div",21)(2,"div"),x._(3),O.qZ(),O._U(4,"relation-node-output",16),O.qZ(),Z.BQ()),2&t){const t=e.$implicit,n=F.o();N.x(3),Y.Oq(t),N.x(1),w.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",t)("parent",n)}}class at extends s.M{constructor(t,e,n,a){super(t,e),this.dialog=n,this.form=a.build(new f(null)),this.form.valueChanges.subscribe((t=>{this.metadata?.relationsOptions&&((0,d.l7)(this.metadata.relationsOptions,t),this.history.getNewState())}))}addProperty(){var t=this;return X((function*(){yield t.configureSyncProperty(t.metadata?.relationsOptions?.syncProperties?.length??0),t.changeDetector.detectChanges()}))()}removeProperty(t){this.metadata?.relationsOptions?.syncProperties&&(this.metadata.relationsOptions.syncProperties.splice(t,1),this.history.getNewState())}configureSyncProperty(t){var e=this;return X((function*(){var n;const a=yield(0,m.n)(e.dialog.open(S,{title:"configure sync property",width:"60vw",data:e.metadata?.relationsOptions?.syncProperties?.[t]??""}).afterClosed());(0,p.EN)(a)&&e.metadata?.relationsOptions&&((n=e.metadata.relationsOptions).syncProperties??(n.syncProperties=[]),e.metadata.relationsOptions.syncProperties[t]=a,e.history.getNewState())}))()}metadataSet(){this.metadata?.relationsOptions&&this.form.patchValue(this.metadata.relationsOptions)}}at.ɵfac=function(t){return new(t||at)(h.Y(j.s),h.Y(z.SB),h.Y(I.J),h.Y(r.p))},at.ɵcmp=b.Xp({type:at,selectors:[["sync-values-node"]],standalone:!0,features:[L._([r.p]),U.q,_.j],decls:19,vars:9,consts:[["name","sync values",3,"parent","destroySubject"],[1,"node-content",3,"formGroup"],[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["formControlName","triggerSync",1,"dynamic-form-control"],[3,"ngValue"],["class","dynamic-form-group dynamic-margin-bottom-extra-small",4,"ngIf"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-plus"],[1,"inputs-outputs"],[1,"inputs"],[4,"ngFor","ngForOf"],["class","input",4,"ngIf"],[1,"outputs"],["type","text","formControlName","idleTimeout","number","","required","",1,"dynamic-form-control"],[1,"input"],[3,"parentCoordiantes","zoomLevel","name","parent"],["type","button",1,"dynamic-btn-icon","dynamic-margin-horizontal-extra-small",3,"click"],[1,"fas","fa-cog"],[1,"fas","fa-times"],["name","trigger",3,"parentCoordiantes","zoomLevel","parent"],[1,"output"]],template:function(t,e){1&t&&(O._U(0,"relations-node-header",0),O.Tg(1,"div",1)(2,"div",2)(3,"label",3),x._(4,"sync on"),O.qZ(),O.Tg(5,"select",4)(6,"option",5),x._(7,"idle"),O.qZ(),O.Tg(8,"option",5),x._(9,"trigger"),O.qZ()()(),E.Y(10,W,4,0,"div",6),O.Tg(11,"button",7),Q.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.addProperty()})),O._U(12,"span",8),O.qZ(),O.Tg(13,"div",9)(14,"div",10),E.Y(15,tt,9,5,"ng-container",11),E.Y(16,et,4,3,"div",12),O.qZ(),O.Tg(17,"div",13),E.Y(18,nt,5,5,"ng-container",11),O.qZ()()()),2&t&&(w.Q("parent",e)("destroySubject",e.destroySubject),N.x(1),w.Q("formGroup",e.form),N.x(5),w.Q("ngValue",!1),N.x(2),w.Q("ngValue",!0),N.x(2),w.Q("ngIf",!(null!=e.metadata&&null!=e.metadata.relationsOptions&&e.metadata.relationsOptions.triggerSync)),N.x(5),w.Q("ngForOf",null==e.metadata||null==e.metadata.relationsOptions?null:e.metadata.relationsOptions.syncProperties),N.x(1),w.Q("ngIf",null==e.metadata||null==e.metadata.relationsOptions?null:e.metadata.relationsOptions.triggerSync),N.x(2),w.Q("ngForOf",null==e.metadata||null==e.metadata.relationsOptions?null:e.metadata.relationsOptions.syncProperties))},dependencies:[a.e,G.s,B.O,o.U,M.YN,A.Kr,C.Fj,M.EJ,P.JJ,P.JL,R.Q7,H.s,K.u,i.F,D.N,J.L,l.e,c.P,u.n],encapsulation:2,changeDetection:0});class ot{constructor(){this.metaInfo={name:"Sync values",description:"Sync values, allowing triggered changes run at once",group:"Data"},this.nodeDefinition=at,Object.freeze(this)}}},15750:(t,e,n)=>{n.d(e,{N:()=>m});var a=n(65508),o=n(34065),r=n(43939),i=n(79440),s=n(13434),l=n(4905),c=n(77842),u=n(72891),d=n(73379);const p={provide:o.JU,useExisting:(0,a.Gp)((()=>m)),multi:!0};class m{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",t)}registerOnChange(t){this.onChange=e=>{(0,r.fp)(e)||""==e?t(null):(e=e.replace(/\s+/g,""),/^[+-]?\d+(?:[,.]\d+)?$/g.test(e)?t(parseFloat(e.replace(",","."))):t(NaN))}}registerOnTouched(t){this.onTouched=t}}m.ɵfac=function(t){return new(t||m)(i.Y(s.Qs),i.Y(l.SB))},m.ɵdir=c.lG({type:m,selectors:[["input","number","","formControlName",""],["input","number","","formControl",""],["input","number","","ngModel",""]],hostBindings:function(t,e){1&t&&u.N("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[d._([p])]})},67406:(t,e,n)=>{n.d(e,{L:()=>c});var a=n(65508),o=n(91795),r=n(43939),i=n(77842),s=n(73379);const l={provide:o.Cf,useExisting:(0,a.Gp)((()=>c)),multi:!0};class c{validate(t){return class{static number(t){return isNaN(t.value)?{number:!0}:null}static max(t){return e=>!isNaN(e.value)&&(0,r.EN)(e.value)&&(0,r.EN)(t)&&e.value>t?{maxValue:t,actualValue:e.value}:null}static min(t){return e=>!isNaN(e.value)&&(0,r.EN)(e.value)&&(0,r.EN)(t)&&e.value<t?{minValue:t,actualValue:e.value}:null}}.number(t)}}c.ɵfac=function(t){return new(t||c)},c.ɵdir=i.lG({type:c,selectors:[["input","number","","formControlName",""],["input","number","","formControl",""],["input","number","","ngModel",""]],features:[s._([l])]})},92640:(t,e,n)=>{n.d(e,{x:()=>o});var a=n(70625);const o={asyncValidators:[],validators:[],disabled:!1,type:a.NI,childType:a.NI,args:{}}},71791:(t,e,n)=>{n.d(e,{p:()=>f});var a=n(17777),o=n(66398),r=n(70625),i=n(92640);class s{constructor(t,e){this._factoryFn=t,this._args=e}valueOf(){return this._args?t=>(t={...this._args,args:t},this._factoryFn(t)):this._factoryFn}}class l{constructor(t,e){this._factoryFn=t,this._args=e}valueOf(){return this._args?t=>(t={...this._args,args:t},this._factoryFn(t)):this._factoryFn}}function c(t,e){if(!t)return new a.cw({});const n=t.ɵControlsMetadata??{},u=t.ɵValidators??[],d=t.ɵAsyncValidators??[],p=t.ɵArgs??{},m=Object.keys(t),f=new a.cw({},{validators:u?.map((t=>t instanceof s?t.valueOf()({...p,...e}):t)).filter((t=>!!t)),asyncValidators:d?.map((t=>t instanceof l?t.valueOf()({...p,...e}):t)).filter((t=>!!t))});for(const u of m){const d=n[u]??i.x,p=t[u];if(void 0===p)continue;const m=d.validators.map((t=>t instanceof s?t.valueOf()({...d.args,...e}):t)).filter((t=>!!t)),g=d.asyncValidators.map((t=>t instanceof l?t.valueOf()({...d.args,...e}):t)).filter((t=>!!t));let y;switch(d.type){case a.cw:y=c(p,e);break;case o.Oe:if(y=new o.Oe([],{validators:m,asyncValidators:g,...d.controlOptions}),p&&Array.isArray(p)){const t=y;for(const n of p)switch(d.childType){case a.cw:t.push(c(n,e));break;case o.Oe:break;default:t.push(new r.NI(n,{validators:m,asyncValidators:g,...d.controlOptions}))}}break;default:y=new r.NI(p,{validators:m,asyncValidators:g,...d.controlOptions})}d.disabled&&y.disable(),f.addControl(u,y)}return f}function u(t,e){return c(t,e)}var d=n(11776),p=n(95176),m=n(38327);class f{constructor(t){this._injector=t}build(t,e){return u(t,{...e,injector:this._injector})}}f.ɵfac=function(t){return new(t||f)(d.LF(p.z))},f.ɵprov=m.Yz({token:f,factory:f.ɵfac})}}]);
//# sourceMappingURL=1172.chunk.e3d44417f7b8cf84c730.js.map