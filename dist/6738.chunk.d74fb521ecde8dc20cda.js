"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[6738],{49934:(t,e,o)=>{o.d(e,{_:()=>p});var n=o(80607),r=o(15554),s=o(81874),i=o(5549),a=o(28539);function c(t,e,o,n,r,s,i){try{var a=t[s](i),c=a.value}catch(t){return void o(t)}a.done?e(c):Promise.resolve(c).then(n,r)}class p{constructor(t,e){this._viewContainerRef=t,this._logger=e,this._componentRef=null,this.propertiesMetadata=null}ngOnChanges(){var t,e=this;return(t=function*(){if(e._logger?.debug("PropertiesControlRendererDirective: rendering properties control {{@type}}",{type:e.type?.name}),e.ngOnDestroy(),e._viewContainerRef.clear(),e.type){const t=e._viewContainerRef.injector;if(e._componentRef=e._viewContainerRef.createComponent(e.type,{injector:t}),e._componentRef){const t=e._componentRef.instance;t.propertiesMetadata=e.propertiesMetadata,t.form=e.form,yield t.initialize(),t.invalidateVisuals()}}},function(){var e=this,o=arguments;return new Promise((function(n,r){var s=t.apply(e,o);function i(t){c(s,n,r,i,a,"next",t)}function a(t){c(s,n,r,i,a,"throw",t)}i(void 0)}))})()}ngOnDestroy(){this._componentRef&&(this._logger?.debug("PropertiesControlRendererDirective: destroying properties control {{@type}}",{type:this.type?.name}),this._componentRef?.destroy(),this._componentRef=null)}}p.ɵfac=function(t){return new(t||p)(r.Y(s.s_),r.Y(n.bZ,8))},p.ɵdir=i.lG({type:p,selectors:[["","propertiesControl",""]],inputs:{form:"form",propertiesMetadata:"propertiesMetadata",type:["propertiesControl","type"]},features:[a.T]})},7525:(t,e,o)=>{o.d(e,{L:()=>l});var n=o(94060),r=o(62414),s=o(69563),i=o(99566),a=o(59951),c=o(5549),p=o(36059);class l{}l.ɵfac=function(t){return new(t||l)},l.ɵmod=c.oA({type:l}),l.ɵinj=p.cJ({imports:[n.e,r.z,a.i,i.j,s.A]})},59951:(t,e,o)=>{o.d(e,{i:()=>p});var n=o(94060),r=o(47260),s=o(69563),i=o(52075),a=o(5549),c=o(36059);class p{}p.ɵfac=function(t){return new(t||p)},p.ɵmod=a.oA({type:p}),p.ɵinj=c.cJ({imports:[n.e,r.U,s.A,i.F]})},35425:(t,e,o)=>{o.r(e),o.d(e,{CustomComponentLayoutEditorMetadata:()=>I});var n=o(68512),r=o(90275),s=o(80056),i=o(70290),a=o(94060),c=o(8945),p=o(87316),l=o(7525),m=o(7199),u=o(5549);class d{transform(t,e){return e?.editorMetadata.metaInfo?.optionsMetadata?.propertiesMetadata?.find((e=>e.modelType.name==t))?.propertiesControls??[]}}d.ɵfac=function(t){return new(t||d)},d.ɵpipe=u.Yj({name:"getControls",type:d,pure:!0,standalone:!0});var f=o(62568),C=o(43856),y=o(79842),h=o(26159),g=o(12142),v=o(21179),M=o(84746),_=o(55640),k=o(31246),w=o(41820),F=o(94353),O=o(78581),R=o(23527),b=o(90378),P=o(61980),j=o(91513),x=o(83052),A=o(60054),L=o(22813),Q=o(49934);function Y(t,e,o,n,r,s,i){try{var a=t[s](i),c=a.value}catch(t){return void o(t)}a.done?e(c):Promise.resolve(c).then(n,r)}function T(t,e){if(1&t&&(g.yn(0),g.Gk(1,3),v.AL(2,"propertiesMetadata"),v.AL(3,"getModel"),g.BQ()),2&t){const t=e.$implicit,o=M.o().$implicit,n=M.o().$implicit,r=M.o();_.x(1),k.Q("propertiesControl",t)("form",r.usedComponentsForms[n.key][o.key])("propertiesMetadata",v.lc(2,3,v.xi(3,5,o.key,r.customComponentContentMetadata[n.key])))}}function $(t,e){if(1&t&&(g.yn(0),w.Y(1,T,4,8,"ng-container",0),v.AL(2,"getControls"),g.BQ()),2&t){const t=e.$implicit,o=M.o().$implicit,n=M.o();_.x(1),k.Q("ngForOf",v.xi(2,1,t.key,n.customComponentContentMetadata[o.key]))}}function z(t,e){if(1&t&&(g.yn(0),F.Tg(1,"div",1),O._(2),F.qZ(),w.Y(3,$,3,4,"ng-container",0),v.AL(4,"keyvalue"),F._U(5,"div",2),g.BQ()),2&t){const t=e.$implicit,o=M.o();_.x(2),R.Oq(null==o.customComponentContentMetadata[t.key]||null==o.customComponentContentMetadata[t.key].metadata?null:o.customComponentContentMetadata[t.key].metadata.displayName),_.x(1),k.Q("ngForOf",v.lc(4,2,t.value))}}class B extends p.k{constructor(){super(...arguments),this.injector=(0,s.f3)(i.z),this.formModelBuilder=(0,s.f3)(c.p),this.customComponentsRegister=(0,s.f3)(h.t),this.customComponentContentMetadata={},this.usedProperties={},this.usedComponentsForms={}}_initialize(){var t,e=this;return(t=function*(){if(!e.form)return;const t=e.form.value.name??"",o=yield(0,y.Qd)(t,e.injector);if(!o)return;e.customComponentContentMetadata=o.contentMetadata,e.customComponentMetadata=o.metadata;const n=e.customComponentsRegister.getConfigurationForComponent(t);if(n){e.usedProperties=n.configurableProperties??{};for(const t in e.usedProperties)e.customComponentContentMetadata[t]||delete e.usedProperties[t];e.initForms()}},function(){var e=this,o=arguments;return new Promise((function(n,r){var s=t.apply(e,o);function i(t){Y(s,n,r,i,a,"next",t)}function a(t){Y(s,n,r,i,a,"throw",t)}i(void 0)}))})()}initForms(){var t;this.usedComponentsForms={};for(const e in this.usedProperties)for(const o in this.usedProperties[e]){const n=this.customComponentContentMetadata[e]?.editorMetadata.metaInfo?.optionsMetadata?.propertiesMetadata.find((t=>t.modelType.name==o))?.modelType,r=this.usedProperties[e][o];if(!n)continue;const s=(0,m.l7)(!0,{},this.customComponentContentMetadata[e]?.editorMetadata.metaInfo?.defaultOptions,this.customComponentContentMetadata[e]?.metadata.options,this.form?.controls.contentOptions.value[e]);(t=this.usedComponentsForms)[e]??(t[e]={});const i=new n(s);for(const t of Object.keys(i))r.indexOf(t)<0&&delete i[t];const a=this.usedComponentsForms[e][o]=this.formModelBuilder.build(i);console.log(a),a.valueChanges.subscribe((t=>{const o=this.form?.controls.contentOptions.value??{};o[e]??(o[e]={}),(0,m.l7)(o[e],t),this.form?.controls.contentOptions.patchValue(o)}))}}}B.ɵfac=(()=>{let t;return function(e){return(t||(t=b.n5(B)))(e||B)}})(),B.ɵcmp=u.Xp({type:B,selectors:[["content-options"]],standalone:!0,features:[P._([c.p]),j.q,x.j],decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],[1,"dynamic-margin-top-small","dynamic-bold","dynamic-text-uppercase","dynamic-margin-left-extra-small"],[1,"component-separator"],[3,"propertiesControl","form","propertiesMetadata"]],template:function(t,e){1&t&&(w.Y(0,z,6,4,"ng-container",0),v.AL(1,"keyvalue")),2&t&&k.Q("ngForOf",v.lc(1,1,e.usedProperties))},dependencies:[a.e,A.sg,L.N,l.L,Q._,d,f.m,C.l],encapsulation:2,changeDetection:0});class D{constructor(t){this.name="",this.contentOptions={},m.Rl.bind(this)(t)}}class I{constructor(){this.metaInfo={group:"Components",optionsMetadata:{propertiesMetadata:[{modelType:n.k,propertiesControls:[r.e]},{modelType:D,propertiesControls:[B]}]},defaultOptions:{}},Object.freeze(this)}}},66606:(t,e,o)=>{o.d(e,{j:()=>c});var n=o(47496),r=o(80607),s=o(7199),i=o(15554),a=o(5549);class c{_logger;constructor(t){this._logger=t}transform(t,e){return(0,s.fp)(t)?null:t instanceof n.NI?t:(this._logger?.warn("Failed to cast AbstractControl to FormControl"),null)}static ɵfac=function(t){return new(t||c)(i.Y(r.bZ,24))};static ɵpipe=a.Yj({name:"asFormControl",type:c,pure:!0})}},69563:(t,e,o)=>{o.d(e,{A:()=>s});var n=o(5549),r=o(36059);class s{static ɵfac=function(t){return new(t||s)};static ɵmod=n.oA({type:s});static ɵinj=r.cJ({})}}}]);
//# sourceMappingURL=6738.chunk.d74fb521ecde8dc20cda.js.map