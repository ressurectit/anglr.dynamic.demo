"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[365],{70365:(t,e,n)=>{n.r(e),n.d(e,{MergeRelationsEditorMetadata:()=>L});var o=n(27052),i=n(93551),r=n(52580),a=n(60901),s=n(85478),p=n(72385),c=n(64297),d=n(84773),l=n(76405),u=n(41853),m=n(72891),f=n(43870),g=n(6845),v=n(66794),h=n(73301),y=n(6427),O=n(79440),b=n(68961),P=n(4905),_=n(77842),k=n(47098),w=n(82568),x=n(15686),C=n(47826),j=n(12311);function q(t,e,n,o,i,r,a){try{var s=t[r](a),p=s.value}catch(t){return void n(t)}s.done?e(p):Promise.resolve(p).then(o,i)}function z(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function a(t){q(r,o,i,a,s,"next",t)}function s(t){q(r,o,i,a,s,"throw",t)}a(void 0)}))}}function D(t,e){if(1&t){const t=d.E();l.Tg(0,"div",11),l._U(1,"relation-node-input",12),l.Tg(2,"div",5)(3,"div"),u._(4),l.qZ(),l.Tg(5,"button",13),m.N("click",(function(e){const n=f.CH(t).$implicit,o=g.o();return e.preventDefault(),e.stopPropagation(),f.Kt(o.rename(n))})),l._U(6,"span",14),l.qZ(),l.Tg(7,"button",15),m.N("click",(function(e){const n=f.CH(t).$implicit,o=g.o();return e.preventDefault(),e.stopPropagation(),f.Kt(o.removeProperty(n))})),l._U(8,"span",16),l.qZ()()()}if(2&t){const t=e.$implicit,n=g.o();v.x(1),h.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",t)("parent",n),v.x(3),y.Oq(t)}}class T extends i.M{get properties(){var t;return this.metadata?((t=this.metadata).relationsOptions??(t.relationsOptions={properties:[]}),this.metadata.relationsOptions.properties??[]):[]}constructor(t,e,n){super(t,e),this.dialog=n}addProperty(){var t=this;return z((function*(){yield t.configureEndpoint(`prop${t.properties.length+1}`)}))()}removeProperty(t){let e;this.metadata?.relationsOptions?.properties?.length&&(e=this.metadata.relationsOptions.properties.indexOf(t))>=0&&(this.metadata.relationsOptions.properties.splice(e,1),this.history.getNewState())}rename(t){var e=this;return z((function*(){yield e.configureEndpoint(t),e.changeDetector.detectChanges()}))()}configureEndpoint(t){var e=this;return z((function*(){var n;const o={name:t,defaultValue:void 0,noDefaultValue:!0,skipInit:!1},i=yield(0,c.n)(e.dialog.open(p.b,{title:"configure property",width:"60vw",data:o}).afterClosed());if(i&&e.metadata?.relationsOptions){let i;e.metadata.relationsOptions.properties?.length&&(i=e.metadata.relationsOptions.properties.indexOf(t))>=0?(e.metadata.relationsOptions.properties.splice(i,1),e.metadata.relationsOptions.properties.splice(i,0,o.name)):((n=e.metadata.relationsOptions).properties??(n.properties=[]),e.metadata.relationsOptions.properties.push(o.name)),e.history.getNewState()}return i??!1}))()}}T.ɵfac=function(t){return new(t||T)(O.Y(b.s),O.Y(P.SB),O.Y(C.J))},T.ɵcmp=_.Xp({type:T,selectors:[["merge-node"]],standalone:!0,features:[k.q,w.j],decls:13,vars:6,consts:[["name","merge",3,"parent","destroySubject"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],["class","input",4,"ngFor","ngForOf"],[1,"dynamic-flex-row"],["type","button",1,"dynamic-btn-icon","dynamic-margin-left-extra-small",3,"click"],[1,"fas","fa-plus"],[1,"outputs"],[1,"output"],["name","mergedObject",3,"parentCoordiantes","zoomLevel","parent"],[1,"input"],[3,"parentCoordiantes","zoomLevel","name","parent"],["type","button",1,"dynamic-btn-icon","dynamic-margin-horizontal-extra-small",3,"click"],[1,"fas","fa-pen"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-times"]],template:function(t,e){1&t&&(l._U(0,"relations-node-header",0),l.Tg(1,"div",1)(2,"div",2)(3,"div",3),x.Y(4,D,9,5,"div",4),l.Tg(5,"div",5)(6,"button",6),m.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.addProperty()})),l._U(7,"span",7),l.qZ()()(),l.Tg(8,"div",8)(9,"div",9)(10,"div"),u._(11,"merged object"),l.qZ(),l._U(12,"relation-node-output",10),l.qZ()()()()),2&t&&(h.Q("parent",e)("destroySubject",e.destroySubject),v.x(4),h.Q("ngForOf",e.properties),v.x(8),h.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e))},dependencies:[r.e,a.P,s.n,o.e,j.sg],encapsulation:2,changeDetection:0});class L{constructor(){this.metaInfo={name:"Merge",description:"Allows constructing of object merged of inputs",group:"Data"},this.nodeDefinition=T,Object.freeze(this)}}}}]);
//# sourceMappingURL=365.chunk.db1524b81e5999dff1d2.js.map