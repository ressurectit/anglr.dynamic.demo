"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[297],{297:(t,e,n)=>{n.r(e),n.d(e,{DefaultModule:()=>ae});var o=n(14392),a=n(35375),i=n(89001),r=n(27052),s=n(63789),c=n(989),l=n(38223),p=n(79440),d=n(93802),u=n(77842);class m{constructor(t){this.template=t}static ngTemplateContextGuard(t,e){return!0}}m.ɵfac=function(t){return new(t||m)(p.Y(d.Rg))},m.ɵdir=u.lG({type:m,selectors:[["","treeNodeTemplate",""]],exportAs:["treeNodeTemplate"],standalone:!0});var g=n(63152),_=n(4477),h=n(80827),f=n(15686),v=n(6845),y=n(11282),b=n(66794),D=n(73301),x=n(94727),C=n(84773),k=n(72891),M=n(43870),L=n(41853),w=n(85320),T=n(6427),O=n(68961),I=n(82568),P=n(82973),F=n(83434),N=n(43649),S=n(12311),Y=n(21651),Q=n(93234),E=n(41623),Z=n(99055),q=n(23208);function U(t,e){1&t&&_.Gk(0)}const A=function(t){return{$implicit:t}};function $(t,e){if(1&t&&(h.Tg(0,"div",7),f.Y(1,U,1,0,"ng-container",8),h.qZ()),2&t){const t=v.o(),e=y.M(6);b.x(1),D.Q("ngTemplateOutlet",e.template)("ngTemplateOutletContext",x.VK(2,A,t.root))}}function R(t,e){1&t&&_.Gk(0)}const z=function(t,e){return{metadata:t,parentId:e}};function H(t,e){if(1&t&&(h.Tg(0,"div",13),f.Y(1,R,1,0,"ng-container",8),h.qZ()),2&t){const t=e.$implicit;v.o(3);const n=y.M(6);D.Q("cdkDragData",x.WL(4,z,null==t.component.options?null:t.component.options.typeMetadata,null==t.parent||null==t.parent.component?null:t.parent.component.id))("cdkDragDisabled",t.component.dragDisabled),b.x(1),D.Q("ngTemplateOutlet",n.template)("ngTemplateOutletContext",x.VK(7,A,t))}}function j(t,e){if(1&t){const t=C.E();h.Tg(0,"div",11),k.N("cdkDropListDropped",(function(e){M.CH(t);const n=v.o().$implicit;return M.Kt(n.component.addDescendant(e))})),f.Y(1,H,2,9,"div",12),h.qZ()}if(2&t){const t=v.o().$implicit;D.Q("cdkDropListEnterPredicate",t.component.canDrop)("id","component-tree-"+(null==t.component.options||null==t.component.options.typeMetadata?null:t.component.options.typeMetadata.id)),b.x(1),D.Q("ngForOf",t.children)}}function V(t,e){if(1&t){const t=C.E();h.Tg(0,"div",9),k.N("mouseover",(function(e){const n=M.CH(t).$implicit,o=v.o();return M.Kt(o.highlight(e,null==n.component.options||null==n.component.options.typeMetadata?null:n.component.options.typeMetadata.id))}))("click",(function(){const e=M.CH(t).$implicit,n=v.o();return M.Kt(n._manager.selectComponent(null==e.component.options||null==e.component.options.typeMetadata?null:e.component.options.typeMetadata.id))})),L._(1),h.qZ(),f.Y(2,j,2,3,"div",10)}if(2&t){const t=e.$implicit,n=v.o();w.ek("selected",(null==t.component.options||null==t.component.options.typeMetadata?null:t.component.options.typeMetadata.id)===n._manager.selectedComponent)("highlighted",(null==t.component.options||null==t.component.options.typeMetadata?null:t.component.options.typeMetadata.id)===n._manager.highlightedComponent),D.Q("ngClass",n.hasChild(t)?"nested-node-tree":"node-tree"),b.x(1),T.Oq((null==t.component.options||null==t.component.options.typeMetadata?null:t.component.options.typeMetadata.displayName)||(null==t.component.options||null==t.component.options.typeMetadata?null:t.component.options.typeMetadata.id)),b.x(1),D.Q("ngIf",n.hasChild(t)||t.component.canDrop())}}class K{constructor(t,e){this._manager=t,this._changeDetector=e,this._initSubscriptions=new l.w}ngOnInit(){this._initSubscriptions.add(this._manager.layoutChange.subscribe((()=>{this.root=this._manager.root,this._changeDetector.detectChanges()}))),this._initSubscriptions.add(this._manager.selectedChange.subscribe((()=>{this._changeDetector.detectChanges()}))),this._initSubscriptions.add(this._manager.highlightedChange.subscribe((()=>this._changeDetector.detectChanges()))),this._initSubscriptions.add(this._manager.displayNameChange.subscribe((()=>this._changeDetector.detectChanges()))),this.root=this._manager.root}ngOnDestroy(){this._initSubscriptions.unsubscribe()}highlight(t,e){t.preventDefault(),t.stopPropagation(),this._manager.highlightComponent(e)}hasChild(t){return!!t.children&&t.children.length>0}_cancelHighlight(t){t.preventDefault(),t.stopPropagation(),this._manager.cancelHighlightedComponent()}}K.ɵfac=function(t){return new(t||K)(p.Y(F.t),p.Y(O.s))},K.ɵcmp=u.Xp({type:K,selectors:[["components-tree"]],hostBindings:function(t,e){1&t&&k.N("mouseleave",(function(t){return e._cancelHighlight(t)}))},standalone:!0,features:[I.j],decls:7,vars:1,consts:[["mat-icon-button","","aria-label","Collapse all"],[1,"fa","fa-minus-square"],["mat-icon-button","","aria-label","Expand all"],[1,"fa","fa-plus-square"],["class","component-tree",4,"ngIf"],["treeNodeTemplate",""],["components","treeNodeTemplate"],[1,"component-tree"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass","mouseover","click"],["class","node-children","cdkDropList","","connectDropLists","","connectDropListsPrefix","component-tree-",3,"cdkDropListEnterPredicate","id","cdkDropListDropped",4,"ngIf"],["cdkDropList","","connectDropLists","","connectDropListsPrefix","component-tree-",1,"node-children",3,"cdkDropListEnterPredicate","id","cdkDropListDropped"],["cdkDrag","",3,"cdkDragData","cdkDragDisabled",4,"ngFor","ngForOf"],["cdkDrag","",3,"cdkDragData","cdkDragDisabled"]],template:function(t,e){1&t&&(h.Tg(0,"button",0),h._U(1,"span",1),h.qZ(),h.Tg(2,"button",2),h._U(3,"span",3),h.qZ(),f.Y(4,$,2,4,"div",4),f.Y(5,V,3,7,"ng-template",5,6,P.W)),2&t&&(b.x(4),D.Q("ngIf",e.root))},dependencies:[r.e,N.m,S.s,Y.O,Q.t,s.o,E.l,m,c._,Z.W,q.Z,g.z],styles:["[_nghost-%COMP%]\n{\n    display: block;\n    background-color: #fafafa;\n    border-right: 1px solid #ccc;\n}\n\n.highlighted[_ngcontent-%COMP%]\n{\n    text-shadow: 0 0 2px #666;\n}\n\n.selected[_ngcontent-%COMP%]\n{\n    text-shadow: 0 0 2px #009cd7;\n}\n\n.component-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .component-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] \n{\n  margin-top: 0;\n  margin-bottom: 0;\n  list-style-type: none;\n}\n\n.component-tree[_ngcontent-%COMP%]   .node-children[_ngcontent-%COMP%] \n{\n  padding-left: 1rem;\n  min-height: 10px;\n}"],changeDetection:0});var J=n(46480),G=n(57466),B=n(43939);class W{transform(t,e){const n=`${t.itemSource.name}-${e}`;return{metadata:{id:n,displayName:n,package:t.itemSource.package,name:t.itemSource.name,options:(0,G.l7)(!0,{},t.metadata.metaInfo?.defaultOptions)},parentId:null}}}W.ɵfac=function(t){return new(t||W)},W.ɵpipe=u.Yj({name:"toLayoutDragData",type:W,pure:!0,standalone:!0});var X=n(69307),tt=n(53015),et=n(65589),nt=n(87606),ot=n(13457),at=n(11776),it=n(38327);function rt(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}class st{constructor(t,e,n){this._providers=t,this._extractors=e,this._logger=n,this._cachedDynamicModuleTypes={},Array.isArray(this._providers)||(this._logger?.error("DynamicModuleTypesLoader: missing providers!"),this._providers=[]),Array.isArray(this._extractors)||(this._logger?.error("DynamicModuleTypesLoader: missing extractors!"),this._extractors=[])}loadTypes(t){var e,n=this;return(e=function*(){let e=null;if(n._cachedDynamicModuleTypes[t])return n._logger?.verbose("DynamicModuleTypesLoader: Loading from cache {@source}",{moduleName:t}),n._cachedDynamicModuleTypes[t];for(const o of n._providers){const n=o.tryToGet(t);if(e=n?yield(0,nt.K)(n):null,e)break}if(!e)return n._logger?.debug("DynamicModuleTypesLoader: Failed to get dynamic module {@source}",{moduleName:t}),null;for(const o of n._extractors){const a=o.tryToExtract(e);if(a)return n._cachedDynamicModuleTypes[t]=a,a}return n._logger?.debug("DynamicModuleTypesLoader: Failed to extract dynamic module types {@source}",{moduleName:t}),null},function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function r(t){rt(i,o,a,r,s,"next",t)}function s(t){rt(i,o,a,r,s,"throw",t)}r(void 0)}))})()}}st.ɵfac=function(t){return new(t||st)(at.LF(ot.Cf),at.LF(ot.WU),at.LF(J.bZ,8))},st.ɵprov=it.Yz({token:st,factory:st.ɵfac,providedIn:"root"});var ct=n(85902),lt=n(32434),pt=n(10866),dt=n(22549);function ut(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}function mt(t,e){if(1&t&&h._U(0,"layout-editor-drag-placeholder",10),2&t){const t=v.o(3);w.ek("hidden",t._isDragOverPalette)}}function gt(t,e){if(1&t&&(h._U(0,"layout-editor-drag-preview",11),et.AL(1,"toLayoutDragData")),2&t){const t=v.o().$implicit,e=v.o(2);D.Q("editorMetadata",t.metadata)("layoutMetadata",et.xi(1,2,t,e._newCompnentId).metadata)}}function _t(t,e){if(1&t&&(h.Tg(0,"div",12),L._(1),h.qZ()),2&t){const t=v.o().$implicit;b.x(1),T.Oq(null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function ht(t,e){if(1&t){const t=C.E();h.Tg(0,"div",4),k.N("cdkDropListEntered",(function(){M.CH(t);const e=v.o(2);return M.Kt(e._onDropListEntered())}))("cdkDropListExited",(function(){M.CH(t);const e=v.o(2);return M.Kt(e._onDropListExited())})),h.Tg(1,"div",5),k.N("cdkDragDropped",(function(){M.CH(t);const e=v.o(2);return M.Kt(e._generateNewId())}))("cdkDragEnded",(function(){M.CH(t);const e=v.o().$implicit,n=v.o();return M.Kt(n._onDragEnded(e.key))}))("cdkDragStarted",(function(e){const n=M.CH(t).$implicit,o=v.o().$implicit,a=v.o();return M.Kt(a._onDragStarted(e,o.key,n))})),et.AL(2,"toLayoutDragData"),f.Y(3,mt,1,2,"layout-editor-drag-placeholder",6),f.Y(4,gt,2,5,"layout-editor-drag-preview",7),h.Tg(5,"div",8),L._(6),h.qZ(),f.Y(7,_t,2,1,"div",9),h.qZ()()}if(2&t){const t=e.$implicit,n=v.o(2);let o;D.Q("cdkDropListConnectedTo",n._designerDropLists),b.x(1),D.Q("cdkDragData",et.xi(2,4,t,n._newCompnentId)),b.x(5),T.Oq(null!==(o=null==t.metadata.metaInfo?null:t.metadata.metaInfo.name)&&void 0!==o?o:t.itemSource.name),b.x(1),D.Q("ngIf",null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function ft(t,e){if(1&t&&(_.yn(0),h.Tg(1,"div",2),L._(2),h.qZ(),f.Y(3,ht,8,7,"div",3),_.BQ()),2&t){const t=e.$implicit;b.x(2),T.hi("",t.key," "),b.x(1),D.Q("ngForOf",t.value)}}class vt{constructor(t,e,n,o,a){this._moduleTypesLoader=t,this._changeDetector=e,this._metadataExtractor=n,this._metadataManager=o,this._logger=a,this._initSubscriptions=new l.w,this._allItems=[],this._groupedItems={},this._designerDropLists=[],this._newCompnentId=(0,G.Ox)(16),this._isDragOverPalette=!1}ngOnInit(){var t,e=this;return(t=function*(){var t;e._initSubscriptions.add(e._metadataManager.layoutChange.subscribe((()=>e._getDesignerDropLists()))),e._getDesignerDropLists();const n=(yield e._moduleTypesLoader.loadTypes("basic-components"))??[];for(const t of n){const n={package:"basic-components",name:t},o=yield e._metadataExtractor.extractMetadata(n);o?e._allItems.push({itemSource:n,metadata:o}):e._logger?.warn("ComponentsPaletteSAComponent: Failed to obtain layout editor metadata {@source}",n)}e._groupedItems[""]=[];for(const n of e._allItems){const o=n.metadata.metaInfo?.group??"";(t=e._groupedItems)[o]??(t[o]=[]),e._groupedItems[o].push(n)}e._changeDetector.detectChanges()},function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){ut(i,o,a,r,s,"next",t)}function s(t){ut(i,o,a,r,s,"throw",t)}r(void 0)}))})()}ngOnDestroy(){this._initSubscriptions.unsubscribe()}_generateNewId(){this._newCompnentId=(0,G.Ox)(16)}_onDragEnded(t){(0,B.EN)(t)&&(this._groupedItems[t]=[...this._groupedItems[t].filter((t=>!t.temp))])}_onDragStarted(t,e,n){this._isDragOverPalette=!0;const o=t.source.dropContainer.getSortedItems().findIndex((e=>e.data?.metadata?.id===t.source.data?.metadata?.id));(0,B.EN)(o)&&this._groupedItems[e]?.splice(o+1,0,{...n,temp:!0})}_onDropListEntered(){this._isDragOverPalette=!0}_onDropListExited(){this._isDragOverPalette=!1}_getDesignerDropLists(){this._designerDropLists=this._metadataManager.flatTree.map((t=>t.component.id)).reverse()}}vt.ɵfac=function(t){return new(t||vt)(p.Y(st),p.Y(O.s),p.Y(ct.T),p.Y(F.t),p.Y(J.bZ,8))},vt.ɵcmp=u.Xp({type:vt,selectors:[["components-palette"]],standalone:!0,features:[I.j],decls:3,vars:3,consts:[[1,"flex-column"],[4,"ngFor","ngForOf"],[1,"text-spread","text-small-caps","margin-left-extra-small","margin-horizontal-small","bold"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo","cdkDropListEntered","cdkDropListExited",4,"ngFor","ngForOf"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo","cdkDropListEntered","cdkDropListExited"],["cdkDrag","",1,"editor-component","mat-elevation-z2",3,"cdkDragData","cdkDragDropped","cdkDragEnded","cdkDragStarted"],["class","mat-elevation-z6",3,"hidden",4,"cdkDragPlaceholder"],["class","mat-elevation-z4",3,"editorMetadata","layoutMetadata",4,"cdkDragPreview"],[1,"editor-component-name"],["class","editor-component-description",4,"ngIf"],[1,"mat-elevation-z6"],[1,"mat-elevation-z4",3,"editorMetadata","layoutMetadata"],[1,"editor-component-description"]],template:function(t,e){1&t&&(h.Tg(0,"div",0),f.Y(1,ft,4,2,"ng-container",1),et.AL(2,"keyvalue"),h.qZ()),2&t&&(b.x(1),D.Q("ngForOf",et.lc(2,1,e._groupedItems)))},dependencies:[r.e,S.s,Y.O,lt.N,c._,Z.W,q.Z,pt.p,dt.H,tt.s,X.a,W],styles:[".editor-component[_ngcontent-%COMP%]\n{\n    margin: 2px 10px;\n    padding: 4px 8px;\n\n    border-radius: 6px;\n    border: 1px solid #F0F0F0;\n    background-color: #FAFAFA;\n}\n\n.editor-component-name[_ngcontent-%COMP%]\n{\n    font-weight: 500;\n}\n\n.editor-component-description[_ngcontent-%COMP%]\n{\n    margin-left: 4px;\n    margin-top: 2px;\n    font-size: .8em;\n}"],changeDetection:0});var yt=n(70625),bt=n(4644),Dt=n(71791),xt=n(39163),Ct=n(77880),kt=n(59951);class Mt{}Mt.ɵfac=function(t){return new(t||Mt)},Mt.ɵmod=u.oA({type:Mt}),Mt.ɵinj=it.cJ({imports:[r.e,xt.z,kt.i,Ct.j]});var Lt=n(73379),wt=n(49280),Tt=n(77470),Ot=n(27635),It=n(8215),Pt=n(36973);function Ft(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}class Nt{constructor(t,e){this._viewContainerRef=t,this._logger=e,this._componentRef=null}ngOnChanges(){var t,e=this;return(t=function*(){if(e._logger?.debug("PropertiesControlRendererDirective: rendering properties control {@type}",{type:e.type?.name}),e.ngOnDestroy(),e._viewContainerRef.clear(),e.type){const t=e._viewContainerRef.injector;if(e._componentRef=e._viewContainerRef.createComponent(e.type,{injector:t}),e._componentRef){const t=e._componentRef.instance;t.itemSource=e.itemSource,t.form=e.form,yield(0,nt.K)(t.initialize()),t.invalidateVisuals()}}},function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){Ft(i,o,a,r,s,"next",t)}function s(t){Ft(i,o,a,r,s,"throw",t)}r(void 0)}))})()}ngOnDestroy(){this._componentRef&&(this._logger?.debug("PropertiesControlRendererDirective: destroying properties control {@type}",{type:this.type?.name}),this._componentRef?.destroy(),this._componentRef=null)}}function St(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}function Yt(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){St(i,o,a,r,s,"next",t)}function s(t){St(i,o,a,r,s,"throw",t)}r(void 0)}))}}function Qt(t,e){if(1&t&&(_.yn(0),_.Gk(1,8),_.BQ()),2&t){const t=e.$implicit,n=v.o(2);b.x(1),D.Q("propertiesControl",t)("form",n._optionsForm)("itemSource",null==n._component||null==n._component.options?null:n._component.options.typeMetadata)}}function Et(t,e){if(1&t&&(h.Tg(0,"div",1)(1,"div",2),L._(2,"Properties "),h.Tg(3,"span",3),L._(4),h.qZ()(),h.Tg(5,"div",4)(6,"label",5),L._(7,"Display name"),h.qZ(),h._U(8,"input",6),h.qZ(),f.Y(9,Qt,2,3,"ng-container",7),h.qZ()),2&t){const t=v.o();let e;b.x(4),T.As("",null!==(e=null==t._metadata||null==t._metadata.metaInfo?null:t._metadata.metaInfo.name)&&void 0!==e?e:null==t._component||null==t._component.options||null==t._component.options.typeMetadata?null:t._component.options.typeMetadata.name," - ",null==t._component||null==t._component.options||null==t._component.options.typeMetadata?null:t._component.options.typeMetadata.id,""),b.x(4),D.Q("formControl",t._displayName),b.x(1),D.Q("ngForOf",null==t._metadata||null==t._metadata.metaInfo||null==t._metadata.metaInfo.optionsMetadata?null:t._metadata.metaInfo.optionsMetadata.propertiesControls)}}Nt.ɵfac=function(t){return new(t||Nt)(p.Y(It.s_),p.Y(J.bZ,8))},Nt.ɵdir=u.lG({type:Nt,selectors:[["","propertiesControl",""]],inputs:{form:"form",itemSource:"itemSource",type:["propertiesControl","type"]},features:[Pt.T]});class Zt{constructor(t,e,n,o,a){this._manager=t,this._metadataExtractor=e,this._formModelBuilder=n,this._changeDetector=o,this._logger=a,this._initSubscriptions=new l.w,this._optionsFormSubscription=null,this._visible=!1,this._component=null,this._metadata=null,this._displayName=new yt.NI(null),this._optionsForm=void 0}ngOnInit(){this._initSubscriptions.add(this._manager.layoutChange.subscribe((()=>this._initProperties()))),this._initSubscriptions.add(this._manager.selectedChange.subscribe((()=>this._initProperties()))),this._displayName.valueChanges.subscribe((t=>{this._component?.options?.typeMetadata&&(0,B.EN)(t)&&(this._component.options.typeMetadata.displayName=t,this._component.options=this._component.options,this._manager.displayNameUpdated())})),this._initProperties()}ngOnDestroy(){this._initSubscriptions.unsubscribe(),this._optionsFormSubscription?.unsubscribe(),this._optionsFormSubscription=null}_initProperties(){var t=this;return Yt((function*(){if((0,B.EN)(t._manager.selectedComponent)){t._visible=!0;const e=t._manager.getComponent(t._manager.selectedComponent);e?(t._visible=!0,t._component=e,yield t._getMetadata()):t._hide()}else t._hide()}))()}_getMetadata(){var t=this;return Yt((function*(){t._component?.options?.typeMetadata?(t._displayName.setValue(t._component.options.typeMetadata.displayName||t._component.options.typeMetadata.id,{emitEvent:!1}),t._metadata=yield t._metadataExtractor.extractMetadata(t._component.options?.typeMetadata),t._metadata||(t._logger?.error("PropertiesEditorSAComponent: unable to get metadata {@source}",{package:t._component.options?.typeMetadata.package,name:t._component.options?.typeMetadata.name}),t._hide()),t._metadata?.metaInfo?.optionsMetadata?.modelType&&(t._optionsForm=t._formModelBuilder.build(new t._metadata.metaInfo.optionsMetadata.modelType(t._component?.options?.typeMetadata.options)),t._optionsFormSubscription?.unsubscribe(),t._optionsFormSubscription=t._optionsForm.valueChanges.subscribe((e=>{t._component?.options?.typeMetadata&&((0,G.l7)(!0,t._component.options.typeMetadata.options,e),t._component.options=t._component.options,t._component.invalidateVisuals())})))):t._hide(),t._changeDetector.detectChanges()}))()}_hide(){this._visible=!1,this._component=null,this._metadata=null,this._optionsForm=void 0,this._optionsFormSubscription?.unsubscribe(),this._optionsFormSubscription=null,this._changeDetector.detectChanges()}}Zt.ɵfac=function(t){return new(t||Zt)(p.Y(F.t),p.Y(ct.T),p.Y(Dt.p),p.Y(O.s),p.Y(J.bZ,8))},Zt.ɵcmp=u.Xp({type:Zt,selectors:[["properties-editor"]],standalone:!0,features:[Lt._([Dt.p]),I.j],decls:1,vars:1,consts:[["class","properties-main",4,"ngIf"],[1,"properties-main"],[1,"header"],[1,"bold"],[1,"form-group"],[1,"control-label"],["type","text",1,"form-control",3,"formControl"],[4,"ngFor","ngForOf"],[3,"propertiesControl","form","itemSource"]],template:function(t,e){1&t&&f.Y(0,Et,10,4,"div",0),2&t&&D.Q("ngIf",e._visible)},dependencies:[r.e,S.s,Y.O,bt.U,wt.Fj,Tt.JJ,Ot.oH,Mt,Nt],styles:["[_nghost-%COMP%]\n{\n    display: flex;\n    flex-direction: column;\n}\n\n.properties-main[_ngcontent-%COMP%]\n{\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    min-height: 0;\n    border: 1px solid #bbb;\n    background-color: #F5F5F5;\n}\n\n.header[_ngcontent-%COMP%]\n{\n    padding: 2px 8px;\n    background-color: #bbb;\n}\n\n.form-group[_ngcontent-%COMP%]\n{\n    margin: 4px 6px 0;\n}"],changeDetection:0});var qt=n(65715),Ut=n(15467),At=n(94761),$t=n(22164);const Rt="LAYOUT_DATA";class zt{constructor(t){this._storage=t}setLayoutData(t,e){const n=this._storage.get(Rt)??{};n[t]=e,this._storage.set(Rt,n)}getLayoutData(t){return this._storage.get(Rt)?.[t]??null}removeLayoutData(t){const e=this._storage.get(Rt)??{};delete e[t],this._storage.set(Rt,e)}getStoredLayouts(){const t=this._storage.get(Rt)??{};return Object.keys(t)}}zt.ɵfac=function(t){return new(t||zt)(at.LF(J.T0))},zt.ɵprov=it.Yz({token:zt,factory:zt.ɵfac,providedIn:"root"});var Ht=n(4489),jt=n(68965),Vt=n(31686),Kt=n(60405),Jt=n(47e3),Gt=n(75464);function Bt(t,e){if(1&t&&h._U(0,"ng-option",13),2&t){const t=e.$implicit;D.Q("value",t)("text",t)}}let Wt=class{constructor(t,e,n,o){this._manager=t,this._store=e,this._router=n,this._route=o,this._metadata=null,this._available=new yt.NI(""),this._name=new yt.NI(null),this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStoredLayouts(),this._route.params.subscribe((({id:t})=>{t?(this._name.setValue(t),this._available.setValue(t),this._metadata=this._store.getLayoutData(this._available.value)):(this._metadata={id:`stackPanel-${(0,G.Ox)(10)}`,package:"basic-components",name:"stackPanel",options:{children:[]}},this._name.setValue(""),this._available.setValue(""))}))}ngOnDestroy(){}_load(){this._metadata=this._store.getLayoutData(this._available.value),this._name.setValue(this._available.value),this._router.navigate(["/editor",this._available.value],{skipLocationChange:!1,replaceUrl:!0})}_save(){this._store.setLayoutData(this._name.value,this._manager.getMetadata()),this._availableNames=this._store.getStoredLayouts(),this._router.navigate(["/editor",this._name.value],{skipLocationChange:!1,replaceUrl:!0})}_delete(){this._store.removeLayoutData(this._available.value),this._availableNames=this._store.getStoredLayouts(),this._router.navigate(["/editor"],{skipLocationChange:!1,replaceUrl:!0})}_new(){this._metadata={id:`stackPanel-${(0,G.Ox)(10)}`,package:"basic-components",name:"stackPanel",options:{children:[]}},this._name.setValue(""),this._available.setValue(""),this._router.navigate(["/editor"],{skipLocationChange:!1,replaceUrl:!0})}};Wt.ɵfac=function(t){return new(t||Wt)(p.Y(F.t),p.Y(zt),p.Y(qt.F0),p.Y(Ut.gz))},Wt.ɵcmp=u.Xp({type:Wt,selectors:[["layout-editor-view"]],features:[Lt._([$t.N,F.t])],decls:26,vars:8,consts:[[1,"flex-row"],[2,"width","180px",3,"formControl"],["text","*unsaved*",3,"value"],[3,"value","text",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-danger",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","text",3,"formControl"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-row","margin-top-big","flex-1"],["label","Hierarchy"],["label","Palette"],[1,"flex-1"],[3,"layoutComponentRenderer"],[3,"value","text"]],template:function(t,e){1&t&&(h.Tg(0,"div",0)(1,"ng-select",1),h._U(2,"ng-option",2),f.Y(3,Bt,1,2,"ng-option",3),h.qZ(),h.Tg(4,"button",4),k.N("click",(function(){return e._delete()})),h.Tg(5,"span"),L._(6,"remove"),h.qZ()(),h.Tg(7,"button",5),k.N("click",(function(){return e._load()})),h.Tg(8,"span"),L._(9,"load"),h.qZ()(),h._U(10,"input",6),h.Tg(11,"button",5),k.N("click",(function(){return e._save()})),h.Tg(12,"span"),L._(13,"save"),h.qZ()(),h.Tg(14,"button",7),k.N("click",(function(){return e._new()})),h.Tg(15,"span"),L._(16,"new"),h.qZ()()(),h.Tg(17,"div",8)(18,"mat-tab-group")(19,"mat-tab",9),h._U(20,"components-tree"),h.qZ(),h.Tg(21,"mat-tab",10),h._U(22,"components-palette"),h.qZ()(),h.Tg(23,"div",11),_.Gk(24,12),h.qZ(),h._U(25,"properties-editor"),h.qZ()),2&t&&(b.x(1),D.Q("formControl",e._available),b.x(1),D.Q("value",""),b.x(1),D.Q("ngForOf",e._availableNames),b.x(1),D.Q("disabled",!e._available.value),b.x(3),D.Q("disabled",!e._available.value),b.x(3),D.Q("formControl",e._name),b.x(1),D.Q("disabled",!e._name.value),b.x(13),D.Q("layoutComponentRenderer",e._metadata))},dependencies:[S.s,wt.Fj,Tt.JJ,Ot.oH,Ht.x,jt.w,Vt.v,Kt.i,K,vt,Zt,Jt.SP,Gt.u],encapsulation:2,changeDetection:0}),Wt=(0,o.gn)([(0,At.N)({path:"editor"}),(0,At.N)({path:"editor/:id"}),(0,o.w6)("design:paramtypes",[F.t,zt,qt.F0,Ut.gz])],Wt);var Xt=n(80149);function te(t,e){if(1&t&&h._U(0,"ng-option",5),2&t){const t=e.$implicit;D.Q("value",t)("text",t)}}let ee=class{constructor(t,e,n){this._store=t,this._router=e,this._route=n,this._available=new yt.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStoredLayouts(),this._route.params.subscribe((({id:t})=>{t&&(this._available.setValue(t),this._metadata=this._store.getLayoutData(t)),this._available.valueChanges.subscribe((t=>{this._router.navigate(["/preview",t],{skipLocationChange:!1,replaceUrl:!0})}))}))}ngOnDestroy(){}};ee.ɵfac=function(t){return new(t||ee)(p.Y(zt),p.Y(qt.F0),p.Y(Ut.gz))},ee.ɵcmp=u.Xp({type:ee,selectors:[["layout-preview-view"]],features:[Lt._([F.t])],decls:6,vars:3,consts:[[3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll"],[3,"layoutComponentRenderer"],[3,"value","text"]],template:function(t,e){1&t&&(h.Tg(0,"div")(1,"ng-select",0),f.Y(2,te,1,2,"ng-option",1),h.qZ()(),h.Tg(3,"div",2)(4,"div",3),_.Gk(5,4),h.qZ()()),2&t&&(b.x(1),D.Q("formControl",e._available),b.x(1),D.Q("ngForOf",e._availableNames),b.x(3),D.Q("layoutComponentRenderer",e._metadata))},dependencies:[S.s,Tt.JJ,Ot.oH,Ht.x,jt.w,Vt.v,Kt.i],encapsulation:2,changeDetection:0}),ee=(0,o.gn)([(0,Xt.R)("","preview"),(0,At.N)({path:"preview"}),(0,At.N)({path:"preview/:id"}),(0,o.w6)("design:paramtypes",[zt,qt.F0,Ut.gz])],ee);const ne=[Wt,ee];var oe=n(42983);let ae=class{};ae.ɵfac=function(t){return new(t||ae)},ae.ɵmod=u.oA({type:ae}),ae.ɵinj=it.cJ({imports:[oe._J,oe.No,oe.nP,K,vt,Zt,a.N]}),ae=(0,o.gn)([(0,i.P)(ne)],ae)},59951:(t,e,n)=>{n.d(e,{i:()=>l});var o=n(27052),a=n(4644),i=n(5348),r=n(25626),s=n(77842),c=n(38327);class l{}l.ɵfac=function(t){return new(t||l)},l.ɵmod=s.oA({type:l}),l.ɵinj=c.cJ({imports:[o.e,a.U,i.A,r.F]})}}]);
//# sourceMappingURL=297.chunk.ce9899273e56d96308d4.js.map