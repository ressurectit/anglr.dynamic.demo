(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[2836],{24405:(t,e,n)=>{var s={"./styleBlock/type":[92030,278,7412]};function i(t){if(!n.o(s,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=s[t],i=e[0];return Promise.all(e.slice(1).map(n.e)).then((()=>n(i)))}i.keys=()=>Object.keys(s),i.id=24405,t.exports=i},56179:(t,e,n)=>{"use strict";n.d(e,{I3:()=>y,vQ:()=>p,El:()=>g});var s=n(8477),i=n(71785),r=n(46480),a=n(11776),o=n(38327);function c(t,e,n,s,i,r,a){try{var o=t[r](a),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(s,i)}class u{constructor(t){this._logger=t}tryToGet(t){var e,s=this;return(e=function*(){if("css-components"!==t.package)return null;try{return s._logger?.debug("CssDynamicModuleItemsProvider: trying to get item {@item}",{name:t.name,package:t.package}),yield n(24405)(`./${t.name}/type`)}catch(e){s._logger?.debug("CssDynamicModuleItemsProvider: item {@item} was not found, reason: "+e,{name:t.name,package:t.package})}return null},function(){var t=this,n=arguments;return new Promise((function(s,i){var r=e.apply(t,n);function a(t){c(r,s,i,a,o,"next",t)}function o(t){c(r,s,i,a,o,"throw",t)}a(void 0)}))})()}}function d(t,e,n,s,i,r,a){try{var o=t[r](a),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(s,i)}u.ɵfac=function(t){return new(t||u)(a.LF(r.bZ,8))},u.ɵprov=o.Yz({token:u,factory:u.ɵfac});class l{constructor(t){this._logger=t}tryToGet(t){var e,s=this;return(e=function*(){try{return s._logger?.debug("CssDynamicModuleTypesProvider: trying to get types for module {@module}",{moduleName:t.package}),"css-components"===t.package?yield n.e(5416).then(n.bind(n,85416)):null}catch(e){s._logger?.debug("CssDynamicModuleTypesProvider: module {@module} was not found, reason: "+e,{moduleName:t.package})}return null},function(){var t=this,n=arguments;return new Promise((function(s,i){var r=e.apply(t,n);function a(t){d(r,s,i,a,o,"next",t)}function o(t){d(r,s,i,a,o,"throw",t)}a(void 0)}))})()}}l.ɵfac=function(t){return new(t||l)(a.LF(r.bZ,8))},l.ɵprov=o.Yz({token:l,factory:l.ɵfac});const h={provide:s.Aw,useClass:u,multi:!0},v={provide:i.sc,useClass:l,multi:!0};function y(){return[h]}function p(){return[h,v]}function g(){return[...y()]}},7842:(t,e,n)=>{"use strict";n.d(e,{Z:()=>D});var s=n(11776),i=n(35375),r=n(60405),a=n(39969),o=n(98084);class c{constructor(t,e,n){this.hotkeys=t,this.historyManager=e,this.metadataStorage=n}destroy(){this.hotkeys.destroy()}init(){this.hotkeys.hotkeys.add(new o.q("ctrl+s",(()=>(this.metadataStorage.save(),!1)),["INPUT","TEXTAREA"],"Saves current state of editor")),this.hotkeys.hotkeys.add(new o.q("ctrl+z",(()=>(this.historyManager.undo(),!1)),["INPUT","TEXTAREA"],"Undo current state of editor")),this.hotkeys.hotkeys.add(new o.q("ctrl+y",(()=>(this.historyManager.redo(),!1)),["INPUT","TEXTAREA"],"Redo current state of editor"))}}var u=n(22804),d=n(49891),l=n(38223),h=n(41733),v=n(71378),y=n(21813),p=n(2831),g=n(71785),f=n(79440),m=n(68961),x=n(13691),b=n(73379),w=n(36973),k=n(82568),I=n(80827),P=n(4477),T=n(66794),_=n(73301),E=n(2538),S=n(75464);class D{constructor(t,e,n){this.hotkeys=t,this.history=e,this.changeDetector=n,this.initSubscriptions=new l.w,this.metadata=null,t.init()}ngOnInit(){this.initSubscriptions.add(this.history.pop.subscribe((t=>{this.metadata=t,this.changeDetector.detectChanges()})))}ngOnChanges(t){(0,d.$)("metadata")in t&&(this.history.clean(),this.metadata&&this.history.setInitialState(this.metadata))}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.hotkeys.destroy()}}D.ɵfac=function(t){return new(t||D)(f.Y(c),f.Y(g.dB),f.Y(m.s))},D.ɵcmp=x.Xp({type:D,selectors:[["layout-editor"]],inputs:{metadata:"metadata"},standalone:!0,features:[b._([p.NX,{provide:c,useFactory:(t,e)=>new c(t,(0,s.f3)(g.dB),e),deps:[a.H,u.I]}]),w.T,k.j],decls:9,vars:1,consts:[[1,"flex-row","margin-top-big","flex-1"],["label","Hierarchy"],["label","Palette"],[1,"flex-1"],[3,"layoutComponentRenderer"],[2,"width","450px"]],template:function(t,e){1&t&&(I.Tg(0,"div",0)(1,"mat-tab-group")(2,"mat-tab",1),I._U(3,"components-tree"),I.qZ(),I.Tg(4,"mat-tab",2),I._U(5,"components-palette"),I.qZ()(),I.Tg(6,"div",3),P.Gk(7,4),I.qZ(),I._U(8,"properties-editor",5),I.qZ()),2&t&&(T.x(7),_.Q("layoutComponentRenderer",e.metadata))},dependencies:[v.D,h.O,y.M,r.i,i.N,E.SP,S.u],styles:["[_nghost-%COMP%]{display: flex;}"],changeDetection:0})},2831:(t,e,n)=>{"use strict";n.d(e,{G5:()=>C,Nc:()=>E,Q3:()=>M,TA:()=>S,NX:()=>D,r4:()=>F,tl:()=>A,f4:()=>O,qF:()=>N});var s=n(60640),i=n(11776),r=n(43939),a=n(53682),o=n(13457),c=n(38327);class u{constructor(t){this.getStateFn=t,this.activeIndex=null,this.saveIndex=null,this.states=[],this.enabled=!0,this.popSubject=new a.xQ,this.historyChangeSubject=new a.xQ}get canUndo(){return!(0,r.fp)(this.activeIndex)&&this.activeIndex>0}get canRedo(){return!(0,r.fp)(this.activeIndex)&&this.activeIndex+1<this.states.length}get saved(){return this.activeIndex===this.saveIndex}get pop(){return this.popSubject.asObservable()}get historyChange(){return this.historyChangeSubject.asObservable()}get state(){return(0,r.fp)(this.activeIndex)?null:this.states[this.activeIndex]}undo(){this.canUndo&&this.activeIndex&&(this.activeIndex--,this.popSubject.next(this.states[this.activeIndex]))}redo(){this.canRedo&&this.activeIndex&&(this.activeIndex++,this.popSubject.next(this.states[this.activeIndex]))}getNewState(){this.enabled&&(this.states.length>=100&&this.states.shift(),this.activeIndex&&this.activeIndex+1<this.states.length&&this.states.splice(this.activeIndex+1,this.states.length-(this.activeIndex+1)),this.states.push(JSON.parse(JSON.stringify(this.getStateFn()))),this.activeIndex=this.states.length-1,this.historyChangeSubject.next())}save(){this.saveIndex=this.activeIndex}setInitialState(t){this.states.push(JSON.parse(JSON.stringify(t))),this.activeIndex=this.states.length-1,this.save()}clean(){this.activeIndex=null,this.saveIndex=null,this.states=[]}enable(){this.enabled=!0}disable(){this.enabled=!1}}u.ɵfac=function(t){return new(t||u)(i.LF(o.z))},u.ɵprov=c.Yz({token:u,factory:u.ɵfac});var d=n(65569),l=n(44677),h=n(12193),v=n(8477),y=n(46480);function p(t,e,n,s,i,r,a){try{var o=t[r](a),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(s,i)}class g{constructor(t){this._logger=t}tryToGet(t){var e,s=this;return(e=function*(){if("@anglr/dynamic/layout-editor"!=t.package)return null;try{if(s._logger?.debug("LayoutDesignerDynamicModuleItemsProvider: trying to get item {@item}",{name:t.name,package:t.package}),"layout-designer"==t.name)return yield n.e(4403).then(n.bind(n,64403))}catch(e){s._logger?.warn("LayoutDesignerDynamicModuleItemsProvider: item {@item} was not found, reason:"+e,{name:t.name,package:t.package})}return s._logger?.debug("LayoutDesignerDynamicModuleItemsProvider: item {@item} was not found",{name:t.name,package:t.package}),null},function(){var t=this,n=arguments;return new Promise((function(s,i){var r=e.apply(t,n);function a(t){p(r,s,i,a,o,"next",t)}function o(t){p(r,s,i,a,o,"throw",t)}a(void 0)}))})()}}function f(t,e,n,s,i,r,a){try{var o=t[r](a),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(s,i)}g.ɵfac=function(t){return new(t||g)(i.LF(y.bZ,8))},g.ɵprov=c.Yz({token:g,factory:g.ɵfac});class m{constructor(t){this._logger=t}tryToGet(t){var e,s=this;return(e=function*(){try{switch(s._logger?.debug("DefaultDynamicModuleTypesProvider: trying to get types for module {@module}",{moduleName:t.package}),t.package){case"basic-components":return yield n.e(4771).then(n.bind(n,4771));case"material-components":return yield n.e(1125).then(n.bind(n,41125));default:return null}}catch(e){s._logger?.debug("DefaultDynamicModuleTypesProvider: module {@module} was not found, reason: "+e,{moduleName:t.package})}return null},function(){var t=this,n=arguments;return new Promise((function(s,i){var r=e.apply(t,n);function a(t){f(r,s,i,a,o,"next",t)}function o(t){f(r,s,i,a,o,"throw",t)}a(void 0)}))})()}}m.ɵfac=function(t){return new(t||m)(i.LF(y.bZ,8))},m.ɵprov=c.Yz({token:m,factory:m.ɵfac});var x=n(83434),b=n(71785),w=n(94596),k=n(97149),I=n(9142),P=n(87606);function T(t,e,n,s,i,r,a){try{var o=t[r](a),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(s,i)}const _=function(){var t,e=(t=function*(t,e){const n=yield(0,P.K)((0,l.L)(t,e)),s=yield(0,P.K)((0,I.k)(t,e)),i=n?.data;if(e?.debug("layoutDesignerTypeExtractor: trying to extract default dynamic data"),!i?.layoutEditorDesignerType)return null;const r=yield i?.layoutEditorDesignerType;return r?{data:r,childExtensions:s?.childExtensions,extensions:s?.extensions}:null},function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function a(t){T(r,s,i,a,o,"next",t)}function o(t){T(r,s,i,a,o,"throw",t)}a(void 0)}))});return function(t,n){return e.apply(this,arguments)}}(),E={provide:v.gM,useFactory:t=>new d.$([_],t),deps:[[new s.Fi,y.bZ]],multi:!0},S={provide:v.Aw,useClass:g,multi:!0},D={provide:v.xM,useValue:function(t){return{id:`${t.id}-designer`,package:"@anglr/dynamic/layout-editor",name:"layout-designer",options:{typeMetadata:t}}}},M={provide:b.sc,useClass:m,multi:!0},C={provide:b.FX,useFactory:t=>new d.$([l.L],t),deps:[[new s.Fi,y.bZ]],multi:!0},F={provide:b.RI,useValue:[w.$]},N={provide:b.QT,useFactory:()=>new h.S((0,i.f3)(b.sc),(0,i.f3)(b.FX),k.G,(0,i.f3)(y.bZ,{optional:!0})??void 0)},A={provide:o.z,useFactory:()=>{const t=(0,i.f3)(x.t);return t.getMetadata.bind(t)}},O={provide:b.dB,useClass:u}},94596:(t,e,n)=>{"use strict";n.d(e,{$:()=>s});const s=Symbol("LayoutPropertyMetadata")},97149:(t,e,n)=>{"use strict";n.d(e,{G:()=>d,_:()=>u});var s=n(2991),i=n(43939),r=n(2831),a=n(85902),o=n(43671),c=n(83434);function u(t=!0){return[...t?[r.Nc]:[],...(0,s._)(),r.TA,r.Q3,r.G5,r.r4,r.qF,a.T,o.L,c.t,r.f4,r.tl]}const d=function(t){return!((0,i.fp)(t?.data)||!Array.isArray(t.data))}},11650:(t,e,n)=>{"use strict";n.d(e,{c:()=>c});var s=n(99109),i=n(7842),r=n(97149),a=n(13691),o=n(38327);class c{static withProviders(t=!0){return{ngModule:c,providers:[(0,r._)(t)]}}}c.ɵfac=function(t){return new(t||c)},c.ɵmod=a.oA({type:c}),c.ɵinj=o.cJ({imports:[i.Z,s.u]})},2991:(t,e,n)=>{"use strict";n.d(e,{h:()=>g,_:()=>f});var s=n(43939),i=n(60640),r=n(11776),a=n(46480),o=n(86707),c=n(65569),u=n(44677),d=n(9142),l=n(12193),h=n(8477);const v={provide:h.Aw,useClass:o.o,multi:!0},y={provide:h.gM,useFactory:t=>new c.$([u.L,d.k],t),deps:[[new i.Fi,a.bZ]],multi:!0},p={provide:h.Vl,useFactory:()=>new l.S((0,r.f3)(h.Aw),(0,r.f3)(h.gM),g,(0,r.f3)(a.bZ,{optional:!0})??void 0)},g=function(t){return!((0,s.fp)(t?.data)||!(0,s.P9)(t.data)||(0,s.EN)(t?.childExtensions)&&(!Array.isArray(t.childExtensions)||t.childExtensions.some((t=>!(0,s.P9)(t))))||(0,s.EN)(t?.extensions)&&(!Array.isArray(t.extensions)||t.extensions.some((t=>!(0,s.P9)(t)))))};function f(){return[p,v,y]}},99109:(t,e,n)=>{"use strict";n.d(e,{u:()=>a});var s=n(2991),i=n(13691),r=n(38327);class a{static withProviders(){return{ngModule:a,providers:[(0,s._)()]}}}a.ɵfac=function(t){return new(t||a)},a.ɵmod=i.oA({type:a}),a.ɵinj=r.cJ({})},9142:(t,e,n)=>{"use strict";n.d(e,{k:()=>i});var s=n(43939);const i=(t,e)=>{const n=t,i=n.extensions;return e?.debug("extensionsExportsExtractor: trying to extract dynamic item extensions"),i&&(0,s.wV)(i)&&(i.extensions||i.childExtensions)?{extensions:i.extensions,childExtensions:i.childExtensions}:n.childExtensions||n.extensions?{extensions:n.extensions,childExtensions:n.childExtensions}:null}}}]);
//# sourceMappingURL=2836.chunk.7fabff53a69a7b5acb4d.js.map