"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[2471],{52191:(e,t,n)=>{n.r(t),n.d(t,{ListBlockDesignerSAComponent:()=>_});var o=n(11776),r=n(60405),i=n(61092),a=n(57466),s=n(43424),l=n(43801),c=n(13691),h=n(47098),d=n(82568),u=n(15686),g=n(73301);function p(e,t){}class _ extends s.${constructor(){super(...arguments),this.designer=(0,o.f3)(i.q)}onInit(){var e;this.designer.options&&((e=this.designer.options.typeMetadata).scope??(e.scope=(0,a.Ox)(10)))}}_.ɵfac=function(){let e;return function(t){return(e||(e=l.n5(_)))(t||_)}}(),_.ɵcmp=c.Xp({type:_,selectors:[["list-block-designer"]],standalone:!0,features:[h.q,d.j],decls:1,vars:1,consts:[[3,"layoutComponentRenderer"]],template:function(e,t){1&e&&u.Y(0,p,0,0,"ng-template",0),2&e&&g.Q("layoutComponentRenderer",null==t.options?null:t.options.template)},dependencies:[r.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0})},71785:(e,t,n)=>{n.d(t,{RI:()=>v,Yh:()=>C,dB:()=>x,FX:()=>y,QT:()=>w,sc:()=>P,dK:()=>b});var o=n(40296),r=n(20350),i=n(39273),a=n(43801),s=n(13691),l=n(47098),c=n(80827),h=n(65589),d=n(73301),u=n(70983),g=n(77470),p=n(27635),_=n(61939);class m extends i.L{}m.ɵfac=function(){let e;return function(t){return(e||(e=a.n5(m)))(t||m)}}(),m.ɵcmp=s.Xp({type:m,selectors:[["input-boolean"]],features:[l.q],decls:2,vars:3,consts:[["type","checkbox",1,"properties-form-control",3,"formControl"]],template:function(e,t){1&e&&(c._U(0,"input",0),h.AL(1,"asRequired")),2&e&&d.Q("formControl",h.lc(1,1,t._control))},dependencies:[u.W,g.JJ,p.oH,_.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0});var f=n(21147);const v=new o.O("LAYOUT_EDITOR_PROPERTY_METADATA_PROPERTIES"),C=new o.O("LAYOUT_EDITOR_PROPERTY_TYPE_CONTROLS",{providedIn:"root",factory:()=>({inputString:r.q,inputBoolean:m,selectValue:f.f})}),y=new o.O("LAYOUT_MODULE_TYPES_DATA_EXTRACTORS"),P=new o.O("LAYOUT_MODULE_TYPES_PROVIDERS"),w=new o.O("LAYOUT_MODULE_TYPES_LOADER"),x=new o.O("LAYOUT_HISTORY_MANAGER"),b=new o.O("REFRESH_PALETTE_OBSERVABLES")},10219:(e,t,n)=>{n.d(t,{N:()=>i});var o=n(13691),r=n(38327);class i{}i.ɵfac=function(e){return new(e||i)},i.ɵmod=o.oA({type:i}),i.ɵinj=r.cJ({})},52053:(e,t,n)=>{n.d(t,{E:()=>i});var o=n(86463),r=n(38327);class i{constructor(){this.dropDataChangeSubject=new o.x,this.dropPlaceholderPreview=null,this.newDropPlaceholderPreviewSubject=new o.x,this.oldDropPlaceholderPreviewSubject=new o.x}get dropDataChange(){return this.dropDataChangeSubject.asObservable()}get newDropPlaceholderPreviewChange(){return this.newDropPlaceholderPreviewSubject.asObservable()}get oldDropPlaceholderPreviewChange(){return this.oldDropPlaceholderPreviewSubject.asObservable()}get dropPlaceholderPreviewIndex(){return this.dropPlaceholderPreview?.index??null}setDropData(e){this.dropDataChangeSubject.next(e)}setDropPlaceholderPreview(e){e?.index===this.dropPlaceholderPreview?.index&&e?.parentId===this.dropPlaceholderPreview?.parentId||(this.dropPlaceholderPreview&&this.oldDropPlaceholderPreviewSubject.next(this.dropPlaceholderPreview),this.dropPlaceholderPreview=e,this.dropPlaceholderPreview&&this.newDropPlaceholderPreviewSubject.next(this.dropPlaceholderPreview))}}i.ɵfac=function(e){return new(e||i)},i.ɵprov=r.Yz({token:i,factory:i.ɵfac})},20350:(e,t,n)=>{n.d(t,{q:()=>p});var o=n(39273),r=n(43801),i=n(13691),a=n(47098),s=n(80827),l=n(65589),c=n(73301),h=n(49280),d=n(77470),u=n(27635),g=n(61939);class p extends o.L{}p.ɵfac=function(){let e;return function(t){return(e||(e=r.n5(p)))(t||p)}}(),p.ɵcmp=i.Xp({type:p,selectors:[["input-string"]],features:[a.q],decls:2,vars:3,consts:[["type","text",1,"properties-form-control",3,"formControl"]],template:function(e,t){1&e&&(s._U(0,"input",0),l.AL(1,"asRequired")),2&e&&c.Q("formControl",l.lc(1,1,t._control))},dependencies:[h.Fj,d.JJ,u.oH,g.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0})},39273:(e,t,n)=>{n.d(t,{L:()=>l});var o=n(79440),r=n(68961),i=n(13691);function a(e,t,n,o,r,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function s(e){a(i,o,r,s,l,"next",e)}function l(e){a(i,o,r,s,l,"throw",e)}s(void 0)}))}}class l{constructor(e){this._changeDetector=e,this._initialized=!1,this.values=[]}get control(){return this._control}set control(e){this._control=e,this._controlSet()}ngOnInit(){var e=this;return s((function*(){e._initialized||(e._initialized=!0,yield e._initialize())}))()}initialize(){var e=this;return s((function*(){yield e.ngOnInit()}))()}invalidateVisuals(){this._changeDetector.detectChanges()}_initialize(){}_controlSet(){}}l.ɵfac=function(e){return new(e||l)(o.Y(r.s))},l.ɵdir=i.lG({type:l,inputs:{control:"control",values:"values"}})},21147:(e,t,n)=>{n.d(t,{f:()=>C});var o=n(39273),r=n(80827),i=n(73301),a=n(43801),s=n(13691),l=n(47098),c=n(65589),h=n(15686),d=n(66794),u=n(12311),g=n(24881),p=n(17790),_=n(77470),m=n(27635),f=n(61939);function v(e,t){if(1&e&&r._U(0,"option",2),2&e){const e=t.$implicit;i.Q("value",e)("text",e)}}class C extends o.L{}C.ɵfac=function(){let e;return function(t){return(e||(e=a.n5(C)))(t||C)}}(),C.ɵcmp=s.Xp({type:C,selectors:[["select-value"]],features:[l.q],decls:3,vars:4,consts:[[1,"properties-form-control",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"]],template:function(e,t){1&e&&(r.Tg(0,"select",0),c.AL(1,"asRequired"),h.Y(2,v,1,2,"option",1),r.qZ()),2&e&&(i.Q("formControl",c.lc(1,2,t._control)),d.x(2),i.Q("ngForOf",t.values))},dependencies:[u.s,g.YN,p.Kr,g.EJ,_.JJ,m.oH,f.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0})},98906:(e,t,n)=>{n.d(t,{z:()=>i});var o=n(86463),r=n(38327);class i{constructor(){this._dragging=!1,this._draggingChange=new o.x}get dragging(){return this._dragging}get draggingChange(){return this._draggingChange.asObservable()}setDragging(e){this._dragging!=e&&(this._dragging=e,this._draggingChange.next())}}i.ɵfac=function(e){return new(e||i)},i.ɵprov=r.Yz({token:i,factory:i.ɵfac})},26938:(e,t,n)=>{n.d(t,{$:()=>g});var o=n(46480);function r(e,t,n,o,r,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,l,"next",e)}function l(e){r(a,o,i,s,l,"throw",e)}s(void 0)}))}}class a{constructor(e,t,n){this._layoutMetadata=e,this._extractor=t,this._logger=n,this._items=[],this._initialized=!1,this._initPromise=null}[Symbol.asyncIterator](){let e=0;const t=this._initPromise??(this._initPromise=this._getInitPromise()),n=this._items;return{next:()=>i((function*(){return yield t,e<n.length?{value:n[e++],done:!1}:{value:n[e-1],done:!0}}))()}}forEach(e){var t=this;return i((function*(){yield t._initPromise??(t._initPromise=t._getInitPromise());for(const n of t._items)e(n.metadata,n.parent,n.levelIndex,n.level)}))()}_getComponents(){var e=this;return i((function*(){yield e._getComponent(e._layoutMetadata,null,0,0)}))()}_getComponent(e,t,n,o){var r=this;return i((function*(){const i={metadata:e,parent:t,levelIndex:n,level:o};r._items.push(i);const a=yield r._extractor.extractMetadata(e);if(!a)return void r._logger?.debug("LayoutComponentsIterator: failed to get metadata for iterator! {@data}",{package:e.package,name:e.name});if(!a.getDescendants)return;const s=a.getDescendants(e.options);for(let e=0;e<s.length;e++)yield r._getComponent(s[e],i,e,o+1)}))()}_getInitPromise(){var e=this;return i((function*(){e._initialized||(e._initialized=!0,yield e._getComponents())}))()}}function s(e,t,n,o,r,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){s(i,o,r,a,l,"next",e)}function l(e){s(i,o,r,a,l,"throw",e)}a(void 0)}))}}class c{constructor(e,t,n){this.layoutMetadata=e,this.extractor=t,this.logger=n,this.items=[],this.initialized=!1,this.initPromise=null}[Symbol.asyncIterator](){let e=0;const t=this.initPromise??(this.initPromise=this.getInitPromise()),n=this.items;return{next:()=>l((function*(){return yield t,e<n.length?{value:n[e++],done:!1}:{value:n[e-1],done:!0}}))()}}getChildren(){var e=this;return l((function*(){yield e.getComponent(e.layoutMetadata)}))()}getComponent(e){var t=this;return l((function*(){const n=yield t.extractor.extractMetadata(e);if(!n)return void t.logger?.debug("LayoutComponentsChildrenIterator: failed to get metadata for children iterator! {@data}",{package:e.package,name:e.name});if(!n.getDescendants)return;const o=n.getDescendants(e.options);for(let e=0;e<o.length;e++)t.items.push({index:e,metadata:o[e]})}))()}getInitPromise(){var e=this;return l((function*(){e.initialized||(e.initialized=!0,yield e.getChildren())}))()}}var h=n(11776),d=n(38327),u=n(85902);class g{constructor(e,t){this.extractor=e,this.logger=t}getIteratorFor(e){return new a(e,this.extractor,this.logger)}getChildrenIteratorFor(e){return new c(e,this.extractor,this.logger)}}g.ɵfac=function(e){return new(e||g)(h.LF(u.T),h.LF(o.bZ,8))},g.ɵprov=d.Yz({token:g,factory:g.ɵfac})},85902:(e,t,n)=>{n.d(t,{T:()=>l});var o=n(8477),r=n(46480),i=n(11776),a=n(38327);function s(e,t,n,o,r,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}class l{constructor(e,t){this._loader=e,this._logger=t,this._cache={}}extractMetadata(e){var t,n=this;return(t=function*(){const t=`${e.package}-${e.name}`;if(n._cache[t])return n._cache[t];const o=yield n._loader.loadItem(e);if(!o)return null;const r=o.data;if(!r.layoutEditorMetadata)return n._logger?.warn("LayoutEditorMetadataExtractor: Missing metadata! ",{package:e.package,name:e.name}),null;n._logger?.debug("LayoutEditorMetadataExtractor: Reading metadata! ",{package:e.package,name:e.name});const i=yield r.layoutEditorMetadata;return Object.freeze(i),n._cache[t]=i,i},function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(e){s(i,o,r,a,l,"next",e)}function l(e){s(i,o,r,a,l,"throw",e)}a(void 0)}))})()}}l.ɵfac=function(e){return new(e||l)(i.LF(o.Vl),i.LF(r.bZ,8))},l.ɵprov=a.Yz({token:l,factory:l.ɵfac})},83434:(e,t,n)=>{n.d(t,{t:()=>l});var o=n(46480),r=n(43939),i=n(86463),a=n(11776),s=n(38327);class l{constructor(e){this._logger=e,this._components={},this._rootComponentId=null,this._selectedComponent=null,this._highlightedComponent=null,this._layoutChange=new i.x,this._selectedChange=new i.x,this._highlightedChange=new i.x,this._displayNameChanges=new i.x,this._flatTree=null}get selectedComponent(){return this._selectedComponent}get highlightedComponent(){return this._highlightedComponent}get root(){return(0,r.fp)(this._rootComponentId)?null:this._components[this._rootComponentId]}get layoutChange(){return this._layoutChange.asObservable()}get selectedChange(){return this._selectedChange.asObservable()}get highlightedChange(){return this._highlightedChange.asObservable()}get displayNameChange(){return this._displayNameChanges.asObservable()}get flatTree(){return this._flatTree??(this._flatTree=this._buildFlatTree())}selectComponent(e){this._selectedComponent=e??null,this._selectedChange.next()}unselectComponent(){this._selectedComponent=null,this._selectedChange.next()}highlightComponent(e){this._highlightedComponent=e??null,this._highlightedChange.next()}cancelHighlightedComponent(){this._highlightedComponent=null,this._highlightedChange.next()}registerLayoutDesignerComponent(e,t,n){if((0,r.fp)(n)&&(this._rootComponentId=t),this._components[t])return this._logger?.error(`LayoutEditorMetadataManager: Component with id ${t} is already registered!`),!1;const o=n?this._components[n]:null,i={component:e,parent:o,children:[]};return this._components[t]=i,o&&o.children.push(i),this._flatTree=null,this._layoutChange.next(),this._logger?.debug("LayoutEditorMetadataManager: Registering component {@id}",t),!0}getComponent(e){return this._components[e]?.component??null}getParent(e){return this._components[e]?.parent?.component??null}getIndex(e){const t=this._components[e];return t&&t.parent?t.parent.children.indexOf(t):null}getComponentDef(e){return this._components[e]??null}unregisterLayoutDesignerComponent(e){const t=this._components[e];if(delete this._components[e],t?.parent){const e=t.parent.children.indexOf(t);t.parent.children.splice(e,1)}e===this._rootComponentId&&(this._rootComponentId=null),this._flatTree=null,this._layoutChange.next(),this._logger?.debug("LayoutEditorMetadataManager: Unregistering component {@id}",e)}displayNameUpdated(){this._displayNameChanges.next()}getMetadata(){return(0,r.fp)(this._rootComponentId)||!this._components[this._rootComponentId]?null:this._components[this._rootComponentId].component.options?.typeMetadata??null}_buildFlatTree(){if((0,r.fp)(this._rootComponentId))return[];const e=this._components[this._rootComponentId];return e?this._buildFlatTreeForComponent(e):[]}_buildFlatTreeForComponent(e){let t=[e];for(const n of e.children)t=t.concat(this._buildFlatTreeForComponent(n));return t}}l.ɵfac=function(e){return new(e||l)(a.LF(o.bZ,8))},l.ɵprov=s.Yz({token:l,factory:l.ɵfac})},61939:(e,t,n)=>{n.d(t,{i:()=>r});var o=n(13691);class r{transform(e,t,n){return e??t}}r.ɵfac=function(e){return new(e||r)},r.ɵpipe=o.Yj({name:"asRequired",type:r,pure:!0})},27049:(e,t,n)=>{n.d(t,{r:()=>r});var o=n(43939);function r(e,t,n){const r=n.value??n.get?.();if(!(0,o.mf)(r))throw new Error(`Unable to apply @BindThis decorator to '${t.toString()}', it is not a method.`);return{configurable:!0,get(){const e=r.bind(this);return Object.defineProperty(this,t,{value:e,configurable:!0,writable:!0}),e}}}}}]);
//# sourceMappingURL=2471.chunk.e0beadcb68df54ca2a6c.js.map