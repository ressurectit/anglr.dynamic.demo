(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[5184],{85184:(t,e,a)=>{"use strict";a.r(e),a.d(e,{RelationsWithLayoutEditorModule:()=>ht});var n=a(14392),o=a(76668),r=a(27052),i=a(48659),s=a(97212),l=a(89001),u=a(35648),c=a(66888),d=a(94761),g=a(8477),p=a(71785),m=a(97149),y=a(56454),h=a(22804),v=a(17505),_=a(44055),f=a(56179),b=a(99043),w=a(57489),k=a(57466),x=a(27049),M=a(85638),N=a(89952),C=a(77653),L=a(79440),D=a(77842),T=a(73379),U=a(80827),Y=a(41853),O=a(72891),R=a(66794),F=a(73301),P=a(84967),Q=a(23061),q=a(86825);let Z=class{constructor(t,e){this._store=t,this.history=e,this._metadata=null}get emptyMetadata(){return{id:`stackPanel-${(0,k.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}_getMetadata(t){return{layout:t}}_loadDemo(){this._metadata=M.F.demoLayoutWithRelations}};Z.ɵfac=function(t){return new(t||Z)(L.Y(N.U),L.Y(p.dB))},Z.ɵcmp=D.Xp({type:Z,selectors:[["layout-editor-view"]],features:[T._([y.z,{provide:g.qO,useFactory:t=>new h.I((e=>t.getData(e)?.layout)),deps:[N.U]},(0,m._)(),(0,f.vQ)(),(0,b.gJ)(),(0,w.hd)(),{provide:v.L,useClass:C.y}])],decls:9,vars:4,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/layout",3,"store","getMetadataCallback","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(U.Tg(0,"div",0)(1,"button",1)(2,"span"),Y._(3,"go back"),U.qZ()(),U.Tg(4,"load-save-new",2),O.N("metadataChange",(function(t){let a;return e._metadata=null!==(a=null==t?null:t.layout)&&void 0!==a?a:e.emptyMetadata})),U.qZ(),U.Tg(5,"button",3),O.N("click",(function(){return e._loadDemo()})),U.Tg(6,"span"),Y._(7,"demo"),U.qZ()()(),U._U(8,"layout-editor",4)),2&t&&(R.x(4),F.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history),R.x(4),F.Q("metadata",e._metadata))},dependencies:[P.v,Q.Z,q.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([x.r,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",Object)],Z.prototype,"_getMetadata",null),Z=(0,n.gn)([(0,d.N)({path:"layout"}),(0,d.N)({path:"layout/:id"}),(0,n.w6)("design:paramtypes",[N.U,_.Y])],Z);var W=a(23710),E=a(15467),z=a(70625),A=a(75990),I=a(79842),j=a(68623),B=a(15686),G=a(4477),J=a(94727),X=a(32361),$=a(12311),V=a(77470),H=a(27635),K=a(4489),S=a(68965),tt=a(31686),et=a(60405);function at(t,e){if(1&t&&U._U(0,"ng-option",7),2&t){const t=e.$implicit;F.Q("value",t)("text",t)}}const nt=function(t){return["/relationsWithLayoutEditor/layout",t]},ot=function(t){return["/relationsWithLayoutEditor/relations",t]};let rt=class{constructor(t,e,a,n){this._store=t,this._router=e,this._relationsManager=a,this._route=n,this._available=new z.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStored(),this._route.params.subscribe((({id:t})=>{if(t){this._available.setValue(t);const e=this._store.getData(t);this._metadata=e?.layout,this._relationsManager.setRelations(e.relations??[])}else this._relationsManager.setRelations([]);this._available.valueChanges.subscribe((t=>{this._router.navigate(["/relationsWithLayoutEditor/preview",t],{skipLocationChange:!1,replaceUrl:!0})}))}))}ngOnDestroy(){}};rt.ɵfac=function(t){return new(t||rt)(L.Y(N.U),L.Y(W.F0),L.Y(A.N),L.Y(E.gz))},rt.ɵcmp=D.Xp({type:rt,selectors:[["layout-preview-view"]],features:[T._([{provide:g.qO,useFactory:t=>new h.I((e=>t.getData(e)?.layout)),deps:[N.U]},(0,I.AL)(),(0,f.WH)(),(0,b.qN)(),(0,w.ag)(),(0,j.cg)()])],decls:10,vars:9,consts:[[1,"flex-row"],[1,"margin-horizontal-small",3,"routerLink"],[1,"flex-1",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll"],[3,"layoutComponentRenderer"],[3,"value","text"]],template:function(t,e){1&t&&(U.Tg(0,"div",0)(1,"a",1),Y._(2,"layout"),U.qZ(),U.Tg(3,"a",1),Y._(4,"relations"),U.qZ(),U.Tg(5,"ng-select",2),B.Y(6,at,1,2,"ng-option",3),U.qZ()(),U.Tg(7,"div",4)(8,"div",5),G.Gk(9,6),U.qZ()()),2&t&&(R.x(1),F.Q("routerLink",J.VK(5,nt,e._available.value)),R.x(2),F.Q("routerLink",J.VK(7,ot,e._available.value)),R.x(2),F.Q("formControl",e._available),R.x(1),F.Q("ngForOf",e._availableNames),R.x(3),F.Q("layoutComponentRenderer",e._metadata))},dependencies:[$.s,V.JJ,H.oH,X.y,K.x,S.w,tt.v,et.i],encapsulation:2,changeDetection:0}),rt=(0,n.gn)([(0,d.N)({path:"preview"}),(0,d.N)({path:"preview/:id"}),(0,n.w6)("design:paramtypes",[N.U,W.F0,A.N,E.gz])],rt);var it=a(91861),st=a(80734),lt=a(20809),ut=a(31166),ct=a(36159);let dt=class{constructor(t,e,a){this._store=t,this.history=e,this._layoutManager=a,this._metadata=[]}get emptyMetadata(){return[]}_getMetadata(t){return{relations:t}}_loadDemo(){this._metadata=M.F.relationsWithLayoutDemo}setMetadata(t){this._metadata=t?.relations??this.emptyMetadata,this._layoutManager.setLayout(t?.layout)}};dt.ɵfac=function(t){return new(t||dt)(L.Y(N.U),L.Y(it.nR),L.Y(st.n))},dt.ɵcmp=D.Xp({type:dt,selectors:[["relations-editor-view"]],features:[T._([y.z,{provide:lt.te,useFactory:t=>new h.I((e=>t.getData(e)?.relations)),deps:[N.U]},(0,I.$R)(),(0,w.vu)(),(0,j.xb)(),(0,b.Rn)(),(0,f.El)(),{provide:v.L,useClass:ut.d}])],decls:9,vars:4,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/relations",3,"store","getMetadataCallback","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(U.Tg(0,"div",0)(1,"button",1)(2,"span"),Y._(3,"go back"),U.qZ()(),U.Tg(4,"load-save-new",2),O.N("metadataChange",(function(t){return e.setMetadata(t)})),U.qZ(),U.Tg(5,"button",3),O.N("click",(function(){return e._loadDemo()})),U.Tg(6,"span"),Y._(7,"demo"),U.qZ()()(),U._U(8,"relations-editor",4)),2&t&&(R.x(4),F.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history),R.x(4),F.Q("metadata",e._metadata))},dependencies:[P.v,ct.Y,q.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([x.r,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Array]),(0,n.w6)("design:returntype",Object)],dt.prototype,"_getMetadata",null),dt=(0,n.gn)([(0,d.N)({path:"relations"}),(0,d.N)({path:"relations/:id"}),(0,n.w6)("design:paramtypes",[N.U,_.Y,st.n])],dt);const gt=[rt,Z,dt];var pt=a(18567),mt=a(53245),yt=a(38327);let ht=class{};ht.ɵfac=function(t){return new(t||ht)},ht.ɵmod=D.oA({type:ht}),ht.ɵinj=yt.cJ({providers:[(0,mt.Y)("LAYOUT_RELATIONS_DATA")],imports:[r.e,i.U,o.Bz,u.A,s.p,c.W,pt.Qw]}),ht=(0,n.gn)([(0,l.P)(gt)],ht)},68623:(t,e,a)=>{"use strict";a.d(e,{cg:()=>_,xb:()=>v,Gc:()=>h});var n=a(14389),o=a(91861),r=a(20809),i=a(46480),s=a(11776),l=a(38327);function u(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}class c{constructor(t){this._logger=t}tryToGet(t){var e,n=this;return(e=function*(){try{return n._logger?.debug("RestDynamicModuleRelationsProvider: trying to get relations types for module {@module}",{moduleName:t.package}),"rest-components"===t.package?yield a.e(7867).then(a.bind(a,27867)):null}catch(e){n._logger?.debug("RestDynamicModuleRelationsProvider: module {@module} was not found, reason: "+e,{moduleName:t.package})}return null},function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(t){u(r,n,o,i,s,"next",t)}function s(t){u(r,n,o,i,s,"throw",t)}i(void 0)}))})()}}function d(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}c.ɵfac=function(t){return new(t||c)(s.LF(i.bZ,8))},c.ɵprov=l.Yz({token:c,factory:c.ɵfac});class g{constructor(t){this._logger=t}tryToGet(t){var e,n=this;return(e=function*(){if("rest-components"!==t.package)return null;try{return n._logger?.debug("RestDynamicModuleItemsProvider: trying to get item {@item}",{name:t.name,package:t.package}),yield a(2721)(`./${t.name}/type`)}catch(e){n._logger?.debug("RestDynamicModuleItemsProvider: item {@item} was not found, reason: "+e,{name:t.name,package:t.package})}return null},function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(t){d(r,n,o,i,s,"next",t)}function s(t){d(r,n,o,i,s,"throw",t)}i(void 0)}))})()}}g.ɵfac=function(t){return new(t||g)(s.LF(i.bZ,8))},g.ɵprov=l.Yz({token:g,factory:g.ɵfac});const p={provide:o.GP,useClass:c,multi:!0},m={provide:o.n7,useClass:g,multi:!0},y={provide:r.B6,useClass:g,multi:!0};function h(){return[p,m,(0,n.XW)("rest-components")]}function v(){return[...h()]}function _(){return[y]}},2721:(t,e,a)=>{var n={"./rest/type":[20309,309]};function o(t){if(!a.o(n,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],o=e[0];return a.e(e[1]).then((()=>a(o)))}o.keys=()=>Object.keys(n),o.id=2721,t.exports=o}}]);
//# sourceMappingURL=5184.chunk.6094fbbdd156c275f7c0.js.map