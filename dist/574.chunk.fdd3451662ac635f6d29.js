/*! For license information please see 574.chunk.fdd3451662ac635f6d29.js.LICENSE.txt */
(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[574],{60574:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RelationsLayoutFormModule:()=>qe});var r=n(14392),a=n(27052),o=n(48659),i=n(76668),s=n(97212),l=n(89001),u=n(22804),c=n(38707),d=n(35648),p=n(8477),m=n(66888),f=n(94761),g=n(71785),h=n(97149),y=n(40921),v=n(56454),_=n(17505),b=n(44055),w=n(56179),C=n(99043),x=n(57489),k=n(30688),F=n(45529),M=n(57466),O=n(27049),D=n(89952),N=n(77653),P=n(79440),R=n(77842),Y=n(73379),T=n(80827),S=n(41853),L=n(72891),G=n(66794),I=n(73301),E=n(84967),Z=n(80239),A=n(35218),Q=n(80285),j=n(86825);let U=class{constructor(e,t){this._store=e,this.history=t,this._metadata=null}get emptyMetadata(){return{id:`stackPanel-${(0,M.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}_getMetadata(e){return{layout:e}}};U.ɵfac=function(e){return new(e||U)(P.Y(D.U),P.Y(g.dB))},U.ɵcmp=R.Xp({type:U,selectors:[["form-layout-editor-view"]],features:[Y._([v.z,{provide:p.qO,useFactory:e=>new u.I((t=>e.getData(t)?.layout)),deps:[D.U]},(0,h._)(),(0,y.rj)(),(0,F.m_)(),(0,k.iS)(),(0,w.vQ)(),(0,C.gJ)(),(0,x.hd)(),{provide:_.L,useClass:N.y}])],decls:9,vars:5,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsLayoutForm/layout",3,"store","getMetadataCallback","history","metadataChange"],[3,"copyClick"],[1,"margin-horizontal-small"],[1,"flex-1",3,"metadata"]],template:function(e,t){1&e&&(T.Tg(0,"div",0)(1,"button",1)(2,"span"),S._(3,"go back"),T.qZ()(),T.Tg(4,"load-save-new",2),L.N("metadataChange",(function(e){let n;return t._metadata=null!==(n=null==e?null:e.layout)&&void 0!==n?n:t.emptyMetadata})),T.qZ(),T.Tg(5,"debug-data",3)(6,"div",4),S._(7,"metadata"),T.qZ()()(),T._U(8,"layout-editor",5)),2&e&&(G.x(4),I.Q("store",t._store)("getMetadataCallback",t._getMetadata)("history",t.history),G.x(1),I.Q("copyClick",t._metadata),G.x(3),I.Q("metadata",t._metadata))},dependencies:[E.v,A.Z,Q.v,Z.o,j.Q],encapsulation:2,changeDetection:0}),(0,r.gn)([O.r,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype",Object)],U.prototype,"_getMetadata",null),U=(0,r.gn)([(0,f.N)({path:"layout"}),(0,f.N)({path:"layout/:id"}),(0,r.w6)("design:paramtypes",[D.U,b.Y])],U);var z=n(95176),q=n(68961),V=n(23710),B=n(15467),H=n(70625),$=n(43939),J=n(79898),X=n(17777),W=n(66398),K=n(38937),ee=n(11776),te=n(38327),ne=n(26938);function re(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function ae(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return ae=function(e){this.s=e,this.n=e.next},ae.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new ae(e)}class oe{constructor(e){this._iteratorsSvc=e}build(e){var t,n=this;return(t=function*(){const t=new X.cw({});let r=t;var a,o=!1,i=!1;try{for(var s,l=function(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new ae(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(n._iteratorsSvc.getIteratorFor(e));o=!(s=yield l.next()).done;o=!1){const e=s.value,t=n._getControlName(e.metadata);if(t){const a=n._getControlForMetadata(e.metadata);n._getActiveGroup(e.parent,r).addControl(t,a),a instanceof X.cw&&(r=a)}}}catch(e){i=!0,a=e}finally{try{o&&null!=l.return&&(yield l.return())}finally{if(i)throw a}}return t},function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){re(o,r,a,i,s,"next",e)}function s(e){re(o,r,a,i,s,"throw",e)}i(void 0)}))})()}_getActiveGroup(e,t){if(!t.parent||!e)return t;const n=this._getControlName(e.metadata);return n?t.parent.get(n)?t:this._getActiveGroup(e,t.parent):e.parent?this._getActiveGroup(e.parent,t):this._getActiveGroup(e.parent,t.root)}_getControlName(e){return e?e.options?.controlName:null}_getControlForMetadata(e){switch(e?.options?.controlType){case K.Z.FormArray:return new W.Oe([]);case K.Z.FormGroup:return new X.cw({});default:return new H.NI}}}oe.ɵfac=function(e){return new(e||oe)(ee.LF(ne.$))},oe.ɵprov=te.Yz({token:oe,factory:oe.ɵfac});var ie=n(85902),se=n(75990),le=n(79842),ue=n(84773),ce=n(43870),de=n(6845),pe=n(4477),me=n(15686),fe=n(94727),ge=n(6427),he=n(32361),ye=n(12311),ve=n(21651),_e=n(58323),be=n(77470),we=n(27635),Ce=n(86170),xe=n(4489),ke=n(68965),Fe=n(31686),Me=n(60405);function Oe(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function De(e,t){if(1&e&&T._U(0,"ng-option",7),2&e){const e=t.$implicit;I.Q("value",e)("text",e)}}function Ne(e,t){if(1&e){const e=ue.E();T.Tg(0,"form",8),L.N("ngSubmit",(function(){ce.CH(e);const t=de.o();return ce.Kt(t._submit())})),T.Tg(1,"div",9)(2,"div",10),pe.Gk(3,11),T.qZ()(),T.Tg(4,"button",12),S._(5,"Submit"),T.qZ()()}if(2&e){const e=de.o();I.Q("formGroup",e._formGroup),G.x(3),I.Q("layoutComponentRenderer",e._metadata)("layoutComponentRendererInjector",e._formInjector)}}const Pe=function(e){return["/relationsLayoutForm/layout",e]},Re=function(e){return["/relationsLayoutForm/relations",e]};let Ye=class{constructor(e,t,n,r,a,o,i){this._relationsManager=e,this._store=t,this._router=n,this._route=r,this._injector=a,this._formComponentControlBuilder=o,this._changeDetector=i,this.selectedMetadata=null,this._available=new H.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){var e=this;this._availableNames=this._store.getStored(),this._route.params.subscribe(function(){var t,n=(t=function*({id:t}){if(t){e._available.setValue(t);const n=e.selectedMetadata=e._store.getData(t);e._metadata=n?.layout,e._relationsManager.setRelations(n.relations??[]),e._formGroup=yield e._formComponentControlBuilder.build(e._metadata),e._formInjector=z.z.create({parent:e._injector,providers:[{provide:J.O,useValue:e._formGroup}]}),e._changeDetector.detectChanges()}else e.selectedMetadata=null,e._relationsManager.setRelations([]);e._available.valueChanges.subscribe((t=>{e._router.navigate(["/relationsLayoutForm","form-preview",t],{skipLocationChange:!1,replaceUrl:!0})}))},function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){Oe(o,r,a,i,s,"next",e)}function s(e){Oe(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}())}ngOnDestroy(){}_submit(){console.log(this._formGroup.value)}};var Te,Se;Ye.ɵfac=function(e){return new(e||Ye)(P.Y(se.N),P.Y(D.U),P.Y(V.F0),P.Y(B.gz),P.Y(z.z),P.Y(oe),P.Y(q.s))},Ye.ɵcmp=R.Xp({type:Ye,selectors:[["form-preview-view"]],features:[Y._([oe,ne.$,ie.T,(0,le.AL)(),(0,y.SH)(),(0,F.bW)(),(0,k.Hh)()])],decls:11,vars:11,consts:[[1,"flex-row"],[1,"margin-horizontal-small",3,"routerLink"],[1,"flex-1",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[3,"copyClick"],[1,"margin-horizontal-small"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"value","text"],[3,"formGroup","ngSubmit"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll","thin-scrollbar"],[3,"layoutComponentRenderer","layoutComponentRendererInjector"],["type","submit"]],template:function(e,t){1&e&&(T.Tg(0,"div",0)(1,"a",1),S._(2,"layout"),T.qZ(),T.Tg(3,"a",1),S._(4,"relations"),T.qZ(),T.Tg(5,"ng-select",2),me.Y(6,De,1,2,"ng-option",3),T.qZ(),T.Tg(7,"debug-data",4)(8,"div",5),S._(9),T.qZ()()(),me.Y(10,Ne,6,3,"form",6)),2&e&&(G.x(1),I.Q("routerLink",fe.VK(7,Pe,t._available.value)),G.x(2),I.Q("routerLink",fe.VK(9,Re,t._available.value)),G.x(2),I.Q("formControl",t._available),G.x(1),I.Q("ngForOf",t._availableNames),G.x(1),I.Q("copyClick",t.selectedMetadata),G.x(2),ge.Oq(t._available.value),G.x(1),I.Q("ngIf",t._formGroup))},dependencies:[ye.s,ve.O,_e._,be.JJ,be.JL,we.oH,Ce.s,xe.x,ke.w,Fe.v,Me.i,he.y,Q.v,Z.o],encapsulation:2,changeDetection:0}),Ye=(0,r.gn)([("",Te="form-preview",function(e){const t=e;if((0,$.fp)(t.routeValues)&&(0,$.fp)(Te))return console.warn("Missing 'ComponentRoute' or wrong order of decorators 'ComponentRoute' and 'ComponentRedirectRoute'!"),e;if((0,$.fp)(Te)&&(0,$.EN)(t.routeValues)&&t.routeValues.length>1)return console.warn("Multiple routes defined. Unable to set proper redirect!"),e;const n=e;return(0,$.fp)(n.redirectRouteValues)&&Object.defineProperty(e,"redirectRouteValues",{enumerable:!0,configurable:!1,writable:!1,value:[]}),(0,$.fp)(Se)&&(Se=!0),(0,$.fp)(Te)&&(Te=t.routeValues[0].path),n.redirectRouteValues.push({path:"",redirectTo:Te,pathMatch:Se?"full":"prefix"}),e}),(0,f.N)({path:"form-preview"}),(0,f.N)({path:"form-preview/:id"}),(0,r.w6)("design:paramtypes",[se.N,D.U,V.F0,B.gz,z.z,oe,q.s])],Ye);var Le=n(91861),Ge=n(80734),Ie=n(20809),Ee=n(85638),Ze=n(31166),Ae=n(71674);let Qe=class{constructor(e,t,n){this._store=e,this.history=t,this._layoutManager=n,this._metadata=[]}get emptyMetadata(){return[]}_getMetadata(e){return{relations:e}}_loadDemo(){this._metadata=Ee.F.demoRelationsComplexRelations}_loadRestDemo(){this._metadata=Ee.F.complexDemoRestRelations}_loadFullDemo(){this._metadata=Ee.F.complexDemoFullRelations}setMetadata(e){this._metadata=e?.relations??this.emptyMetadata,this._layoutManager.setLayout(e?.layout)}};Qe.ɵfac=function(e){return new(e||Qe)(P.Y(D.U),P.Y(Le.nR),P.Y(Ge.n))},Qe.ɵcmp=R.Xp({type:Qe,selectors:[["form-relations-editor-view"]],features:[Y._([v.z,{provide:Ie.te,useFactory:e=>new u.I((t=>e.getData(t)?.relations)),deps:[D.U]},(0,le.$R)(),(0,y.qm)(),(0,F.Od)(),(0,x.vu)(),(0,C.Rn)(),(0,w.El)(),(0,k.pS)(),{provide:_.L,useClass:Ze.d}])],decls:6,vars:4,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsLayoutForm/relations",3,"store","getMetadataCallback","history","metadataChange"],[1,"flex-1",3,"metadata"]],template:function(e,t){1&e&&(T.Tg(0,"div",0)(1,"button",1)(2,"span"),S._(3,"go back"),T.qZ()(),T.Tg(4,"load-save-new",2),L.N("metadataChange",(function(e){return t.setMetadata(e)})),T.qZ()(),T._U(5,"relations-editor",3)),2&e&&(G.x(4),I.Q("store",t._store)("getMetadataCallback",t._getMetadata)("history",t.history),G.x(1),I.Q("metadata",t._metadata))},dependencies:[E.v,Ae.Y,j.Q],encapsulation:2,changeDetection:0}),(0,r.gn)([O.r,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Array]),(0,r.w6)("design:returntype",Object)],Qe.prototype,"_getMetadata",null),Qe=(0,r.gn)([(0,f.N)({path:"relations"}),(0,f.N)({path:"relations/:id"}),(0,r.w6)("design:paramtypes",[D.U,b.Y,Ge.n])],Qe);const je=[Ye,U,Qe];var Ue=n(53245),ze=n(18567);let qe=class{};qe.ɵfac=function(e){return new(e||qe)},qe.ɵmod=R.oA({type:qe}),qe.ɵinj=te.cJ({providers:[{provide:p.qO,useFactory:e=>new u.I((t=>e.getData(t))),deps:[D.U]},(0,Ue.Y)("LAYOUT_RELATIONS_FORM_DATA")],imports:[a.e,o.U,d.A,i.Bz,s.p,m.W,c.s,ze.Qw]}),qe=(0,r.gn)([(0,l.P)(je)],qe)},38937:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>r}),function(e){e.FormControl="FormControl",e.FormArray="FormArray",e.FormGroup="FormGroup"}(r||(r={}))},79898:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});const r=new(n(40296).O)("FORM_COMPONENT_CONTROL")},30688:(e,t,n)=>{"use strict";n.d(t,{Wm:()=>R,sx:()=>P,Hh:()=>M,iS:()=>O,I1:()=>N,pS:()=>D});var r=n(66398),a=n(17777),o=n(70625),i=n(14389),s=n(8477),l=n(71785),u=n(91861),c=n(20809),d=n(46480),p=n(11776),m=n(38327);function f(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}class g{constructor(e){this._logger=e}tryToGet(e){var t,r=this;return(t=function*(){if("form-components"!==e.package)return null;try{return r._logger?.debug("FormDynamicModuleItemsProvider: trying to get item {@item}",{name:e.name,package:e.package}),yield n(54384)(`./${e.name}/type`)}catch(t){r._logger?.debug("FormDynamicModuleItemsProvider: item {@item} was not found, reason: "+t,{name:e.name,package:e.package})}return null},function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){f(o,r,a,i,s,"next",e)}function s(e){f(o,r,a,i,s,"throw",e)}i(void 0)}))})()}}function h(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}g.ɵfac=function(e){return new(e||g)(p.LF(d.bZ,8))},g.ɵprov=m.Yz({token:g,factory:g.ɵfac});class y{constructor(e){this._logger=e}tryToGet(e){var t,r=this;return(t=function*(){try{return r._logger?.debug("FormDynamicModuleTypesProvider: trying to get types for module {@module}",{moduleName:e.package}),"form-components"===e.package?yield n.e(6311).then(n.bind(n,16311)):null}catch(t){r._logger?.debug("FormDynamicModuleTypesProvider: module {@module} was not found, reason: "+t,{moduleName:e.package})}return null},function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){h(o,r,a,i,s,"next",e)}function s(e){h(o,r,a,i,s,"throw",e)}i(void 0)}))})()}}function v(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}y.ɵfac=function(e){return new(e||y)(p.LF(d.bZ,8))},y.ɵprov=m.Yz({token:y,factory:y.ɵfac});class _{constructor(e){this._logger=e}tryToGet(e){var t,r=this;return(t=function*(){try{return r._logger?.debug("FormDynamicModuleRelationsProvider: trying to get relations types for module {@module}",{moduleName:e.package}),"form-components"===e.package?yield n.e(5737).then(n.bind(n,75737)):null}catch(t){r._logger?.debug("FormDynamicModuleRelationsProvider: module {@module} was not found, reason: "+t,{moduleName:e.package})}return null},function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){v(o,r,a,i,s,"next",e)}function s(e){v(o,r,a,i,s,"throw",e)}i(void 0)}))})()}}_.ɵfac=function(e){return new(e||_)(p.LF(d.bZ,8))},_.ɵprov=m.Yz({token:_,factory:_.ɵfac});const b={provide:s.Aw,useClass:g,multi:!0},w={provide:l.sc,useClass:y,multi:!0},C={provide:u.GP,useClass:_,multi:!0},x={provide:u.n7,useClass:g,multi:!0},k={provide:c.B6,useClass:g,multi:!0};var F=n(38937);function M(){return[b]}function O(){return[b,w,(0,i.XW)("form-components")]}function D(){return[C,x,(0,i.XW)("form-components"),...M()]}function N(){return[...M(),k]}function P(e,t,n=F.Z.FormControl,r){return t&&e?t.get(e)??R(n,r):R(n,r)}function R(e,t){switch(e){case F.Z.FormArray:return new r.Oe([]);case F.Z.FormGroup:return new a.cw(t??{});default:return new o.NI(t)}}},54384:(e,t,n)=>{var r={"./checkbox/type":[34757,4757],"./datepicker/type":[96425,6425],"./formGroup/type":[70613,613],"./numberField/type":[90560,560],"./period/type":[13487,3487],"./radio/type":[41197,1197],"./select/type":[98746,8746],"./textField/type":[80477,477],"./textarea/type":[25552,5552]};function a(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((()=>n(a)))}a.keys=()=>Object.keys(r),a.id=54384,e.exports=a},80285:(e,t,n)=>{"use strict";n.d(t,{v:()=>p});var r=n(79440),a=n(77842),o=n(72891),i=n(85320),s=n(48936);class l{constructor(e,t){this._document=t;const n=this._textarea=this._document.createElement("textarea"),r=n.style;r.position="fixed",r.top=r.opacity="0",r.left="-999em",n.setAttribute("aria-hidden","true"),n.value=e,n.readOnly=!0,this._document.body.appendChild(n)}copy(){const e=this._textarea;let t=!1;try{if(e){const n=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),t=this._document.execCommand("copy"),n&&n.focus()}}catch{}return t}destroy(){const e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}var u=n(11776),c=n(38327);class d{constructor(e){this._document=e}copy(e){const t=this.beginCopy(e),n=t.copy();return t.destroy(),n}beginCopy(e){return new l(e,this._document)}}d.ɵfac=function(e){return new(e||d)(u.LF(s.K))},d.ɵprov=c.Yz({token:d,factory:d.ɵfac,providedIn:"root"});class p{constructor(e){this._clipboard=e,this.clickable=!0}copyData(){this._clipboard.copy(JSON.stringify(this.data,null,4))}}p.ɵfac=function(e){return new(e||p)(r.Y(d))},p.ɵdir=a.lG({type:p,selectors:[["debug-data","copyClick",""]],hostVars:2,hostBindings:function(e,t){1&e&&o.N("click",(function(){return t.copyData()})),2&e&&i.ek("clickable",t.clickable)},inputs:{data:["copyClick","data"]}})},80239:(e,t,n)=>{"use strict";n.d(t,{o:()=>f});var r=n(43086),a=n(79440),o=n(68961),i=n(4905),s=n(77842),l=n(15686),u=n(73301),c=n(35100),d=n(21651);function p(e,t){1&e&&r.Hs(0)}const m="enabled";class f{constructor(e,t,n){this._debugDataEnabledSvc=e,this._changeDetector=t,this._element=n,this.enabled=!1}ngOnInit(){this.enabled=this._debugDataEnabledSvc.enabled,this._setEnabledCssClass(),this._debugDataEnabledChangeSubscription=this._debugDataEnabledSvc.enabledChange.subscribe((()=>{this.enabled=this._debugDataEnabledSvc.enabled,this._setEnabledCssClass(),this._changeDetector.detectChanges()}))}ngOnDestroy(){this._debugDataEnabledChangeSubscription?.unsubscribe(),this._debugDataEnabledChangeSubscription=null}_setEnabledCssClass(){this.enabled?this._element.nativeElement.classList.add(m):this._element.nativeElement.classList.remove(m)}}f.ɵfac=function(e){return new(e||f)(a.Y(c.H),a.Y(o.s),a.Y(i.SB))},f.ɵcmp=s.Xp({type:f,selectors:[["debug-data"]],ngContentSelectors:["*"],decls:1,vars:1,consts:[[3,"ngIf"]],template:function(e,t){1&e&&(r.F$(),l.Y(0,p,1,0,"ng-template",0)),2&e&&u.Q("ngIf",t.enabled)},dependencies:[d.O],styles:["[_nghost-%COMP%]\r\n{\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    text-shadow: 0 0 1px;\r\n    display: none;\r\n}\r\n\r\n.clickable[_nghost-%COMP%]\r\n{\r\n    cursor: pointer;\r\n}\r\n\r\n.enabled[_nghost-%COMP%]\r\n{\r\n    display: block;\r\n}"],changeDetection:0})}}]);
//# sourceMappingURL=574.chunk.fdd3451662ac635f6d29.js.map