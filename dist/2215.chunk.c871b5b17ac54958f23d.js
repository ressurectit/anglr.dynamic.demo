"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[2215],{92215:(t,e,n)=>{n.r(e),n.d(e,{default:()=>H});var r=n(97881),i=n(31530),s=n(15326),a=n(43304),o=n(26197),u=n(76311),l=n(40840),c=n(7312),p=n(95127),f=n(13417),h=n(15209),v=n(73943),y=n(64391),d=n(32779),m=n(85086);class g{_dateApi;constructor(t){this._dateApi=t}serializeObject(t,e=""){if(!(0,v.wV)(t))return null;const n=[],r=(t,i)=>{(0,v.fp)(i)||(0,v.mf)(i)||(Array.isArray(i)?i.forEach(((e,n)=>{r((0,v.wV)(e)?`${t}[${n}]`:t,e)})):this._dateApi.isDate(i)?n.push(`${e}${t}=${this._dateApi.toString(i)}`):(0,v.HD)(i)?n.push(`${e}${t}=${i}`):(0,v.hj)(i)||(0,v.jn)(i)?n.push(`${e}${t}=${i.toString()}`):(0,v.wV)(i)&&n.push(this.serializeObject(i,`${t}.`)))};return Object.keys(t).forEach((e=>{const n=t[e];r(e,n)})),n.join("&")}serializeObjectToParams(t){const e=this.serializeObject(t);return(0,v.fp)(e)?null:new h.L({fromString:e})}static ɵfac=function(t){return new(t||g)(d.LF(y.uD))};static ɵprov=m.Yz({token:g,factory:g.ɵfac,providedIn:"root"})}function O(t,e,n,r,i,s,a){try{var o=t[s](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(r,i)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function a(t){O(s,r,i,a,o,"next",t)}function o(t){O(s,r,i,a,o,"throw",t)}a(void 0)}))}}function w(t,e,n){return k.apply(this,arguments)}function k(){return(k=b((function*(t,e,n){t.transformFn&&(t.value=yield t.transformFn(t.value,...n)),t.value instanceof Object&&(t.value=JSON.stringify(t.value)),(0,v.EN)(t.value)&&(e[t.key]=t.value)}))).apply(this,arguments)}function P(t,e,n){return R.apply(this,arguments)}function R(){return(R=b((function*(t,e,n){t.transformFn&&(t.value=yield t.transformFn(t.value,...n)),(0,v.EN)(t.value)&&(e[t.key]=t.value)}))).apply(this,arguments)}function j(t,e,n){return A.apply(this,arguments)}function A(){return(A=b((function*(t,e,n){return t.transformFn&&(t.value=yield t.transformFn(t.value,...n)),e.replace("{"+t.key+"}",t.value??"")}))).apply(this,arguments)}function E(t,e,n,r){return S.apply(this,arguments)}function S(){return(S=b((function*(t,e,n,r){t.transformFn&&(t.value=yield t.transformFn(t.value,...r));const i=n.serializeObject(t.value);i&&e.push(i)}))).apply(this,arguments)}var $=n(17003),z=n(59958);function q(t,e,n,r,i,s,a){try{var o=t[s](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(r,i)}const F=function(){var t,e=(t=function*(){return new((yield Promise.all([n.e(6893),n.e(8748),n.e(3981)]).then(n.bind(n,83981))).RestRelationsEditorMetadata)},function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function a(t){q(s,r,i,a,o,"next",t)}function o(t){q(s,r,i,a,o,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();function _(t,e,n,r,i,s,a){try{var o=t[s](a),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(r,i)}let D=class{get relationsOptions(){return this.ɵRelationsOptions}set relationsOptions(t){this.ɵRelationsOptions=t,this.initialize()}constructor(t){this.emptyParam=[],this.http=t.get(s.e),this.logger=t.get(p.bZ),this.queryStringSerializer=t.get(g),this.progressIndicator=t.get(f.u)}dynamicOnChanges(){this.makeRequest()}invalidateVisuals(){}initialize(){if(this.relationsOptions&&this.relationsOptions.params&&Array.isArray(this.relationsOptions.params))for(const t in this.relationsOptions.params){const e=this.relationsOptions.params[t];this.emptyParam.push(!0),e.configurable&&e.name&&Object.defineProperty(this,e.name,{configurable:!0,enumerable:!0,set:n=>{e.value=n,this.emptyParam[t]=(0,v.fp)(n)},get:()=>e.value})}this.relationsOptions?.runImmediately&&this.makeRequest()}makeRequest(){var t,e=this;return(t=function*(){if(e.emptyParam.find((t=>t)))return;if(e.runningRequestSubscription&&(e.runningRequestSubscription.unsubscribe(),e.progressIndicator.hideProgress()),!e.relationsOptions||!e.relationsOptions.method||!e.relationsOptions.url)return void e.logger.warn("RestRelations: missing options for craeting http request {{@data}}",{data:e.relationsOptions});let t=null,n=e.relationsOptions.url;const r={},i={},s=[];if(e.relationsOptions.params&&Array.isArray(e.relationsOptions.params))for(const a of e.relationsOptions.params){if(!a.name)continue;const o={index:0,key:a.name,value:a.value,transformFn:null};switch(a.type){case"PATH":n=yield j(o,n,[]);break;case"BODY":t=a.value;break;case"QUERY":yield w(o,r,[]);break;case"QUERY OBJECT":yield E(o,s,e.queryStringSerializer,[]);break;case"HEADER":yield P(o,i,[])}}let u=new a.a(e.relationsOptions.method,n,t,{reportProgress:!1,responseType:"json"});if((0,v.Qr)(r)||(u=u.clone({setParams:r})),(0,v.Qr)(i)||(u=u.clone({setHeaders:i})),s.length){const t=function(t,e){const n=t.join("&"),r=new h.L({fromString:n});return r.keys().forEach((t=>{const n=r.getAll(t);n&&n.forEach(((n,r)=>{e=r?e.append(t,n):e.set(t,n)}))})),e}(s,u.params);u=u.clone({params:t})}e.runningRequestSubscription=e.http.request(u).pipe((0,$.K)((t=>(e.success=null,e.error=t,z.E)))).subscribe((t=>{if(t.type==o.dt.Response&&t.status>=200&&t.status<=300)return e.success=t.body,void(e.error=null)}))},function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function a(t){_(s,r,i,a,o,"next",t)}function o(t){_(s,r,i,a,o,"throw",t)}a(void 0)}))})()}};(0,r.gn)([(0,u.A)(),(0,r.w6)("design:type",Object)],D.prototype,"success",void 0),(0,r.gn)([(0,u.A)(),(0,r.w6)("design:type",Object)],D.prototype,"error",void 0),D=(0,r.gn)([(0,l.H)(),(0,c.i)(F),(0,r.w6)("design:paramtypes",[i.z])],D);const H=D}}]);
//# sourceMappingURL=2215.chunk.c871b5b17ac54958f23d.js.map