"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[1057],{35742:(t,e,n)=>{n.r(e),n.d(e,{TransformDataRelationsEditorMetadata:()=>S});var o=n(71309),a=n(58654),i=n(53136);function r(t,e,n,o,a,i,r){try{var s=t[i](r),d=s.value}catch(t){return void n(t)}s.done?e(d):Promise.resolve(d).then(o,a)}const s=t=>new i.y("typescript","ts",function(){var t,e=(t=function*(t){const e=t.getModel()?.uri;if(!e)return"";const n=yield a.Mj.typescript.getTypeScriptWorker(),o=yield n(e);return(yield o.getEmitOutput(e.toString())).outputFiles[0].text},function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function s(t){r(i,o,a,s,d,"next",t)}function d(t){r(i,o,a,s,d,"throw",t)}s(void 0)}))});return function(t){return e.apply(this,arguments)}}(),t);var d=n(93551),c=n(40876),l=n(60901),u=n(85478),p=n(57466),h=n(64297),f=n(79440),m=n(68961),v=n(4905),g=n(77842),y=n(47098),E=n(82568),O=n(80827),w=n(41853),C=n(72891),_=n(73301),T=n(66794),M=n(47826);function b(t,e,n,o,a,i,r){try{var s=t[i](r),d=s.value}catch(t){return void n(t)}s.done?e(d):Promise.resolve(d).then(o,a)}a.Mj.typescript.typescriptDefaults.addExtraLib("/**\n * Transforms data to another form of data\n * @param data - Data to be transformed\n */\nexport type TransformData<TData = any, TResult = any> = (data: TData) => TResult;","file:///node_modules/@types/transformData/index.d.ts");class D extends d.M{constructor(t,e,n){super(t,e),this.dialog=n}showCodeEditor(){var t,e=this;return(t=function*(){var t;const n=yield(0,h.n)(e.dialog.open(o.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:e.metadata?.nodeMetadata?.options?.content??"",languageModel:s("import {TransformData} from 'transformData';\n\n/**\n * Transformer function that performs transformation\n */\nconst transformer: TransformData<any, any> = data =>\n{\n    return data;\n};\n \nexport default transformer;\n")}}).afterClosed());e.metadata?.relationsOptions&&n&&e.metadata.nodeMetadata&&(e.metadata.relationsOptions.code=n.code,(t=e.metadata.nodeMetadata).options??(t.options={content:""}),e.metadata.nodeMetadata.options.content=n.content)},function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){b(i,o,a,r,s,"next",t)}function s(t){b(i,o,a,r,s,"throw",t)}r(void 0)}))})()}metadataSet(){var t;this.metadata?.relationsOptions&&((t=this.metadata.relationsOptions).id??(t.id=(0,p.Ox)(12)))}}D.ɵfac=function(t){return new(t||D)(f.Y(m.s),f.Y(v.SB),f.Y(M.J))},D.ɵcmp=g.Xp({type:D,selectors:[["transform-data-node"]],standalone:!0,features:[y.q,E.j],decls:16,vars:8,consts:[["name","transform code",3,"parent","destroySubject"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"input"],["name","data",3,"parentCoordiantes","zoomLevel","parent"],[1,"outputs"],[1,"output"],["name","transformedData",3,"parentCoordiantes","zoomLevel","parent"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(O._U(0,"relations-node-header",0),O.Tg(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),O._U(5,"relation-node-input",5),O.Tg(6,"div"),w._(7,"data"),O.qZ()()(),O.Tg(8,"div",6)(9,"div",7)(10,"div"),w._(11,"transformed data"),O.qZ(),O._U(12,"relation-node-output",8),O.qZ()()(),O.Tg(13,"button",9),C.N("click",(function(){return e.showCodeEditor()})),O.Tg(14,"span"),w._(15,"code"),O.qZ()()()),2&t&&(_.Q("parent",e)("destroySubject",e.destroySubject),T.x(5),_.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e),T.x(7),_.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e))},dependencies:[c.e,l.P,u.n],encapsulation:2,changeDetection:0});class S{constructor(){this.metaInfo={name:"Transform data",description:"Code that allows data tranformation",group:"Data"},this.nodeDefinition=D,Object.freeze(this)}}},91861:(t,e,n)=>{n.d(e,{Bj:()=>r,DZ:()=>a,GP:()=>i,dK:()=>l,fI:()=>c,n7:()=>d,nR:()=>u,yh:()=>s});var o=n(40296);const a=new o.O("RELATIONS_MODULE_TYPES_DATA_EXTRACTORS"),i=new o.O("RELATIONS_MODULE_TYPES_PROVIDERS"),r=new o.O("RELATIONS_MODULE_TYPES_LOADER"),s=new o.O("RELATIONS_NODES_DATA_EXTRACTORS"),d=new o.O("RELATIONS_NODES_PROVIDERS"),c=new o.O("RELATIONS_NODES_LOADER"),l=new o.O("REFRESH_PALETTE_OBSERVABLES"),u=new o.O("RELATIONS_HISTORY_MANAGER")},44677:(t,e,n)=>{n.d(e,{L:()=>a});var o=n(43939);const a=(t,e)=>{const n=t;return e?.debug("defaultExportExtractor: trying to extract default dynamic data"),(0,o.EN)(n.default)?{data:n.default}:null}},14389:(t,e,n)=>{n.d(e,{LK:()=>s,XW:()=>r,mv:()=>i});var o=n(97825),a=n(13457);function i(t,e,n,o,a=!1){t[e]={currentValue:n,previousValue:o,firstChange:a,isFirstChange:()=>a}}function r(t){return{provide:a.BG,useValue:{packages:[t],packagesChange:o.C,refresh(){}},multi:!0}}function s(t){try{return JSON.parse(t)}catch{return null}}},71309:(t,e,n)=>{n.d(e,{I:()=>D});var o=n(9249),a=n(79440),i=n(77842),r=n(84773),s=n(80827),d=n(72891),c=n(41853),l=n(43870),u=n(11282),p=n(73301),h=n(66794),f=n(31750),m=n(80943),v=n(74445),g=n(49891),y=n(43939),E=n(58654);self.MonacoEnvironment={getWorkerUrl:function(t,e){return"json"===e?"dist/json.worker.js":"css"===e||"scss"===e||"less"===e?"dist/css.worker.js":"html"===e||"handlebars"==e?"dist/html.worker.js":"typescript"===e||"javascript"===e?"dist/ts.worker.js":"dist/editor.worker.js"}};const O={target:E.Mj.typescript.ScriptTarget.ES2020,module:E.Mj.typescript.ModuleKind.CommonJS,moduleResolution:E.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noEmitOnError:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:E.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};E.Mj.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),E.Mj.typescript.typescriptDefaults.setCompilerOptions(O);var w=n(4905),C=n(36973);function _(t,e,n,o,a,i,r){try{var s=t[i](r),d=s.value}catch(t){return void n(t)}s.done?e(d):Promise.resolve(d).then(o,a)}function T(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){_(i,o,a,r,s,"next",t)}function s(t){_(i,o,a,r,s,"throw",t)}r(void 0)}))}}class M{constructor(t){this.element=t,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new v.v,this.contentChange=new v.v}ngOnChanges(t){(0,g.$)("languageModel")in t&&this.languageModel&&(0,g.$)("content")in t&&(0,y.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){var t=this;return T((function*(){t.openedFile&&t.codeEditor&&t.languageModel&&t.save.emit({content:t.openedFile.getValue(),code:yield t.languageModel.compiledCode(t.codeEditor)})}))()}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){var t=this;this.codeEditor=E.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},bracketPairColorization:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(E.DC.CtrlCmd|E.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent(T((function*(){t.openedFile&&t.languageModel&&t.codeEditor&&t.contentChange.emit({content:t.openedFile.getValue(),code:yield t.languageModel.compiledCode(t.codeEditor)})})))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,y.fp)(this.content)&&(this.openedFile=E.j6.createModel((this.content||this.languageModel.initialData)??"",this.languageModel.language,E.Sf.file(`file:///index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}function b(t,e,n,o,a,i,r){try{var s=t[i](r),d=s.value}catch(t){return void n(t)}s.done?e(d):Promise.resolve(d).then(o,a)}M.monacoInit=!0,M.ɵfac=function(t){return new(t||M)(a.Y(w.SB))},M.ɵcmp=i.Xp({type:M,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[C.T],decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]\r\n{\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n}"],changeDetection:0});class D{constructor(t,e){this.data=t,this.dialog=e,this.editorContent=null}saveAndClose(t){var e,n=this;return(e=function*(){yield t.saveContent(),n.dialog.close(n.editorContent)},function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function r(t){b(i,o,a,r,s,"next",t)}function s(t){b(i,o,a,r,s,"throw",t)}r(void 0)}))})()}}D.ɵfac=function(t){return new(t||D)(a.Y(o.m),a.Y(f.s))},D.ɵcmp=i.Xp({type:D,selectors:[["code-editor-dialog"]],decls:9,vars:3,consts:[[2,"height","calc(75vh - 32px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"flex-row","flex-end","margin-top-extra-small"],["type","button","type","button",1,"btn","btn-info","margin-right-extra-small",3,"mat-dialog-close"],["type","button","type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){if(1&t){const t=r.E();s.Tg(0,"code-editor",0,1),d.N("save",(function(t){return e.editorContent=t})),s.qZ(),s.Tg(2,"div",2)(3,"button",3)(4,"span"),c._(5,"cancel"),s.qZ()(),s.Tg(6,"button",4),d.N("click",(function(){l.CH(t);const n=u.M(1);return l.Kt(e.saveAndClose(n))})),s.Tg(7,"span"),c._(8,"ok"),s.qZ()()()}2&t&&(p.Q("content",e.data.content)("languageModel",e.data.languageModel),h.x(3),p.Q("mat-dialog-close",null))},dependencies:[m.ZT,M],encapsulation:2,changeDetection:0})},53136:(t,e,n)=>{n.d(e,{y:()=>o});class o{constructor(t,e,n,o){this.language=t,this.extension=e,this.compiledCode=n,this.initialData=o}}},97825:(t,e,n)=>{n.d(e,{C:()=>i});var o=n(28653),a=n(58656);const i=new o.y(a.Z)},92640:(t,e,n)=>{n.d(e,{x:()=>a});var o=n(70625);const a={asyncValidators:[],validators:[],disabled:!1,type:o.NI,childType:o.NI,args:{}}},71791:(t,e,n)=>{n.d(e,{p:()=>f});var o=n(17777),a=n(66398),i=n(70625),r=n(92640);class s{constructor(t,e){this._factoryFn=t,this._args=e}valueOf(){return this._args?t=>(t={...this._args,args:t},this._factoryFn(t)):this._factoryFn}}class d{constructor(t,e){this._factoryFn=t,this._args=e}valueOf(){return this._args?t=>(t={...this._args,args:t},this._factoryFn(t)):this._factoryFn}}function c(t,e){if(!t)return new o.cw({});const n=t.ɵControlsMetadata??{},l=t.ɵValidators??[],u=t.ɵAsyncValidators??[],p=t.ɵArgs??{},h=Object.keys(t),f=new o.cw({},{validators:l?.map((t=>t instanceof s?t.valueOf()({...p,...e}):t)).filter((t=>!!t)),asyncValidators:u?.map((t=>t instanceof d?t.valueOf()({...p,...e}):t)).filter((t=>!!t))});for(const l of h){const u=n[l]??r.x,p=t[l];if(void 0===p)continue;const h=u.validators.map((t=>t instanceof s?t.valueOf()({...u.args,...e}):t)).filter((t=>!!t)),m=u.asyncValidators.map((t=>t instanceof d?t.valueOf()({...u.args,...e}):t)).filter((t=>!!t));let v;switch(u.type){case o.cw:v=c(p,e);break;case a.Oe:if(v=new a.Oe([],{validators:h,asyncValidators:m,...u.controlOptions}),p&&Array.isArray(p)){const t=v;for(const n of p)switch(u.childType){case o.cw:t.push(c(n,e));break;case a.Oe:break;default:t.push(new i.NI(n,{validators:h,asyncValidators:m,...u.controlOptions}))}}break;default:v=new i.NI(p,{validators:h,asyncValidators:m,...u.controlOptions})}u.disabled&&v.disable(),f.addControl(l,v)}return f}function l(t,e){return c(t,e)}var u=n(11776),p=n(95176),h=n(38327);class f{constructor(t){this._injector=t}build(t,e){return l(t,{...e,injector:this._injector})}}f.ɵfac=function(t){return new(t||f)(u.LF(p.z))},f.ɵprov=h.Yz({token:f,factory:f.ɵfac})}}]);
//# sourceMappingURL=1057.chunk.0b39cbdd587f5762e6f9.js.map