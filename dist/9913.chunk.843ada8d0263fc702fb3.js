(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[9913],{9913:(t,e,n)=>{"use strict";n.r(e),n.d(e,{RelationsComplexModule:()=>St});var a=n(14392),o=n(27052),r=n(36910),i=n(76668),s=n(89001),l=n(38707),u=n(35648),c=n(97212),d=n(66888),p=n(94761),g=n(8477),m=n(71785),h=n(97149),v=n(56454),y=n(22804),f=n(17505),_=n(44055),b=n(56179),w=n(99043),x=n(57489),C=n(55441),k=n(26159),M=n(30688),D=n(57466),T=n(27049),P=n(85638),F=n(89952),I=n(77653),N=n(40043),R=n(79440),O=n(77842),q=n(73379),U=n(80827),Z=n(41853),Y=n(72891),Q=n(66794),L=n(73301),z=n(84967),A=n(80239),j=n(9545),E=n(80285),S=n(86825);let X=class{constructor(t,e){this._store=t,this.history=e,this._metadata=null}get emptyMetadata(){return{id:`stackPanel-${(0,D.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}_getMetadata(t){return{layout:t}}_loadDemo(){this._metadata=P.F.demoRelationsComplexLayout}_loadRestDemo(){this._metadata=P.F.complexDemoRestLayout}_loadFullDemo(){this._metadata=P.F.complexDemoFullLayout}};X.ɵfac=function(t){return new(t||X)(R.Y(F.U),R.Y(m.dB))},X.ɵcmp=O.Xp({type:X,selectors:[["layout-editor-view"]],features:[q._([v.z,{provide:g.qO,useFactory:t=>new y.I((e=>t.getData(e)?.layout)),deps:[F.U]},(0,h._)(),(0,M.iS)(),(0,b.vQ)(),(0,w.gJ)(),(0,x.hd)(),(0,C.Wh)([],N._),{provide:f.L,useClass:I.y},{provide:N._,useExisting:k.t},{provide:m.dK,useFactory:t=>t.registeredChange,deps:[N._],multi:!0}])],decls:18,vars:6,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsComplex/layout",3,"store","getMetadataCallback","history","componentMarking","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[3,"copyClick"],[1,"margin-horizontal-small"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(U.Tg(0,"div",0)(1,"button",1)(2,"span"),Z._(3,"go back"),U.qZ()(),U.Tg(4,"load-save-new",2),Y.N("metadataChange",(function(t){let n;return e._metadata=null!==(n=null==t?null:t.layout)&&void 0!==n?n:e.emptyMetadata})),U.qZ(),U.Tg(5,"button",3),Y.N("click",(function(){return e._loadDemo()})),U.Tg(6,"span"),Z._(7,"demo"),U.qZ()(),U.Tg(8,"button",3),Y.N("click",(function(){return e._loadRestDemo()})),U.Tg(9,"span"),Z._(10,"demo rest"),U.qZ()(),U.Tg(11,"button",3),Y.N("click",(function(){return e._loadFullDemo()})),U.Tg(12,"span"),Z._(13,"demo full"),U.qZ()(),U.Tg(14,"debug-data",4)(15,"div",5),Z._(16,"metadata"),U.qZ()()(),U._U(17,"layout-editor",6)),2&t&&(Q.x(4),L.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history)("componentMarking",!0),Q.x(10),L.Q("copyClick",e._metadata),Q.x(3),L.Q("metadata",e._metadata))},dependencies:[z.v,j.Z,E.v,A.o,S.Q],encapsulation:2,changeDetection:0}),(0,a.gn)([T.r,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Object)],X.prototype,"_getMetadata",null),X=(0,a.gn)([(0,p.N)({path:"layout"}),(0,p.N)({path:"layout/:id"}),(0,a.w6)("design:paramtypes",[F.U,_.Y])],X);var B=n(23710),J=n(15467),G=n(70625),V=n(20809),W=n(75990),K=n(68623),H=n(15686),$=n(4477),tt=n(94727),et=n(6427),nt=n(32361),at=n(12311),ot=n(77470),rt=n(27635),it=n(4489),st=n(68965),lt=n(31686),ut=n(60405),ct=n(68961),dt=n(36759),pt=n(96130),gt=n(86485),mt=n(6552);function ht(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}const vt=function(){var t,e=(t=function*(){return new((yield Promise.all([n.e(4623),n.e(9678),n.e(9776)]).then(n.bind(n,19776))).StaticInputRelationsEditorMetadata)},function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function i(t){ht(r,a,o,i,s,"next",t)}function s(t){ht(r,a,o,i,s,"throw",t)}i(void 0)}))});return function(){return e.apply(this,arguments)}}();var yt,ft=n(82568),_t=n(49280),bt=n(70983);function wt(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}let xt=yt=class{constructor(t,e,n){this._changeDetector=t,this._relationsProcessor=e,this._componentManager=n,this.stringForm=new G.NI(""),this.booleanForm=new G.NI(!1),this.stringForm.valueChanges.subscribe((t=>this.stringOutput=t)),this.booleanForm.valueChanges.subscribe((t=>this.booleanOutput=t))}static get relationsId(){return"static-input"}ngOnInit(){var t,e=this;return(t=function*(){e._componentManager.registerComponent(yt.relationsId,e),yield e._relationsProcessor.initialized,e._relationsProcessor.updateRelations(yt.relationsId)},function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function i(t){wt(r,a,o,i,s,"next",t)}function s(t){wt(r,a,o,i,s,"throw",t)}i(void 0)}))})()}ngOnDestroy(){this._relationsProcessor.destroyComponent(yt.relationsId),this._componentManager.unregisterComponent(yt.relationsId)}invalidateVisuals(){this._changeDetector.detectChanges()}};function Ct(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}xt.ɵfac=function(t){return new(t||xt)(R.Y(ct.s),R.Y(pt.v),R.Y(gt.s))},xt.ɵcmp=O.Xp({type:xt,selectors:[["static-input"]],standalone:!0,features:[ft.j],decls:5,vars:2,consts:[[1,"flex-column"],["type","text",3,"formControl"],["type","checkbox",3,"formControl"]],template:function(t,e){1&t&&(U.Tg(0,"div"),Z._(1,"INPUT:"),U.qZ(),U.Tg(2,"div",0),U._U(3,"input",1)(4,"input",2),U.qZ()),2&t&&(Q.x(3),L.Q("formControl",e.stringForm),Q.x(1),L.Q("formControl",e.booleanForm))},dependencies:[r.U,_t.Fj,bt.W,ot.JJ,rt.oH],encapsulation:2,changeDetection:0}),(0,a.gn)([(0,dt.A)(),(0,a.w6)("design:type",String)],xt.prototype,"stringOutput",void 0),(0,a.gn)([(0,dt.A)(),(0,a.w6)("design:type",Boolean)],xt.prototype,"booleanOutput",void 0),xt=yt=(0,a.gn)([(0,mt.i)(vt),(0,a.w6)("design:paramtypes",[ct.s,pt.v,gt.s])],xt);const kt=function(){var t,e=(t=function*(){return new((yield Promise.all([n.e(4623),n.e(9678),n.e(7863)]).then(n.bind(n,97863))).StaticOutputRelationsEditorMetadata)},function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function i(t){Ct(r,a,o,i,s,"next",t)}function s(t){Ct(r,a,o,i,s,"throw",t)}i(void 0)}))});return function(){return e.apply(this,arguments)}}();function Mt(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}var Dt;let Tt=Dt=class{constructor(t,e,n){this._changeDetector=t,this._relationsProcessor=e,this._componentManager=n}static get relationsId(){return"static-output"}ngOnInit(){var t,e=this;return(t=function*(){e._componentManager.registerComponent(Dt.relationsId,e),yield e._relationsProcessor.initialized,e._relationsProcessor.updateRelations(Dt.relationsId)},function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function i(t){Mt(r,a,o,i,s,"next",t)}function s(t){Mt(r,a,o,i,s,"throw",t)}i(void 0)}))})()}ngOnDestroy(){this._relationsProcessor.destroyComponent(Dt.relationsId),this._componentManager.unregisterComponent(Dt.relationsId)}invalidateVisuals(){this._changeDetector.detectChanges()}};function Pt(t,e){if(1&t&&U._U(0,"ng-option",11),2&t){const t=e.$implicit;L.Q("value",t)("text",t)}}Tt.ɵfac=function(t){return new(t||Tt)(R.Y(ct.s),R.Y(pt.v),R.Y(gt.s))},Tt.ɵcmp=O.Xp({type:Tt,selectors:[["static-output"]],inputs:{booleanInput:"booleanInput",stringInput:"stringInput"},standalone:!0,features:[ft.j],decls:7,vars:2,template:function(t,e){1&t&&(U.Tg(0,"div"),Z._(1,"OUTPUT:"),U.qZ(),U.Tg(2,"div")(3,"div"),Z._(4),U.qZ(),U.Tg(5,"div"),Z._(6),U.qZ()()),2&t&&(Q.x(4),et.hi("string: ",e.stringInput,""),Q.x(2),et.hi("boolean: ",e.booleanInput,""))},dependencies:[r.U],encapsulation:2,changeDetection:0}),Tt=Dt=(0,a.gn)([(0,mt.i)(kt),(0,a.w6)("design:paramtypes",[ct.s,pt.v,gt.s])],Tt);const Ft=function(t){return["/relationsComplex/layout",t]},It=function(t){return["/relationsComplex/relations",t]};let Nt=class{constructor(t,e,n,a){this._store=t,this._router=e,this._relationsManager=n,this._route=a,this._available=new G.NI(""),this._metadata=null,this.selectedMetadata=null,this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStored(),this._route.params.subscribe((({id:t})=>{if(t){this._available.setValue(t);const e=this.selectedMetadata=this._store.getData(t);this._metadata=e?.layout,this._relationsManager.setRelations(e.relations??[])}else this.selectedMetadata=null,this._relationsManager.setRelations([]);this._available.valueChanges.subscribe((t=>{this._router.navigate(["/relationsComplex/preview",t],{skipLocationChange:!1,replaceUrl:!0})}))}))}ngOnDestroy(){}};Nt.ɵfac=function(t){return new(t||Nt)(R.Y(F.U),R.Y(B.F0),R.Y(W.N),R.Y(J.gz))},Nt.ɵcmp=O.Xp({type:Nt,selectors:[["layout-preview-view"]],features:[q._([{provide:g.qO,useFactory:t=>new y.I((e=>t.getData(e)?.layout)),deps:[F.U]},{provide:V.te,useFactory:t=>new y.I((e=>t.getData(e)?.relations)),deps:[F.U]},(0,C.Fy)(),(0,b.WH)(),(0,w.qN)(),(0,x.ag)(),(0,K.cg)()])],decls:15,vars:11,consts:[[1,"flex-row"],[1,"margin-horizontal-small",3,"routerLink"],[1,"flex-1",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[3,"copyClick"],[1,"margin-horizontal-small"],[1,"flex-row","margin-top-big","flex-1"],[1,"margin-right-extra-small"],[1,"flex-1","overflow-vertical-scroll","thin-scrollbar",2,"border","1px dotted #666"],[3,"layoutComponentRenderer"],[2,"width","200px"],[3,"value","text"]],template:function(t,e){1&t&&(U.Tg(0,"div",0)(1,"a",1),Z._(2,"layout"),U.qZ(),U.Tg(3,"a",1),Z._(4,"relations"),U.qZ(),U.Tg(5,"ng-select",2),H.Y(6,Pt,1,2,"ng-option",3),U.qZ(),U.Tg(7,"debug-data",4)(8,"div",5),Z._(9),U.qZ()()(),U.Tg(10,"div",6),U._U(11,"static-input",7),U.Tg(12,"div",8),$.Gk(13,9),U.qZ(),U._U(14,"static-output",10),U.qZ()),2&t&&(Q.x(1),L.Q("routerLink",tt.VK(7,Ft,e._available.value)),Q.x(2),L.Q("routerLink",tt.VK(9,It,e._available.value)),Q.x(2),L.Q("formControl",e._available),Q.x(1),L.Q("ngForOf",e._availableNames),Q.x(1),L.Q("copyClick",e.selectedMetadata),Q.x(2),et.Oq(e._available.value),Q.x(4),L.Q("layoutComponentRenderer",e._metadata))},dependencies:[at.s,ot.JJ,rt.oH,nt.y,it.x,st.w,lt.v,ut.i,E.v,A.o,xt,Tt],encapsulation:2,changeDetection:0}),Nt=(0,a.gn)([(0,p.N)({path:"preview"}),(0,p.N)({path:"preview/:id"}),(0,a.w6)("design:paramtypes",[F.U,B.F0,W.N,J.gz])],Nt);var Rt=n(91861),Ot=n(80734),qt=n(54870),Ut=n(43801),Zt=n(38327);class Yt extends qt.w{getDefinedTypes(){const t={};return t[xt.relationsId]=xt,t[Tt.relationsId]=Tt,t}}Yt.ɵfac=function(){let t;return function(e){return(t||(t=Ut.n5(Yt)))(e||Yt)}}(),Yt.ɵprov=Zt.Yz({token:Yt,factory:Yt.ɵfac});var Qt=n(31166),Lt=n(36159);let zt=class{constructor(t,e,n){this._store=t,this.history=e,this._layoutManager=n,this._metadata=[]}get emptyMetadata(){return[]}_getMetadata(t){return{relations:t}}_loadDemo(){this._metadata=P.F.demoRelationsComplexRelations}_loadRestDemo(){this._metadata=P.F.complexDemoRestRelations}_loadFullDemo(){this._metadata=P.F.complexDemoFullRelations}setMetadata(t){this._metadata=t?.relations??this.emptyMetadata,this._layoutManager.setLayout(t?.layout)}};zt.ɵfac=function(t){return new(t||zt)(R.Y(F.U),R.Y(Rt.nR),R.Y(Ot.n))},zt.ɵcmp=O.Xp({type:zt,selectors:[["relations-editor-view"]],features:[q._([v.z,{provide:V.te,useFactory:t=>new y.I((e=>t.getData(e)?.relations)),deps:[F.U]},(0,x.vu)(),(0,K.xb)(),(0,w.Rn)(),(0,b.El)(),(0,C.Kc)((0,C.Sf)(Yt),N._),{provide:f.L,useClass:Qt.d}])],decls:15,vars:4,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsComplex/relations",3,"store","getMetadataCallback","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(U.Tg(0,"div",0)(1,"button",1)(2,"span"),Z._(3,"go back"),U.qZ()(),U.Tg(4,"load-save-new",2),Y.N("metadataChange",(function(t){return e.setMetadata(t)})),U.qZ(),U.Tg(5,"button",3),Y.N("click",(function(){return e._loadDemo()})),U.Tg(6,"span"),Z._(7,"demo"),U.qZ()(),U.Tg(8,"button",3),Y.N("click",(function(){return e._loadRestDemo()})),U.Tg(9,"span"),Z._(10,"demo rest"),U.qZ()(),U.Tg(11,"button",3),Y.N("click",(function(){return e._loadFullDemo()})),U.Tg(12,"span"),Z._(13,"demo full"),U.qZ()()(),U._U(14,"relations-editor",4)),2&t&&(Q.x(4),L.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history),Q.x(10),L.Q("metadata",e._metadata))},dependencies:[z.v,Lt.Y,S.Q],encapsulation:2,changeDetection:0}),(0,a.gn)([T.r,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Array]),(0,a.w6)("design:returntype",Object)],zt.prototype,"_getMetadata",null),zt=(0,a.gn)([(0,p.N)({path:"relations"}),(0,p.N)({path:"relations/:id"}),(0,a.w6)("design:paramtypes",[F.U,_.Y,Ot.n])],zt);const At=[X,zt,Nt];var jt=n(18567),Et=n(53245);let St=class{};St.ɵfac=function(t){return new(t||St)},St.ɵmod=O.oA({type:St}),St.ɵinj=Zt.cJ({providers:[(0,Et.Y)("LAYOUT_RELATIONS_COMPLEX_DATA")],imports:[o.e,r.U,i.Bz,u.A,c.p,d.W,l.s,jt.Qw,xt,Tt]}),St=(0,a.gn)([(0,s.P)(At)],St)},68623:(t,e,n)=>{"use strict";n.d(e,{cg:()=>f,xb:()=>y,Gc:()=>v});var a=n(14389),o=n(91861),r=n(20809),i=n(46480),s=n(11776),l=n(38327);function u(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}class c{constructor(t){this._logger=t}tryToGet(t){var e,a=this;return(e=function*(){try{return a._logger?.debug("RestDynamicModuleRelationsProvider: trying to get relations types for module {@module}",{moduleName:t.package}),"rest-components"===t.package?yield n.e(7867).then(n.bind(n,27867)):null}catch(e){a._logger?.debug("RestDynamicModuleRelationsProvider: module {@module} was not found, reason: "+e,{moduleName:t.package})}return null},function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(t){u(r,a,o,i,s,"next",t)}function s(t){u(r,a,o,i,s,"throw",t)}i(void 0)}))})()}}function d(t,e,n,a,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,o)}c.ɵfac=function(t){return new(t||c)(s.LF(i.bZ,8))},c.ɵprov=l.Yz({token:c,factory:c.ɵfac});class p{constructor(t){this._logger=t}tryToGet(t){var e,a=this;return(e=function*(){if("rest-components"!==t.package)return null;try{return a._logger?.debug("RestDynamicModuleItemsProvider: trying to get item {@item}",{name:t.name,package:t.package}),yield n(2721)(`./${t.name}/type`)}catch(e){a._logger?.debug("RestDynamicModuleItemsProvider: item {@item} was not found, reason: "+e,{name:t.name,package:t.package})}return null},function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function i(t){d(r,a,o,i,s,"next",t)}function s(t){d(r,a,o,i,s,"throw",t)}i(void 0)}))})()}}p.ɵfac=function(t){return new(t||p)(s.LF(i.bZ,8))},p.ɵprov=l.Yz({token:p,factory:p.ɵfac});const g={provide:o.GP,useClass:c,multi:!0},m={provide:o.n7,useClass:p,multi:!0},h={provide:r.B6,useClass:p,multi:!0};function v(){return[g,m,(0,a.XW)("rest-components")]}function y(){return[...v()]}function f(){return[h]}},2721:(t,e,n)=>{var a={"./rest/type":[20309,309]};function o(t){if(!n.o(a,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[t],o=e[0];return n.e(e[1]).then((()=>n(o)))}o.keys=()=>Object.keys(a),o.id=2721,t.exports=o}}]);
//# sourceMappingURL=9913.chunk.843ada8d0263fc702fb3.js.map