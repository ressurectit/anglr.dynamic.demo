/*! For license information please see 3716.chunk.3cc4722c5ff2624f4741.js.LICENSE.txt */
"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[3716],{53245:(t,e,n)=>{n.d(e,{Y:()=>r});var a=n(46480),o=n(89952);function r(t){return{provide:o.U,useFactory:e=>new o.U(e,t),deps:[a.T0]}}},68926:(t,e,n)=>{n.r(e),n.d(e,{RelationsEditorModule:()=>M});var a=n(14392),o=n(89001),r=n(22654),i=n(94761),s=n(48397),d=n(27049),c=n(85638),l=n(89952),u=n(79440),p=n(13691),m=n(80827),f=n(72891),g=n(41853),h=n(66794),v=n(73301),_=n(6427),y=n(86825),b=n(36159);let w=class{constructor(t,e){this._manager=t,this._store=e,this._metadata=[],this.stringMetadata=""}get emptyMetadata(){return[]}_getMetadata(){return this._manager.getMetadata()}_loadDemo(){this._metadata=c.F.relationsDemo}showMetadata(){const t=this._getMetadata();this.stringMetadata=JSON.stringify(t,null,4)}};w.ɵfac=function(t){return new(t||w)(u.Y(s.J),u.Y(l.U))},w.ɵcmp=p.Xp({type:w,selectors:[["relations-editor-view"]],decls:16,vars:4,consts:[[1,"flex-row"],["routePath","/relationsEditor",3,"store","getMetadataCallback","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1","flex-row"],[1,"flex-1",3,"metadata"],[1,"flex-column",2,"width","300px"],[1,"thin-scrollbar","flex-1",2,"white-space","pre","overflow","scroll"]],template:function(t,e){1&t&&(m.Tg(0,"div",0)(1,"load-save-new",1),f.N("metadataChange",(function(t){let n;return e._metadata=null!==(n=t)&&void 0!==n?n:e.emptyMetadata})),m.qZ(),m.Tg(2,"button",2),f.N("click",(function(){return e._loadDemo()})),m.Tg(3,"span"),g._(4,"demo"),m.qZ()()(),m.Tg(5,"div",3),m._U(6,"relations-editor",4),m.Tg(7,"div",5)(8,"div"),g._(9,"Relations metadata"),m.qZ(),m.Tg(10,"div")(11,"button",2),f.N("click",(function(){return e.showMetadata()})),m.Tg(12,"span"),g._(13,"show metadata"),m.qZ()()(),m.Tg(14,"div",6),g._(15),m.qZ()()()),2&t&&(h.x(1),v.Q("store",e._store)("getMetadataCallback",e._getMetadata),h.x(5),v.Q("metadata",e._metadata),h.x(9),_.Oq(e.stringMetadata))},dependencies:[y.Q,b.Y],encapsulation:2,changeDetection:0}),(0,a.gn)([d.r,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",Array)],w.prototype,"_getMetadata",null),w=(0,a.gn)([(0,i.N)({path:""}),(0,i.N)({path:":id"}),(0,a.w6)("design:paramtypes",[s.J,l.U])],w);const D=[w];var x=n(18567),k=n(53245),I=n(38327);let M=class{};M.ɵfac=function(t){return new(t||M)},M.ɵmod=p.oA({type:M}),M.ɵinj=I.cJ({providers:[(0,k.Y)("RELATIONS_DATA")],imports:[x.Qw,r.Y.withProviders()]}),M=(0,a.gn)([(0,o.P)(D)],M)},6258:(t,e,n)=>{n.d(e,{E:()=>q});var a=n(27052),o=n(989),r=n(46480),i=n(57466),s=n(38223),d=n(91861),c=n(13691);class l{transform(t,e,n){const a=n?e:`${t.itemSource.name}-${e}`;return{metadata:{id:a,displayName:a,package:t.itemSource.package,name:t.itemSource.name,relationsOptions:(0,i.l7)(!0,{},t.metadata.metaInfo?.defaultOptions),outputs:[],nodeMetadata:{coordinates:{x:0,y:0},options:null}}}}}l.ɵfac=function(t){return new(t||l)},l.ɵpipe=c.Yj({name:"toRelationsDragData",type:l,pure:!0,standalone:!0});var u=n(80827),p=n(41853),m=n(6845),f=n(66794),g=n(6427),h=n(84773),v=n(72891),_=n(43870),y=n(65589),b=n(15686),w=n(73301),D=n(4477),x=n(79440),k=n(68961),I=n(82568),M=n(48397),O=n(12311),C=n(21651),T=n(32434),L=n(99055),N=n(23208);function F(t,e,n,a,o,r,i){try{var s=t[r](i),d=s.value}catch(t){return void n(t)}s.done?e(d):Promise.resolve(d).then(a,o)}function P(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function i(t){F(r,a,o,i,s,"next",t)}function s(t){F(r,a,o,i,s,"throw",t)}i(void 0)}))}}function Y(t,e){if(1&t&&(u.Tg(0,"div",8),p._(1),u.qZ()),2&t){const t=m.o().$implicit;f.x(1),g.Oq(null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function S(t,e){if(1&t){const t=h.E();u.Tg(0,"div",4)(1,"div",5),v.N("cdkDragDropped",(function(){_.CH(t);const e=m.o(2);return _.Kt(e._generateNewId())})),y.AL(2,"toRelationsDragData"),u.Tg(3,"div",6),p._(4),u.qZ(),b.Y(5,Y,2,1,"div",7),u.qZ()()}if(2&t){const t=e.$implicit,n=m.o(2);let a;w.Q("cdkDropListConnectedTo",n.canvasDropList),f.x(1),w.Q("cdkDragData",y.Dn(2,4,t,t.metadata.singleton?t.itemSource.name:n._newCompnentId,t.metadata.singleton)),f.x(3),g.Oq(t.metadata.singleton?t.itemSource.name:null!==(a=null==t.metadata.metaInfo?null:t.metadata.metaInfo.name)&&void 0!==a?a:t.itemSource.name),f.x(1),w.Q("ngIf",null==t.metadata.metaInfo?null:t.metadata.metaInfo.description)}}function A(t,e){if(1&t&&(D.yn(0),u.Tg(1,"div",2),p._(2),u.qZ(),b.Y(3,S,6,8,"div",3),D.BQ()),2&t){const t=e.$implicit;f.x(2),g.hi("",t.key," "),f.x(1),w.Q("ngForOf",t.value)}}class q{constructor(t,e,n,a,o,r){this._moduleTypesLoader=t,this._nodesLoader=e,this._changeDetector=n,this._metadataManager=a,this._refreshObservables=o,this._logger=r,this._initSubscriptions=new s.w,this._allItems=[],this._groupedItems={},this._newCompnentId=(0,i.Ox)(16),this._isDragOverPalette=!1}ngOnInit(){var t=this;return P((function*(){if(t._refreshObservables&&Array.isArray(t._refreshObservables))for(const e of t._refreshObservables)t._initSubscriptions.add(e.subscribe((()=>t.loadNodes())));yield t.loadNodes()}))()}ngOnDestroy(){this._initSubscriptions.unsubscribe()}loadNodes(){var t=this;return P((function*(){var e;t._allItems=[],t._groupedItems={};for(const e of["basic-components","material-components","static-components","layout-components"]){const n=(yield t._moduleTypesLoader.loadItem({package:e,name:"types"}))?.data??[];for(const a of n){const n={package:e,name:a},o=yield t._nodesLoader.loadItem(n);o?t._allItems.push({itemSource:n,metadata:o}):t._logger?.warn("NodesPaletteSAComponent: Failed to obtain layout editor metadata {@source}",n)}}t._groupedItems[""]=[];for(const n of t._allItems){const a=n.metadata.metaInfo?.group??"";(e=t._groupedItems)[a]??(e[a]=[]),t._groupedItems[a].push(n)}t._changeDetector.detectChanges()}))()}_generateNewId(){this._newCompnentId=(0,i.Ox)(16)}}q.ɵfac=function(t){return new(t||q)(x.Y(d.Bj),x.Y(d.fI),x.Y(k.s),x.Y(M.J),x.Y(d.dK,8),x.Y(r.bZ,8))},q.ɵcmp=c.Xp({type:q,selectors:[["nodes-palette"]],inputs:{canvasDropList:"canvasDropList"},standalone:!0,features:[I.j],decls:3,vars:3,consts:[[1,"flex-column"],[4,"ngFor","ngForOf"],[1,"text-spread","text-small-caps","margin-left-extra-small","margin-horizontal-small","bold"],["cdkDropList","","cdkDropListSortingDisabled","","class","palette-droplist",3,"cdkDropListConnectedTo",4,"ngFor","ngForOf"],["cdkDropList","","cdkDropListSortingDisabled","",1,"palette-droplist",3,"cdkDropListConnectedTo"],["cdkDrag","",1,"editor-component","mat-elevation-z2",3,"cdkDragData","cdkDragDropped"],[1,"editor-component-name"],["class","editor-component-description",4,"ngIf"],[1,"editor-component-description"]],template:function(t,e){1&t&&(u.Tg(0,"div",0),b.Y(1,A,4,2,"ng-container",1),y.AL(2,"keyvalue"),u.qZ()),2&t&&(f.x(1),w.Q("ngForOf",y.lc(2,1,e._groupedItems)))},dependencies:[a.e,O.s,C.O,T.N,o._,L.W,N.Z,l],styles:[".editor-component[_ngcontent-%COMP%]\n{\n    margin: 2px 10px;\n    padding: 4px 8px;\n\n    border-radius: 6px;\n    border: 1px solid #F0F0F0;\n    background-color: #FAFAFA;\n}\n\n.editor-component-name[_ngcontent-%COMP%]\n{\n    font-weight: 500;\n}\n\n.editor-component-description[_ngcontent-%COMP%]\n{\n    margin-left: 4px;\n    margin-top: 2px;\n    font-size: .8em;\n}\n\n.palette-droplist[_ngcontent-%COMP%]   layout-editor-drag-placeholder[_ngcontent-%COMP%]\n{\n    display: none;\n}"],changeDetection:0})},36159:(t,e,n)=>{n.d(e,{Y:()=>f});var a=n(989),o=n(6258),r=n(75957),i=n(13691),s=n(82568),d=n(80827),c=n(72891),l=n(11282),u=n(66794),p=n(73301),m=n(99055);class f{constructor(){this.metadata=[]}addNode(t){const e=t.container.element.nativeElement.getBoundingClientRect();t.item.data.metadata.nodeMetadata?.coordinates&&(t.item.data.metadata.nodeMetadata.coordinates.x=t.dropPoint.x-e.x,t.item.data.metadata.nodeMetadata.coordinates.y=t.dropPoint.y-e.y),this.metadata=[...this.metadata,t.item.data.metadata]}}f.ɵfac=function(t){return new(t||f)},f.ɵcmp=i.Xp({type:f,selectors:[["relations-editor"]],inputs:{metadata:"metadata"},standalone:!0,features:[s.j],decls:4,vars:2,consts:[[1,"flex-row","flex-1"],[2,"width","250px",3,"canvasDropList"],["cdkDropList","",1,"flex-1",3,"nodeDefinitions","cdkDropListDropped"],["dropList","cdkDropList"]],template:function(t,e){if(1&t&&(d.Tg(0,"div",0),d._U(1,"nodes-palette",1),d.Tg(2,"relations-canvas",2,3),c.N("cdkDropListDropped",(function(t){return e.addNode(t)})),d.qZ()()),2&t){const t=l.M(3);u.x(1),p.Q("canvasDropList",t),u.x(1),p.Q("nodeDefinitions",e.metadata)}},dependencies:[o.E,r.F,a._,m.W],styles:["[_nghost-%COMP%]{display: flex;}"],changeDetection:0})},22654:(t,e,n)=>{n.d(e,{Y:()=>s});var a=n(36159),o=n(47432),r=n(13691),i=n(38327);class s{static withProviders(){return{ngModule:s,providers:[(0,o.TN)()]}}static withStaticComponents(t){return{ngModule:s,providers:[(0,o.hE)(t)]}}}s.ɵfac=function(t){return new(t||s)},s.ɵmod=r.oA({type:s}),s.ɵinj=i.cJ({imports:[a.Y]})},89402:(t,e,n)=>{function a(t){return!!t.__ɵɵRelationsComponent}function o(){return function(t){return t.__ɵɵRelationsComponent=!0,t}}n.d(e,{H:()=>o,O:()=>a})},14389:(t,e,n)=>{function a(t,e,n,a,o=!1){t[e]={currentValue:n,previousValue:a,firstChange:o,isFirstChange:()=>o}}n.d(e,{m:()=>a})},94761:(t,e,n)=>{n.d(e,{N:()=>o});var a=n(43939);function o(t){return function(e){const n=t;n.component=e;const o=e;return(0,a.fp)(o.routeValues)&&Object.defineProperty(e,"routeValues",{enumerable:!0,configurable:!1,writable:!1,value:[]}),o.routeValues.push(n),e}}},989:(t,e,n)=>{n.d(e,{_:()=>s});var a=n(65252),o=n(19878),r=n(13691),i=n(38327);class s{}s.ɵfac=function(t){return new(t||s)},s.ɵmod=r.oA({type:s}),s.ɵinj=i.cJ({providers:[o.v],imports:[a.Z]})},32434:(t,e,n)=>{n.d(e,{N:()=>i});var a=n(79440),o=n(55845),r=n(13691);class i{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=s}transform(t,e=s){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const n=this.differ.diff(t),a=e!==this.compareFn;return n&&(this.keyValues=[],n.forEachItem((t=>{this.keyValues.push({key:t.key,value:t.currentValue})}))),(n||a)&&(this.keyValues.sort(e),this.compareFn=e),this.keyValues}}function s(t,e){const n=t.key,a=e.key;if(n===a)return 0;if(void 0===n)return 1;if(void 0===a)return-1;if(null===n)return 1;if(null===a)return-1;if("string"==typeof n&&"string"==typeof a)return n<a?-1:1;if("number"==typeof n&&"number"==typeof a)return n-a;if("boolean"==typeof n&&"boolean"==typeof a)return n<a?-1:1;const o=String(n),r=String(a);return o==r?0:o<r?-1:1}i.ɵfac=function(t){return new(t||i)(a.Y(o.a,16))},i.ɵpipe=r.Yj({name:"keyvalue",type:i,pure:!1,standalone:!0})},27049:(t,e,n)=>{n.d(e,{r:()=>o});var a=n(43939);function o(t,e,n){const o=n.value??n.get?.();if(!(0,a.mf)(o))throw new Error(`Unable to apply @BindThis decorator to '${e.toString()}', it is not a method.`);return{configurable:!0,get(){const t=o.bind(this);return Object.defineProperty(this,e,{value:t,configurable:!0,writable:!0}),t}}}},87606:(t,e,n)=>{function a(t,e,n,a,o,r,i){try{var s=t[r](i),d=s.value}catch(t){return void n(t)}s.done?e(d):Promise.resolve(d).then(a,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function s(t){a(i,o,r,s,d,"next",t)}function d(t){a(i,o,r,s,d,"throw",t)}s(void 0)}))}}function r(t){return i.apply(this,arguments)}function i(){return(i=o((function*(t){return t instanceof Promise?yield t:t}))).apply(this,arguments)}n.d(e,{K:()=>r})}}]);
//# sourceMappingURL=3716.chunk.3cc4722c5ff2624f4741.js.map