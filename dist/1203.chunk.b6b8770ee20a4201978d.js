(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[1203],{31203:(e,t,a)=>{"use strict";a.r(t),a.d(t,{LayoutEditorModule:()=>Y});var n=a(14392),s=a(89001),i=a(11650),r=a(56179),o=a(99043),c=a(57489),u=a(8477),d=a(22804),l=a(17505),g=a(10414),h=a(94761),p=a(44055),f=a(71785),m=a(57466),v=a(27049),y=a(85638),b=a(89952),k=a(79440),x=a(13691),P=a(80827),w=a(72891),_=a(41853),I=a(66794),S=a(73301),O=a(9545),M=a(86825);let T=class{constructor(e,t){this.store=e,this.history=t,this._metadata=null}get emptyMetadata(){return{id:`stackPanel-${(0,m.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}_getMetadata(e){return e}_loadDemo(){this._metadata=y.F.demoLayout}};T.ɵfac=function(e){return new(e||T)(k.Y(b.U),k.Y(f.dB))},T.ɵcmp=x.Xp({type:T,selectors:[["layout-editor-view"]],decls:6,vars:4,consts:[[1,"flex-row"],["routePath","/layout/editor",3,"store","getMetadataCallback","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(e,t){1&e&&(P.Tg(0,"div",0)(1,"load-save-new",1),w.N("metadataChange",(function(e){let a;return t._metadata=null!==(a=e)&&void 0!==a?a:t.emptyMetadata})),P.qZ(),P.Tg(2,"button",2),w.N("click",(function(){return t._loadDemo()})),P.Tg(3,"span"),_._(4,"demo"),P.qZ()()(),P._U(5,"layout-editor",3)),2&e&&(I.x(1),S.Q("store",t.store)("getMetadataCallback",t._getMetadata)("history",t.history),I.x(4),S.Q("metadata",t._metadata))},dependencies:[O.Z,M.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([v.r,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",Object)],T.prototype,"_getMetadata",null),T=(0,n.gn)([(0,h.N)({path:"editor"}),(0,h.N)({path:"editor/:id"}),(0,n.w6)("design:paramtypes",[b.U,p.Y])],T);const C=[T];var D=a(18567),N=a(53245),F=a(77653),Z=a(38327);let Y=class{};Y.ɵfac=function(e){return new(e||Y)},Y.ɵmod=x.oA({type:Y}),Y.ɵinj=Z.cJ({providers:[{provide:u.qO,useFactory:e=>new d.I((t=>e.getData(t))),deps:[b.U]},(0,N.Y)("LAYOUT_DATA"),(0,r.vQ)(),(0,o.gJ)(),(0,c.hd)(),(0,g.i)(),{provide:l.L,useClass:F.y}],imports:[i.c.withProviders(),D.Qw]}),Y=(0,n.gn)([(0,s.P)(C)],Y)},77653:(e,t,a)=>{"use strict";a.d(t,{y:()=>i});var n=a(17505),s=a(38327);class i extends n.L{constructor(){super("LAYOUT_PACKAGES_STORE")}}i.ɵfac=function(e){return new(e||i)},i.ɵprov=s.Yz({token:i,factory:i.ɵfac})},10414:(e,t,a)=>{"use strict";a.d(t,{H:()=>f,i:()=>m});var n=a(14389),s=a(8477),i=a(71785),r=a(46480),o=a(11776),c=a(38327);function u(e,t,a,n,s,i,r){try{var o=e[i](r),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,s)}class d{constructor(e){this._logger=e}tryToGet(e){var t,n=this;return(t=function*(){if("form-components"!==e.package)return null;try{return n._logger?.debug("FormDynamicModuleItemsProvider: trying to get item {@item}",{name:e.name,package:e.package}),yield a(54384)(`./${e.name}/type`)}catch(t){n._logger?.debug("FormDynamicModuleItemsProvider: item {@item} was not found, reason: "+t,{name:e.name,package:e.package})}return null},function(){var e=this,a=arguments;return new Promise((function(n,s){var i=t.apply(e,a);function r(e){u(i,n,s,r,o,"next",e)}function o(e){u(i,n,s,r,o,"throw",e)}r(void 0)}))})()}}function l(e,t,a,n,s,i,r){try{var o=e[i](r),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,s)}d.ɵfac=function(e){return new(e||d)(o.LF(r.bZ,8))},d.ɵprov=c.Yz({token:d,factory:d.ɵfac});class g{constructor(e){this._logger=e}tryToGet(e){var t,n=this;return(t=function*(){try{return n._logger?.debug("FormDynamicModuleTypesProvider: trying to get types for module {@module}",{moduleName:e.package}),"form-components"===e.package?yield a.e(6311).then(a.bind(a,16311)):null}catch(t){n._logger?.debug("FormDynamicModuleTypesProvider: module {@module} was not found, reason: "+t,{moduleName:e.package})}return null},function(){var e=this,a=arguments;return new Promise((function(n,s){var i=t.apply(e,a);function r(e){l(i,n,s,r,o,"next",e)}function o(e){l(i,n,s,r,o,"throw",e)}r(void 0)}))})()}}g.ɵfac=function(e){return new(e||g)(o.LF(r.bZ,8))},g.ɵprov=c.Yz({token:g,factory:g.ɵfac});const h={provide:s.Aw,useClass:d,multi:!0},p={provide:i.sc,useClass:g,multi:!0};function f(){return[h]}function m(){return[h,p,(0,n.X)("form-components")]}},9545:(e,t,a)=>{"use strict";a.d(t,{Z:()=>M});var n=a(35375),s=a(60405),i=a(44155),r=a(49891),o=a(23199),c=a(50267),u=a(50486),d=a(21813),l=a(85309),g=a(71785),h=a(52053),p=a(79440),f=a(68961),m=a(13691),v=a(73379),y=a(36973),b=a(82568),k=a(80827),x=a(4477),P=a(66794),w=a(73301),_=a(56454),I=a(6535),S=a(2538),O=a(75464);class M{constructor(e,t,a){this.history=e,this.changeDetector=t,this.hotkeys=a,this.initSubscriptions=new o.w0,this.metadata=null,a?.init()}ngOnInit(){this.initSubscriptions.add(this.history.pop.subscribe((e=>{this.metadata=e,this.changeDetector.detectChanges()}))),this.hotkeys&&(this.initSubscriptions.add(this.hotkeys.undo.subscribe((()=>this.history.undo()))),this.initSubscriptions.add(this.hotkeys.redo.subscribe((()=>this.history.redo()))))}ngOnChanges(e){(0,r.$)("metadata")in e&&(this.history.clean(),this.metadata&&this.history.setInitialState(this.metadata))}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.hotkeys?.destroy()}}M.ɵfac=function(e){return new(e||M)(p.Y(g.dB),p.Y(f.s),p.Y(_.z,8))},M.ɵcmp=m.Xp({type:M,selectors:[["layout-editor"]],inputs:{metadata:"metadata"},standalone:!0,features:[v._([l.NX,h.E]),y.T,b.j],decls:10,vars:1,consts:[[1,"flex-row","margin-top-big","flex-1"],["label","Hierarchy"],["label","Palette"],[1,"flex-1","layout-content","thin-scrollbar"],[3,"layoutComponentRenderer"]],template:function(e,t){1&e&&(k.Tg(0,"div",0)(1,"mat-tab-group")(2,"mat-tab",1),k._U(3,"components-tree"),k.qZ(),k.Tg(4,"mat-tab",2),k._U(5,"package-manager")(6,"components-palette"),k.qZ()(),k.Tg(7,"div",3),x.Gk(8,4),k.qZ(),k._U(9,"properties-editor"),k.qZ()),2&e&&(P.x(8),w.Q("layoutComponentRenderer",t.metadata))},dependencies:[u.D,c.O,d.M,s.i,i.F,I.X,n.N,S.SP,O.u],styles:[".layout-content[_ngcontent-%COMP%]\n{\n    overflow-y: scroll;\n    overflow-x: hidden;\n}","[_nghost-%COMP%]{display: flex;}"],changeDetection:0})},85309:(e,t,a)=>{"use strict";a.d(t,{G5:()=>M,Nc:()=>_,Q3:()=>O,TA:()=>I,NX:()=>S,r4:()=>T,f4:()=>N,DN:()=>D,qF:()=>C});var n=a(60640),s=a(11776),i=a(65569),r=a(44677),o=a(12193),c=a(13457),u=a(44055),d=a(8477),l=a(46480),g=a(38327);function h(e,t,a,n,s,i,r){try{var o=e[i](r),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,s)}class p{constructor(e){this._logger=e}tryToGet(e){var t,n=this;return(t=function*(){if("@anglr/dynamic/layout-editor"!=e.package)return null;try{if(n._logger?.debug("LayoutDesignerDynamicModuleItemsProvider: trying to get item {@item}",{name:e.name,package:e.package}),"layout-designer"==e.name)return yield a.e(5563).then(a.bind(a,95563))}catch(t){n._logger?.warn("LayoutDesignerDynamicModuleItemsProvider: item {@item} was not found, reason:"+t,{name:e.name,package:e.package})}return n._logger?.debug("LayoutDesignerDynamicModuleItemsProvider: item {@item} was not found",{name:e.name,package:e.package}),null},function(){var e=this,a=arguments;return new Promise((function(n,s){var i=t.apply(e,a);function r(e){h(i,n,s,r,o,"next",e)}function o(e){h(i,n,s,r,o,"throw",e)}r(void 0)}))})()}}function f(e,t,a,n,s,i,r){try{var o=e[i](r),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,s)}p.ɵfac=function(e){return new(e||p)(s.LF(l.bZ,8))},p.ɵprov=g.Yz({token:p,factory:p.ɵfac});class m{constructor(e){this._logger=e}tryToGet(e){var t,n=this;return(t=function*(){try{switch(n._logger?.debug("DefaultDynamicModuleTypesProvider: trying to get types for module {@module}",{moduleName:e.package}),e.package){case"basic-components":return yield a.e(4771).then(a.bind(a,4771));case"material-components":return yield a.e(1125).then(a.bind(a,41125));default:return null}}catch(t){n._logger?.debug("DefaultDynamicModuleTypesProvider: module {@module} was not found, reason: "+t,{moduleName:e.package})}return null},function(){var e=this,a=arguments;return new Promise((function(n,s){var i=t.apply(e,a);function r(e){f(i,n,s,r,o,"next",e)}function o(e){f(i,n,s,r,o,"throw",e)}r(void 0)}))})()}}m.ɵfac=function(e){return new(e||m)(s.LF(l.bZ,8))},m.ɵprov=g.Yz({token:m,factory:m.ɵfac});var v=a(83434),y=a(71785),b=a(94596),k=a(97149),x=a(9142);function P(e,t,a,n,s,i,r){try{var o=e[i](r),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,s)}const w=function(){var e,t=(e=function*(e,t){const a=yield(0,r.L)(e,t),n=yield(0,x.k)(e,t),s=a?.data;if(t?.debug("layoutDesignerTypeExtractor: trying to extract default dynamic data"),!s?.layoutEditorDesignerType)return null;const i=yield s?.layoutEditorDesignerType;return i?{data:i,childExtensions:n?.childExtensions,extensions:n?.extensions}:null},function(){var t=this,a=arguments;return new Promise((function(n,s){var i=e.apply(t,a);function r(e){P(i,n,s,r,o,"next",e)}function o(e){P(i,n,s,r,o,"throw",e)}r(void 0)}))});return function(e,a){return t.apply(this,arguments)}}(),_={provide:d.gM,useFactory:e=>new i.$([w],e),deps:[[new n.Fi,l.bZ]],multi:!0},I={provide:d.Aw,useClass:p,multi:!0},S={provide:d.xM,useValue:function(e){return{id:`${e.id}-designer`,package:"@anglr/dynamic/layout-editor",name:"layout-designer",options:{typeMetadata:e}}}},O={provide:y.sc,useClass:m,multi:!0},M={provide:y.FX,useFactory:e=>new i.$([r.L],e),deps:[[new n.Fi,l.bZ]],multi:!0},T={provide:y.RI,useValue:[b.$]},C={provide:y.QT,useFactory:()=>new o.S((0,s.f3)(y.sc),(0,s.f3)(y.FX),k.G,(0,s.f3)(l.bZ,{optional:!0})??void 0)},D={provide:c.Q,useExisting:v.t},N={provide:y.dB,useClass:u.Y}},94596:(e,t,a)=>{"use strict";a.d(t,{$:()=>n});const n=Symbol("LayoutPropertyMetadata")},97149:(e,t,a)=>{"use strict";a.d(t,{G:()=>h,_:()=>g});var n=a(14389),s=a(2991),i=a(43939),r=a(85309),o=a(85902),c=a(43671),u=a(83434),d=a(98906),l=a(26938);function g(e=!0,t=["basic-components","material-components"]){return[...e?[r.Nc]:[],...(0,s._)(),r.TA,r.Q3,r.G5,r.r4,r.qF,o.T,c.L,u.t,d.z,l.$,r.f4,r.DN,...t.map((e=>(0,n.X)(e)))]}const h=function(e){return!((0,i.fp)(e?.data)||!Array.isArray(e.data))}},11650:(e,t,a)=>{"use strict";a.d(t,{c:()=>c});var n=a(99109),s=a(9545),i=a(97149),r=a(13691),o=a(38327);class c{static withProviders(e=!0,t){return{ngModule:c,providers:[(0,i._)(e,t)]}}}c.ɵfac=function(e){return new(e||c)},c.ɵmod=r.oA({type:c}),c.ɵinj=o.cJ({imports:[s.Z,n.u]})},6535:(e,t,a)=>{"use strict";a.d(t,{X:()=>I});var n=a(80827),s=a(41853),i=a(73301),r=a(66794),o=a(6427),c=a(84773),u=a(72891),d=a(43870),l=a(6845),g=a(15686),h=a(11282),p=a(79440),f=a(13691),m=a(85320),v=a(17505),y=a(12311),b=a(21651),k=a(24881),x=a(17790);function P(e,t){if(1&e&&(n.Tg(0,"option",11),s._(1),n.qZ()),2&e){const e=t.$implicit;i.Q("value",e),r.x(1),o.Oq(e)}}function w(e,t){if(1&e){const e=c.E();n.Tg(0,"div",12)(1,"div",13),s._(2),n.qZ(),n.Tg(3,"button",14),u.N("click",(function(){const t=d.CH(e).$implicit,a=l.o(2);return d.Kt(a.removePackage(t))})),n._U(4,"span",15),n.qZ()()}if(2&e){const e=t.$implicit;r.x(2),o.Oq(e)}}function _(e,t){if(1&e){const e=c.E();n.Tg(0,"div")(1,"div",0)(2,"select",5,6),g.Y(4,P,2,2,"option",7),n.qZ(),n.Tg(5,"button",8),u.N("click",(function(){d.CH(e);const t=h.M(3),a=l.o();return d.Kt(a.addPackage(a.availablePackages[t.selectedIndex]))})),n._U(6,"span",9),n.qZ()(),g.Y(7,w,5,1,"div",10),n.qZ()}if(2&e){const e=l.o();r.x(4),i.Q("ngForOf",e.availablePackages),r.x(3),i.Q("ngForOf",e.usedPackages)}}class I{constructor(e){this.packageManager=e,this.detailVisible=!1,this.usedPackages=[],this.availablePackages=[]}ngOnInit(){this.usedPackages=this.packageManager.usedPackages,this.updatedAvailablePackages()}addPackage(e){e&&(this.usedPackages=[...this.usedPackages,e],this.updatedAvailablePackages(),this.packageManager.setUsedPackages(this.usedPackages))}removePackage(e){this.usedPackages=this.usedPackages.filter((t=>t!=e)),this.updatedAvailablePackages(),this.packageManager.setUsedPackages(this.usedPackages)}updatedAvailablePackages(){this.availablePackages=this.packageManager.packages.filter((e=>!this.usedPackages.find((t=>t==e))))}}I.ɵfac=function(e){return new(e||I)(p.Y(v.L))},I.ɵcmp=f.Xp({type:I,selectors:[["package-manager"]],decls:6,vars:5,consts:[[1,"flex-row"],[1,"btn-icon","margin-right-extra-small",3,"click"],[1,"fas"],[1,"pm-header"],[4,"ngIf"],[1,"form-control","flex-1"],["avPkgs",""],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn-icon","margin-left-extra-small",3,"click"],[1,"fas","fa-plus"],["class","flex-row align-items-center margin-top-small",4,"ngFor","ngForOf"],[3,"value"],[1,"flex-row","align-items-center","margin-top-small"],[1,"flex-1"],[1,"btn-icon","margin-left-extra-small",3,"click"],[1,"fas","fa-times"]],template:function(e,t){1&e&&(n.Tg(0,"div",0)(1,"button",1),u.N("click",(function(){return t.detailVisible=!t.detailVisible})),n._U(2,"span",2),n.qZ(),n.Tg(3,"div",3),s._(4,"packages"),n.qZ()(),g.Y(5,_,8,2,"div",4)),2&e&&(r.x(2),m.ek("fa-plus",!t.detailVisible)("fa-minus",t.detailVisible),r.x(3),i.Q("ngIf",t.detailVisible))},dependencies:[y.s,b.O,k.YN,x.Kr],styles:["[_nghost-%COMP%]\n{\n    display: flex;\n    flex-direction: column;\n    padding: 8px 10px;\n    border-bottom: 1px solid #aaa;\n}\n\n.pm-header[_ngcontent-%COMP%]\n{\n    text-transform: uppercase;\n    letter-spacing: 1px;\n}"],changeDetection:0})},44155:(e,t,a)=>{"use strict";a.d(t,{F:()=>o});var n=a(27052),s=a(68624),i=a(13691),r=a(38327);class o{}o.ɵfac=function(e){return new(e||o)},o.ɵmod=i.oA({type:o}),o.ɵinj=r.cJ({imports:[n.e,s.U]})},44055:(e,t,a)=>{"use strict";a.d(t,{Y:()=>c});var n=a(43939),s=a(86463),i=a(13457),r=a(11776),o=a(38327);class c{constructor(e){this.metadataState=e,this.activeIndex=null,this.saveIndex=null,this.states=[],this.enabled=!0,this.popSubject=new s.x,this.historyChangeSubject=new s.x}get canUndo(){return!(0,n.fp)(this.activeIndex)&&this.activeIndex>0}get canRedo(){return!(0,n.fp)(this.activeIndex)&&this.activeIndex+1<this.states.length}get saved(){return this.activeIndex===this.saveIndex}get pop(){return this.popSubject.asObservable()}get historyChange(){return this.historyChangeSubject.asObservable()}get state(){return(0,n.fp)(this.activeIndex)?null:JSON.parse(this.states[this.activeIndex])}undo(){this.canUndo&&!(0,n.fp)(this.activeIndex)&&(this.activeIndex--,this.popSubject.next(JSON.parse(this.states[this.activeIndex])))}redo(){this.canRedo&&!(0,n.fp)(this.activeIndex)&&(this.activeIndex++,this.popSubject.next(JSON.parse(this.states[this.activeIndex])))}getNewState(){if(!this.enabled)return;this.states.length>=200&&this.states.shift(),(0,n.EN)(this.activeIndex)&&this.activeIndex+1<this.states.length&&this.states.splice(this.activeIndex+1,this.states.length-(this.activeIndex+1));const e=this.metadataState.getMetadata();e&&(this.states.push(JSON.stringify(e)),this.activeIndex=this.states.length-1,this.historyChangeSubject.next())}save(){this.saveIndex=this.activeIndex}setInitialState(e){this.states.push(JSON.stringify(e)),this.activeIndex=this.states.length-1,this.save()}clean(){this.activeIndex=null,this.saveIndex=null,this.states=[]}enable(){this.enabled=!0}disable(){this.enabled=!1}}c.ɵfac=function(e){return new(e||c)(r.LF(i.Q))},c.ɵprov=o.Yz({token:c,factory:c.ɵfac})},17505:(e,t,a)=>{"use strict";a.d(t,{L:()=>c});var n=a(11776),s=a(46480),i=a(23199),r=a(86463),o=a(13457);class c{constructor(e){this.storageName=e,this._usedPackages=[],this.initSubscriptions=new i.w0,this.usedPackagesSubject=new r.x,this.packagesChangeSubject=new r.x,this.store=(0,n.f3)(s.T0),this.packageSources=(0,n.f3)(o.B),this.usedPackages=this.store.get(e)??[];for(const e of this.packageSources)this.initSubscriptions.add(e.packagesChange.subscribe((()=>this.packagesChangeSubject.next())))}get packagesChange(){return this.packagesChangeSubject.asObservable()}get packages(){const e=[];for(const t of this.packageSources)e.push(...t.packages);return e}get usedPackages(){return this._usedPackages}set usedPackages(e){this._usedPackages=e}get usedPackagesChange(){return this.usedPackagesSubject.asObservable()}setUsedPackages(e){this._usedPackages!=e&&(this._usedPackages=e,this.store.set(this.storageName,e),this.usedPackagesSubject.next())}refresh(){for(const e of this.packageSources)e.refresh()}destroy(){this.initSubscriptions.unsubscribe()}}},54384:(e,t,a)=>{var n={"./formGroup/type":[70613,613]};function s(e){if(!a.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],s=t[0];return a.e(t[1]).then((()=>a(s)))}s.keys=()=>Object.keys(n),s.id=54384,e.exports=s}}]);
//# sourceMappingURL=1203.chunk.b6b8770ee20a4201978d.js.map