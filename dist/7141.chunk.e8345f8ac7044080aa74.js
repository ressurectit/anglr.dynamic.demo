"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[7141],{31166:(t,e,n)=>{n.d(e,{d:()=>s});var i=n(17505),a=n(38327);class s extends i.L{constructor(){super("RELATIONS_PACKAGES_STORE")}}s.ɵfac=function(t){return new(t||s)},s.ɵprov=a.Yz({token:s,factory:s.ɵfac})},18745:(t,e,n)=>{n.d(e,{F:()=>E});var i=n(4905),a=n(27052),s=n(28232),o=n(23199),r=n(86463),c=n(40362);class d{get destroying(){return this._destroyingSubject.asObservable()}constructor(t,e,n,i,a){this._parentGroup=t,this._relationManager=e,this.history=n,this.start=i,this.end=a,this._destroyingSubject=new r.x,this.output=null,this.input=null,this._path=this._parentGroup.append("path").attr("fill","transparent").attr("stroke","#48B8B8").attr("stroke-width","3px").on("mouseover",(()=>{this.highlight()})).on("mouseout",(()=>{this.cancelHighlight()})),this._lineGenerator=(0,s.jvg)().curve(s.tFB.beta(.75))}destroy(){this._path?.remove(),this._destroyingSubject.next()}highlight(){this._path.attr("stroke-width","5px"),this.input?.highlight(),this.output?.highlight()}cancelHighlight(){this._path.attr("stroke-width","3px"),this.input?.cancelHighlight(),this.output?.cancelHighlight()}invalidateVisuals(t){if(t==c.r){const t=this._relationManager.getActiveInput();this._relationManager.setActiveInput(null),t?t.addRelation(this)?(this.end=t.getCoordinates(),this.input=t,this.history.getNewState()):(this.destroy(),this.start=null,this.end=null,this.input=null,this.output=null,this.history.getNewState()):(this.destroy(),this.start=null,this.end=null,this.input=null,this.output=null)}if(!this.start||!this.end)return;let e;if(this.end.x<=this.start.x){let t=this.start.x-this.end.x;const n=(this.end.y-this.start.y)/10;t<12&&(t=12),t*=1.3,e=[[this.start.x,this.start.y],[this.start.x+40,this.start.y],[this.start.x+t,this.start.y+n],[this.end.x-t,this.start.y+9*n],[this.end.x-40,this.end.y],[this.end.x,this.end.y]]}else{const t=(this.end.x-this.start.x)/3;e=[[this.start.x,this.start.y],[this.start.x+t,this.start.y],[this.end.x-t,this.end.y],[this.end.x,this.end.y]]}this._path.attr("d",this._lineGenerator(e))}}var l,h=n(26220),u=n(47432),g=n(74445),p=n(46480),m=n(14389),f=n(49891),v=n(43939),y=n(91861);!function(t){t[t.ShowNotFound=0]="ShowNotFound",t[t.Ignore=1]="Ignore",t[t.ThrowError=2]="ThrowError"}(l||(l={}));class b{constructor(t){this.missingNodeBehavior=l.ShowNotFound,(0,v.EN)(t)&&(this.missingNodeBehavior=t)}}var k=n(79440),x=n(8215),S=n(77842),w=n(36973),D=n(48397);function P(t,e,n,i,a,s,o){try{var r=t[s](o),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(i,a)}class _{get component(){return this.componentRef?this.componentRef.instance:null}constructor(t,e,n,i,a){this.viewContainerRef=t,this.relationsNodeManager=e,this.loader=n,this.options=i,this.logger=a,this.destroySubscription=null,this.componentRef=null,this.componentMetadata=null,this.zoomLevel=1,this.create=new g.v,this.destroy=new g.v,this.options&&this.options instanceof b||(this.options=new b)}ngOnChanges(t){var e,n=this;return(e=function*(){if((0,f.$)("zoomLevel")in t&&(0,v.EN)(n.zoomLevel)&&!((0,f.$)("componentMetadata")in t)){const e=n.component;if(e){const i=t[(0,f.$)("zoomLevel")];e.zoomLevel=n.zoomLevel;const a={};(0,m.mv)(a,"zoomLevel",i,i.previousValue),e.ngOnChanges(a),e.invalidateVisuals()}}else if(n.logger?.debug("RelationsNodeRendererSADirective: rendering node {@id}",{id:n.componentMetadata?.id}),n.ngOnDestroy(),n.viewContainerRef.clear(),(0,f.$)("componentMetadata")in t&&n.componentMetadata){let t=yield n.loader.loadItem(n.componentMetadata);if(!t)switch(n.logger?.warn("RelationsNodeRendererSADirective: Unable to find relations node type {@type}",{name:n.componentMetadata.name,package:n.componentMetadata.package}),n.options?.missingNodeBehavior){default:if(t=yield n.loader.loadItem({package:"basic-components",name:"notFound"}),!t)return void n.logger?.error("RelationsNodeRendererSADirective: Unable to find not found node!");break;case l.Ignore:return;case l.ThrowError:throw new Error(`RelationsNodeRendererSADirective: Unable to find relations node type Name: ${n.componentMetadata.name} Package: ${n.componentMetadata.package}`)}if(n.componentRef=n.viewContainerRef.createComponent(t.data,{injector:n.viewContainerRef.injector}),n.logger?.debug("RelationsNodeRendererSADirective: node rendered {@id}",{id:n.componentMetadata?.id}),n.component){const t=n.component;n.destroySubscription=t.destroy.subscribe((()=>n.ngOnDestroy())),n.logger?.debug("RelationsNodeRendererSADirective: initializing node with metadata {@id}",{id:n.componentMetadata?.id}),t.metadata=n.componentMetadata,t.zoomLevel=n.zoomLevel;const e={};(0,m.mv)(e,"metadata",n.componentMetadata,null,!0),(0,m.mv)(e,"zoomLevel",n.zoomLevel,null,!0),t.ngOnChanges(e),yield t.initialize(),n.logger?.debug("RelationsNodeRendererSADirective: invalidating node visuals {@id}",{id:n.componentMetadata?.id}),t.invalidateVisuals(),n.componentRef.changeDetectorRef.markForCheck(),n.relationsNodeManager.registerNode(n.component),n.create.next(t)}}},function(){var t=this,n=arguments;return new Promise((function(i,a){var s=e.apply(t,n);function o(t){P(s,i,a,o,r,"next",t)}function r(t){P(s,i,a,o,r,"throw",t)}o(void 0)}))})()}ngOnDestroy(){this.destroySubscription?.unsubscribe(),this.destroySubscription=null,this.componentRef&&(this.logger?.debug("RelationsNodeRendererSADirective: destroying node {@id}",{id:this.componentMetadata?.id}),this.component&&(this.componentMetadata&&this.destroy.next(this.componentMetadata),this.relationsNodeManager.unregisterNode(this.component)),this.componentRef?.destroy(),this.componentRef=null)}}_.ɵfac=function(t){return new(t||_)(k.Y(x.s_),k.Y(D.J),k.Y(y.fI),k.Y(b,8),k.Y(p.bZ,8))},_.ɵdir=S.lG({type:_,selectors:[["","relationsNodeRenderer",""]],inputs:{componentMetadata:["relationsNodeRenderer","componentMetadata"],zoomLevel:"zoomLevel"},outputs:{create:"create",destroy:"destroy"},exportAs:["relationsNodeRenderer"],standalone:!0,features:[w.T]});var N=n(84773),M=n(43870),L=n(4477),C=n(72891),O=n(6845),I=n(66794),R=n(73301),Y=n(68961),z=n(19063),F=n(47083),T=n(85320),A=n(82568),Z=n(76405),B=n(15686),j=n(12311);const q=["relationsGroup"];function U(t,e){if(1&t){const t=N.E();M.O4(),M.kc(),L.yn(0)(1,4),C.N("destroy",(function(e){M.CH(t);const n=O.o();return M.Kt(n.destroyNode(e))})),L.BQ()()}if(2&t){const t=e.$implicit,n=O.o();I.x(1),R.Q("relationsNodeRenderer",t)("zoomLevel",n.zoomLevel)}}class E{get backgroundSizeStyle(){return`${this.backgroundSize}px ${this.backgroundSize}px`}get _backgroundPositionStyle(){return`${this.canvasPosition.x%this.backgroundSize}px ${this.canvasPosition.y%this.backgroundSize}px`}get boundingBox(){return this.element.nativeElement.getBoundingClientRect()}constructor(t,e,n,i){this.element=t,this.relationManager=e,this._changeDetector=n,this.history=i,this._initSubscriptions=new o.w0,this.backgroundSize=16,this.dragStartPosition={x:0,y:0},this.canvasPosition={x:0,y:0},this.zoomLevel=1,this.isDragging=!1,this.nodeDefinitions=[]}ngOnInit(){this._initSubscriptions.add(this.relationManager.activeNodeChange.subscribe((()=>this.focusNode(this.relationManager.activeNode))))}ngOnDestroy(){this._initSubscriptions.unsubscribe()}focusNode(t){if(!t)return;const e=this.nodeDefinitions?.find((e=>e.id===t));e?.nodeMetadata?.coordinates&&(this.canvasPosition={x:-e?.nodeMetadata?.coordinates.x*this.zoomLevel+this.boundingBox.width/2,y:-e?.nodeMetadata?.coordinates.y*this.zoomLevel+this.boundingBox.height/2},this._changeDetector.detectChanges())}createRelation(){return new d((0,s.Ys)(this.relationsGroup?.nativeElement),this.relationManager,this.history,null,null)}getPositionInCanvas(t){return{x:(t.x-this.boundingBox.left-this.canvasPosition.x)/this.zoomLevel,y:(t.y-this.boundingBox.top-this.canvasPosition.y)/this.zoomLevel}}onMouseDown(t){t.buttons==h.t.LEFT&&(this.dragStartPosition={x:t.clientX-this.canvasPosition.x,y:t.clientY-this.canvasPosition.y},this.isDragging=!0)}onMouseMove(t){this.isDragging&&(this.canvasPosition={x:t.clientX-this.dragStartPosition.x,y:t.clientY-this.dragStartPosition.y})}onMouseUp(t){this.isDragging&&(this.isDragging=!1)}onWheel(t){if(t.deltaY){const e=(0,u.uZ)(this.zoomLevel+.05*(t.deltaY>1?-1:1),.2,2),n=(t.clientX-this.canvasPosition.x-this.boundingBox.left)/this.zoomLevel,i=(t.clientY-this.canvasPosition.y-this.boundingBox.top)/this.zoomLevel;this.canvasPosition.x=t.clientX-this.boundingBox.left-n*e,this.canvasPosition.y=t.clientY-this.boundingBox.top-i*e,this._setZoomLevel(e)}t.preventDefault(),t.stopImmediatePropagation()}destroyNode(t){const e=this.nodeDefinitions.indexOf(t);e<0||(this.nodeDefinitions.splice(e,1),this.history.getNewState())}_setZoomLevel(t){this.zoomLevel=t,this.backgroundSize=16*this.zoomLevel}}E.ɵfac=function(t){return new(t||E)(k.Y(i.SB),k.Y(D.J),k.Y(Y.s),k.Y(y.nR))},E.ɵcmp=S.Xp({type:E,selectors:[["relations-canvas"]],viewQuery:function(t,e){if(1&t&&z.Gf(q,5,i.SB),2&t){let t;z.iG(t=z.CR())&&(e.relationsGroup=t.first)}},hostVars:4,hostBindings:function(t,e){1&t&&C.N("mousedown",(function(t){return e.onMouseDown(t)}))("mousemove",(function(t){return e.onMouseMove(t)}))("mouseup",(function(t){return e.onMouseUp(t)}),!1,F.Jf)("wheel",(function(t){return e.onWheel(t)})),2&t&&T.Ud("background-size",e.backgroundSizeStyle)("background-position",e._backgroundPositionStyle)},inputs:{nodeDefinitions:"nodeDefinitions"},standalone:!0,features:[A.j],decls:5,vars:3,consts:[[1,"flow-area"],[1,"relations-wrapper"],["relationsGroup",""],[4,"ngFor","ngForOf"],[3,"relationsNodeRenderer","zoomLevel","destroy"]],template:function(t,e){1&t&&(Z.Tg(0,"div",0),M.O4(),Z.Tg(1,"svg",1),Z._U(2,"g",null,2),Z.qZ(),B.Y(4,U,2,2,"ng-container",3),Z.qZ()),2&t&&(T.Ud("transform","translate("+e.canvasPosition.x+"px, "+e.canvasPosition.y+"px) scale("+e.zoomLevel+")"),I.x(4),R.Q("ngForOf",e.nodeDefinitions))},dependencies:[a.e,j.sg,_],encapsulation:2,changeDetection:0})},71674:(t,e,n)=>{n.d(e,{Y:()=>ot});var i=n(86784),a=n(47380),s=n(60591),o=n(23208),r=n(8915),c=n(10866),d=n(22549),l=n(41985),h=n(77842),u=n(38327);a.W,s.F,o.Z,r.B,c.p,d.H;class g{}g.ɵfac=function(t){return new(t||g)},g.ɵmod=h.oA({type:g}),g.ɵinj=u.cJ({providers:[l.v],imports:[i.Z]});var p=n(44155),m=n(49891),f=n(23199),v=n(2032),y=n(27052),b=n(46480),k=n(57466),x=n(45069),S=n(49414),w=n(91861);class D{transform(t,e,n,i){return{metadata:{id:n?t.itemSource.name:`${t.itemSource.name}-${e}`,displayName:n?t.metadata.displayName||t.itemSource.name:void 0,package:t.itemSource.package,name:t.itemSource.name,scope:i,relationsOptions:(0,k.l7)(!0,{},t.metadata.metaInfo?.defaultOptions),outputs:[],nodeMetadata:{scopeConfigurable:!n??!1,coordinates:{x:0,y:0},options:null}}}}}D.ɵfac=function(t){return new(t||D)},D.ɵpipe=h.Yj({name:"toRelationsDragData",type:D,pure:!0,standalone:!0});var P=n(76405),_=n(41853),N=n(6845),M=n(66794),L=n(6427),C=n(79440),O=n(68961),I=n(72891),R=n(85320),Y=n(82568),z=n(15686),F=n(73301),T=n(17505),A=n(48397),Z=n(21651);function B(t,e,n,i,a,s,o){try{var r=t[s](o),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(i,a)}function j(t,e){if(1&t&&(P.Tg(0,"div",2),_._(1),P.qZ()),2&t){const t=N.o();M.x(1),L.Oq(null==t.data.metadata.metaInfo?null:t.data.metadata.metaInfo.description)}}class q{constructor(t,e,n,i,a){this._changeDetector=t,this.packageManager=e,this._metadataManager=n,this._cdkDrag=i,this._logger=a,this.initSubscriptions=new f.w0,this.used=!1}ngOnInit(){var t,e=this;return(t=function*(){for(const t in e._metadataManager.nodes)if(e.data?.itemSource?.name===t){e._setUsed(!0);break}e.initSubscriptions.add(e._metadataManager.nodeRegisterChange.subscribe((t=>{t.id===e.data?.itemSource?.name&&e._setUsed(!0)}))),e.initSubscriptions.add(e._metadataManager.nodeUnregisterChange.subscribe((t=>{t.id===e.data?.itemSource?.name&&e._setUsed(!1)})))},function(){var e=this,n=arguments;return new Promise((function(i,a){var s=t.apply(e,n);function o(t){B(s,i,a,o,r,"next",t)}function r(t){B(s,i,a,o,r,"throw",t)}o(void 0)}))})()}ngOnDestroy(){this.initSubscriptions.unsubscribe()}_setUsed(t){this.used=t,this._cdkDrag&&(this._cdkDrag.disabled=t),this._changeDetector.markForCheck()}focusNode(){this.used&&this.data?.metadata?.singleton&&this._metadataManager.setActiveNode(this.data?.itemSource?.name)}}q.ɵfac=function(t){return new(t||q)(C.Y(O.s),C.Y(T.L),C.Y(A.J),C.Y(o.Z,8),C.Y(b.bZ,8))},q.ɵcmp=h.Xp({type:q,selectors:[["nodes-palette-item"]],hostVars:2,hostBindings:function(t,e){1&t&&I.N("dblclick",(function(){return e.focusNode()})),2&t&&R.ek("used",e.used)},inputs:{data:"data"},standalone:!0,features:[Y.j],decls:3,vars:2,consts:[[1,"editor-component-name"],["class","editor-component-description",4,"ngIf"],[1,"editor-component-description"]],template:function(t,e){if(1&t&&(P.Tg(0,"div",0),_._(1),P.qZ(),z.Y(2,j,2,1,"div",1)),2&t){let t;M.x(1),L.Oq(e.data.metadata.singleton?e.data.metadata.displayName||e.data.itemSource.name:null!==(t=null==e.data.metadata.metaInfo?null:e.data.metadata.metaInfo.name)&&void 0!==t?t:e.data.itemSource.name),M.x(1),F.Q("ngIf",null==e.data.metadata.metaInfo?null:e.data.metadata.metaInfo.description)}},dependencies:[y.e,Z.O],encapsulation:2,changeDetection:0});var U=n(84773),E=n(43870),$=n(65589),Q=n(4477),G=n(12311),V=n(32434);function X(t,e,n,i,a,s,o){try{var r=t[s](o),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(i,a)}function H(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var s=t.apply(e,n);function o(t){X(s,i,a,o,r,"next",t)}function r(t){X(s,i,a,o,r,"throw",t)}o(void 0)}))}}function J(t,e){if(1&t){const t=U.E();P.Tg(0,"div",4)(1,"nodes-palette-item",5),I.N("cdkDragDropped",(function(){E.CH(t);const e=N.o(2);return E.Kt(e.generateNewId())})),$.AL(2,"toRelationsDragData"),P.qZ()()}if(2&t){const t=e.$implicit,n=N.o(2);F.Q("cdkDropListConnectedTo",n.canvasDropList),M.x(1),F.Q("data",t)("cdkDragData",$.tD(2,3,t,n.newCompnentId,t.metadata.singleton,t.metadata.scope))}}function K(t,e){if(1&t&&(Q.yn(0),P.Tg(1,"div",2),_._(2),P.qZ(),z.Y(3,J,3,8,"div",3),Q.BQ()),2&t){const t=e.$implicit;M.x(2),L.hi("",t.key," "),M.x(1),F.Q("ngForOf",t.value)}}class W{constructor(t,e,n,i,a,s,o){this._moduleTypesLoader=t,this._nodesLoader=e,this._changeDetector=n,this.packageManager=i,this._metadataManager=a,this._refreshObservables=s,this._logger=o,this.initSubscriptions=new f.w0,this.allItems=[],this.groupedItems={},this.newCompnentId=(0,k.Ox)(16),this.isDragOverPalette=!1}ngOnInit(){var t=this;return H((function*(){if(t._refreshObservables&&Array.isArray(t._refreshObservables))for(const e of t._refreshObservables)t.initSubscriptions.add(e.subscribe((()=>t.loadNodes())));t.initSubscriptions.add(t.packageManager.usedPackagesChange.subscribe((()=>t.loadNodes()))),yield t.loadNodes()}))()}ngOnDestroy(){this.initSubscriptions.unsubscribe()}loadNodes(){var t=this;return H((function*(){var e;t.allItems=[],t.groupedItems={};for(const e of t.packageManager.usedPackages){const n=(yield t._moduleTypesLoader.loadItem({package:e,name:"types"}))?.data??[];for(const i of n){const n={package:e,name:i},a=yield t._nodesLoader.loadItem(n);a?t.allItems.push({itemSource:n,metadata:a}):t._logger?.warn("NodesPaletteSAComponent: Failed to obtain layout editor metadata {@source}",n)}}t.groupedItems[""]=[];for(const n of t.allItems){const i=n.metadata.metaInfo?.group??"";(e=t.groupedItems)[i]??(e[i]=[]),t.groupedItems[i].push(n)}t._changeDetector.detectChanges()}))()}generateNewId(){this.newCompnentId=(0,k.Ox)(16)}}W.ɵfac=function(t){return new(t||W)(C.Y(w.Bj),C.Y(w.fI),C.Y(O.s),C.Y(T.L),C.Y(A.J),C.Y(w.dK,8),C.Y(b.bZ,8))},W.ɵcmp=h.Xp({type:W,selectors:[["nodes-palette"]],inputs:{canvasDropList:"canvasDropList"},standalone:!0,features:[Y.j],decls:3,vars:3,consts:[[1,"dynamic-flex-column"],[4,"ngFor","ngForOf"],[1,"dynamic-text-spread","dynamic-text-small-caps","dynamic-margin-left-extra-small","dynamic-margin-horizontal-small","dynamic-bold"],["cdkDropList","","cdkDropListSortingDisabled","","class","palette-droplist",3,"cdkDropListConnectedTo",4,"ngFor","ngForOf"],["cdkDropList","","cdkDropListSortingDisabled","",1,"palette-droplist",3,"cdkDropListConnectedTo"],["cdkDrag","",1,"editor-component","mat-elevation-z2",3,"data","cdkDragData","cdkDragDropped"]],template:function(t,e){1&t&&(P.Tg(0,"div",0),z.Y(1,K,4,2,"ng-container",1),$.AL(2,"keyvalue"),P.qZ()),2&t&&(M.x(1),F.Q("ngForOf",$.lc(2,1,e.groupedItems)))},dependencies:[y.e,G.sg,V.N,g,a.W,o.Z,D,q],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,x.C)(10),(0,S.S)(),(0,v.w6)("design:type",Function),(0,v.w6)("design:paramtypes",[]),(0,v.w6)("design:returntype",Promise)],W.prototype,"loadNodes",null);var tt=n(18745),et=n(19063),nt=n(36973),it=n(11282),at=n(56454),st=n(6535);class ot{constructor(t,e,n){this.history=t,this.changeDetector=e,this.hotkeys=n,this.initSubscriptions=new f.w0,this.metadata=[],n?.init()}ngOnInit(){this.initSubscriptions.add(this.history.pop.subscribe((t=>{this.metadata=t,this.changeDetector.detectChanges()}))),this.hotkeys&&(this.initSubscriptions.add(this.hotkeys.undo.subscribe((()=>this.history.undo()))),this.initSubscriptions.add(this.hotkeys.redo.subscribe((()=>this.history.redo()))))}ngOnChanges(t){(0,m.$)("metadata")in t&&(this.history.clean(),this.metadata&&this.history.setInitialState(this.metadata))}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.hotkeys?.destroy()}addNode(t){if(t.item.data.metadata.nodeMetadata?.coordinates){const e=this.relationCanvas?.getPositionInCanvas(t.dropPoint);e&&(t.item.data.metadata.nodeMetadata.coordinates.x=e.x,t.item.data.metadata.nodeMetadata.coordinates.y=e.y)}this.metadata=[...this.metadata,t.item.data.metadata],this.history.getNewState()}}ot.ɵfac=function(t){return new(t||ot)(C.Y(w.nR),C.Y(O.s),C.Y(at.z,8))},ot.ɵcmp=h.Xp({type:ot,selectors:[["relations-editor"]],viewQuery:function(t,e){if(1&t&&et.Gf(tt.F,5),2&t){let t;et.iG(t=et.CR())&&(e.relationCanvas=t.first)}},inputs:{metadata:"metadata"},standalone:!0,features:[nt.T,Y.j],decls:6,vars:2,consts:[[1,"dynamic-flex-row","dynamic-flex-1"],[1,"overflow-vertical-scroll","dynamic-thin-scrollbar"],[2,"width","250px",3,"canvasDropList"],["cdkDropList","",1,"dynamic-flex-1",3,"nodeDefinitions","cdkDropListDropped"],["dropList","cdkDropList"]],template:function(t,e){if(1&t&&(P.Tg(0,"div",0)(1,"div",1),P._U(2,"package-manager")(3,"nodes-palette",2),P.qZ(),P.Tg(4,"relations-canvas",3,4),I.N("cdkDropListDropped",(function(t){return e.addNode(t)})),P.qZ()()),2&t){const t=it.M(5);M.x(3),F.Q("canvasDropList",t),M.x(1),F.Q("nodeDefinitions",e.metadata)}},dependencies:[W,tt.F,g,a.W,p.F,st.X],styles:["[_nghost-%COMP%]{display: flex;}"],changeDetection:0})},40362:(t,e,n)=>{n.d(e,{r:()=>i});const i="drop"},26220:(t,e,n)=>{var i;n.d(e,{t:()=>i}),function(t){t[t.LEFT=1]="LEFT"}(i||(i={}))},22654:(t,e,n)=>{n.d(e,{Y:()=>r});var i=n(71674),a=n(47432),s=n(77842),o=n(38327);class r{static withProviders(){return{ngModule:r,providers:[(0,a.TN)()]}}static withStaticComponents(t){return{ngModule:r,providers:[(0,a.hE)(t)]}}}r.ɵfac=function(t){return new(t||r)},r.ɵmod=s.oA({type:r}),r.ɵinj=o.cJ({imports:[i.Y]})},6535:(t,e,n)=>{n.d(e,{X:()=>P});var i=n(76405),a=n(41853),s=n(73301),o=n(66794),r=n(6427),c=n(84773),d=n(72891),l=n(43870),h=n(6845),u=n(15686),g=n(11282),p=n(79440),m=n(77842),f=n(85320),v=n(17505),y=n(12311),b=n(21651),k=n(24881),x=n(17790);function S(t,e){if(1&t&&(i.Tg(0,"option",11),a._(1),i.qZ()),2&t){const t=e.$implicit;s.Q("value",t),o.x(1),r.Oq(t)}}function w(t,e){if(1&t){const t=c.E();i.Tg(0,"div",12)(1,"div",13),a._(2),i.qZ(),i.Tg(3,"button",8),d.N("click",(function(){const e=l.CH(t).$implicit,n=h.o(2);return l.Kt(n.removePackage(e))})),i._U(4,"span",14),i.qZ()()}if(2&t){const t=e.$implicit;o.x(2),r.Oq(t)}}function D(t,e){if(1&t){const t=c.E();i.Tg(0,"div")(1,"div",0)(2,"select",5,6),u.Y(4,S,2,2,"option",7),i.qZ(),i.Tg(5,"button",8),d.N("click",(function(){l.CH(t);const e=g.M(3),n=h.o();return l.Kt(n.addPackage(n.availablePackages[e.selectedIndex]))})),i._U(6,"span",9),i.qZ()(),u.Y(7,w,5,1,"div",10),i.qZ()}if(2&t){const t=h.o();o.x(4),s.Q("ngForOf",t.availablePackages),o.x(3),s.Q("ngForOf",t.usedPackages)}}class P{constructor(t){this.packageManager=t,this.detailVisible=!1,this.usedPackages=[],this.availablePackages=[]}ngOnInit(){this.usedPackages=this.packageManager.usedPackages,this.updatedAvailablePackages()}addPackage(t){t&&(this.usedPackages=[...this.usedPackages,t],this.updatedAvailablePackages(),this.packageManager.setUsedPackages(this.usedPackages))}removePackage(t){this.usedPackages=this.usedPackages.filter((e=>e!=t)),this.updatedAvailablePackages(),this.packageManager.setUsedPackages(this.usedPackages)}updatedAvailablePackages(){this.availablePackages=this.packageManager.packages.filter((t=>!this.usedPackages.find((e=>e==t))))}}P.ɵfac=function(t){return new(t||P)(p.Y(v.L))},P.ɵcmp=m.Xp({type:P,selectors:[["package-manager"]],decls:6,vars:5,consts:[[1,"dynamic-flex-row"],["type","button",1,"dynamic-btn-icon","dynamic-margin-right-extra-small",3,"click"],[1,"fas"],[1,"pm-header"],[4,"ngIf"],[1,"dynamic-form-control","dynamic-flex-1"],["avPkgs",""],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"dynamic-btn-icon","dynamic-margin-left-extra-small",3,"click"],[1,"fas","fa-plus"],["class","dynamic-flex-row dynamic-align-items-center dynamic-margin-top-small",4,"ngFor","ngForOf"],[3,"value"],[1,"dynamic-flex-row","dynamic-align-items-center","dynamic-margin-top-small"],[1,"dynamic-flex-1"],[1,"fas","fa-times"]],template:function(t,e){1&t&&(i.Tg(0,"div",0)(1,"button",1),d.N("click",(function(){return e.detailVisible=!e.detailVisible})),i._U(2,"span",2),i.qZ(),i.Tg(3,"div",3),a._(4,"packages"),i.qZ()(),u.Y(5,D,8,2,"div",4)),2&t&&(o.x(2),f.ek("fa-plus",!e.detailVisible)("fa-minus",e.detailVisible),o.x(3),s.Q("ngIf",e.detailVisible))},dependencies:[y.sg,b.O,k.YN,x.Kr],encapsulation:2,changeDetection:0})},44155:(t,e,n)=>{n.d(e,{F:()=>r});var i=n(27052),a=n(48659),s=n(77842),o=n(38327);class r{}r.ɵfac=function(t){return new(t||r)},r.ɵmod=s.oA({type:r}),r.ɵinj=o.cJ({imports:[i.e,a.U]})},17505:(t,e,n)=>{n.d(e,{L:()=>c});var i=n(11776),a=n(46480),s=n(23199),o=n(86463),r=n(13457);class c{get packagesChange(){return this.packagesChangeSubject.asObservable()}get packages(){const t=[];for(const e of this.packageSources)t.push(...e.packages);return t}get usedPackages(){return this._usedPackages}set usedPackages(t){this._usedPackages=t}get usedPackagesChange(){return this.usedPackagesSubject.asObservable()}constructor(t){this.storageName=t,this._usedPackages=[],this.initSubscriptions=new s.w0,this.usedPackagesSubject=new o.x,this.packagesChangeSubject=new o.x,this.store=(0,i.f3)(a.T0),this.packageSources=(0,i.f3)(r.BG),this.usedPackages=this.store.get(t)??[];for(const t of this.packageSources)this.initSubscriptions.add(t.packagesChange.subscribe((()=>this.packagesChangeSubject.next())))}setUsedPackages(t){this._usedPackages!=t&&(this._usedPackages=t,this.store.set(this.storageName,t),this.usedPackagesSubject.next())}refresh(){for(const t of this.packageSources)t.refresh()}destroy(){this.initSubscriptions.unsubscribe()}}}}]);
//# sourceMappingURL=7141.chunk.e8345f8ac7044080aa74.js.map