"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[9541],{99541:(t,e,n)=>{n.r(e),n.d(e,{StyleBlockLayoutEditorMetadata:()=>$});var o=n(70625),i=n(43939),a=n(87316),s=n(30621),r=n(13691),c=n(38327);class l{}l.ɵfac=function(t){return new(t||l)},l.ɵmod=r.oA({type:l}),l.ɵinj=c.cJ({});var d=n(9249),u=n(79440),p=n(82568),h=n(84773),g=n(80827),f=n(72891),m=n(41853),v=n(43870),y=n(11282),M=n(73301),w=n(66794),E=n(31750),C=n(80943),b=n(74445),k=n(49891),_=n(58654);self.MonacoEnvironment={getWorkerUrl:function(t,e){return"json"===e?"dist/json.worker.js":"css"===e||"scss"===e||"less"===e?"dist/css.worker.js":"html"===e||"handlebars"==e?"dist/html.worker.js":"typescript"===e||"javascript"===e?"dist/ts.worker.js":"dist/editor.worker.js"}};const x={target:_.Mj.typescript.ScriptTarget.ES2020,module:_.Mj.typescript.ModuleKind.CommonJS,moduleResolution:_.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:_.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};_.Mj.typescript.typescriptDefaults.setCompilerOptions(x);var j=n(4905),T=n(36973);class D{constructor(t){this.element=t,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new b.v,this.contentChange=new b.v}ngOnChanges(t){(0,k.$)("languageModel")in t&&this.languageModel&&(0,k.$)("content")in t&&(0,i.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){this.openedFile&&this.codeEditor&&this.languageModel&&this.save.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){this.codeEditor=_.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(_.DC.CtrlCmd|_.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent((()=>{this.openedFile&&this.languageModel&&this.codeEditor&&this.contentChange.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,i.fp)(this.content)&&(this.openedFile=_.j6.createModel(this.content,this.languageModel.language,_.Sf.file(`index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}D.monacoInit=!0,D.ɵfac=function(t){return new(t||D)(u.Y(j.SB))},D.ɵcmp=r.Xp({type:D,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[T.T],decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]\r\n{\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n}"],changeDetection:0});class F{constructor(t,e){this.data=t,this.dialog=e,this.content=null,this.content=t.content}}F.ɵfac=function(t){return new(t||F)(u.Y(d.m),u.Y(E.s))},F.ɵcmp=r.Xp({type:F,selectors:[["code-editor-dialog"]],standalone:!0,features:[p.j],decls:9,vars:3,consts:[[2,"height","calc(75vh - 32px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"flex-row","flex-end"],["type","button",1,"btn","btn-info",3,"mat-dialog-close"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){if(1&t){const t=h.E();g.Tg(0,"code-editor",0,1),f.N("save",(function(t){return e.content=t.content})),g.qZ(),g.Tg(2,"div",2)(3,"button",3)(4,"span"),m._(5,"cancel"),g.qZ()(),g.Tg(6,"button",4),f.N("click",(function(){return v.CH(t),y.M(1).saveContent(),v.Kt(e.dialog.close(e.content))})),g.Tg(7,"span"),m._(8,"ok"),g.qZ()()()}2&t&&(M.Q("content",e.data.content)("languageModel",e.data.languageModel),w.x(3),M.Q("mat-dialog-close",null))},dependencies:[l,D,s.I,C.ZT],encapsulation:2,changeDetection:0});var I=n(68961),N=n(47098),L=n(6427),O=n(43801),P=n(85902),z=n(47826);function S(t,e,n,o,i,a,s){try{var r=t[a](s),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,i)}const Y="[_nghost-%COMP%]\n{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}";class V extends a.k{constructor(t,e,n){super(t,e),this.dialog=n}showCodeEditor(){var t,e=this;return(t=function*(){if((0,i.fp)(e.property)||!e.languageModel)return;const t=yield e.dialog.open(F,{title:"Code editor",width:"75vw",height:"75vh",data:{content:e.form?.get(e.property)?.value??"",languageModel:e.languageModel}}).afterClosed().toPromise();if((0,i.EN)(t)){const n=e.form?.get(e.property);n instanceof o.NI&&n.setValue(t)}},function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(t){S(a,o,i,s,r,"next",t)}function r(t){S(a,o,i,s,r,"throw",t)}s(void 0)}))})()}}function q(t,e){class n extends V{constructor(){super(...arguments),this.property=t,this.languageModel=e}}return n.ɵfac=function(){let t;return function(e){return(t||(t=O.n5(n)))(e||n)}}(),n.ɵcmp=r.Xp({type:n,selectors:[["code-properties-control"]],inputs:{property:"property",languageModel:"languageModel"},standalone:!0,features:[N.q,p.j],decls:3,vars:1,consts:[["type","button",1,"btn","btn-primary","margin-vertical-small",3,"click"]],template:function(t,e){1&t&&(g.Tg(0,"button",0),f.N("click",(function(){return e.showCodeEditor()})),g.Tg(1,"span"),m._(2),g.qZ()()),2&t&&(w.x(2),L.hi("Edit ",e.property,""))},styles:[Y],changeDetection:0}),n}V.ɵfac=function(t){return new(t||V)(u.Y(I.s),u.Y(P.T),u.Y(z.J))},V.ɵcmp=r.Xp({type:V,selectors:[["base-code-properties-control"]],inputs:{property:"property",languageModel:"languageModel"},standalone:!0,features:[N.q,p.j],decls:3,vars:1,consts:[["type","button",1,"btn","btn-primary","margin-vertical-small",3,"click"]],template:function(t,e){1&t&&(g.Tg(0,"button",0),f.N("click",(function(){return e.showCodeEditor()})),g.Tg(1,"span"),m._(2),g.qZ()()),2&t&&(w.x(2),L.hi("Edit ",e.property,""))},styles:[Y],changeDetection:0});const K=new class{constructor(t,e,n){this.language=t,this.extension=e,this.compiledCode=n}}("css","css",(t=>t.getModel()?.getValue()??""));var Z=n(57466);class R{constructor(t){this.style="",Z.Rl.bind(this)(t)}}class ${constructor(){this.metaInfo={name:"Style",description:"Style block - allows styling of content",group:"Layout",optionsMetadata:{propertiesMetadata:[{modelType:R,propertiesControls:[q("style",K)]}]}},this.addDescendant=(t,e)=>{e.content=t},this.canDropMetadata=t=>!t?.content,this.getDescendants=t=>t?.content?[t?.content]:[],this.removeDescendant=(t,e)=>{e.content=null},Object.freeze(this)}}},87316:(t,e,n)=>{n.d(e,{k:()=>d});var o=n(87606),i=n(79440),a=n(68961),s=n(13691),r=n(85902);function c(t,e,n,o,i,a,s){try{var r=t[a](s),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(t){c(a,o,i,s,r,"next",t)}function r(t){c(a,o,i,s,r,"throw",t)}s(void 0)}))}}class d{constructor(t,e){this._changeDetector=t,this._extractor=e,this._initialized=!1,this.propertiesMetadata=null}ngOnInit(){var t=this;return l((function*(){t._initialized||(t._initialized=!0,yield(0,o.K)(t._initialize()))}))()}initialize(){var t=this;return l((function*(){yield(0,o.K)(t.ngOnInit())}))()}invalidateVisuals(){this._changeDetector.detectChanges()}_initialize(){}}d.ɵfac=function(t){return new(t||d)(i.Y(a.s),i.Y(r.T))},d.ɵdir=s.lG({type:d,inputs:{form:"form",propertiesMetadata:"propertiesMetadata"}})},85902:(t,e,n)=>{n.d(e,{T:()=>c});var o=n(8477),i=n(46480),a=n(11776),s=n(38327);function r(t,e,n,o,i,a,s){try{var r=t[a](s),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,i)}class c{constructor(t,e){this._loader=t,this._logger=e,this._cache={}}extractMetadata(t){var e,n=this;return(e=function*(){const e=`${t.package}-${t.name}`;if(n._cache[e])return n._cache[e];const o=yield n._loader.loadItem(t);if(!o)return null;const i=o.data;if(!i.layoutEditorMetadata)return n._logger?.warn("LayoutEditorMetadataExtractor: Missing metadata! ",{package:t.package,name:t.name}),null;n._logger?.debug("LayoutEditorMetadataExtractor: Reading metadata! ",{package:t.package,name:t.name});const a=yield i.layoutEditorMetadata;return Object.freeze(a),n._cache[e]=a,a},function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(t){r(a,o,i,s,c,"next",t)}function c(t){r(a,o,i,s,c,"throw",t)}s(void 0)}))})()}}c.ɵfac=function(t){return new(t||c)(a.LF(o.Vl),a.LF(i.bZ,8))},c.ɵprov=s.Yz({token:c,factory:c.ɵfac})}}]);
//# sourceMappingURL=9541.chunk.a7d14aa0749569ad223b.js.map