"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[162],{72385:(t,e,n)=>{n.d(e,{b:()=>D});var o=n(48659),i=n(30621),a=n(9249),s=n(71791),r=n(71309),c=n(50073),d=n(14389),l=n(57466),u=n(43939),p=n(64297);class m{constructor(t){this.defaultValue=null,this.name="",l.Rl.bind(this)(t)}}var g=n(79440),h=n(77842),f=n(73379),v=n(82568),y=n(80827),b=n(41853),C=n(72891),w=n(73301),E=n(66794),x=n(47826),M=n(49280),j=n(77470),k=n(86170),T=n(66163),N=n(80943);function _(t,e,n,o,i,a,s){try{var r=t[a](s),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,i)}class D{constructor(t,e,n){this.data=t,this.dialog=e,this.form=n.build(new m(t)),this.form.valueChanges.subscribe((e=>(0,l.l7)(t,e)))}showCodeEditor(){var t,e=this;return(t=function*(){const t=(0,u.EN)(e.data.defaultValue)?JSON.stringify(e.data.defaultValue,null,4):"",n=yield(0,p.n)(e.dialog.open(r.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:t,languageModel:c.H}}).afterClosed());(0,u.EN)(n)&&(e.data.defaultValue=(0,d.LK)(n.content))},function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(t){_(a,o,i,s,r,"next",t)}function r(t){_(a,o,i,s,r,"throw",t)}s(void 0)}))})()}}D.ɵfac=function(t){return new(t||D)(g.Y(a.m),g.Y(x.J),g.Y(s.p))},D.ɵcmp=h.Xp({type:D,selectors:[["configure-node-endpoint"]],standalone:!0,features:[f._([s.p]),v.j],decls:16,vars:3,consts:[[3,"formGroup"],[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["type","text","formControlName","name",1,"dynamic-form-control"],[1,"dynamic-flex-column"],["type","button",1,"dynamic-btn","dynamic-btn-primary","dynamic-align-self-center",3,"click"],[1,"dynamic-flex-row","dynamic-flex-end"],["type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"mat-dialog-close"]],template:function(t,e){1&t&&(y.Tg(0,"div",0)(1,"div",1)(2,"label",2),b._(3,"name"),y.qZ(),y._U(4,"input",3),y.qZ(),y.Tg(5,"div",4)(6,"button",5),C.N("click",(function(){return e.showCodeEditor()})),y.Tg(7,"span"),b._(8,"default value"),y.qZ()()()(),y.Tg(9,"div",6)(10,"button",7)(11,"span"),b._(12,"cancel"),y.qZ()(),y.Tg(13,"button",8)(14,"span"),b._(15,"ok"),y.qZ()()()),2&t&&(w.Q("formGroup",e.form),E.x(10),w.Q("mat-dialog-close",null),E.x(3),w.Q("mat-dialog-close",!0))},dependencies:[o.U,M.Fj,j.JJ,j.JL,k.s,T.u,i.I,N.ZT],encapsulation:2,changeDetection:0})},10162:(t,e,n)=>{n.r(e),n.d(e,{ComponentOutputsRelationsEditorMetadata:()=>S});var o=n(27052),i=n(93551),a=n(52580),s=n(60901),r=n(57466),c=n(64297),d=n(72385),l=n(84773),u=n(80827),p=n(41853),m=n(72891),g=n(43870),h=n(6845),f=n(66794),v=n(73301),y=n(6427),b=n(79440),C=n(68961),w=n(4905),E=n(77842),x=n(47098),M=n(82568),j=n(15686),k=n(47826),T=n(12311);function N(t,e,n,o,i,a,s){try{var r=t[a](s),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,i)}function _(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(t){N(a,o,i,s,r,"next",t)}function r(t){N(a,o,i,s,r,"throw",t)}s(void 0)}))}}function D(t,e){if(1&t){const t=l.E();u.Tg(0,"div",9),u._U(1,"relation-node-input",10),u.Tg(2,"div",5)(3,"div"),p._(4),u.qZ(),u.Tg(5,"button",11),m.N("click",(function(e){const n=g.CH(t).$implicit,o=h.o();return e.preventDefault(),e.stopPropagation(),g.Kt(o.configureEndpoint(n))})),u._U(6,"span",12),u.qZ(),u.Tg(7,"button",13),m.N("click",(function(e){const n=g.CH(t).$implicit,o=h.o();return e.preventDefault(),e.stopPropagation(),g.Kt(o.removeEndpoint(n))})),u._U(8,"span",14),u.qZ()()()}if(2&t){const t=e.$implicit,n=h.o();f.x(1),v.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",t.name)("parent",n),f.x(3),y.Oq(t.name)}}class O extends i.M{constructor(t,e,n){super(t,e),this.dialog=n}get endpoints(){var t,e;return this.metadata?((t=this.metadata).relationsOptions??(t.relationsOptions={outputs:[]}),(e=this.metadata.relationsOptions).outputs??(e.outputs=[])):[]}addEndpoint(){var t=this;return _((function*(){const e={name:"",defaultValue:null};(yield t.configureEndpoint(e))&&(t.endpoints.push(e),t.history.getNewState())}))()}removeEndpoint(t){const e=this.endpoints.indexOf(t);e>=0&&(this.endpoints.splice(e,1),this.history.getNewState())}configureEndpoint(t){var e=this;return _((function*(){const n=JSON.parse(JSON.stringify(t)),o=yield(0,c.n)(e.dialog.open(d.b,{title:"configure component output",width:"60vw",data:t}).afterClosed());return o?e.history.getNewState():(0,r.l7)(t,n),o??!1}))()}}O.ɵfac=function(t){return new(t||O)(b.Y(C.s),b.Y(w.SB),b.Y(k.J))},O.ɵcmp=E.Xp({type:O,selectors:[["component-outputs-node"]],standalone:!0,features:[x.q,M.j],decls:9,vars:3,consts:[["name","component inputs",3,"parent","destroySubject"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],["class","input",4,"ngFor","ngForOf"],[1,"dynamic-flex-row"],["type","button",1,"dynamic-btn-icon","dynamic-margin-left-extra-small",3,"click"],[1,"fas","fa-plus"],[1,"outputs"],[1,"input"],[3,"parentCoordiantes","zoomLevel","name","parent"],["type","button",1,"dynamic-btn-icon","dynamic-margin-horizontal-extra-small",3,"click"],[1,"fas","fa-cog"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-times"]],template:function(t,e){1&t&&(u._U(0,"relations-node-header",0),u.Tg(1,"div",1)(2,"div",2)(3,"div",3),j.Y(4,D,9,5,"div",4),u.Tg(5,"div",5)(6,"button",6),m.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.addEndpoint()})),u._U(7,"span",7),u.qZ()()(),u._U(8,"div",8),u.qZ()()),2&t&&(v.Q("parent",e)("destroySubject",e.destroySubject),f.x(4),v.Q("ngForOf",e.endpoints))},dependencies:[o.e,T.s,a.e,s.P],encapsulation:2,changeDetection:0});class S{constructor(){this.metaInfo={name:"Component outputs",description:"Definition of relations component outputs",group:"Component"},this.nodeDefinition=O,Object.freeze(this)}}},71309:(t,e,n)=>{n.d(e,{I:()=>T});var o=n(9249),i=n(79440),a=n(77842),s=n(84773),r=n(80827),c=n(72891),d=n(41853),l=n(43870),u=n(11282),p=n(73301),m=n(66794),g=n(31750),h=n(80943),f=n(74445),v=n(49891),y=n(43939),b=n(58654);self.MonacoEnvironment={getWorkerUrl:function(t,e){return"json"===e?"dist/json.worker.js":"css"===e||"scss"===e||"less"===e?"dist/css.worker.js":"html"===e||"handlebars"==e?"dist/html.worker.js":"typescript"===e||"javascript"===e?"dist/ts.worker.js":"dist/editor.worker.js"}};const C={target:b.Mj.typescript.ScriptTarget.ES2020,module:b.Mj.typescript.ModuleKind.CommonJS,moduleResolution:b.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noEmitOnError:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:b.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};b.Mj.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),b.Mj.typescript.typescriptDefaults.setCompilerOptions(C);var w=n(4905),E=n(36973);function x(t,e,n,o,i,a,s){try{var r=t[a](s),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,i)}function M(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(t){x(a,o,i,s,r,"next",t)}function r(t){x(a,o,i,s,r,"throw",t)}s(void 0)}))}}class j{constructor(t){this.element=t,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new f.v,this.contentChange=new f.v}ngOnChanges(t){(0,v.$)("languageModel")in t&&this.languageModel&&(0,v.$)("content")in t&&(0,y.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){var t=this;return M((function*(){t.openedFile&&t.codeEditor&&t.languageModel&&t.save.emit({content:t.openedFile.getValue(),code:yield t.languageModel.compiledCode(t.codeEditor)})}))()}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){var t=this;this.codeEditor=b.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},bracketPairColorization:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(b.DC.CtrlCmd|b.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent(M((function*(){t.openedFile&&t.languageModel&&t.codeEditor&&t.contentChange.emit({content:t.openedFile.getValue(),code:yield t.languageModel.compiledCode(t.codeEditor)})})))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,y.fp)(this.content)&&(this.openedFile=b.j6.createModel((this.content||this.languageModel.initialData)??"",this.languageModel.language,b.Sf.file(`file:///index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}function k(t,e,n,o,i,a,s){try{var r=t[a](s),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(o,i)}j.monacoInit=!0,j.ɵfac=function(t){return new(t||j)(i.Y(w.SB))},j.ɵcmp=a.Xp({type:j,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[E.T],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0});class T{constructor(t,e){this.data=t,this.dialog=e,this.editorContent=null}saveAndClose(t){var e,n=this;return(e=function*(){yield t.saveContent(),n.dialog.close(n.editorContent)},function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(t){k(a,o,i,s,r,"next",t)}function r(t){k(a,o,i,s,r,"throw",t)}s(void 0)}))})()}}T.ɵfac=function(t){return new(t||T)(i.Y(o.m),i.Y(g.s))},T.ɵcmp=a.Xp({type:T,selectors:[["code-editor-dialog"]],decls:9,vars:3,consts:[[2,"height","calc(75vh - 32px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"dynamic-flex-row","dynamic-flex-end","dynamic-margin-top-extra-small"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-primary",3,"click"]],template:function(t,e){if(1&t){const t=s.E();r.Tg(0,"code-editor",0,1),c.N("save",(function(t){return e.editorContent=t})),r.qZ(),r.Tg(2,"div",2)(3,"button",3)(4,"span"),d._(5,"cancel"),r.qZ()(),r.Tg(6,"button",4),c.N("click",(function(){l.CH(t);const n=u.M(1);return l.Kt(e.saveAndClose(n))})),r.Tg(7,"span"),d._(8,"ok"),r.qZ()()()}2&t&&(p.Q("content",e.data.content)("languageModel",e.data.languageModel),m.x(3),p.Q("mat-dialog-close",null))},dependencies:[h.ZT,j],encapsulation:2,changeDetection:0})},50073:(t,e,n)=>{n.d(e,{H:()=>o});const o=new(n(53136).y)("json","json",(t=>t.getModel()?.getValue()??""))},53136:(t,e,n)=>{n.d(e,{y:()=>o});class o{constructor(t,e,n,o){this.language=t,this.extension=e,this.compiledCode=n,this.initialData=o}}}}]);
//# sourceMappingURL=162.chunk.ca1516ccee4914831e78.js.map