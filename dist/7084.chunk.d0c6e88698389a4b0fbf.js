"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[7084],{37084:(e,t,n)=>{n.r(t),n.d(t,{ValueRelationsEditorMetadata:()=>D});var o=n(65206),i=n(93917),a=n(32954),s=n(68339),l=n(36266),c=n(71386),r=n(32141),d=n(73943),u=n(12009),p=n(80033),h=n(49276),g=n(25413),m=n(85410),v=n(5327),f=n(78190),y=n(88809),C=n(95741),M=n(13315),w=n(43335),E=n(10065),b=n(57284),j=n(13757),x=n(46363);function k(e,t,n,o,i,a,s){try{var l=e[a](s),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(o,i)}class L extends l.M{constructor(e,t,n){super(e,t),this.dialog=n}showCodeEditor(){var e,t=this;return(e=function*(){const e=(0,d.EN)(t.metadata?.relationsOptions?.value)?JSON.stringify(t.metadata?.relationsOptions?.value,null,4):"",n=yield(0,u.n)(t.dialog.open(i.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:e,languageModel:a.H}}).afterClosed());t.metadata?.relationsOptions&&(0,d.EN)(n)&&(t.metadata.relationsOptions.value=(0,s.LK)(n.content),t.history.getNewState())},function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){k(a,o,i,s,l,"next",e)}function l(e){k(a,o,i,s,l,"throw",e)}s(void 0)}))})()}}L.ɵfac=function(e){return new(e||L)(p.Y(h.s),p.Y(g.SB),p.Y(x.J))},L.ɵcmp=m.Xp({type:L,selectors:[["value-node"]],standalone:!0,features:[v.q,f.j],decls:15,vars:14,consts:[[3,"parent","destroySubject","name"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"outputs"],[1,"output"],["name","value",3,"parentCoordiantes","zoomLevel","parent"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"click"]],template:function(e,t){1&e&&(y._U(0,"relations-node-header",0),C.AL(1,"firstUppercaseLocalize"),y.Tg(2,"div",1)(3,"div",2),y._U(4,"div",3),y.Tg(5,"div",4)(6,"div",5)(7,"div"),M._(8),C.AL(9,"firstUppercaseLocalize"),y.qZ(),y._U(10,"relation-node-output",6),y.qZ()()(),y.Tg(11,"button",7),w.N("click",(function(){return t.showCodeEditor()})),y.Tg(12,"span"),M._(13),C.AL(14,"firstUppercaseLocalize"),y.qZ()()()),2&e&&(E.Q("parent",t)("destroySubject",t.destroySubject)("name",C.lc(1,8,"value")),b.x(8),j.Oq(C.lc(9,10,"value")),b.x(2),E.Q("parentCoordiantes",t.nodePosition)("zoomLevel",t.zoomLevel)("parent",t),b.x(3),j.Oq(C.lc(14,12,"edit")))},dependencies:[c.e,r.n,o.R],encapsulation:2,changeDetection:0});class D{constructor(){this.metaInfo={name:"Value",description:"Initial, default value",group:"Data"},this.nodeDefinition=L,Object.freeze(this)}}},93917:(e,t,n)=>{n.d(t,{I:()=>O});var o=n(69363),i=n(80033),a=n(85410),s=n(88731),l=n(88809),c=n(43335),r=n(13315),d=n(95741),u=n(32603),p=n(26116),h=n(10065),g=n(57284),m=n(13757),v=n(52552),f=n(45148),y=n(52038),C=n(73943),M=n(36893);(0,C.yJ)((e=>{(0,C.fp)(e.ngDynamicMonacoPath)&&(e.ngDynamicMonacoPath="dist")})),self.MonacoEnvironment={getWorkerUrl:function(e,t){return"json"===t?"dist/json.worker.js":"css"===t||"scss"===t||"less"===t?"dist/css.worker.js":"html"===t||"handlebars"==t?"dist/html.worker.js":"typescript"===t||"javascript"===t?"dist/ts.worker.js":"dist/editor.worker.js"}};const w={target:M.Mj.typescript.ScriptTarget.ES2020,module:M.Mj.typescript.ModuleKind.CommonJS,moduleResolution:M.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noEmitOnError:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:M.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};M.Mj.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),M.Mj.typescript.typescriptDefaults.setCompilerOptions(w);var E=n(25413),b=n(56949);function j(e,t,n,o,i,a,s){try{var l=e[a](s),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(o,i)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){j(a,o,i,s,l,"next",e)}function l(e){j(a,o,i,s,l,"throw",e)}s(void 0)}))}}class k{constructor(e){this.element=e,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new y.v,this.contentChange=new y.v}ngOnChanges(e){(0,C.$0)("languageModel")in e&&this.languageModel&&(0,C.$0)("content")in e&&(0,C.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){var e=this;return x((function*(){e.openedFile&&e.codeEditor&&e.languageModel&&e.save.emit({content:e.openedFile.getValue(),code:yield e.languageModel.compiledCode(e.codeEditor)})}))()}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){var e=this;this.codeEditor=M.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},bracketPairColorization:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(M.DC.CtrlCmd|M.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent(x((function*(){e.openedFile&&e.languageModel&&e.codeEditor&&e.contentChange.emit({content:e.openedFile.getValue(),code:yield e.languageModel.compiledCode(e.codeEditor)})})))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,C.fp)(this.content)&&(this.openedFile=M.j6.createModel((this.content||this.languageModel.initialData)??"",this.languageModel.language,M.Sf.file(`file:///index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}k.monacoInit=!0,k.ɵfac=function(e){return new(e||k)(i.Y(E.SB))},k.ɵcmp=a.Xp({type:k,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[b.T],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0});var L=n(65206);function D(e,t,n,o,i,a,s){try{var l=e[a](s),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(o,i)}class O{constructor(e,t){this.data=e,this.dialog=t,this.editorContent=null}saveAndClose(e){var t,n=this;return(t=function*(){yield e.saveContent(),n.dialog.close(n.editorContent)},function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(e){D(a,o,i,s,l,"next",e)}function l(e){D(a,o,i,s,l,"throw",e)}s(void 0)}))})()}}O.ɵfac=function(e){return new(e||O)(i.Y(o.m),i.Y(v.s))},O.ɵcmp=a.Xp({type:O,selectors:[["code-editor-dialog"]],decls:11,vars:9,consts:[[2,"height","calc(70vh - 46px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"dynamic-flex-row","dynamic-flex-end","dynamic-action-buttons"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-primary",3,"click"]],template:function(e,t){if(1&e){const e=s.E();l.Tg(0,"code-editor",0,1),c.N("save",(function(e){return t.editorContent=e})),l.qZ(),l.Tg(2,"div",2)(3,"button",3)(4,"span"),r._(5),d.AL(6,"firstUppercaseLocalize"),l.qZ()(),l.Tg(7,"button",4),c.N("click",(function(){u.CH(e);const n=p.M(1);return u.Kt(t.saveAndClose(n))})),l.Tg(8,"span"),r._(9),d.AL(10,"firstUppercaseLocalize"),l.qZ()()()}2&e&&(h.Q("content",t.data.content)("languageModel",t.data.languageModel),g.x(3),h.Q("mat-dialog-close",null),g.x(2),m.Oq(d.lc(6,5,"cancel")),g.x(4),m.Oq(d.lc(10,7,"ok")))},dependencies:[f.ZT,k,L.R],encapsulation:2,changeDetection:0})},32954:(e,t,n)=>{n.d(t,{H:()=>o});const o=new(n(87552).y)("json","json",(e=>e.getModel()?.getValue()??""))},87552:(e,t,n)=>{n.d(t,{y:()=>o});class o{constructor(e,t,n,o){this.language=e,this.extension=t,this.compiledCode=n,this.initialData=o}}}}]);
//# sourceMappingURL=7084.chunk.d0c6e88698389a4b0fbf.js.map