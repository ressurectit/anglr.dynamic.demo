"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[309],{20309:(t,e,s)=>{s.r(e),s.d(e,{default:()=>z});var n=s(2032),r=s(95176),i=s(64253),a=s(48488),o=s(9718),l=s(36759),u=s(89402),c=s(6552),p=s(46480),h=s(71975),f=s(43939),m=s(21340),v=s(11776),d=s(38327);class g{constructor(t){this._dateApi=t}serializeObject(t,e=""){if(!(0,f.wV)(t))return null;const s=[],n=(t,r)=>{(0,f.fp)(r)||(0,f.mf)(r)||(Array.isArray(r)?r.forEach(((e,s)=>{n((0,f.wV)(e)?`${t}[${s}]`:t,e)})):this._dateApi.isDate(r)?s.push(`${e}${t}=${this._dateApi.toString(r)}`):(0,f.HD)(r)?s.push(`${e}${t}=${r}`):(0,f.hj)(r)||(0,f.jn)(r)?s.push(`${e}${t}=${r.toString()}`):(0,f.wV)(r)&&s.push(this.serializeObject(r,`${t}.`)))};return Object.keys(t).forEach((e=>{const s=t[e];n(e,s)})),s.join("&")}serializeObjectToParams(t){const e=this.serializeObject(t);return(0,f.fp)(e)?null:new h.L({fromString:e})}}function O(t,e){t.transformFn&&(t.value=t.transformFn(t.value)),t.value instanceof Object&&(t.value=JSON.stringify(t.value)),e[t.key]=t.value}function y(t,e){t.transformFn&&(t.value=t.transformFn(t.value)),e[t.key]=t.value}function b(t,e){return t.transformFn&&(t.value=t.transformFn(t.value)),e.replace("{"+t.key+"}",t.value)}function k(t,e,s){t.transformFn&&(t.value=t.transformFn(t.value));const n=s.serializeObject(t.value);n&&e.push(n)}g.ɵfac=function(t){return new(t||g)(v.LF(m.uD))},g.ɵprov=d.Yz({token:g,factory:g.ɵfac,providedIn:"root"});var w=s(48050),j=s(88842);function A(t,e,s,n,r,i,a){try{var o=t[i](a),l=o.value}catch(t){return void s(t)}o.done?e(l):Promise.resolve(l).then(n,r)}const R=function(){var t,e=(t=function*(){return new((yield Promise.all([s.e(4623),s.e(8654),s.e(9678),s.e(7537)]).then(s.bind(s,68226))).RestRelationsEditorMetadata)},function(){var e=this,s=arguments;return new Promise((function(n,r){var i=t.apply(e,s);function a(t){A(i,n,r,a,o,"next",t)}function o(t){A(i,n,r,a,o,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();let $=class{constructor(t){this.success={test:!0},this.error=null,this.http=t.get(i.e),this.logger=t.get(p.bZ),this.queryStringSerializer=t.get(g)}get relationsOptions(){return this.ɵRelationsOptions}set relationsOptions(t){this.ɵRelationsOptions=t,this.initialize()}ngOnChanges(t){this.makeRequest()}invalidateVisuals(){}initialize(){if(this.relationsOptions&&this.relationsOptions.params&&Array.isArray(this.relationsOptions.params))for(const t of this.relationsOptions.params)t.configurable&&t.name&&Object.defineProperty(this,t.name,{configurable:!0,enumerable:!0,set:e=>t.value=e});this.relationsOptions?.runImmediately&&this.makeRequest()}makeRequest(){if(!this.relationsOptions||!this.relationsOptions.method||!this.relationsOptions.url)return void this.logger.warn("RestRelations: missing options for craeting http request {@data}",this.relationsOptions);let t=null,e=this.relationsOptions.url;const s={},n={},r=[];if(this.relationsOptions.params&&Array.isArray(this.relationsOptions.params))for(const i of this.relationsOptions.params){if(!i.name)continue;const a={index:0,key:i.name,value:i.value,transformFn:null};switch(i.type){case"PATH":e=b(a,e);break;case"BODY":t=i.value;break;case"QUERY":O(a,s);break;case"QUERY OBJECT":k(a,r,this.queryStringSerializer);break;case"HEADER":y(a,n)}}let i=new a.a(this.relationsOptions.method,e,t,{reportProgress:!1,responseType:"json"});if((0,f.Qr)(s)||(i=i.clone({setParams:s})),(0,f.Qr)(n)||(i=i.clone({setHeaders:n})),r.length){const t=function(t,e){const s=t.join("&"),n=new h.L({fromString:s});return n.keys().forEach((t=>{const s=n.getAll(t);s&&s.forEach(((s,n)=>{e=n?e.append(t,s):e.set(t,s)}))})),e}(r,i.params);i=i.clone({params:t})}this.http.request(i).pipe((0,w.K)((t=>(this.success=null,this.error=t,j.E)))).subscribe((t=>{if(t.type==o.dt.Response&&t.status>=200&&t.status<=300)return this.success=t.body,void(this.error=null)}))}};(0,n.gn)([(0,l.A)(),(0,n.w6)("design:type",Object)],$.prototype,"success",void 0),(0,n.gn)([(0,l.A)(),(0,n.w6)("design:type",Object)],$.prototype,"error",void 0),$=(0,n.gn)([(0,u.H)(),(0,c.i)(R),(0,n.w6)("design:paramtypes",[r.z])],$);const z=$}}]);
//# sourceMappingURL=309.chunk.fc46efd51695c187dcac.js.map