(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[5184],{85184:(t,e,a)=>{"use strict";a.r(e),a.d(e,{RelationsWithLayoutEditorModule:()=>ft});var n=a(14392),o=a(88382),r=a(27052),i=a(48659),s=a(97212),l=a(89001),u=a(35648),c=a(66888),d=a(94761),p=a(8477),g=a(89651),m=a(97149),y=a(40921),h=a(56454),v=a(22804),f=a(17505),_=a(44055),b=a(56179),w=a(99043),k=a(57489),x=a(45529),M=a(57466),C=a(27049),N=a(85638),D=a(89952),L=a(77653),Y=a(79440),T=a(77842),U=a(73379),O=a(76405),P=a(41853),R=a(72891),F=a(66794),q=a(73301),Q=a(84967),Z=a(41348),W=a(71298);let A=class{get emptyMetadata(){return{id:`stackPanel-${(0,M.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}constructor(t,e){this._store=t,this.history=e,this._metadata=null}_getMetadata(t){return{layout:t}}_loadDemo(){this._metadata=N.F.demoLayoutWithRelations}};A.ɵfac=function(t){return new(t||A)(Y.Y(D.U),Y.Y(g.dB))},A.ɵcmp=T.Xp({type:A,selectors:[["layout-editor-view"]],features:[U._([h.z,{provide:p.qO,useFactory:t=>new v.I((e=>t.getData(e)?.layout)),deps:[D.U]},(0,m._)(),(0,y.rj)(),(0,x.m_)(),(0,b.vQ)(),(0,w.gJ)(),(0,k.hd)(),{provide:f.L,useClass:L.y}])],decls:9,vars:4,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/layout",3,"store","getMetadataCallback","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(O.Tg(0,"div",0)(1,"button",1)(2,"span"),P._(3,"go back"),O.qZ()(),O.Tg(4,"load-save-new",2),R.N("metadataChange",(function(t){let a;return e._metadata=null!==(a=null==t?null:t.layout)&&void 0!==a?a:e.emptyMetadata})),O.qZ(),O.Tg(5,"button",3),R.N("click",(function(){return e._loadDemo()})),O.Tg(6,"span"),P._(7,"demo"),O.qZ()()(),O._U(8,"layout-editor",4)),2&t&&(F.x(4),q.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history),F.x(4),q.Q("metadata",e._metadata))},dependencies:[Q.v,Z.Z,W.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([C.r,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",Object)],A.prototype,"_getMetadata",null),A=(0,n.gn)([(0,d.N)({path:"layout"}),(0,d.N)({path:"layout/:id"}),(0,n.w6)("design:paramtypes",[D.U,_.Y])],A);var E=a(10618),B=a(15467),j=a(70625),z=a(75990),I=a(79842),G=a(68623),J=a(15686),$=a(4477),S=a(94727),X=a(32361),V=a(12311),H=a(77470),K=a(27635),tt=a(4489),et=a(81287),at=a(31686),nt=a(60405);function ot(t,e){if(1&t&&O._U(0,"ng-option",7),2&t){const t=e.$implicit;q.Q("value",t)("text",t)}}const rt=function(t){return["/relationsWithLayoutEditor/layout",t]},it=function(t){return["/relationsWithLayoutEditor/relations",t]};let st=class{constructor(t,e,a,n){this._store=t,this._router=e,this._relationsManager=a,this._route=n,this._available=new j.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStored(),this._route.params.subscribe((({id:t})=>{if(t){this._available.setValue(t);const e=this._store.getData(t);this._metadata=e?.layout,this._relationsManager.setRelations(e.relations??[])}else this._relationsManager.setRelations([]);this._available.valueChanges.subscribe((t=>{this._router.navigate(["/relationsWithLayoutEditor/preview",t],{skipLocationChange:!1,replaceUrl:!0})}))}))}ngOnDestroy(){}};st.ɵfac=function(t){return new(t||st)(Y.Y(D.U),Y.Y(E.F0),Y.Y(z.N),Y.Y(B.gz))},st.ɵcmp=T.Xp({type:st,selectors:[["layout-preview-view"]],features:[U._([{provide:p.qO,useFactory:t=>new v.I((e=>t.getData(e)?.layout)),deps:[D.U]},(0,I.AL)(),(0,y.mi)(),(0,x.Ur)(),(0,b.WH)(),(0,w.qN)(),(0,k.ag)(),(0,G.cg)()])],decls:10,vars:9,consts:[[1,"flex-row"],[1,"margin-horizontal-small",3,"routerLink"],[1,"flex-1",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll"],[3,"layoutComponentRenderer"],[3,"value","text"]],template:function(t,e){1&t&&(O.Tg(0,"div",0)(1,"a",1),P._(2,"layout"),O.qZ(),O.Tg(3,"a",1),P._(4,"relations"),O.qZ(),O.Tg(5,"ng-select",2),J.Y(6,ot,1,2,"ng-option",3),O.qZ()(),O.Tg(7,"div",4)(8,"div",5),$.Gk(9,6),O.qZ()()),2&t&&(F.x(1),q.Q("routerLink",S.VK(5,rt,e._available.value)),F.x(2),q.Q("routerLink",S.VK(7,it,e._available.value)),F.x(2),q.Q("formControl",e._available),F.x(1),q.Q("ngForOf",e._availableNames),F.x(3),q.Q("layoutComponentRenderer",e._metadata))},dependencies:[V.sg,H.JJ,K.oH,X.r,tt.x,et.w,at.v,nt.i],encapsulation:2,changeDetection:0}),st=(0,n.gn)([(0,d.N)({path:"preview"}),(0,d.N)({path:"preview/:id"}),(0,n.w6)("design:paramtypes",[D.U,E.F0,z.N,B.gz])],st);var lt=a(91861),ut=a(80734),ct=a(20809),dt=a(31166),pt=a(71674);let gt=class{get emptyMetadata(){return[]}constructor(t,e,a){this._store=t,this.history=e,this._layoutManager=a,this._metadata=[]}_getMetadata(t){return{relations:t}}_loadDemo(){this._metadata=N.F.relationsWithLayoutDemo}setMetadata(t){this._metadata=t?.relations??this.emptyMetadata,this._layoutManager.setLayout(t?.layout)}};gt.ɵfac=function(t){return new(t||gt)(Y.Y(D.U),Y.Y(lt.nR),Y.Y(ut.n))},gt.ɵcmp=T.Xp({type:gt,selectors:[["relations-editor-view"]],features:[U._([h.z,{provide:ct.te,useFactory:t=>new v.I((e=>t.getData(e)?.relations)),deps:[D.U]},(0,I.$R)(),(0,y.qm)(),(0,x.Od)(),(0,k.vu)(),(0,G.xb)(),(0,w.Rn)(),(0,b.El)(),{provide:f.L,useClass:dt.d}])],decls:9,vars:5,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/relations",3,"store","getMetadataCallback","layoutControls","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(O.Tg(0,"div",0)(1,"button",1)(2,"span"),P._(3,"go back"),O.qZ()(),O.Tg(4,"load-save-new",2),R.N("metadataChange",(function(t){return e.setMetadata(t)})),O.qZ(),O.Tg(5,"button",3),R.N("click",(function(){return e._loadDemo()})),O.Tg(6,"span"),P._(7,"demo"),O.qZ()()(),O._U(8,"relations-editor",4)),2&t&&(F.x(4),q.Q("store",e._store)("getMetadataCallback",e._getMetadata)("layoutControls",!1)("history",e.history),F.x(4),q.Q("metadata",e._metadata))},dependencies:[Q.v,pt.Y,W.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([C.r,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Array]),(0,n.w6)("design:returntype",Object)],gt.prototype,"_getMetadata",null),gt=(0,n.gn)([(0,d.N)({path:"relations"}),(0,d.N)({path:"relations/:id"}),(0,n.w6)("design:paramtypes",[D.U,_.Y,ut.n])],gt);const mt=[st,A,gt];var yt=a(18567),ht=a(53245),vt=a(38327);let ft=class{};ft.ɵfac=function(t){return new(t||ft)},ft.ɵmod=T.oA({type:ft}),ft.ɵinj=vt.cJ({providers:[(0,ht.Y)("LAYOUT_RELATIONS_DATA")],imports:[r.e,i.U,o.Bz,u.A,s.p,c.W,yt.Qw]}),ft=(0,n.gn)([(0,l.P)(mt)],ft)},66888:(t,e,a)=>{"use strict";a.d(e,{W:()=>l});var n=a(11650),o=a(22654),r=a(79842),i=a(77842),s=a(38327);class l{static withProviders(){return{ngModule:l,providers:[(0,r.$R)()]}}static withStaticComponents(t){return{ngModule:l,providers:[(0,r.Sf)(t)]}}}l.ɵfac=function(t){return new(t||l)},l.ɵmod=i.oA({type:l}),l.ɵinj=s.cJ({imports:[n.c,o.Y]})},68623:(t,e,a)=>{"use strict";a.d(e,{cg:()=>f,xb:()=>v,Gc:()=>h});var n=a(14389),o=a(91861),r=a(20809),i=a(46480),s=a(11776),l=a(38327);function u(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}class c{constructor(t){this._logger=t}tryToGet(t){var e,n=this;return(e=function*(){try{return n._logger?.debug("RestDynamicModuleRelationsProvider: trying to get relations types for module {@module}",{moduleName:t.package}),"rest-components"===t.package?yield a.e(7867).then(a.bind(a,27867)):null}catch(e){n._logger?.debug("RestDynamicModuleRelationsProvider: module {@module} was not found, reason: "+e,{moduleName:t.package})}return null},function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(t){u(r,n,o,i,s,"next",t)}function s(t){u(r,n,o,i,s,"throw",t)}i(void 0)}))})()}}function d(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}c.ɵfac=function(t){return new(t||c)(s.LF(i.bZ,8))},c.ɵprov=l.Yz({token:c,factory:c.ɵfac});class p{constructor(t){this._logger=t}tryToGet(t){var e,n=this;return(e=function*(){if("rest-components"!==t.package)return null;try{return n._logger?.debug("RestDynamicModuleItemsProvider: trying to get item {@item}",{name:t.name,package:t.package}),yield a(2721)(`./${t.name}/type`)}catch(e){n._logger?.debug("RestDynamicModuleItemsProvider: item {@item} was not found, reason: "+e,{name:t.name,package:t.package})}return null},function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(t){d(r,n,o,i,s,"next",t)}function s(t){d(r,n,o,i,s,"throw",t)}i(void 0)}))})()}}p.ɵfac=function(t){return new(t||p)(s.LF(i.bZ,8))},p.ɵprov=l.Yz({token:p,factory:p.ɵfac});const g={provide:o.GP,useClass:c,multi:!0},m={provide:o.n7,useClass:p,multi:!0},y={provide:r.B6,useClass:p,multi:!0};function h(){return[g,m,(0,n.XW)("rest-components")]}function v(){return[...h()]}function f(){return[y]}},2721:(t,e,a)=>{var n={"./rest/type":[20309,309]};function o(t){if(!a.o(n,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],o=e[0];return a.e(e[1]).then((()=>a(o)))}o.keys=()=>Object.keys(n),o.id=2721,t.exports=o},84967:(t,e,a)=>{"use strict";a.d(e,{v:()=>s});var n=a(79440),o=a(77842),r=a(72891),i=a(55129);class s{constructor(t){this._location=t}goBack(t){t.preventDefault(),t.stopPropagation(),this._location.back()}}s.ɵfac=function(t){return new(t||s)(n.Y(i.Y))},s.ɵdir=o.lG({type:s,selectors:[["","goBack",""]],hostBindings:function(t,e){1&t&&r.N("click",(function(t){return e.goBack(t)}))}})},97212:(t,e,a)=>{"use strict";a.d(e,{p:()=>r});var n=a(77842),o=a(38327);class r{}r.ɵfac=function(t){return new(t||r)},r.ɵmod=n.oA({type:r}),r.ɵinj=o.cJ({})}}]);
//# sourceMappingURL=5184.chunk.758f0510f5bd162891a7.js.map