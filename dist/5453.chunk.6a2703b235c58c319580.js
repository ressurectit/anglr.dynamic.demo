"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[5453],{25453:(t,e,n)=>{n.r(e),n.d(e,{SyncValuesRelationsEditorMetadata:()=>it});var o=n(58853),a=n(14829),i=n(65206),r=n(30626),s=n(62555),c=n(36266),l=n(71386),p=n(13724),d=n(32141),u=n(73943),m=n(12009);class g{constructor(t){this.triggerSync=!1,this.idleTimeout=0,u.Rl.bind(this)(t)}}var f=n(58418),y=n(96935),v=n(69363),h=n(80033),b=n(85410),x=n(78190),O=n(88809),q=n(13315),P=n(57284),_=n(10065),L=n(48049),T=n(48074),Z=n(24900),S=n(45148);class Q{constructor(t){this.control=new f.NI,this.control.setValue(t)}}Q.ɵfac=function(t){return new(t||Q)(h.Y(v.m))},Q.ɵcmp=b.Xp({type:Q,selectors:[["configure-sync-property"]],standalone:!0,features:[x.j],decls:11,vars:3,consts:[[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["type","text",1,"dynamic-form-control",3,"formControl"],[1,"dynamic-flex-row","dynamic-flex-end","dynamic-action-buttons"],["type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"mat-dialog-close"]],template:function(t,e){1&t&&(O.Tg(0,"div",0)(1,"label",1),q._(2,"name"),O.qZ(),O._U(3,"input",2),O.qZ(),O.Tg(4,"div",3)(5,"button",4)(6,"span"),q._(7,"cancel"),O.qZ()(),O.Tg(8,"button",5)(9,"span"),q._(10,"ok"),O.qZ()()()),2&t&&(P.x(3),_.Q("formControl",e.control),P.x(2),_.Q("mat-dialog-close",null),P.x(3),_.Q("mat-dialog-close",e.control.value))},dependencies:[a.U,L.Fj,T.JJ,Z.o,y.I,S.ZT],encapsulation:2,changeDetection:0});var U=n(95741),z=n(13757),C=n(88731),w=n(52622),N=n(43335),k=n(32603),Y=n(67942),j=n(49276),D=n(25413),F=n(80354),I=n(5327),A=n(46430),J=n(46363),V=n(36733),E=n(37612),B=n(4539),K=n(22517),R=n(35332),G=n(43371),H=n(83028),M=n(64909),X=n(87905);function $(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}function W(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){$(i,o,a,r,s,"next",t)}function s(t){$(i,o,a,r,s,"throw",t)}r(void 0)}))}}function tt(t,e){1&t&&(O.Tg(0,"div",2)(1,"label",3),q._(2),U.AL(3,"firstUppercaseLocalize"),O.qZ(),O._U(4,"input",14),O.qZ()),2&t&&(P.x(2),z.Oq(U.lc(3,1,"idle timeout")))}function et(t,e){if(1&t){const t=C.E();w.yn(0),O.Tg(1,"div",15),O._U(2,"relation-node-input",16),O.Tg(3,"div"),q._(4),O.qZ(),O.Tg(5,"button",17),N.N("click",(function(e){const n=k.CH(t).index,o=Y.o();return e.preventDefault(),e.stopPropagation(),k.Kt(o.configureSyncProperty(n))})),O._U(6,"span",18),O.qZ(),O.Tg(7,"button",7),N.N("click",(function(e){const n=k.CH(t).index,o=Y.o();return e.preventDefault(),e.stopPropagation(),k.Kt(o.removeProperty(n))})),O._U(8,"span",19),O.qZ()(),w.BQ()}if(2&t){const t=e.$implicit,n=Y.o();P.x(2),_.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",t)("parent",n),P.x(2),z.Oq(t)}}function nt(t,e){if(1&t&&(O.Tg(0,"div",15),O._U(1,"relation-node-input",20),O.Tg(2,"div"),q._(3),U.AL(4,"firstUppercaseLocalize"),O.qZ()()),2&t){const t=Y.o();P.x(1),_.Q("parentCoordiantes",t.nodePosition)("zoomLevel",t.zoomLevel)("parent",t),P.x(2),z.Oq(U.lc(4,4,"trigger"))}}function ot(t,e){if(1&t&&(w.yn(0),O.Tg(1,"div",21)(2,"div"),q._(3),O.qZ(),O._U(4,"relation-node-output",16),O.qZ(),w.BQ()),2&t){const t=e.$implicit,n=Y.o();P.x(3),z.Oq(t),P.x(1),_.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",t)("parent",n)}}class at extends c.M{constructor(t,e,n,o){super(t,e),this.dialog=n,this.form=o.build(new g(null)),this.form.valueChanges.subscribe((t=>{this.metadata?.relationsOptions&&((0,u.l7)(this.metadata.relationsOptions,t),this.history.getNewState())}))}addProperty(){var t=this;return W((function*(){yield t.configureSyncProperty(t.metadata?.relationsOptions?.syncProperties?.length??0),t.changeDetector.detectChanges()}))()}removeProperty(t){this.metadata?.relationsOptions?.syncProperties&&(this.metadata.relationsOptions.syncProperties.splice(t,1),this.history.getNewState())}configureSyncProperty(t){var e=this;return W((function*(){var n;const o=yield(0,m.n)(e.dialog.open(Q,{title:"configure sync property",width:"60vw",data:e.metadata?.relationsOptions?.syncProperties?.[t]??""}).afterClosed());(0,u.EN)(o)&&e.metadata?.relationsOptions&&((n=e.metadata.relationsOptions).syncProperties??(n.syncProperties=[]),e.metadata.relationsOptions.syncProperties[t]=o,e.history.getNewState())}))()}metadataSet(){this.metadata?.relationsOptions&&this.form.patchValue(this.metadata.relationsOptions)}}at.ɵfac=function(t){return new(t||at)(h.Y(j.s),h.Y(D.SB),h.Y(J.J),h.Y(r.p))},at.ɵcmp=b.Xp({type:at,selectors:[["sync-values-node"]],standalone:!0,features:[F._([r.p]),I.q,x.j],decls:23,vars:21,consts:[[3,"parent","destroySubject","name"],[1,"node-content",3,"formGroup"],[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["formControlName","triggerSync",1,"dynamic-form-control"],[3,"ngValue"],["class","dynamic-form-group dynamic-margin-bottom-extra-small",4,"ngIf"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-plus"],[1,"inputs-outputs"],[1,"inputs"],[4,"ngFor","ngForOf"],["class","input",4,"ngIf"],[1,"outputs"],["type","text","formControlName","idleTimeout","number","","required","",1,"dynamic-form-control"],[1,"input"],[3,"parentCoordiantes","zoomLevel","name","parent"],["type","button",1,"dynamic-btn-icon","dynamic-margin-horizontal-extra-small",3,"click"],[1,"fas","fa-cog"],[1,"fas","fa-times"],["name","trigger",3,"parentCoordiantes","zoomLevel","parent"],[1,"output"]],template:function(t,e){1&t&&(O._U(0,"relations-node-header",0),U.AL(1,"firstUppercaseLocalize"),O.Tg(2,"div",1)(3,"div",2)(4,"label",3),q._(5),U.AL(6,"firstUppercaseLocalize"),O.qZ(),O.Tg(7,"select",4)(8,"option",5),q._(9),U.AL(10,"firstUppercaseLocalize"),O.qZ(),O.Tg(11,"option",5),q._(12),U.AL(13,"firstUppercaseLocalize"),O.qZ()()(),A.Y(14,tt,5,3,"div",6),O.Tg(15,"button",7),N.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.addProperty()})),O._U(16,"span",8),O.qZ(),O.Tg(17,"div",9)(18,"div",10),A.Y(19,et,9,5,"ng-container",11)(20,nt,5,6,"div",12),O.qZ(),O.Tg(21,"div",13),A.Y(22,ot,5,5,"ng-container",11),O.qZ()()()),2&t&&(_.Q("parent",e)("destroySubject",e.destroySubject)("name",U.lc(1,13,"sync values")),P.x(2),_.Q("formGroup",e.form),P.x(3),z.Oq(U.lc(6,15,"sync on")),P.x(3),_.Q("ngValue",!1),P.x(1),z.Oq(U.lc(10,17,"idle")),P.x(2),_.Q("ngValue",!0),P.x(1),z.Oq(U.lc(13,19,"trigger")),P.x(2),_.Q("ngIf",!(null!=e.metadata&&null!=e.metadata.relationsOptions&&e.metadata.relationsOptions.triggerSync)),P.x(5),_.Q("ngForOf",null==e.metadata||null==e.metadata.relationsOptions?null:e.metadata.relationsOptions.syncProperties),P.x(1),_.Q("ngIf",null==e.metadata||null==e.metadata.relationsOptions?null:e.metadata.relationsOptions.triggerSync),P.x(2),_.Q("ngForOf",null==e.metadata||null==e.metadata.relationsOptions?null:e.metadata.relationsOptions.syncProperties))},dependencies:[o.e,B.sg,K.O,a.U,R.Y,G.Kr,L.Fj,R.E,T.JJ,T.JL,H.Q7,M.s,X.u,s.F,V.N,E.L,l.e,p.P,d.n,i.R],encapsulation:2,changeDetection:0});class it{constructor(){this.metaInfo={name:"Sync values",description:"Sync values, allowing triggered changes run at once",group:"Data"},this.nodeDefinition=at,Object.freeze(this)}}}}]);
//# sourceMappingURL=5453.chunk.6a2703b235c58c319580.js.map