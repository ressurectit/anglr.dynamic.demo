"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[3627],{63627:(e,t,n)=>{n.r(t),n.d(t,{DataTemplateRelationsEditorMetadata:()=>k});var o=n(93551),i=n(88735),s=n(60901),a=n(85478),d=n(68490),l=n(69784),r=n(43939),c=n(64297),p=n(79440),u=n(68961),h=n(4905),g=n(13691),m=n(47098),v=n(82568),f=n(80827),C=n(41853),M=n(72891),y=n(73301),w=n(66794),E=n(47826);function b(e,t,n,o,i,s,a){try{var d=e[s](a),l=d.value}catch(e){return void n(e)}d.done?t(l):Promise.resolve(l).then(o,i)}class j extends o.M{constructor(e,t,n){super(e,t),this.dialog=n}showCodeEditor(){var e,t=this;return(e=function*(){const e=yield(0,c.n)(t.dialog.open(d.M,{title:"Code editor",width:"75vw",height:"75vh",data:{content:t.metadata?.relationsOptions?.template??"",languageModel:l.d}}).afterClosed());(0,r.EN)(e)&&t.metadata?.relationsOptions&&(t.metadata.relationsOptions.template=e)},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){b(s,o,i,a,d,"next",e)}function d(e){b(s,o,i,a,d,"throw",e)}a(void 0)}))})()}}j.ɵfac=function(e){return new(e||j)(p.Y(u.s),p.Y(h.SB),p.Y(E.J))},j.ɵcmp=g.Xp({type:j,selectors:[["data-template-node"]],standalone:!0,features:[m.q,v.j],decls:20,vars:11,consts:[["name","data template",3,"parent","destroySubject"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"input"],["name","template",3,"parentCoordiantes","zoomLevel","parent"],["name","data",3,"parentCoordiantes","zoomLevel","parent"],[1,"outputs"],[1,"output"],["name","output",3,"parentCoordiantes","zoomLevel","parent"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(f._U(0,"relations-node-header",0),f.Tg(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),f._U(5,"relation-node-input",5),f.Tg(6,"div"),C._(7,"template"),f.qZ()(),f.Tg(8,"div",4),f._U(9,"relation-node-input",6),f.Tg(10,"div"),C._(11,"data"),f.qZ()()(),f.Tg(12,"div",7)(13,"div",8)(14,"div"),C._(15,"output"),f.qZ(),f._U(16,"relation-node-output",9),f.qZ()()(),f.Tg(17,"button",10),M.N("click",(function(){return t.showCodeEditor()})),f.Tg(18,"span"),C._(19,"template"),f.qZ()()()),2&e&&(y.Q("parent",t)("destroySubject",t.destroySubject),w.x(5),y.Q("parentCoordiantes",t.nodePosition)("zoomLevel",t.zoomLevel)("parent",t),w.x(4),y.Q("parentCoordiantes",t.nodePosition)("zoomLevel",t.zoomLevel)("parent",t),w.x(7),y.Q("parentCoordiantes",t.nodePosition)("zoomLevel",t.zoomLevel)("parent",t))},dependencies:[i.e,s.P,a.n],encapsulation:2,changeDetection:0});class k{constructor(){this.metaInfo={name:"Data template",description:"Renders data into template",group:"Data"},this.nodeDefinition=j,Object.freeze(this)}}},68490:(e,t,n)=>{n.d(t,{M:()=>x});var o=n(30621),i=n(13691),s=n(38327);class a{}a.ɵfac=function(e){return new(e||a)},a.ɵmod=i.oA({type:a}),a.ɵinj=s.cJ({});var d=n(9249),l=n(79440),r=n(82568),c=n(84773),p=n(80827),u=n(72891),h=n(41853),g=n(43870),m=n(11282),v=n(73301),f=n(66794),C=n(31750),M=n(80943),y=n(74445),w=n(49891),E=n(43939),b=n(58654);self.MonacoEnvironment={getWorkerUrl:function(e,t){return"json"===t?"dist/json.worker.js":"css"===t||"scss"===t||"less"===t?"dist/css.worker.js":"html"===t||"handlebars"==t?"dist/html.worker.js":"typescript"===t||"javascript"===t?"dist/ts.worker.js":"dist/editor.worker.js"}};const j={target:b.Mj.typescript.ScriptTarget.ES2020,module:b.Mj.typescript.ModuleKind.CommonJS,moduleResolution:b.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:b.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};b.Mj.typescript.typescriptDefaults.setCompilerOptions(j);var k=n(4905),T=n(36973);class _{constructor(e){this.element=e,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new y.v,this.contentChange=new y.v}ngOnChanges(e){(0,w.$)("languageModel")in e&&this.languageModel&&(0,w.$)("content")in e&&(0,E.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){this.openedFile&&this.codeEditor&&this.languageModel&&this.save.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){this.codeEditor=b.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(b.DC.CtrlCmd|b.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent((()=>{this.openedFile&&this.languageModel&&this.codeEditor&&this.contentChange.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,E.fp)(this.content)&&(this.openedFile=b.j6.createModel(this.content,this.languageModel.language,b.Sf.file(`index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}_.monacoInit=!0,_.ɵfac=function(e){return new(e||_)(l.Y(k.SB))},_.ɵcmp=i.Xp({type:_,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[T.T],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]\r\n{\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n}"],changeDetection:0});class x{constructor(e,t){this.data=e,this.dialog=t,this.content=null,this.content=e.content}}x.ɵfac=function(e){return new(e||x)(l.Y(d.m),l.Y(C.s))},x.ɵcmp=i.Xp({type:x,selectors:[["code-editor-dialog"]],standalone:!0,features:[r.j],decls:9,vars:3,consts:[[2,"height","calc(75vh - 32px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"flex-row","flex-end"],["type","button",1,"btn","btn-info",3,"mat-dialog-close"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){if(1&e){const e=c.E();p.Tg(0,"code-editor",0,1),u.N("save",(function(e){return t.content=e.content})),p.qZ(),p.Tg(2,"div",2)(3,"button",3)(4,"span"),h._(5,"cancel"),p.qZ()(),p.Tg(6,"button",4),u.N("click",(function(){return g.CH(e),m.M(1).saveContent(),g.Kt(t.dialog.close(t.content))})),p.Tg(7,"span"),h._(8,"ok"),p.qZ()()()}2&e&&(v.Q("content",t.data.content)("languageModel",t.data.languageModel),f.x(3),v.Q("mat-dialog-close",null))},dependencies:[a,_,o.I,M.ZT],encapsulation:2,changeDetection:0})},69784:(e,t,n)=>{n.d(t,{d:()=>o});const o=new(n(53136).y)("handlebars","hbs",(e=>e.getModel()?.getValue()??""))},53136:(e,t,n)=>{n.d(t,{y:()=>o});class o{constructor(e,t,n){this.language=e,this.extension=t,this.compiledCode=n}}}}]);
//# sourceMappingURL=3627.chunk.b71bd4f91476a8f1dac1.js.map