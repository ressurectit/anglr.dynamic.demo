(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[8602],{25048:(e,t,n)=>{var i={"./en.json":[79587,9587],"./sk.json":[5930,5930]};function o(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],o=t[0];return n.e(t[1]).then((()=>n.t(o,19)))}o.keys=()=>Object.keys(i),o.id=25048,e.exports=o},18567:(e,t,n)=>{"use strict";n.d(t,{Qw:()=>o.Q,mx:()=>s.m,oK:()=>a.o,$u:()=>Z});var i,o=n(86825),s=n(43747),a=n(31619),r=n(23347),l=n(87667),u=n(64527),g=n(4503),c=n(79144),d=n(80827),h=n(65589),p=n(73301),v=n(41853),m=n(15686),f=n(6845),_=n(66794),b=n(6427),y=n(79440),C=n(13691),w=n(82568),O=n(72891),S=n(85320),x=n(73612),L=n(77470),D=n(86170),k=n(66163),P=n(57292),I=n(35100),A=n(12311),R=n(21651),M=n(64421),T=n(98557),N=n(4489),E=n(68965),z=n(31686);function V(e,t){if(1&e&&(d._U(0,"ng-option",11),h.AL(1,"translate")),2&e){const e=t.$implicit;p.Q("text",h.lc(1,2,e))("value",e)}}function F(e,t){if(1&e&&d._U(0,"ng-option",11),2&e){const e=t.$implicit;p.Q("text",null==e?null:e.name)("value",null==e?null:e.lang)}}function q(e,t){if(1&e&&(d.Tg(0,"div",6)(1,"div",7),v._(2),h.AL(3,"translate"),d.qZ(),d.Tg(4,"div")(5,"ng-select",8),m.Y(6,V,2,4,"ng-option",9),d.qZ()(),d.Tg(7,"div",7),v._(8),h.AL(9,"translate"),d.qZ(),d.Tg(10,"div")(11,"ng-select",10),m.Y(12,F,1,2,"ng-option",9),d.qZ()()()),2&e){const e=f.o();p.Q("formGroup",e.generalSettingsForm),_.x(2),b.Oq(h.lc(3,5,"theme")),_.x(4),p.Q("ngForOf",e.themes),_.x(2),b.Oq(h.lc(9,7,"language")),_.x(4),p.Q("ngForOf",e.languages)}}function j(e,t){if(1&e&&d._U(0,"ng-option",11),2&e){const e=t.$implicit;p.Q("text",null==e?null:e.name)("value",null==e?null:e.value)}}function U(e,t){if(1&e&&(d.Tg(0,"div",6)(1,"div",7),v._(2),h.AL(3,"translate"),d.qZ(),d.Tg(4,"div")(5,"ng-select",12),m.Y(6,j,1,2,"ng-option",9),d.qZ()()()),2&e){const e=f.o();p.Q("formGroup",e.loggingSettingsForm),_.x(2),b.Oq(h.lc(3,3,"console log")),_.x(4),p.Q("ngForOf",e.logLevels)}}function Y(e,t){if(1&e&&(d.Tg(0,"div",6)(1,"div",7),v._(2),h.AL(3,"translate"),d.qZ(),d.Tg(4,"div"),d._U(5,"mat-slide-toggle",13),d.qZ(),d.Tg(6,"div",7),v._(7),h.AL(8,"translate"),d.qZ(),d.Tg(9,"div"),d._U(10,"mat-slide-toggle",14),d.qZ()()),2&e){const e=f.o();p.Q("formGroup",e.debuggingSettingsForm),_.x(2),b.Oq(h.lc(3,3,"console")),_.x(5),b.Oq(h.lc(8,5,"debug data"))}}!function(e){e[e.General=0]="General",e[e.Logging=1]="Logging",e[e.Debugging=2]="Debugging"}(i||(i={}));class Z{constructor(e,t,n,o){this.themes=l.v.configuration.themes,this.languages=l.v.configuration.languages,this.logLevels=[],this.activeSection=i.General,this.UserSettingsSections=i;const s=e.settings,a=e.settingsDebugging,u=e.settingsLogging;this._getLogLevels(),this.generalSettingsForm=t.group({language:s.language,theme:s.theme}),this.debuggingSettingsForm=t.group({consoleEnabled:a.consoleEnabled,debugData:a.debugData}),this.loggingSettingsForm=t.group({consoleLogLevel:r.ke[u.consoleLogLevel]}),this.generalSettingsForm.valueChanges.subscribe((t=>{e.setSettings(t)})),this.debuggingSettingsForm.valueChanges.subscribe((t=>{o.setEnabled(t.debugData),e.setDebuggingSettings(t)})),this.loggingSettingsForm.valueChanges.subscribe((t=>{n.restrictToLevel=+t.consoleLogLevel,e.setLoggingSettings({consoleLogLevel:r.ke[+t.consoleLogLevel]})}))}_getLogLevels(){Object.keys(r.ke).forEach((e=>{isNaN(+e)||this.logLevels.push({name:r.ke[e],value:e})}))}}Z.ɵfac=function(e){return new(e||Z)(y.Y(u.g),y.Y(x.qu),y.Y(P.b),y.Y(I.H))},Z.ɵcmp=C.Xp({type:Z,selectors:[["user-settings"]],standalone:!0,features:[w.j],decls:20,vars:18,consts:[[1,"flex-column","settings-menu"],[1,"btn-line",3,"click"],[1,"fas","fa-cog"],[1,"fas","fa-pen"],[1,"fas","fa-bug"],["class","settings-items",3,"formGroup",4,"ngIf"],[1,"settings-items",3,"formGroup"],[1,"text-capitalize"],["formControlName","theme"],[3,"text","value",4,"ngFor","ngForOf"],["formControlName","language"],[3,"text","value"],["formControlName","consoleLogLevel"],["formControlName","consoleEnabled"],["formControlName","debugData"]],template:function(e,t){1&e&&(d.Tg(0,"div",0)(1,"a",1),O.N("click",(function(){return t.activeSection=t.UserSettingsSections.General})),d._U(2,"span",2),d.Tg(3,"span"),v._(4),h.AL(5,"translate"),d.qZ()(),d.Tg(6,"a",1),O.N("click",(function(){return t.activeSection=t.UserSettingsSections.Logging})),d._U(7,"span",3),d.Tg(8,"span"),v._(9),h.AL(10,"translate"),d.qZ()(),d.Tg(11,"a",1),O.N("click",(function(){return t.activeSection=t.UserSettingsSections.Debugging})),d._U(12,"span",4),d.Tg(13,"span"),v._(14),h.AL(15,"translate"),d.qZ()()(),d.Tg(16,"div"),m.Y(17,q,13,9,"div",5),m.Y(18,U,7,5,"div",5),m.Y(19,Y,11,7,"div",5),d.qZ()),2&e&&(_.x(1),S.ek("active",t.activeSection==t.UserSettingsSections.General),_.x(3),b.Oq(h.lc(5,12,"general")),_.x(2),S.ek("active",t.activeSection==t.UserSettingsSections.Logging),_.x(3),b.Oq(h.lc(10,14,"logging")),_.x(2),S.ek("active",t.activeSection==t.UserSettingsSections.Debugging),_.x(3),b.Oq(h.lc(15,16,"debug")),_.x(3),p.Q("ngIf",t.activeSection==t.UserSettingsSections.General),_.x(1),p.Q("ngIf",t.activeSection==t.UserSettingsSections.Logging),_.x(1),p.Q("ngIf",t.activeSection==t.UserSettingsSections.Debugging))},dependencies:[g._,A.s,R.O,M.X,c.N,L.JJ,L.JL,D.s,k.u,T.Rr,N.x,E.w,z.v],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row}.settings-menu[_ngcontent-%COMP%]{width:120px;font-size:1.1em;margin-right:48px}.settings-menu[_ngcontent-%COMP%]   span[class^=fa][_ngcontent-%COMP%], .settings-menu[_ngcontent-%COMP%]   span[class^=fas][_ngcontent-%COMP%], .settings-menu[_ngcontent-%COMP%]   span[class^=glyphicon][_ngcontent-%COMP%]{margin-right:10px}.settings-items[_ngcontent-%COMP%]{width:300px;display:grid;grid-template-columns:auto 160px;grid-template-rows:auto;column-gap:10px;row-gap:4px;align-items:center}"],changeDetection:0})},86825:(e,t,n)=>{"use strict";n.d(t,{Q:()=>A});var i=n(74445),o=n(27052),s=n(70625),a=n(68624),r=n(35648),l=n(13457),u=n(57466),g=n(2480),c=n(80827),d=n(73301),h=n(79440),p=n(13691),v=n(82568),m=n(15686),f=n(72891),_=n(41853),b=n(66794),y=n(37943),C=n(15467),w=n(22804),O=n(49280),S=n(77470),x=n(27635),L=n(4489),D=n(68965),k=n(31686),P=n(12311);function I(e,t){if(1&e&&c._U(0,"ng-option",7),2&e){const e=t.$implicit;d.Q("value",e)("text",e)}}class A{constructor(e,t,n,o){this._router=e,this._route=t,this._storage=n,this._metaManager=o,this._metadata=null,this._available=new s.NI(""),this._name=new s.NI(null),this._availableNames=[],this.initSubscriptions=new g.w,this.metadataChange=new i.v}ngOnInit(){this.initSubscriptions.add(this._storage.save.subscribe((e=>this._saveData(e)))),this._availableNames=this.store.getStored(),this._route.params.subscribe((({id:e})=>{e?(this._name.setValue(e),this._available.setValue(e),this._metadata=this.store.getData(this._available.value),this.metadataChange.next(this._metadata)):(this._metadata=null,this.metadataChange.next(this._metadata),this._name.setValue(""),this._available.setValue(""))}))}ngOnDestroy(){this.initSubscriptions.unsubscribe()}_load(){this._metadata=this.store.getData(this._available.value),this.metadataChange.next(this._metadata),this._name.setValue(this._available.value),this._router.navigate([this.routePath,this._available.value],{skipLocationChange:!1,replaceUrl:!0})}_save(){this._saveData(this._metaManager.getMetadata())}_delete(){this.store.removeData(this._available.value),this._availableNames=this.store.getStored(),this._router.navigate([this.routePath],{skipLocationChange:!1,replaceUrl:!0})}_new(){this._metadata=null,this.metadataChange.next(this._metadata),this._name.setValue(""),this._available.setValue(""),this._router.navigate([this.routePath],{skipLocationChange:!1,replaceUrl:!0})}_saveData(e){const t=this.store.getData(this._name.value)??{};this.store.setData(this._name.value,(0,u.l7)(t,this.getMetadataCallback(e))),this._availableNames=this.store.getStored(),this._router.navigate([this.routePath,this._name.value],{skipLocationChange:!1,replaceUrl:!0})}}A.ɵfac=function(e){return new(e||A)(h.Y(y.F0),h.Y(C.gz),h.Y(w.I),h.Y(l.Q))},A.ɵcmp=p.Xp({type:A,selectors:[["load-save-new"]],inputs:{store:"store",routePath:"routePath",getMetadataCallback:"getMetadataCallback"},outputs:{metadataChange:"metadataChange"},standalone:!0,features:[v.j],decls:16,vars:7,consts:[[2,"width","180px",3,"formControl"],["text","*unsaved*",3,"value"],[3,"value","text",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-danger",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","text",3,"formControl"],["type","button",1,"btn","btn-primary",3,"click"],[3,"value","text"]],template:function(e,t){1&e&&(c.Tg(0,"ng-select",0),c._U(1,"ng-option",1),m.Y(2,I,1,2,"ng-option",2),c.qZ(),c.Tg(3,"button",3),f.N("click",(function(){return t._delete()})),c.Tg(4,"span"),_._(5,"remove"),c.qZ()(),c.Tg(6,"button",4),f.N("click",(function(){return t._load()})),c.Tg(7,"span"),_._(8,"load"),c.qZ()(),c._U(9,"input",5),c.Tg(10,"button",4),f.N("click",(function(){return t._save()})),c.Tg(11,"span"),_._(12,"save"),c.qZ()(),c.Tg(13,"button",6),f.N("click",(function(){return t._new()})),c.Tg(14,"span"),_._(15,"new"),c.qZ()()),2&e&&(d.Q("formControl",t._available),b.x(1),d.Q("value",""),b.x(1),d.Q("ngForOf",t._availableNames),b.x(1),d.Q("disabled",!t._available.value),b.x(3),d.Q("disabled",!t._available.value),b.x(3),d.Q("formControl",t._name),b.x(1),d.Q("disabled",!t._name.value))},dependencies:[a.U,O.Fj,S.JJ,x.oH,r.A,L.x,D.w,k.v,o.e,P.s],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row}"],changeDetection:0})},43747:(e,t,n)=>{"use strict";n.d(t,{m:()=>C});var i=n(14392),o=n(68961),s=n(96130),a=n(86485),r=n(6552),l=n(49891);function u(e,t,n,i,o,s,a){try{var r=e[s](a),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(i,o)}const g=function(){var e,t=(e=function*(){return new((yield Promise.all([n.e(9360),n.e(5957),n.e(4023),n.e(983)]).then(n.bind(n,53990))).RelationsResultRelationsEditorMetadata)},function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){u(s,i,o,a,r,"next",e)}function r(e){u(s,i,o,a,r,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();var c,d=n(79440),h=n(13691),p=n(36973),v=n(82568),m=n(80827),f=n(41853),_=n(66794),b=n(6427);function y(e,t,n,i,o,s,a){try{var r=e[s](a),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(i,o)}let C=c=class{constructor(e,t,n){this._changeDetector=e,this._relationsProcessor=t,this._componentManager=n}static get relationsId(){return"relations-result"}ngOnInit(){var e,t=this;return(e=function*(){t._componentManager.registerComponent(c.relationsId,t),yield t._relationsProcessor.initialized,t._relationsProcessor.updateRelations(c.relationsId)},function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){y(s,i,o,a,r,"next",e)}function r(e){y(s,i,o,a,r,"throw",e)}a(void 0)}))})()}ngOnDestroy(){this._relationsProcessor.destroyComponent(c.relationsId),this._componentManager.unregisterComponent(c.relationsId)}ngOnChanges(e){(0,l.$)("vstup")in e&&this.vstup&&console.log("vstup sa zmenil v result",this.vstup)}invalidateVisuals(){this._changeDetector.detectChanges()}};C.ɵfac=function(e){return new(e||C)(d.Y(o.s),d.Y(s.v),d.Y(a.s))},C.ɵcmp=h.Xp({type:C,selectors:[["relations-result"]],inputs:{vstup:"vstup"},standalone:!0,features:[p.T,v.j],decls:2,vars:1,template:function(e,t){1&e&&(m.Tg(0,"div"),f._(1),m.qZ()),2&e&&(_.x(1),b.hi("VSTUP: ",t.vstup,""))},encapsulation:2,changeDetection:0}),C=c=(0,i.gn)([(0,r.i)(g),(0,i.w6)("design:paramtypes",[o.s,s.v,a.s])],C)},31619:(e,t,n)=>{"use strict";n.d(t,{o:()=>k});var i=n(14392),o=n(68961),s=n(70625),a=n(68624),r=n(36759),l=n(96130),u=n(86485),g=n(6552),c=n(49891);function d(e,t,n,i,o,s,a){try{var r=e[s](a),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(i,o)}const h=function(){var e,t=(e=function*(){return new((yield Promise.all([n.e(9360),n.e(5957),n.e(4023),n.e(3910)]).then(n.bind(n,14663))).RelationsSampleClickRelationsEditorMetadata)},function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){d(s,i,o,a,r,"next",e)}function r(e){d(s,i,o,a,r,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();var p,v=n(79440),m=n(13691),f=n(36973),_=n(82568),b=n(80827),y=n(41853),C=n(66794),w=n(6427),O=n(73301),S=n(49280),x=n(77470),L=n(27635);function D(e,t,n,i,o,s,a){try{var r=e[s](a),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(i,o)}let k=p=class{constructor(e,t,n){this._changeDetector=e,this._relationsProcessor=t,this._componentManager=n,this._vystupForm=new s.NI(""),this._vystupForm.valueChanges.subscribe((e=>this.vystup=e))}static get relationsId(){return"relations-sample-click"}ngOnInit(){var e,t=this;return(e=function*(){t._componentManager.registerComponent(p.relationsId,t),yield t._relationsProcessor.initialized,t._relationsProcessor.updateRelations(p.relationsId)},function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){D(s,i,o,a,r,"next",e)}function r(e){D(s,i,o,a,r,"throw",e)}a(void 0)}))})()}ngOnDestroy(){this._relationsProcessor.destroyComponent(p.relationsId),this._componentManager.unregisterComponent(p.relationsId)}ngOnChanges(e){(0,c.$)("vstup")in e&&this.vstup&&console.log("vstup sa zmenil",this.vstup)}invalidateVisuals(){this._changeDetector.detectChanges()}};k.ɵfac=function(e){return new(e||k)(v.Y(o.s),v.Y(l.v),v.Y(u.s))},k.ɵcmp=m.Xp({type:k,selectors:[["relations-sample-click"]],inputs:{vstup:"vstup"},standalone:!0,features:[f.T,_.j],decls:4,vars:2,consts:[["type","text",3,"formControl"]],template:function(e,t){1&e&&(b.Tg(0,"div"),y._(1),b.qZ(),b.Tg(2,"div"),b._U(3,"input",0),b.qZ()),2&e&&(C.x(1),w.hi("VSTUP: ",t.vstup,""),C.x(2),O.Q("formControl",t._vystupForm))},dependencies:[a.U,S.Fj,x.JJ,L.oH],encapsulation:2,changeDetection:0}),(0,i.gn)([(0,r.A)(),(0,i.w6)("design:type",String)],k.prototype,"vystup",void 0),k=p=(0,i.gn)([(0,g.i)(h),(0,i.w6)("design:paramtypes",[o.s,l.v,u.s])],k)},98602:(e,t,n)=>{"use strict";n.r(t),n(58420),n(88574),n(62374);var i=n(52266),o=n(43939),s=n(76338),a=n(87667);(0,i.y)((e=>{e.Document||(e.Document=function(){}),e.ngDesignerMetadata||(e.ngDesignerMetadata=!0)}));const r=s.y.prototype.subscribe;s.y.prototype.subscribe=function(e,t,n){return!(0,o.fp)(t)&&(0,o.mf)(t)||(t=e=>{a.v.configuration.debug&&console.log(e)}),r.call(this,e,t,n)};var l=n(76939),u=n(97326),g=n(17939),c=n(42711),d=n(26160),h=n(93742),p=n(72898),v=n(35980),m=n(48936),f=n(46480),_=n(55478),b=n(39969),y=n(53047),C=n(49891),w=n(98084),O=n(80022);const S=(0,O.X$)("routeAnimations",[(0,O.eR)("void <=> *, none <=> *",[(0,O.IO)(":enter",(0,O.pV)(),{optional:!0})]),(0,O.eR)("* => login",[(0,O.IO)(".main-content",[(0,O.oB)({position:"relative",perspective:"10000px"}),(0,O.IO)(":enter, :leave",[(0,O.oB)({position:"absolute",top:0,left:0,width:"100%",height:"100%"})]),(0,O.IO)(":enter",[(0,O.oB)({transform:"rotateY(-90deg)",opacity:0})]),(0,O.IO)(":leave",(0,O.pV)()),(0,O.ru)([(0,O.IO)(":leave",[(0,O.jt)("350ms ease-out",(0,O.oB)({transform:"rotateY(90deg)",opacity:0}))]),(0,O.IO)(":enter",[(0,O.jt)("350ms 350ms ease-out",(0,O.oB)({transform:"rotateY(0)",opacity:1}))])]),(0,O.IO)(":enter",(0,O.pV)())])]),(0,O.eR)("login => *",[(0,O.IO)(".main-content",[(0,O.oB)({position:"relative",perspective:"10000px"}),(0,O.IO)(":enter, :leave",[(0,O.oB)({position:"absolute",top:0,left:0,width:"100%",height:"100%"})]),(0,O.IO)(":enter",[(0,O.oB)({transform:"rotateY(-90deg)",opacity:0})]),(0,O.IO)(":leave",(0,O.pV)()),(0,O.ru)([(0,O.IO)(":leave",[(0,O.jt)("350ms ease-out",(0,O.oB)({transform:"rotateY(90deg)",opacity:0}))]),(0,O.IO)(":enter",[(0,O.jt)("350ms 350ms ease-out",(0,O.oB)({transform:"rotateY(0)",opacity:1}))])]),(0,O.IO)(":enter",(0,O.pV)())])]),(0,O.eR)("* => *",[(0,O.IO)(".main-content",[(0,O.oB)({position:"relative"}),(0,O.IO)(":enter, :leave",[(0,O.oB)({position:"absolute",top:0,left:0,width:"100%",height:"100%"})]),(0,O.IO)(":enter",[(0,O.oB)({opacity:0})]),(0,O.IO)(":leave",(0,O.pV)()),(0,O.ru)([(0,O.IO)(":leave",[(0,O.jt)("350ms ease-out",(0,O.oB)({opacity:0}))]),(0,O.IO)(":enter",[(0,O.jt)("350ms ease-out",(0,O.oB)({opacity:1}))])]),(0,O.IO)(":enter",(0,O.pV)())])])]),x=(0,O.X$)("loaderAnimation",[(0,O.eR)(":leave",[])]);var L=n(64527);const D=JSON.parse('{"i":"1.0.0-beta.20220801101345"}');var k=n(80827),P=n(73301),I=n(79440),A=n(68961),R=n(13691),M=n(55436),T=n(73379),N=n(41853),E=n(15686),z=n(66794),V=n(6427),F=n(70575),q=n(21651),j=n(83915),U=n(53693),Y=n(38870),Z=n(94304),Q=n(69602),$=n(18567),B=n(72891),G=n(47826),H=n(32361),J=n(453);class X{constructor(e){this._dialog=e}openSettings(){this._dialog.open($.$u,{title:"user settings",maxHeight:"80vh"})}}X.ɵfac=function(e){return new(e||X)(I.Y(G.J))},X.ɵcmp=R.Xp({type:X,selectors:[["main-menu"]],decls:19,vars:0,consts:[[1,"flex-row"],["routerLink","/layout/preview","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/form-preview","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/layout/editor","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/relationsEditor","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/relationsStatic","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/relationsWithEditor","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/relationsWithLayoutEditor/preview","routerLinkActive","active",1,"margin-horizontal-small"],["routerLink","/relationsComplex/preview","routerLinkActive","active",1,"margin-horizontal-small"],[1,"flex-1"],[1,"fas","fa-cog",3,"click"]],template:function(e,t){1&e&&(k.Tg(0,"div",0)(1,"a",1),N._(2,"Preview"),k.qZ(),k.Tg(3,"a",2),N._(4,"Form preview"),k.qZ(),k.Tg(5,"a",3),N._(6,"Editor"),k.qZ(),k.Tg(7,"a",4),N._(8,"Relations editor"),k.qZ(),k.Tg(9,"a",5),N._(10,"Relations"),k.qZ(),k.Tg(11,"a",6),N._(12,"Relations with editor"),k.qZ(),k.Tg(13,"a",7),N._(14,"Relations with layout editor"),k.qZ(),k.Tg(15,"a",8),N._(16,"Relations complex"),k.qZ(),k._U(17,"div",9),k.Tg(18,"a",10),B.N("click",(function(){return t.openSettings()})),k.qZ()())},dependencies:[H.y,J.O],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{padding:0}"],changeDetection:0});var W=n(80969);function K(e,t,n,i,o,s,a){try{var r=e[s](a),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(i,o)}const ee=["outlet"];function te(e,t){1&e&&k._U(0,"console"),2&e&&P.Q("@consoleAnimation",void 0)}function ne(e,t){1&e&&(k.Tg(0,"div",6),k._U(1,"div"),k.qZ()),2&e&&P.Q("@loaderAnimation",void 0)}class ie{constructor(e,t,n,i,o,s){this._changeDetector=t,this._appHotkeys=n,this.consoleVisible=!1,this.routeComponentState="none",this.guiVersion=D.i,this.initialized=!1,o.verbose("Application is starting, main component constructed."),s.body.classList.add("app-page",i.settings.theme),this._theme=i.settings.theme,this._settingsChangeSubscription=i.settingsChange.subscribe((t=>{t==(0,C.$)("theme")&&(s.body.classList.remove(this._theme),this._theme=i.settings.theme,s.body.classList.add(this._theme)),t==(0,C.$)("language")&&(e.use(i.settings.language),this._changeDetector.detectChanges())})),this._settingsDebuggingChangeSubscription=i.settingsDebuggingChange.subscribe((e=>{e==(0,C.$)("consoleEnabled")&&this._toggleConsoleHotkey()})),e.setDefaultLang("en"),e.use(i.settings.language),i.settingsDebugging?.consoleEnabled&&this._toggleConsoleHotkey()}ngOnInit(){var e,t=this;return(e=function*(){t._changeDetector.detectChanges()},function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){K(s,i,o,a,r,"next",e)}function r(e){K(s,i,o,a,r,"throw",e)}a(void 0)}))})()}ngAfterViewInit(){this._routerOutletActivatedSubscription=this.routerOutlet.activateEvents.subscribe((()=>{this.routeComponentState=this.routerOutlet.activatedRouteData.animation||this.routerOutlet.activatedRoute.component.name})),this.initialized=!0}ngOnDestroy(){this._routerOutletActivatedSubscription?.unsubscribe(),this._routerOutletActivatedSubscription=null,this._settingsChangeSubscription?.unsubscribe(),this._settingsChangeSubscription=null,this._settingsDebuggingChangeSubscription?.unsubscribe(),this._settingsDebuggingChangeSubscription=null,this._appHotkeys.destroy()}_toggleConsoleHotkey(){const e=this._appHotkeys.hotkeys.get("~");e?this._appHotkeys.hotkeys.remove(e):this._appHotkeys.hotkeys.add(new w.q("~",(()=>(this.consoleVisible=!this.consoleVisible,this._changeDetector.detectChanges(),!1)),null,"Show console"))}}ie.ɵfac=function(e){return new(e||ie)(I.Y(F.sK),I.Y(A.s),I.Y(b.H),I.Y(L.g),I.Y(f.bZ),I.Y(m.K))},ie.ɵcmp=R.Xp({type:ie,selectors:[["app"]],viewQuery:function(e,t){if(1&e&&M.Gf(ee,5),2&e){let e;M.iG(e=M.CR())&&(t.routerOutlet=e.first)}},features:[T._([b.H])],decls:13,vars:3,consts:[[1,"content","relative"],[1,"main-content"],["outlet","outlet"],[1,"gui-version"],[4,"ngIf"],["class","loading-indicator",4,"ngIf"],[1,"loading-indicator"]],template:function(e,t){1&e&&(k._U(0,"main-menu")(1,"progress-indicator")(2,"internal-server-error")(3,"global-notifications")(4,"hotkeys-cheatsheet"),k.Tg(5,"div",0)(6,"div",1),k._U(7,"router-outlet",null,2),k.qZ()(),k.Tg(9,"div",3),N._(10),k.qZ(),E.Y(11,te,1,1,"console",4),E.Y(12,ne,2,1,"div",5)),2&e&&(z.x(10),V.hi("GUI version: ",t.guiVersion,""),z.x(1),P.Q("ngIf",t.consoleVisible),z.x(1),P.Q("ngIf",!t.initialized))},dependencies:[q.O,j.X,U.B,Y.u,Z.l,Q.X,X,W.m],styles:[".content[_ngcontent-%COMP%]{display:grid;flex:1;min-height:0;min-width:0;overflow:hidden}.content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:0;min-width:0}.gui-version[_ngcontent-%COMP%]{text-align:center;font-size:.7em}console[_ngcontent-%COMP%]{z-index:1}"],data:{animation:[S,y.I,_.K,x]},changeDetection:0});var oe=n(14392),se=n(94595),ae=n(76668),re=n(89001),le=n(3859),ue=n(61694),ge=n(21098),ce=n(65205),de=n(94054),he=n(15924),pe=n(78513);const ve={rootModule:!0,rootModuleConfig:{enableTracing:!1,useHash:!0},staticRoutesBefore:[{path:"",redirectTo:"/layout/preview",pathMatch:"full"},{path:"",loadChildren:()=>Promise.all([n.e(9360),n.e(683),n.e(9101),n.e(5957),n.e(3292),n.e(8348),n.e(8701)]).then(n.bind(n,1299)).then((({DefaultModule:e})=>e))},{path:"layout",loadChildren:()=>Promise.all([n.e(160),n.e(5115)]).then(n.bind(n,57069)).then((({LayoutModule:e})=>e))},{path:"layout",loadChildren:()=>Promise.all([n.e(683),n.e(9101),n.e(4692),n.e(111),n.e(160),n.e(8348),n.e(7654),n.e(8389)]).then(n.bind(n,31203)).then((({LayoutEditorModule:e})=>e))},{path:"relationsStatic",loadChildren:()=>Promise.all([n.e(111),n.e(5972)]).then(n.bind(n,87329)).then((({RelationsStaticModule:e})=>e))},{path:"relationsEditor",loadChildren:()=>Promise.all([n.e(9360),n.e(683),n.e(5957),n.e(111),n.e(160),n.e(3292),n.e(8926)]).then(n.bind(n,68926)).then((({RelationsEditorModule:e})=>e))},{path:"relationsWithEditor",loadChildren:()=>Promise.all([n.e(9360),n.e(683),n.e(5957),n.e(111),n.e(160),n.e(3292),n.e(2611)]).then(n.bind(n,72611)).then((({RelationsWithEditorModule:e})=>e))},{path:"relationsWithLayoutEditor",loadChildren:()=>Promise.all([n.e(9360),n.e(683),n.e(9101),n.e(4692),n.e(5957),n.e(111),n.e(160),n.e(3292),n.e(8348),n.e(7654),n.e(778),n.e(5184)]).then(n.bind(n,85184)).then((({RelationsWithLayoutEditorModule:e})=>e))},{path:"relationsComplex",loadChildren:()=>Promise.all([n.e(9360),n.e(683),n.e(9101),n.e(4692),n.e(5957),n.e(111),n.e(160),n.e(3292),n.e(8348),n.e(7654),n.e(778),n.e(6371)]).then(n.bind(n,36371)).then((({RelationsComplexModule:e})=>e))}],staticRoutesAfter:[{path:"accessDenied",loadComponent:()=>n.e(9264).then(n.bind(n,69264)).then((({AccessDeniedComponent:e})=>e))},{path:"**",loadComponent:()=>n.e(8831).then(n.bind(n,88831)).then((({NotFoundComponent:e})=>e))}]};var me=n(95176),fe=n(99079),_e=n(33215),be=n(95511),ye=n(35100),Ce=n(99452),we=n(57292),Oe=n(9551),Se=n(39449),xe=n(91919),Le=n(23547),De=n(41089),ke=n(91846),Pe=n(7384),Ie=n(14602),Ae=n(77342),Re=n(94550),Me=n(80330),Te=n(62250),Ne=n(53490),Ee=n(75772),ze=n(1401),Ve=n(31579),Fe=n(33018),qe=n(89720),je=n(93192),Ue=n(29706),Ye=n(57177),Ze=n(53556),Qe=n(80406),$e=n(91972),Be=n(54248),Ge=n(9249),He=n(34494),Je=n(85980),Xe=n(53221),We=n(33420),Ke=n(43770),et=n(13969),tt=n(7099),nt=n(69517),it=n(21340),ot=n(34116),st=n(8086),at=n(70263),rt=n(66501),lt=n(23347),ut=n(89968),gt=n(58282),ct=n(43801),dt=n(38327);class ht extends be.v{get locale(){return"en"}get localeChange(){return gt.E}}ht.ɵfac=function(){let e;return function(t){return(e||(e=ct.n5(ht)))(t||ht)}}(),ht.ɵprov=dt.Yz({token:ht,factory:ht.ɵfac});var pt=n(26571);const vt=[Se.t,xe.H,Le.w,De.Q,_e.B,{useFactory:()=>new ke.b("Server je mimo prevádzky."),provide:ke.b},{useFactory:()=>new Pe.R("Server neodpovedal v stanovenom čase."),provide:Pe.R},{provide:be.v,useClass:ht},Ie.o,Ae.E,Ne.B,{provide:Ee.u,useValue:{texts:{loading:"Loading data ...",noData:"No data for requested parameters",notLoaded:"Data have not been loaded yet"}}},{provide:ze.xS,useValue:Ve.G},{provide:Fe.P,useValue:{itemsPerPageValues:[15,30,60],initialItemsPerPage:15}},{provide:ze.LL,useValue:Ye.j},{provide:qe._,useValue:{showButtonVisible:!1}},{provide:je.T,useValue:{storageIppName:"all-grid-ipp"}},{provide:Ue.eP,useValue:{cssClasses:{containerDiv:"table-container thin-scrollbar"}}},{provide:Ue.ss,useValue:{cssClasses:{thDefault:"header-default fixed-header"}}},{provide:Ke.M,useValue:{texts:{nothingSelected:"Nothing selected"}}},{provide:f.oF,useClass:Oe.H},{provide:f.T0,useClass:fe.w},{provide:we.b,useFactory:e=>new we.b(null,lt.ke[e?.settingsLogging?.consoleLogLevel]),deps:[L.g]},{provide:pt.L,useClass:L.l},{provide:ye.H,useFactory:e=>{const t=new ye.H;return t.setEnabled(e.settingsDebugging?.debugData),t},deps:[L.g]},{provide:et.R2,useClass:tt.Fh},nt.V,tt.Dx,{provide:nt.v,useValue:{locale:ut.Z}},{provide:Ze.xY,useValue:{required:"Položka je povinná.",number:"Položka musí byť číslo.",pattern:"Položka nie je v požadovanom formáte.",minValue:"Nedodržaná minimálna povolená hodnota.",maxValue:"Nedodržaná maximálna povolená hodnota.",minlength:"Nedodržaná minimálna dĺžka.",maxlength:"Nedodržaná maximálna dĺžka.",birthNumber:"Nesprávny formát rodného čísla.",email:"Položka musí byť email.",availableUsername:"Prihlasovacie meno je použité"}},{provide:Ze.gt,useValue:{container:Qe.f}},Ce.d,{provide:Je.H,useExisting:f.wn},{provide:Re._k,useExisting:f.wn},{provide:Re.wN,useExisting:f.wn},{provide:$e.r,useValue:new $e.r(Be.b)},{provide:Ge.L,useValue:{confirmationText:"Prajete si pokračovať?",dialogCancelText:"Nie",dialogConfirmText:"Áno"}},He.G,{provide:Je.w,useValue:{assetsPathPrefix:"dist/md",baseUrl:"/pomoc"}},rt.F,Xe.Q,{provide:it.fD,useValue:[ot.U,st.m,at.L,We.m]},{provide:Re.r7,useValue:e=>e?.error?.errors?e?.error?.errors:(0,o.HD)(e?.error)?[e?.error]:(0,o.wV)(e?.error)?[JSON.stringify(e?.error)]:[e.message]},{provide:Re.Sm,useValue:e=>e?.error?.validationErrors?e?.error?.validationErrors:null},{provide:Re.IR,useFactory:e=>({400:t=>(0,Me.W)(t,{injector:e}),404:Te.A}),deps:[me.z]}];function mt(e,t,n,i,o,s,a){try{var r=e[s](a),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(i,o)}class ft{getTranslation(e){return s.y.create(function(){var t,i=(t=function*(t){const i=yield n(25048)(`./${e}.json`);t.next(i.default),t.complete()},function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function a(e){mt(s,i,o,a,r,"next",e)}function r(e){mt(s,i,o,a,r,"throw",e)}a(void 0)}))});return function(e){return i.apply(this,arguments)}}())}}ft.ɵfac=function(e){return new(e||ft)},ft.ɵprov=dt.Yz({token:ft,factory:ft.ɵfac});var _t=n(42983),bt=n(11776);class yt{constructor(e){this._logger=e}handle(e){return this._logger.debug(`MISSING TRANSLATION: ${e.key}`),`MISSING: '${e.key}'`}}yt.ɵfac=function(e){return new(e||yt)(bt.LF(f.bZ))},yt.ɵprov=dt.Yz({token:yt,factory:yt.ɵfac});let Ct=class{};Ct.ɵfac=function(e){return new(e||Ct)},Ct.ɵmod=R.oA({type:Ct}),Ct.ɵinj=dt.cJ({providers:vt,imports:[l.b2.withServerTransition({appId:"my-app-id"}),se.JF,ge.m,ue._,ce.J.forRoot(),ae.Bz,v.m,_t.$9,le.R.forRoot(),de.aw.forRoot({loader:{provide:he.Z,useClass:ft},...a.v.configuration.debugTranslations?{missingTranslationHandler:{provide:pe.g,useClass:yt}}:{},useDefaultLang:!a.v.configuration.debugTranslations})]}),Ct=(0,oe.gn)([(0,re.P)([],ve)],Ct);class wt{}wt.ɵfac=function(e){return new(e||wt)},wt.ɵmod=R.oA({type:wt,bootstrap:[ie]}),wt.ɵinj=dt.cJ({providers:[{provide:p.g,useFactory:()=>new p.g(a.v.configuration.debug,!1)}],imports:[Ct,d.PW,h.Cu,v.m.forRoot({cheatSheetCloseEsc:!0})]}),(0,u.G)();const Ot=(0,l.q6)();(0,g.ZA)(Ot.bootstrapModule(wt),(e=>{e.injector.get(c.I)?.clearAndDeactivate()}),a.v.configuration.debug)},26571:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});const i=new(n(40296).O)("SETTINGS_STORAGE")},4503:(e,t,n)=>{"use strict";n.d(t,{_:()=>p});var i=n(27052),o=n(76668),s=n(38476),a=n(2175),r=n(39163),l=n(35285),u=n(99874),g=n(14454),c=n(94054),d=n(13691),h=n(38327);class p{}p.ɵfac=function(e){return new(e||p)},p.ɵmod=d.oA({type:p}),p.ɵinj=h.cJ({imports:[i.e,o.Bz,s.W,a.F,l.L,r.z,c.aw,g.N,u.o]})},79144:(e,t,n)=>{"use strict";n.d(t,{N:()=>h});var i=n(68624),o=n(7231),s=n(35648),a=n(25583),r=n(25626),l=n(86948),u=n(77880),g=n(90962),c=n(13691),d=n(38327);class h{}h.ɵfac=function(e){return new(e||h)},h.ɵmod=c.oA({type:h}),h.ɵinj=d.cJ({imports:[i.U,o.r,r.F,s.A,a.r,g.k,l.F,u.j]})},42983:(e,t,n)=>{"use strict";n.d(t,{nP:()=>a,_J:()=>r._,No:()=>l.N,$9:()=>h});var i=n(38707),o=n(13691),s=n(38327);class a{}a.ɵfac=function(e){return new(e||a)},a.ɵmod=o.oA({type:a}),a.ɵinj=s.cJ({imports:[i.s]});var r=n(4503),l=n(79144),u=n(45943);class g{}g.ɵfac=function(e){return new(e||g)},g.ɵmod=o.oA({type:g}),g.ɵinj=s.cJ({imports:[u.z]});var c=n(14669),d=n(18567);class h{}h.ɵfac=function(e){return new(e||h)},h.ɵmod=o.oA({type:h}),h.ɵinj=s.cJ({imports:[r._,d.$u,c.V]})},64527:(e,t,n)=>{"use strict";n.d(t,{l:()=>m,g:()=>u});var i=n(57466),o=n(83671),s=n(26571),a=n(11776),r=n(55845),l=n(38327);class u{constructor(e,t){this._storage=t,this._settings=this._storage.get(),this._settingsDebugging=this._storage.getDebugging(),this._settingsLogging=this._storage.getLogging(),this._settingsChangeSubject=new o.xQ,this._settingsDebuggingChangeSubject=new o.xQ,this._settingsValueDiff=e.find(this._settings).create(),this._settingsValueDiff.diff(this._settings),this._settingsDebuggingValueDiff=e.find(this._settingsDebugging).create(),this._settingsDebuggingValueDiff.diff(this._settingsDebugging)}get settings(){return this._settings}get settingsDebugging(){return this._settingsDebugging}get settingsLogging(){return this._settingsLogging}get settingsChange(){return this._settingsChangeSubject.asObservable()}get settingsDebuggingChange(){return this._settingsDebuggingChangeSubject.asObservable()}setSettings(e){this._settings=(0,i.l7)(!0,{},this._settings,e),this._storage.set(e);const t=this._settingsValueDiff.diff(e);t&&t.forEachChangedItem((e=>{this._settingsChangeSubject.next(e.key)}))}setDebuggingSettings(e){this._settingsDebugging=(0,i.l7)(!0,{},this._settingsDebugging,e),this._storage.setDebugging(e);const t=this._settingsDebuggingValueDiff.diff(e);t&&t.forEachChangedItem((e=>{this._settingsDebuggingChangeSubject.next(e.key)}))}setLoggingSettings(e){this._settingsLogging=(0,i.l7)(!0,{},this._settingsLogging,e),this._storage.setLogging(e)}}u.ɵfac=function(e){return new(e||u)(a.LF(r.a),a.LF(s.L))},u.ɵprov=l.Yz({token:u,factory:u.ɵfac,providedIn:"root"});var g=n(49108),c=n.n(g),d=n(87667);const h="general-settings",p="debugging-settings",v="logging-settings";class m{get(){let e=c().get(h);return e=(0,i.l7)(!0,{},{theme:d.v.general.theme,language:d.v.general.language},e),e}set(e){c().set(h,e)}getDebugging(){let e=c().get(p);return e=(0,i.l7)(!0,{},{consoleEnabled:d.v.debug.consoleEnabled,debugData:d.v.debug.debugData},e),e}setDebugging(e){c().set(p,e)}getLogging(){let e=c().get(v);return e=(0,i.l7)(!0,{},{consoleLogLevel:d.v.logging.consoleLogLevel},e),e}setLogging(e){c().set(v,e)}}m.ɵfac=function(e){return new(e||m)},m.ɵprov=l.Yz({token:m,factory:m.ɵfac})},6552:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var i=n(22206);function o(e){return(0,i.R)(e,"relationsEditorMetadata")}},36759:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(53682);function o(){return function(e,t){const n=t;Object.defineProperty(e,`${n}Change`,{get:function(){return this[`ɵ${n}Change`]||(this[`ɵ${n}Change`]=new i.xQ),this[`ɵ${n}Change`]}}),Object.defineProperty(e,n,{get:function(){return this[`ɵ${n}`]},set:function(e){this[`ɵ${n}`]=e,this[`${n}Change`].next()}})}}},20809:(e,t,n)=>{"use strict";n.d(t,{B6:()=>s,TZ:()=>a,te:()=>r,u7:()=>o});var i=n(40296);const o=new i.O("RELATIONS_COMPONENTS_MODULE_DATA_EXTRACTORS"),s=new i.O("RELATIONS_COMPONENTS_MODULE_PROVIDERS"),a=new i.O("RELATIONS_COMPONENTS_LOADER"),r=new i.O("RELATIONS_METADATA_STORAGE")},86485:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var i=n(46480),o=n(11776),s=n(38327);class a{constructor(e){this._logger=e,this._components={}}ngOnDestroy(){}registerComponent(e,t){this._components[e]?this._logger?.warn(`RelationsComponentManager: Component with id '${e}' is already registered, provide unique id.`):this._components[e]=t}unregisterComponent(e){this._components[e]?delete this._components[e]:this._logger?.warn(`RelationsComponentManager: Component with id '${e}' has already been unregistered.`)}get(e){return this._components[e]}}a.ɵfac=function(e){return new(e||a)(o.LF(i.bZ,8))},a.ɵprov=s.Yz({token:a,factory:a.ɵfac})},75990:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var i=n(53682),o=n(38327);class s{constructor(){this._relations=[],this._relationsChange=new i.xQ}get relations(){return this._relations}get relationsChange(){return this._relationsChange.asObservable()}setRelations(e){this._relations!=e&&(this._relations=e,this._relationsChange.next())}}s.ɵfac=function(e){return new(e||s)},s.ɵprov=o.Yz({token:s,factory:s.ɵfac})},96130:(e,t,n)=>{"use strict";n.d(t,{v:()=>v});var i=n(46480),o=n(43939),s=n(38223),a=n(30038),r=n(20809),l=n(11776),u=n(95176),g=n(38327),c=n(75990),d=n(86485);function h(e,t,n,i,o,s,a){try{var r=e[s](a),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(i,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){h(s,i,o,a,r,"next",e)}function r(e){h(s,i,o,a,r,"throw",e)}a(void 0)}))}}class v{constructor(e,t,n,i,a){this._relationsManager=e,this._componentManager=t,this.injector=n,this._loader=i,this._logger=a,this._initialized=Promise.resolve(),this._resolveInitialized=o.ZT,this._initSubscriptions=new s.w,this._relations={},this._backwardRelations={},this._initSubscriptions.add(this._relationsManager.relationsChange.subscribe((()=>this.initializeRelations()))),this.initializeRelations()}get initialized(){return this._initialized}ngOnDestroy(){this._initSubscriptions.unsubscribe(),this.destroyRelations()}updateRelations(e){this._logger?.debug("RelationsProcessor: Updating relations for {@id}",{id:e});const t=this._relations[e],n=this._backwardRelations[e];let i=this._componentManager.get(e);if(t&&i){if(this.initOptions(i,t),n?.length&&n.forEach((e=>{this.initBackwardRelation(e)})),t?.inputOutputs){Array.isArray(i)||(i=[i]),t.outputsChangeSubscriptions?.forEach((e=>e.unsubscribe())),t.outputsChangeSubscriptions=[];for(const n of t.inputOutputs){let o=this._componentManager.get(n.inputComponentId);o&&!Array.isArray(o)&&(o=[o]),this._logger?.verbose("RelationsProcessor: processing input outputs {@data} ",{id:e,inputOutput:n,inputComponents:o,components:i});for(const e of i){const i=e[`${n.outputName}Change`];if(i instanceof a.y)if(t.outputsChangeSubscriptions.push(i.subscribe((()=>{let t=this._componentManager.get(n.inputComponentId);if(t){Array.isArray(t)||(t=[t]);for(const i of t)this.transferData(e,n.outputName,i,n.inputName,!1)}else this._logger?.warn("RelationsProcessor: Missing input components {@data} on output change",n)}))),o&&Array.isArray(o))for(const t of o)n.initialized||(n.initialized=this.transferData(e,n.outputName,t,n.inputName,!0));else this._logger?.warn("RelationsProcessor: Missing input components {@data}",n);else this._logger?.warn("RelationsProcessor: Output on component {@data} is not observable",n)}}}}else this._logger?.warn("RelationsProcessor: No relations for {@id}",{id:e})}destroyComponent(e){const t=this._relations[e],n=this._backwardRelations[e];if(n)for(const e of n)e.initialized=!1;if(t){if(t.outputsChangeSubscriptions.forEach((e=>e.unsubscribe())),t.outputsChangeSubscriptions=[],t.optionsInitialized=!1,t.inputOutputs&&Array.isArray(t.inputOutputs))for(const e of t.inputOutputs)e.initialized=!1;if(t.autoCreated){let t=this._componentManager.get(e);if(!t)return;Array.isArray(t)||(t=[t]),this._componentManager.unregisterComponent(e);for(const e of t)e.ngOnDestroy?.()}}}initializeRelations(){var e=this;return p((function*(){if(yield e.destroyRelations(),e.setInitializePromise(),e._logger?.debug("RelationsProcessor: initializing relations"),e._relationsManager.relations.length){for(const t of e._relationsManager.relations){const n=[];if(t.outputs){for(const i of t.outputs)if(i.inputs)for(const o of i.inputs){const s={inputComponentId:o.id,outputComponentId:t.id,inputName:o.inputName,outputName:i.outputName,initialized:!1};n.push(s),e._backwardRelations[o.id]||(e._backwardRelations[o.id]=[]),e._backwardRelations[o.id].push(s)}yield e.initComponent(t,n)}}e._resolveInitialized()}else e._resolveInitialized()}))()}initBackwardRelation(e){let t=this._componentManager.get(e.outputComponentId),n=this._componentManager.get(e.inputComponentId);if((0,o.fp)(t)||Array.isArray(t)&&!t.length||(0,o.fp)(n)||Array.isArray(n)&&!n.length)this._logger?.warn("RelationsProcessor: missing metadata for backward relations {@data}",e);else{Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);for(const i of n)for(const n of t)e.initialized||(e.initialized=this.transferData(n,e.outputName,i,e.inputName,!0))}}transferData(e,t,n,i,o){if(!e||!n)return!1;const s=n[i],a=e[t];n[i]=e[t];const r={};return r[i]={previousValue:s,currentValue:a,firstChange:o,isFirstChange:()=>o},n.ngOnChanges?.(r),n.invalidateVisuals(),!0}initComponent(e,t){var n=this;return p((function*(){if(n._componentManager.get(e.id))return n.initRelation(!1,e,t),void n.updateRelations(e.id);const i=yield n._loader.loadItem(e);if(!i)return n.initRelation(!1,e,t),void n._logger?.warn("RelationsProcessor: Unable to load relations component! {@meta}",{package:e.package,name:e.name});const o=new i.data(n.injector);n._componentManager.registerComponent(e.id,o),n.initRelation(!0,e,t),n.updateRelations(e.id)}))()}initRelation(e,t,n){this._relations[t.id]={autoCreated:e,inputOutputs:n,outputsChangeSubscriptions:[],optionsInitialized:!1,metadataOptions:t.relationsOptions}}initOptions(e,t){if(!t.optionsInitialized)if(t.optionsInitialized=!0,Array.isArray(e))for(const n of e)n.relationsOptions=t.metadataOptions;else e.relationsOptions=t.metadataOptions}setInitializePromise(){this._initialized=new Promise((e=>this._resolveInitialized=e))}destroyRelations(){var e=this;return p((function*(){yield e._initialized,Object.keys(e._relations).forEach((t=>e.destroyComponent(t))),e._relations={},e._backwardRelations={}}))()}}v.ɵfac=function(e){return new(e||v)(l.LF(c.N),l.LF(d.s),l.LF(u.z),l.LF(r.TZ),l.LF(i.bZ,8))},v.ɵprov=g.Yz({token:v,factory:v.ɵfac})},22206:(e,t,n)=>{"use strict";function i(e,t){return ngDesignerMetadata?function(n){return n[t]=e(),n}:function(e){return e}}n.d(t,{R:()=>i})},13457:(e,t,n)=>{"use strict";n.d(t,{B:()=>s,Q:()=>o});var i=n(40296);const o=new i.O("METADATA_STATE_MANAGER"),s=new i.O("PACKAGE_SOURCES")},22804:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var i=n(11776),o=n(53682),s=n(13457);class a{constructor(e){this.getMetadataFn=e,this.saveSubject=new o.xQ,this.metadataStateManger=(0,i.f3)(s.Q,{optional:!0})}get save(){return this.saveSubject.asObservable()}saveMetadata(){const e=this.metadataStateManger?.getMetadata();e&&this.saveSubject.next(e)}getMetadata(e){return this.getMetadataFn(e)}}}}]);
//# sourceMappingURL=8602.chunk.f1aff305982badf15d4d.js.map