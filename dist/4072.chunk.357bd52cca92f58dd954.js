"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[4072],{40857:(e,t,n)=>{n.r(t),n.d(t,{ValueRelationsEditorMetadata:()=>S});var o=n(71309),i=n(50073),s=n(14389),a=n(93551),d=n(88735),l=n(85478),r=n(43939),c=n(64297),u=n(79440),p=n(68961),h=n(4905),g=n(13691),v=n(47098),m=n(82568),E=n(80827),f=n(41853),O=n(72891),C=n(73301),y=n(66794),w=n(47826);function M(e,t,n,o,i,s,a){try{var d=e[s](a),l=d.value}catch(e){return void n(e)}d.done?t(l):Promise.resolve(l).then(o,i)}class _ extends a.M{constructor(e,t,n){super(e,t),this.dialog=n}showCodeEditor(){var e,t=this;return(e=function*(){const e=(0,r.EN)(t.metadata?.relationsOptions?.value)?JSON.stringify(t.metadata?.relationsOptions?.value,null,4):"",n=yield(0,c.n)(t.dialog.open(o.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:e,languageModel:i.H}}).afterClosed());t.metadata?.relationsOptions&&(0,r.EN)(n)&&(t.metadata.relationsOptions.value=(0,s.LK)(n))},function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){M(s,o,i,a,d,"next",e)}function d(e){M(s,o,i,a,d,"throw",e)}a(void 0)}))})()}}_.ɵfac=function(e){return new(e||_)(u.Y(p.s),u.Y(h.SB),u.Y(w.J))},_.ɵcmp=g.Xp({type:_,selectors:[["value-node"]],standalone:!0,features:[v.q,m.j],decls:12,vars:5,consts:[["name","value",3,"parent","destroySubject"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"outputs"],[1,"output"],["name","value",3,"parentCoordiantes","zoomLevel","parent"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(E._U(0,"relations-node-header",0),E.Tg(1,"div",1)(2,"div",2),E._U(3,"div",3),E.Tg(4,"div",4)(5,"div",5)(6,"div"),f._(7,"value"),E.qZ(),E._U(8,"relation-node-output",6),E.qZ()()(),E.Tg(9,"button",7),O.N("click",(function(){return t.showCodeEditor()})),E.Tg(10,"span"),f._(11,"edit"),E.qZ()()()),2&e&&(C.Q("parent",t)("destroySubject",t.destroySubject),y.x(8),C.Q("parentCoordiantes",t.nodePosition)("zoomLevel",t.zoomLevel)("parent",t))},dependencies:[d.e,l.n],encapsulation:2,changeDetection:0});class S{constructor(){this.metaInfo={name:"Value",description:"Initial, default value",group:"Data"},this.nodeDefinition=_,Object.freeze(this)}}},91861:(e,t,n)=>{n.d(t,{Bj:()=>a,DZ:()=>i,GP:()=>s,dK:()=>c,fI:()=>r,n7:()=>l,nR:()=>u,yh:()=>d});var o=n(40296);const i=new o.O("RELATIONS_MODULE_TYPES_DATA_EXTRACTORS"),s=new o.O("RELATIONS_MODULE_TYPES_PROVIDERS"),a=new o.O("RELATIONS_MODULE_TYPES_LOADER"),d=new o.O("RELATIONS_NODES_DATA_EXTRACTORS"),l=new o.O("RELATIONS_NODES_PROVIDERS"),r=new o.O("RELATIONS_NODES_LOADER"),c=new o.O("REFRESH_PALETTE_OBSERVABLES"),u=new o.O("RELATIONS_HISTORY_MANAGER")},44677:(e,t,n)=>{n.d(t,{L:()=>i});var o=n(43939);const i=(e,t)=>{const n=e;return t?.debug("defaultExportExtractor: trying to extract default dynamic data"),(0,o.EN)(n.default)?{data:n.default}:null}},14389:(e,t,n)=>{n.d(t,{LK:()=>d,XW:()=>a,mv:()=>s});var o=n(97825),i=n(13457);function s(e,t,n,o,i=!1){e[t]={currentValue:n,previousValue:o,firstChange:i,isFirstChange:()=>i}}function a(e){return{provide:i.B,useValue:{packages:[e],packagesChange:o.C,refresh(){}},multi:!0}}function d(e){try{return JSON.parse(e)}catch{return null}}},71309:(e,t,n)=>{n.d(t,{I:()=>_});var o=n(9249),i=n(79440),s=n(13691),a=n(84773),d=n(80827),l=n(72891),r=n(41853),c=n(43870),u=n(11282),p=n(73301),h=n(66794),g=n(31750),v=n(80943),m=n(74445),E=n(49891),f=n(43939),O=n(58654);self.MonacoEnvironment={getWorkerUrl:function(e,t){return"json"===t?"dist/json.worker.js":"css"===t||"scss"===t||"less"===t?"dist/css.worker.js":"html"===t||"handlebars"==t?"dist/html.worker.js":"typescript"===t||"javascript"===t?"dist/ts.worker.js":"dist/editor.worker.js"}};const C={target:O.Mj.typescript.ScriptTarget.ES2020,module:O.Mj.typescript.ModuleKind.CommonJS,moduleResolution:O.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:O.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};O.Mj.typescript.typescriptDefaults.setCompilerOptions(C);var y=n(4905),w=n(36973);class M{constructor(e){this.element=e,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new m.v,this.contentChange=new m.v}ngOnChanges(e){(0,E.$)("languageModel")in e&&this.languageModel&&(0,E.$)("content")in e&&(0,f.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){this.openedFile&&this.codeEditor&&this.languageModel&&this.save.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){this.codeEditor=O.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(O.DC.CtrlCmd|O.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent((()=>{this.openedFile&&this.languageModel&&this.codeEditor&&this.contentChange.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,f.fp)(this.content)&&(this.openedFile=O.j6.createModel(this.content,this.languageModel.language,O.Sf.file(`index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}M.monacoInit=!0,M.ɵfac=function(e){return new(e||M)(i.Y(y.SB))},M.ɵcmp=s.Xp({type:M,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[w.T],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]\r\n{\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n}"],changeDetection:0});class _{constructor(e,t){this.data=e,this.dialog=t,this.content=null,this.content=e.content}}_.ɵfac=function(e){return new(e||_)(i.Y(o.m),i.Y(g.s))},_.ɵcmp=s.Xp({type:_,selectors:[["code-editor-dialog"]],decls:9,vars:3,consts:[[2,"height","calc(75vh - 32px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"flex-row","flex-end"],["type","button","type","button",1,"btn","btn-info",3,"mat-dialog-close"],["type","button","type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){if(1&e){const e=a.E();d.Tg(0,"code-editor",0,1),l.N("save",(function(e){return t.content=e.content})),d.qZ(),d.Tg(2,"div",2)(3,"button",3)(4,"span"),r._(5,"cancel"),d.qZ()(),d.Tg(6,"button",4),l.N("click",(function(){return c.CH(e),u.M(1).saveContent(),c.Kt(t.dialog.close(t.content))})),d.Tg(7,"span"),r._(8,"ok"),d.qZ()()()}2&e&&(p.Q("content",t.data.content)("languageModel",t.data.languageModel),h.x(3),p.Q("mat-dialog-close",null))},dependencies:[v.ZT,M],encapsulation:2,changeDetection:0})},50073:(e,t,n)=>{n.d(t,{H:()=>o});const o=new(n(53136).y)("json","json",(e=>e.getModel()?.getValue()??""))},53136:(e,t,n)=>{n.d(t,{y:()=>o});class o{constructor(e,t,n){this.language=e,this.extension=t,this.compiledCode=n}}},97825:(e,t,n)=>{n.d(t,{C:()=>s});var o=n(28653),i=n(58656);const s=new o.y(i.Z)}}]);
//# sourceMappingURL=4072.chunk.357bd52cca92f58dd954.js.map