"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[365],{70365:(e,t,n)=>{n.r(t),n.d(t,{MergeRelationsEditorMetadata:()=>U});var o=n(94060),i=n(63375),a=n(93551),s=n(52580),r=n(60901),c=n(85478),l=n(72385),d=n(28903),p=n(97710),u=n(94353),m=n(78581),g=n(21179),f=n(45473),h=n(71325),v=n(84746),y=n(55640),b=n(31246),x=n(23527),C=n(15554),w=n(86870),M=n(8530),E=n(5549),O=n(91513),L=n(83052),k=n(41820),j=n(34984),q=n(60054);function D(e,t,n,o,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){D(a,o,i,s,r,"next",e)}function r(e){D(a,o,i,s,r,"throw",e)}s(void 0)}))}}function _(e,t){if(1&e){const e=p.E();u.Tg(0,"div",11),u._U(1,"relation-node-input",12),u.Tg(2,"div",5)(3,"div"),m._(4),g.AL(5,"firstUppercaseLocalize"),u.qZ(),u.Tg(6,"button",13),f.N("click",(function(t){const n=h.CH(e).$implicit,o=v.o();return t.preventDefault(),t.stopPropagation(),h.Kt(o.rename(n))})),u._U(7,"span",14),u.qZ(),u.Tg(8,"button",15),f.N("click",(function(t){const n=h.CH(e).$implicit,o=v.o();return t.preventDefault(),t.stopPropagation(),h.Kt(o.removeProperty(n))})),u._U(9,"span",16),u.qZ()()()}if(2&e){const e=t.$implicit,n=v.o();y.x(1),b.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",e)("parent",n),y.x(3),x.Oq(g.lc(5,5,e))}}class P extends a.M{get properties(){var e;return this.metadata?((e=this.metadata).relationsOptions??(e.relationsOptions={properties:[]}),this.metadata.relationsOptions.properties??[]):[]}constructor(e,t,n){super(e,t),this.dialog=n}addProperty(){var e=this;return T((function*(){yield e.configureEndpoint(`prop${e.properties.length+1}`)}))()}removeProperty(e){let t;this.metadata?.relationsOptions?.properties?.length&&(t=this.metadata.relationsOptions.properties.indexOf(e))>=0&&(this.metadata.relationsOptions.properties.splice(t,1),this.history.getNewState())}rename(e){var t=this;return T((function*(){yield t.configureEndpoint(e),t.changeDetector.detectChanges()}))()}configureEndpoint(e){var t=this;return T((function*(){var n;const o={name:e,defaultValue:void 0,noDefaultValue:!0,skipInit:!1},i=yield(0,d.n)(t.dialog.open(l.b,{title:"configure property",width:"60vw",data:o}).afterClosed());if(i&&t.metadata?.relationsOptions){let i;t.metadata.relationsOptions.properties?.length&&(i=t.metadata.relationsOptions.properties.indexOf(e))>=0?(t.metadata.relationsOptions.properties.splice(i,1),t.metadata.relationsOptions.properties.splice(i,0,o.name)):((n=t.metadata.relationsOptions).properties??(n.properties=[]),t.metadata.relationsOptions.properties.push(o.name)),t.history.getNewState()}return i??!1}))()}}P.ɵfac=function(e){return new(e||P)(C.Y(w.s),C.Y(M.SB),C.Y(j.J))},P.ɵcmp=E.Xp({type:P,selectors:[["merge-node"]],standalone:!0,features:[O.q,L.j],decls:15,vars:12,consts:[[3,"parent","destroySubject","name"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],["class","input",4,"ngFor","ngForOf"],[1,"dynamic-flex-row"],["type","button",1,"dynamic-btn-icon","dynamic-margin-left-extra-small",3,"click"],[1,"fas","fa-plus"],[1,"outputs"],[1,"output"],["name","mergedObject",3,"parentCoordiantes","zoomLevel","parent"],[1,"input"],[3,"parentCoordiantes","zoomLevel","name","parent"],["type","button",1,"dynamic-btn-icon","dynamic-margin-horizontal-extra-small",3,"click"],[1,"fas","fa-pen"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-times"]],template:function(e,t){1&e&&(u._U(0,"relations-node-header",0),g.AL(1,"firstUppercaseLocalize"),u.Tg(2,"div",1)(3,"div",2)(4,"div",3),k.Y(5,_,10,7,"div",4),u.Tg(6,"div",5)(7,"button",6),f.N("click",(function(e){return e.preventDefault(),e.stopPropagation(),t.addProperty()})),u._U(8,"span",7),u.qZ()()(),u.Tg(9,"div",8)(10,"div",9)(11,"div"),m._(12),g.AL(13,"firstUppercaseLocalize"),u.qZ(),u._U(14,"relation-node-output",10),u.qZ()()()()),2&e&&(b.Q("parent",t)("destroySubject",t.destroySubject)("name",g.lc(1,8,"merge")),y.x(5),b.Q("ngForOf",t.properties),y.x(7),x.Oq(g.lc(13,10,"merged object")),y.x(2),b.Q("parentCoordiantes",t.nodePosition)("zoomLevel",t.zoomLevel)("parent",t))},dependencies:[s.e,r.P,c.n,o.e,q.sg,i.R],encapsulation:2,changeDetection:0});class U{constructor(){this.metaInfo={name:"Merge",description:"Allows constructing of object merged of inputs",group:"Data"},this.nodeDefinition=P,Object.freeze(this)}}},72385:(e,t,n)=>{n.d(t,{b:()=>A});var o=n(94060),i=n(47260),a=n(34558),s=n(63375),r=n(16311),c=n(8945),l=n(71309),d=n(50073),p=n(26038),u=n(7199),m=n(28903);class g{constructor(e){this.defaultValue=null,this.name="",this.skipInit=!1,u.Rl.bind(this)(e)}}var f=n(94353),h=n(78581),v=n(21179),y=n(55640),b=n(23527),x=n(97710),C=n(45473),w=n(71325),M=n(84746),E=n(15554),O=n(5549),L=n(61980),k=n(83052),j=n(41820),q=n(31246),D=n(34984),T=n(68742),_=n(89086),P=n(95381),U=n(15528),z=n(42938),I=n(58328),N=n(88195);function Z(e,t,n,o,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}function F(e,t){1&e&&(f.Tg(0,"div",1)(1,"label",2),f._U(2,"input",9),h._(3),v.AL(4,"firstUppercaseLocalize"),f.qZ()()),2&e&&(y.x(3),b.hi(" ",v.lc(4,1,"skip init")," "))}function S(e,t){if(1&e){const e=x.E();f.Tg(0,"div",10)(1,"button",11),C.N("click",(function(){w.CH(e);const t=M.o();return w.Kt(t.showCodeEditor())})),f.Tg(2,"span"),h._(3),v.AL(4,"firstUppercaseLocalize"),f.qZ()()()}2&e&&(y.x(3),b.Oq(v.lc(4,1,"default value")))}class A{constructor(e,t,n){this.data=e,this.dialog=t,this.form=n.build(new g(e)),this.form.valueChanges.subscribe((t=>(0,u.l7)(e,t)))}showCodeEditor(){var e,t=this;return(e=function*(){const e=(0,u.EN)(t.data.defaultValue)?JSON.stringify(t.data.defaultValue,null,4):"",n=yield(0,m.n)(t.dialog.open(l.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:e,languageModel:d.H}}).afterClosed());(0,u.EN)(n)&&(t.data.defaultValue=(0,p.LK)(n.content))},function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){Z(a,o,i,s,r,"next",e)}function r(e){Z(a,o,i,s,r,"throw",e)}s(void 0)}))})()}}A.ɵfac=function(e){return new(e||A)(E.Y(r.m),E.Y(D.J),E.Y(c.p))},A.ɵcmp=O.Xp({type:A,selectors:[["configure-node-endpoint"]],standalone:!0,features:[L._([c.p]),k.j],decls:17,vars:14,consts:[[3,"formGroup"],[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["type","text","formControlName","name",1,"dynamic-form-control"],["class","dynamic-form-group dynamic-margin-bottom-extra-small",4,"ngIf"],["class","dynamic-flex-column dynamic-margin-bottom-extra-small",4,"ngIf"],[1,"dynamic-flex-row","dynamic-flex-end","dynamic-action-buttons"],["type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"mat-dialog-close"],["type","checkbox","formControlName","skipInit"],[1,"dynamic-flex-column","dynamic-margin-bottom-extra-small"],["type","button",1,"dynamic-btn","dynamic-btn-primary","dynamic-align-self-center",3,"click"]],template:function(e,t){1&e&&(f.Tg(0,"div",0)(1,"div",1)(2,"label",2),h._(3),v.AL(4,"firstUppercaseLocalize"),f.qZ(),f._U(5,"input",3),f.qZ(),j.Y(6,F,5,3,"div",4)(7,S,5,3,"div",5),f.qZ(),f.Tg(8,"div",6)(9,"button",7)(10,"span"),h._(11),v.AL(12,"firstUppercaseLocalize"),f.qZ()(),f.Tg(13,"button",8)(14,"span"),h._(15),v.AL(16,"firstUppercaseLocalize"),f.qZ()()()),2&e&&(q.Q("formGroup",t.form),y.x(3),b.Oq(v.lc(4,8,"name")),y.x(3),q.Q("ngIf",t.data.allowSkipInit),y.x(1),q.Q("ngIf",!t.data.noDefaultValue),y.x(2),q.Q("mat-dialog-close",null),y.x(2),b.Oq(v.lc(12,10,"cancel")),y.x(2),q.Q("mat-dialog-close",!0),y.x(2),b.Oq(v.lc(16,12,"ok")))},dependencies:[i.U,T.Fj,_.W,P.JJ,P.JL,U.s,z.u,a.I,I.ZT,o.e,N.O,s.R],encapsulation:2,changeDetection:0})},71309:(e,t,n)=>{n.d(t,{I:()=>q});var o=n(16311),i=n(15554),a=n(5549),s=n(97710),r=n(94353),c=n(45473),l=n(78581),d=n(21179),p=n(71325),u=n(38459),m=n(31246),g=n(55640),f=n(23527),h=n(69553),v=n(58328),y=n(79077),b=n(7199),x=n(58654);(0,b.yJ)((e=>{(0,b.fp)(e.ngDynamicMonacoPath)&&(e.ngDynamicMonacoPath="dist")})),self.MonacoEnvironment={getWorkerUrl:function(e,t){return"json"===t?"dist/json.worker.js":"css"===t||"scss"===t||"less"===t?"dist/css.worker.js":"html"===t||"handlebars"==t?"dist/html.worker.js":"typescript"===t||"javascript"===t?"dist/ts.worker.js":"dist/editor.worker.js"}};const C={target:x.Mj.typescript.ScriptTarget.ES2020,module:x.Mj.typescript.ModuleKind.CommonJS,moduleResolution:x.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noEmitOnError:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:x.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};x.Mj.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),x.Mj.typescript.typescriptDefaults.setCompilerOptions(C);var w=n(8530),M=n(28539);function E(e,t,n,o,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){E(a,o,i,s,r,"next",e)}function r(e){E(a,o,i,s,r,"throw",e)}s(void 0)}))}}class L{constructor(e){this.element=e,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new y.v,this.contentChange=new y.v}ngOnChanges(e){(0,b.$0)("languageModel")in e&&this.languageModel&&(0,b.$0)("content")in e&&(0,b.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){var e=this;return O((function*(){e.openedFile&&e.codeEditor&&e.languageModel&&e.save.emit({content:e.openedFile.getValue(),code:yield e.languageModel.compiledCode(e.codeEditor)})}))()}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){var e=this;this.codeEditor=x.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},bracketPairColorization:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(x.DC.CtrlCmd|x.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent(O((function*(){e.openedFile&&e.languageModel&&e.codeEditor&&e.contentChange.emit({content:e.openedFile.getValue(),code:yield e.languageModel.compiledCode(e.codeEditor)})})))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,b.fp)(this.content)&&(this.openedFile=x.j6.createModel((this.content||this.languageModel.initialData)??"",this.languageModel.language,x.Sf.file(`file:///index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}L.monacoInit=!0,L.ɵfac=function(e){return new(e||L)(i.Y(w.SB))},L.ɵcmp=a.Xp({type:L,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[M.T],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0});var k=n(63375);function j(e,t,n,o,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}class q{constructor(e,t){this.data=e,this.dialog=t,this.editorContent=null}saveAndClose(e){var t,n=this;return(t=function*(){yield e.saveContent(),n.dialog.close(n.editorContent)},function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function s(e){j(a,o,i,s,r,"next",e)}function r(e){j(a,o,i,s,r,"throw",e)}s(void 0)}))})()}}q.ɵfac=function(e){return new(e||q)(i.Y(o.m),i.Y(h.s))},q.ɵcmp=a.Xp({type:q,selectors:[["code-editor-dialog"]],decls:11,vars:9,consts:[[2,"height","calc(70vh - 46px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"dynamic-flex-row","dynamic-flex-end","dynamic-action-buttons"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button","type","button",1,"dynamic-btn","dynamic-btn-primary",3,"click"]],template:function(e,t){if(1&e){const e=s.E();r.Tg(0,"code-editor",0,1),c.N("save",(function(e){return t.editorContent=e})),r.qZ(),r.Tg(2,"div",2)(3,"button",3)(4,"span"),l._(5),d.AL(6,"firstUppercaseLocalize"),r.qZ()(),r.Tg(7,"button",4),c.N("click",(function(){p.CH(e);const n=u.M(1);return p.Kt(t.saveAndClose(n))})),r.Tg(8,"span"),l._(9),d.AL(10,"firstUppercaseLocalize"),r.qZ()()()}2&e&&(m.Q("content",t.data.content)("languageModel",t.data.languageModel),g.x(3),m.Q("mat-dialog-close",null),g.x(2),f.Oq(d.lc(6,5,"cancel")),g.x(4),f.Oq(d.lc(10,7,"ok")))},dependencies:[v.ZT,L,k.R],encapsulation:2,changeDetection:0})},50073:(e,t,n)=>{n.d(t,{H:()=>o});const o=new(n(53136).y)("json","json",(e=>e.getModel()?.getValue()??""))},53136:(e,t,n)=>{n.d(t,{y:()=>o});class o{constructor(e,t,n,o){this.language=e,this.extension=t,this.compiledCode=n,this.initialData=o}}}}]);
//# sourceMappingURL=365.chunk.8ab7dac13cbf42f48b16.js.map