"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[6384],{41191:(t,e,n)=>{n.r(e),n.d(e,{ToggleButtonRelationsEditorMetadata:()=>_});var i=n(93551),o=n(60901),s=n(85478),a=n(43801),r=n(13691),u=n(47098),l=n(82568),d=n(80827),h=n(41853),p=n(72891),c=n(66794),g=n(6427),m=n(73301);class f extends i.M{}f.ɵfac=function(){let t;return function(e){return(t||(t=a.n5(f)))(e||f)}}(),f.ɵcmp=r.Xp({type:f,selectors:[["toggle-button-node"]],standalone:!0,features:[u.q,l.j],decls:16,vars:7,consts:[[1,"node-header"],[1,"flex-1"],[3,"click"],[1,"node-content"],[1,"inputs","margin-right-small"],[1,"flex-row"],["name","disabled",3,"parentCoordiantes","zoomLevel","parent"],[1,"margin-left-extra-small"],[1,"outputs","margin-left-small"],[1,"margin-right-extra-small"],["name","toggle",3,"parentCoordiantes","zoomLevel","parent"]],template:function(t,e){1&t&&(d.Tg(0,"div",0)(1,"div",1),h._(2),d.qZ(),d.Tg(3,"div",2),p.N("click",(function(){return e.destroySubject.next()})),h._(4,"x"),d.qZ()(),d.Tg(5,"div",3)(6,"div",4)(7,"div",5),d._U(8,"relation-node-input",6),d.Tg(9,"div",7),h._(10,"disabled"),d.qZ()()(),d.Tg(11,"div",8)(12,"div",5)(13,"div",9),h._(14,"toggle"),d.qZ(),d._U(15,"relation-node-output",10),d.qZ()()()),2&t&&(c.x(2),g.Oq(null==e.metadata?null:e.metadata.id),c.x(6),m.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e),c.x(7),m.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e))},dependencies:[o.P,s.n],styles:["[_nghost-%COMP%]\n{\n    display: block;\n    position: absolute;\n    border-radius: 1rem;\n    -webkit-box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.75);\n    -moz-box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.75);\n    box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.75);\n}\n\n.node-header[_ngcontent-%COMP%], .node-content[_ngcontent-%COMP%]\n{\n    padding: .5rem;\n}\n\n.node-header[_ngcontent-%COMP%]\n{\n    background-color: rgb(77, 77, 77);\n    color: white;\n    border-radius: 1rem 1rem 0 0;\n    display: flex;\n    flex-direction: row;\n}\n\n.node-content[_ngcontent-%COMP%]\n{\n    background-color: white;\n    border-radius: 0 0 1rem 1rem;\n    display: flex;\n    justify-content: space-between;\n}"],changeDetection:0});class _{constructor(){this.metaInfo={name:"Toggle button",description:"Toggle button",group:"Buttons"},this.nodeDefinition=f,Object.freeze(this)}}},93551:(t,e,n)=>{n.d(e,{M:()=>m});var i=n(49891),o=n(53682),s=n(85478),a=n(60901),r=n(79440),u=n(68961),l=n(4905),d=n(13691),h=n(55436),p=n(72891),c=n(47083),g=n(36973);class m{constructor(t,e){this.changeDetector=t,this.element=e,this.initialized=!1,this.isDragging=!1,this.lastMouseDownPosition={x:0,y:0},this.lastMouseDownNodePosition={x:0,y:0},this.nodePosition={x:0,y:0},this.ɵAllOutputs=[],this.ɵInputs={},this.ɵOutputs={},this.destroySubject=new o.xQ,this.zoomLevel=1,this.updatePosition()}get id(){return this.metadata?.id??""}get allOutputs(){return this.ɵAllOutputs}get inputs(){return this.ɵInputs}get outputs(){return this.ɵOutputs}get destroy(){return this.destroySubject.asObservable()}ngOnChanges(t){(0,i.$)("metadata")in t&&this.metadata&&(this.metadata.nodeMetadata?.coordinates&&(this.nodePosition=this.metadata.nodeMetadata.coordinates,this.updatePosition()),this.metadataSet())}invalidateVisuals(){this.changeDetector.detectChanges(),this.initialized||(this.initialized=!0,this.initEndpoints())}onMouseDown(t){this.isDragging=!0,this.lastMouseDownPosition={x:t.clientX,y:t.clientY},this.lastMouseDownNodePosition={x:this.nodePosition.x,y:this.nodePosition.y},t.stopImmediatePropagation()}onMouseMove(t){this.isDragging&&(this.nodePosition={x:this.lastMouseDownNodePosition.x+1*(t.clientX-this.lastMouseDownPosition.x)/this.zoomLevel,y:this.lastMouseDownNodePosition.y+1*(t.clientY-this.lastMouseDownPosition.y)/this.zoomLevel},this.updatePosition(),t.stopImmediatePropagation(),t.preventDefault(),this.updateRelations())}onMouseUp(t){this.isDragging&&(this.isDragging=!1,t.stopImmediatePropagation(),t.preventDefault())}initEndpoints(){const t=()=>{this.ɵInputs={},this.inputsChildren?.forEach((t=>{t.name&&(this.ɵInputs[t.name]=t)})),Object.freeze(this.ɵInputs)},e=()=>{this.ɵAllOutputs=this.outputsChildren.toArray(),this.ɵOutputs={},this.outputsChildren?.forEach((t=>{t.name&&(this.ɵOutputs[t.name]=t)})),Object.freeze(this.ɵOutputs)};this.inputsChildren?.changes.subscribe((()=>t())),this.outputsChildren?.changes.subscribe((()=>e())),t(),e()}updateRelations(){this.inputsChildren.forEach((t=>{t.updateRelation()})),this.outputsChildren.forEach((t=>{t.updateRelation()}))}updatePosition(){this.element.nativeElement.style.left=`${this.nodePosition.x}px`,this.element.nativeElement.style.top=`${this.nodePosition.y}px`,this.metadata?.nodeMetadata?.coordinates&&(this.metadata.nodeMetadata.coordinates.x=this.nodePosition.x,this.metadata.nodeMetadata.coordinates.y=this.nodePosition.y)}metadataSet(){}}m.ɵfac=function(t){return new(t||m)(r.Y(u.s),r.Y(l.SB))},m.ɵdir=d.lG({type:m,viewQuery:function(t,e){if(1&t&&(h.Gf(a.P,5),h.Gf(s.n,5)),2&t){let t;h.iG(t=h.CR())&&(e.inputsChildren=t),h.iG(t=h.CR())&&(e.outputsChildren=t)}},hostBindings:function(t,e){1&t&&p.N("mousedown",(function(t){return e.onMouseDown(t)}))("mousemove",(function(t){return e.onMouseMove(t)}),!1,c.Jf)("mouseup",(function(t){return e.onMouseUp(t)}),!1,c.Jf)},features:[g.T]})},2198:(t,e,n)=>{n.d(e,{S:()=>u});var i=n(79440),o=n(4905),s=n(13691),a=n(48397),r=n(75957);class u{constructor(t,e,n){this._element=t,this._relationManager=e,this._canvas=n,this._isDragging=!1,this._lastMouseDownPosition={x:0,y:0},this.zoomLevel=1,this.parentCoordiantes={x:0,y:0}}get parentId(){return this.parent?.id??""}ngOnInit(){if(!this.parent)throw new Error("Every input or output endpoint must have parent specified")}getCoordinates(){return{x:this.parentCoordiantes.x+this._element.nativeElement.offsetLeft+this._element.nativeElement.offsetWidth/2,y:this.parentCoordiantes.y+this._element.nativeElement.offsetTop+this._element.nativeElement.offsetHeight/2}}}u.ɵfac=function(t){return new(t||u)(i.Y(o.SB),i.Y(a.J),i.Y(r.F))},u.ɵdir=s.lG({type:u,inputs:{name:"name",zoomLevel:"zoomLevel",parentCoordiantes:"parentCoordiantes",parent:"parent"}})},60901:(t,e,n)=>{n.d(e,{P:()=>c});var i=n(27052),o=n(2198),s=n(26220),a=n(40362),r=n(43801),u=n(13691),l=n(72891),d=n(47083),h=n(47098),p=n(82568);class c extends o.S{ngOnDestroy(){this._relation&&this._relation.destroy()}addRelation(t){if(this._relation){if(this._relation.start?.x===t.start?.x&&this._relation.start?.y===t.start?.y)return!1;this._relation.destroy()}return this._relation=t,!0}endRelation(t){this.addRelation(t)&&this.updateRelation()}updateRelation(){this._relation&&(this._relation.end=this.getCoordinates(),this._relation.input=this,this._relation.invalidateVisuals())}_onMouseEnter(t){t.buttons===s.t.LEFT&&this._relationManager.setActiveInput(this)}_onMouseLeave(t){t.buttons===s.t.LEFT&&this._relationManager.setActiveInput(null)}_onMouseDown(t){t.stopImmediatePropagation(),t.preventDefault(),this._lastMouseDownPosition={x:t.clientX,y:t.clientY},this._tempRelation=this._relation,this._relation=null,this._isDragging=!0}_onMouseMove(t){this._isDragging&&(t.stopImmediatePropagation(),t.preventDefault(),this._tempRelation&&(this._tempRelation.end={x:this.getCoordinates().x+1*(t.clientX-this._lastMouseDownPosition?.x)/this.zoomLevel,y:this.getCoordinates().y+1*(t.clientY-this._lastMouseDownPosition?.y)/this.zoomLevel},this._tempRelation.invalidateVisuals()))}_onMouseUp(t){this._isDragging&&(this._isDragging=!1,t.stopImmediatePropagation(),t.preventDefault(),this._tempRelation?.invalidateVisuals(a.r))}}c.ɵfac=function(){let t;return function(e){return(t||(t=r.n5(c)))(e||c)}}(),c.ɵcmp=u.Xp({type:c,selectors:[["relation-node-input"]],hostBindings:function(t,e){1&t&&l.N("mouseenter",(function(t){return e._onMouseEnter(t)}))("mouseleave",(function(t){return e._onMouseLeave(t)}))("mousedown",(function(t){return e._onMouseDown(t)}))("mousemove",(function(t){return e._onMouseMove(t)}),!1,d.Jf)("mouseup",(function(t){return e._onMouseUp(t)}),!1,d.Jf)},standalone:!0,features:[h.q,p.j],decls:0,vars:0,template:function(t,e){},dependencies:[i.e],styles:["[_nghost-%COMP%]\n{\n    display: block;\n    width: 1.45em;\n    height: 1.45em;\n    border-width: .5em;\n    border-style: solid;\n    border-radius: 50%;\n    background-color: white;\n    cursor: crosshair;\n}"],changeDetection:0})},85478:(t,e,n)=>{n.d(e,{n:()=>p});var i=n(27052),o=n(2198),s=n(40362),a=n(43801),r=n(13691),u=n(72891),l=n(47083),d=n(47098),h=n(82568);class p extends o.S{constructor(){super(...arguments),this._relations=[]}get relations(){return this._relations}ngOnDestroy(){if(this._relations){const t=[...this._relations];for(const e of t)e.destroy()}}startRelation(){const t=this._canvas.createRelation();return t.start=this.getCoordinates(),t.output=this,t.destroying.subscribe((()=>{const e=this._relations.indexOf(t);e>=0&&this._relations.splice(e,1)})),this._relations.push(t),t}updateRelation(){if(this._relations)for(const t of this._relations)t.start=this.getCoordinates(),t.invalidateVisuals()}_onMouseDown(t){t.stopImmediatePropagation(),t.preventDefault(),this._isDragging=!0,this._lastMouseDownPosition={x:t.clientX,y:t.clientY},this._relation=this.startRelation()}_onMouseMove(t){this._isDragging&&(t.stopImmediatePropagation(),t.preventDefault(),this._relation&&(this._relation.end={x:this.getCoordinates().x+1*(t.clientX-this._lastMouseDownPosition.x)/this.zoomLevel,y:this.getCoordinates().y+1*(t.clientY-this._lastMouseDownPosition.y)/this.zoomLevel},this._relation.invalidateVisuals()))}_onMouseUp(t){this._isDragging&&(this._isDragging=!1,t.stopImmediatePropagation(),t.preventDefault(),this._relation?.invalidateVisuals(s.r))}}p.ɵfac=function(){let t;return function(e){return(t||(t=a.n5(p)))(e||p)}}(),p.ɵcmp=r.Xp({type:p,selectors:[["relation-node-output"]],hostBindings:function(t,e){1&t&&u.N("mousedown",(function(t){return e._onMouseDown(t)}))("mousemove",(function(t){return e._onMouseMove(t)}),!1,l.Jf)("mouseup",(function(t){return e._onMouseUp(t)}),!1,l.Jf)},standalone:!0,features:[d.q,h.j],decls:0,vars:0,template:function(t,e){},dependencies:[i.e],styles:["[_nghost-%COMP%]\n{\n    display: block;\n    width: 1.45em;\n    height: 1.45em;\n    border-width: .5em;\n    border-style: solid;\n    border-radius: 50%;\n    background-color: white;\n    cursor: crosshair;\n}"],changeDetection:0})},89402:(t,e,n)=>{function i(t){return!!t.__ɵɵRelationsComponent}function o(){return function(t){return t.__ɵɵRelationsComponent=!0,t}}n.d(e,{H:()=>o,O:()=>i})},14389:(t,e,n)=>{function i(t,e,n,i,o=!1){t[e]={currentValue:n,previousValue:i,firstChange:o,isFirstChange:()=>o}}n.d(e,{m:()=>i})}}]);
//# sourceMappingURL=6384.chunk.3a02cb311fb3066fbbe7.js.map