(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[8810],{84635:(t,e,n)=>{var i={"./button/type":[38206,8206],"./gridPanel/type":[49,49],"./gridPanelCell/type":[9918,9918],"./sampleChange/type":[89354,9354],"./sampleSource/type":[51133,1133],"./stackPanel/type":[14433,4433],"./textBlock/type":[2252,2252]};function o(t){if(!n.o(i,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=i[t],o=e[0];return n.e(e[1]).then((()=>n(o)))}o.keys=()=>Object.keys(i),o.id=84635,t.exports=o},14663:(t,e,n)=>{"use strict";n.r(e),n.d(e,{RelationsSampleClickRelationsEditorMetadata:()=>g});var i=n(93551),o=n(60901),s=n(85478),a=n(43801),r=n(13691),u=n(47098),l=n(82568),c=n(80827),d=n(41853),h=n(66794),p=n(6427),m=n(73301);class _ extends i.M{metadataSet(){}}_.ɵfac=function(){let t;return function(e){return(t||(t=a.n5(_)))(e||_)}}(),_.ɵcmp=r.Xp({type:_,selectors:[["relations-sample-click-node"]],standalone:!0,features:[u.q,l.j],decls:13,vars:7,consts:[[1,"node-header"],[1,"node-content"],[1,"inputs","margin-right-small"],[1,"flex-row"],["name","vstup",3,"parentCoordiantes","zoomLevel","parent"],[1,"margin-left-extra-small"],[1,"outputs","margin-left-small"],[1,"margin-right-extra-small"],["name","vystup",3,"parentCoordiantes","zoomLevel","parent"]],template:function(t,e){1&t&&(c.Tg(0,"div",0),d._(1),c.qZ(),c.Tg(2,"div",1)(3,"div",2)(4,"div",3),c._U(5,"relation-node-input",4),c.Tg(6,"div",5),d._(7,"vstup"),c.qZ()()(),c.Tg(8,"div",6)(9,"div",3)(10,"div",7),d._(11,"výstup"),c.qZ(),c._U(12,"relation-node-output",8),c.qZ()()()),2&t&&(h.x(1),p.hi(" ",null==e.metadata?null:e.metadata.id,"\n"),h.x(4),m.Q("parentCoordiantes",e._nodePosition)("zoomLevel",e.zoomLevel)("parent",e),h.x(7),m.Q("parentCoordiantes",e._nodePosition)("zoomLevel",e.zoomLevel)("parent",e))},dependencies:[o.P,s.n],styles:["[_nghost-%COMP%]{display:block;position:absolute;border-radius:1rem;-webkit-box-shadow:0px 0px 10px 0px rgba(0,0,0,.75);-moz-box-shadow:0px 0px 10px 0px rgba(0,0,0,.75);box-shadow:0px 0px 10px 0px rgba(0,0,0,.75)}.node-header[_ngcontent-%COMP%], .node-content[_ngcontent-%COMP%]{padding:.5rem}.node-header[_ngcontent-%COMP%]{background-color:#4d4d4d;color:#fff;border-radius:1rem 1rem 0 0}.node-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:0 0 1rem 1rem;display:flex;justify-content:space-between}"],changeDetection:0});class g{constructor(){this.metaInfo={name:"Relations sample click",description:"Relations sample click node",group:"Sample component"},this.nodeDefinition=_,Object.freeze(this)}}},93551:(t,e,n)=>{"use strict";n.d(e,{M:()=>m});var i=n(49891),o=n(85478),s=n(60901),a=n(79440),r=n(68961),u=n(4905),l=n(13691),c=n(55436),d=n(72891),h=n(47083),p=n(36973);class m{constructor(t,e){this._changeDetector=t,this._element=e,this._initialized=!1,this._isDragging=!1,this._lastMouseDownPosition={x:0,y:0},this._lastMouseDownNodePosition={x:0,y:0},this._nodePosition={x:0,y:0},this._allOutputs=[],this._inputs={},this._outputs={},this.zoomLevel=1,this._updatePosition()}get id(){return this.metadata?.id??""}get allOutputs(){return this._allOutputs}get inputs(){return this._inputs}get outputs(){return this._outputs}ngOnChanges(t){(0,i.$)("metadata")in t&&this.metadata&&(this.metadata.nodeMetadata?.coordinates&&(this._nodePosition=this.metadata.nodeMetadata.coordinates,this._updatePosition()),this.metadataSet())}invalidateVisuals(){this._changeDetector.detectChanges(),this._initialized||(this._initialized=!0,this._initEndpoints())}_onMouseDown(t){this._isDragging=!0,this._lastMouseDownPosition={x:t.clientX,y:t.clientY},this._lastMouseDownNodePosition={x:this._nodePosition.x,y:this._nodePosition.y},t.stopImmediatePropagation()}_onMouseMove(t){this._isDragging&&(this._nodePosition={x:this._lastMouseDownNodePosition.x+1*(t.clientX-this._lastMouseDownPosition.x)/this.zoomLevel,y:this._lastMouseDownNodePosition.y+1*(t.clientY-this._lastMouseDownPosition.y)/this.zoomLevel},this._updatePosition(),t.stopImmediatePropagation(),t.preventDefault(),this._updateRelations())}_onMouseUp(t){this._isDragging&&(this._isDragging=!1,t.stopImmediatePropagation(),t.preventDefault())}_initEndpoints(){const t=()=>{this._inputs={},this._inputsChildren?.forEach((t=>{t.name&&(this._inputs[t.name]=t)})),Object.freeze(this._inputs)},e=()=>{this._allOutputs=this._outputsChildren.toArray(),this._outputs={},this._outputsChildren?.forEach((t=>{t.name&&(this._outputs[t.name]=t)})),Object.freeze(this._outputs)};this._inputsChildren?.changes.subscribe((()=>t())),this._outputsChildren?.changes.subscribe((()=>e())),t(),e()}_updateRelations(){this._inputsChildren.forEach((t=>{t.updateRelation()})),this._outputsChildren.forEach((t=>{t.updateRelation()}))}_updatePosition(){this._element.nativeElement.style.left=`${this._nodePosition.x}px`,this._element.nativeElement.style.top=`${this._nodePosition.y}px`,this.metadata?.nodeMetadata?.coordinates&&(this.metadata.nodeMetadata.coordinates.x=this._nodePosition.x,this.metadata.nodeMetadata.coordinates.y=this._nodePosition.y)}}m.ɵfac=function(t){return new(t||m)(a.Y(r.s),a.Y(u.SB))},m.ɵdir=l.lG({type:m,viewQuery:function(t,e){if(1&t&&(c.Gf(s.P,5),c.Gf(o.n,5)),2&t){let t;c.iG(t=c.CR())&&(e._inputsChildren=t),c.iG(t=c.CR())&&(e._outputsChildren=t)}},hostBindings:function(t,e){1&t&&d.N("mousedown",(function(t){return e._onMouseDown(t)}))("mousemove",(function(t){return e._onMouseMove(t)}),!1,h.Jf)("mouseup",(function(t){return e._onMouseUp(t)}),!1,h.Jf)},features:[p.T]})},2198:(t,e,n)=>{"use strict";n.d(e,{S:()=>u});var i=n(79440),o=n(4905),s=n(13691),a=n(48397),r=n(75957);class u{constructor(t,e,n){this._element=t,this._relationManager=e,this._canvas=n,this._isDragging=!1,this._lastMouseDownPosition={x:0,y:0},this.zoomLevel=1,this.parentCoordiantes={x:0,y:0}}get parentId(){return this.parent?.id??""}ngOnInit(){if(!this.parent)throw new Error("Every input or output endpoint must have parent specified")}getCoordinates(){return{x:this.parentCoordiantes.x+this._element.nativeElement.offsetLeft+this._element.nativeElement.offsetWidth/2,y:this.parentCoordiantes.y+this._element.nativeElement.offsetTop+this._element.nativeElement.offsetHeight/2}}}u.ɵfac=function(t){return new(t||u)(i.Y(o.SB),i.Y(a.J),i.Y(r.F))},u.ɵdir=s.lG({type:u,inputs:{name:"name",zoomLevel:"zoomLevel",parentCoordiantes:"parentCoordiantes",parent:"parent"}})},60901:(t,e,n)=>{"use strict";n.d(e,{P:()=>p});var i=n(27052),o=n(2198),s=n(26220),a=n(40362),r=n(43801),u=n(13691),l=n(72891),c=n(47083),d=n(47098),h=n(82568);class p extends o.S{addRelation(t){if(this._relation){if(this._relation.start?.x===t.start?.x&&this._relation.start?.y===t.start?.y)return!1;this._relation.destroy()}return this._relation=t,!0}endRelation(t){this.addRelation(t)&&this.updateRelation()}updateRelation(){this._relation&&(this._relation.end=this.getCoordinates(),this._relation.input=this,this._relation.invalidateVisuals())}_onMouseEnter(t){t.buttons===s.t.LEFT&&this._relationManager.setActiveInput(this)}_onMouseLeave(t){t.buttons===s.t.LEFT&&this._relationManager.setActiveInput(null)}_onMouseDown(t){t.stopImmediatePropagation(),t.preventDefault(),this._lastMouseDownPosition={x:t.clientX,y:t.clientY},this._tempRelation=this._relation,this._relation=null,this._isDragging=!0}_onMouseMove(t){this._isDragging&&(t.stopImmediatePropagation(),t.preventDefault(),this._tempRelation&&(this._tempRelation.end={x:this.getCoordinates().x+1*(t.clientX-this._lastMouseDownPosition?.x)/this.zoomLevel,y:this.getCoordinates().y+1*(t.clientY-this._lastMouseDownPosition?.y)/this.zoomLevel},this._tempRelation.invalidateVisuals()))}_onMouseUp(t){this._isDragging&&(this._isDragging=!1,t.stopImmediatePropagation(),t.preventDefault(),this._tempRelation?.invalidateVisuals(a.r))}}p.ɵfac=function(){let t;return function(e){return(t||(t=r.n5(p)))(e||p)}}(),p.ɵcmp=u.Xp({type:p,selectors:[["relation-node-input"]],hostBindings:function(t,e){1&t&&l.N("mouseenter",(function(t){return e._onMouseEnter(t)}))("mouseleave",(function(t){return e._onMouseLeave(t)}))("mousedown",(function(t){return e._onMouseDown(t)}))("mousemove",(function(t){return e._onMouseMove(t)}),!1,c.Jf)("mouseup",(function(t){return e._onMouseUp(t)}),!1,c.Jf)},standalone:!0,features:[d.q,h.j],decls:0,vars:0,template:function(t,e){},dependencies:[i.e],styles:["[_nghost-%COMP%]\n{\n    display: block;\n    width: 1.45em;\n    height: 1.45em;\n    border-width: .5em;\n    border-style: solid;\n    border-radius: 50%;\n    background-color: white;\n    cursor: crosshair;\n}"],changeDetection:0})},85478:(t,e,n)=>{"use strict";n.d(e,{n:()=>h});var i=n(27052),o=n(2198),s=n(40362),a=n(43801),r=n(13691),u=n(72891),l=n(47083),c=n(47098),d=n(82568);class h extends o.S{constructor(){super(...arguments),this._relations=[]}get relations(){return this._relations}ngOnDestroy(){if(this._relations){const t=[...this._relations];for(const e of t)e.destroy()}}startRelation(){const t=this._canvas.createRelation();return t.start=this.getCoordinates(),t.output=this,t.destroying.subscribe((()=>{const e=this._relations.indexOf(t);e>=0&&this._relations.splice(e,1)})),this._relations.push(t),t}updateRelation(){if(this._relations)for(const t of this._relations)t.start=this.getCoordinates(),t.invalidateVisuals()}_onMouseDown(t){t.stopImmediatePropagation(),t.preventDefault(),this._isDragging=!0,this._lastMouseDownPosition={x:t.clientX,y:t.clientY},this._relation=this.startRelation()}_onMouseMove(t){this._isDragging&&(t.stopImmediatePropagation(),t.preventDefault(),this._relation&&(this._relation.end={x:this.getCoordinates().x+1*(t.clientX-this._lastMouseDownPosition.x)/this.zoomLevel,y:this.getCoordinates().y+1*(t.clientY-this._lastMouseDownPosition.y)/this.zoomLevel},this._relation.invalidateVisuals()))}_onMouseUp(t){this._isDragging&&(this._isDragging=!1,t.stopImmediatePropagation(),t.preventDefault(),this._relation?.invalidateVisuals(s.r))}}h.ɵfac=function(){let t;return function(e){return(t||(t=a.n5(h)))(e||h)}}(),h.ɵcmp=r.Xp({type:h,selectors:[["relation-node-output"]],hostBindings:function(t,e){1&t&&u.N("mousedown",(function(t){return e._onMouseDown(t)}))("mousemove",(function(t){return e._onMouseMove(t)}),!1,l.Jf)("mouseup",(function(t){return e._onMouseUp(t)}),!1,l.Jf)},standalone:!0,features:[c.q,d.j],decls:0,vars:0,template:function(t,e){},dependencies:[i.e],styles:["[_nghost-%COMP%]\n{\n    display: block;\n    width: 1.45em;\n    height: 1.45em;\n    border-width: .5em;\n    border-style: solid;\n    border-radius: 50%;\n    background-color: white;\n    cursor: crosshair;\n}"],changeDetection:0})},89402:(t,e,n)=>{"use strict";function i(t){return!!t.__ɵɵRelationsComponent}function o(){return function(t){return t.__ɵɵRelationsComponent=!0,t}}n.d(e,{H:()=>o,O:()=>i})},51509:(t,e,n)=>{"use strict";n.d(e,{c:()=>r});var i=n(46480),o=n(11776),s=n(38327);function a(t,e,n,i,o,s,a){try{var r=t[s](a),u=r.value}catch(t){return void n(t)}r.done?e(u):Promise.resolve(u).then(i,o)}class r{constructor(t){this._logger=t}tryToGet(t){var e,i=this;return(e=function*(){if("basic-components"!=t.package&&"@anglr/dynamic/basic-components"!=t.package)return null;try{return i._logger?.debug("BasicComponentsDynamicModuleItemsProvider: trying to get item {@item}",{name:t.name,package:t.package}),yield n(84635)(`./${t.name}/type`)}catch(e){i._logger?.debug("BasicComponentsDynamicModuleItemsProvider: item {@item} was not found, reason: "+e,{name:t.name,package:t.package})}return null},function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function r(t){a(s,i,o,r,u,"next",t)}function u(t){a(s,i,o,r,u,"throw",t)}r(void 0)}))})()}}r.ɵfac=function(t){return new(t||r)(o.LF(i.bZ,8))},r.ɵprov=s.Yz({token:r,factory:r.ɵfac})},12193:(t,e,n)=>{"use strict";n.d(e,{S:()=>s});var i=n(87606);function o(t,e,n,i,o,s,a){try{var r=t[s](a),u=r.value}catch(t){return void n(t)}r.done?e(u):Promise.resolve(u).then(i,o)}class s{constructor(t,e,n,i){this._providers=t,this._extractors=e,this._validatorFn=n,this._logger=i,this._cachedDynamicItems={},Array.isArray(this._providers)||(this._logger?.error("DynamicItemLoader: missing providers!"),this._providers=[]),Array.isArray(this._extractors)||(this._logger?.error("DynamicItemLoader: missing extractors!"),this._extractors=[])}loadItem(t){var e,n=this;return(e=function*(){let e=null;const o=`${t.package}-${t.name}`;if(o in n._cachedDynamicItems)return n._logger?.verbose("DynamicItemLoader: Loading from cache {@source}",{name:t.name,package:t.package}),n._cachedDynamicItems[o];for(const o of n._providers){const n=o.tryToGet(t);if(e=n?yield(0,i.K)(n):null,e)break}if(!e)return n._logger?.debug("DynamicItemLoader: Failed to get dynamic module {@source}",{name:t.name,package:t.package}),null;for(const i of n._extractors){const s=yield i.tryToExtract(e);if(s)return n._cachedDynamicItems[o]=n._validatorFn(s)?s:null,n._cachedDynamicItems[o]||n._logger?.warn("DynamicItemLoader: Found dynamic item {@source} is not of requested type",{name:t.name,package:t.package}),n._cachedDynamicItems[o]}return n._logger?.debug("DynamicItemLoader: Failed to extract dynamic item {@source}",{name:t.name,package:t.package}),n._cachedDynamicItems[o]=null,null},function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function r(t){o(a,i,s,r,u,"next",t)}function u(t){o(a,i,s,r,u,"throw",t)}r(void 0)}))})()}}},65569:(t,e,n)=>{"use strict";n.d(e,{$:()=>r});var i=n(57466),o=n(87606),s=n(43939);function a(t,e,n,i,o,s,a){try{var r=t[s](a),u=r.value}catch(t){return void n(t)}r.done?e(u):Promise.resolve(u).then(i,o)}class r{constructor(t,e){this._extractorFunctions=t,this._logger=e,Array.isArray(this._extractorFunctions)||(this._logger?.error("DynamicModuleDataExtractor: missing extractor functions!"),this._extractorFunctions=[])}tryToExtract(t){var e,n=this;return(e=function*(){const e={};for(const s of n._extractorFunctions)(0,i.l7)(!0,e,yield(0,o.K)(s(t,n._logger)));return(0,s.Qr)(e)?null:e},function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function r(t){a(s,i,o,r,u,"next",t)}function u(t){a(s,i,o,r,u,"throw",t)}r(void 0)}))})()}}},87606:(t,e,n)=>{"use strict";function i(t,e,n,i,o,s,a){try{var r=t[s](a),u=r.value}catch(t){return void n(t)}r.done?e(u):Promise.resolve(u).then(i,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,s){var a=t.apply(e,n);function r(t){i(a,o,s,r,u,"next",t)}function u(t){i(a,o,s,r,u,"throw",t)}r(void 0)}))}}function s(t){return a.apply(this,arguments)}function a(){return(a=o((function*(t){return t instanceof Promise?yield t:t}))).apply(this,arguments)}n.d(e,{K:()=>s})}}]);
//# sourceMappingURL=8810.chunk.975835c67b8136ebd6f5.js.map