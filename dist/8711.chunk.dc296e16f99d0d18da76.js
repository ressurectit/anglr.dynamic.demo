"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[8711],{48711:(t,e,n)=>{n.r(e),n.d(e,{DeconstructRelationsEditorMetadata:()=>N});var o=n(27052),i=n(93551),a=n(52580),r=n(60901),s=n(85478),p=n(72385),c=n(64297),d=n(84773),u=n(76405),l=n(41853),m=n(72891),f=n(43870),v=n(6845),g=n(66794),h=n(6427),y=n(73301),b=n(79440),O=n(68961),w=n(4905),x=n(77842),k=n(47098),P=n(82568),_=n(15686),C=n(47826),D=n(12311);function S(t,e,n,o,i,a,r){try{var s=t[a](r),p=s.value}catch(t){return void n(t)}s.done?e(p):Promise.resolve(p).then(o,i)}function j(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function r(t){S(a,o,i,r,s,"next",t)}function s(t){S(a,o,i,r,s,"throw",t)}r(void 0)}))}}function q(t,e){if(1&t){const t=d.E();u.Tg(0,"div",11)(1,"div",12)(2,"div"),l._(3),u.qZ(),u.Tg(4,"button",13),m.N("click",(function(e){const n=f.CH(t).$implicit,o=v.o();return e.preventDefault(),e.stopPropagation(),f.Kt(o.configureEndpoint(n))})),u._U(5,"span",14),u.qZ(),u.Tg(6,"button",15),m.N("click",(function(e){const n=f.CH(t).$implicit,o=v.o();return e.preventDefault(),e.stopPropagation(),f.Kt(o.removeProperty(n.name))})),u._U(7,"span",16),u.qZ()(),u._U(8,"relation-node-output",17),u.qZ()}if(2&t){const t=e.$implicit,n=v.o();g.x(3),h.Oq(t.name),g.x(5),y.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",t.name)("parent",n)}}class z extends i.M{get properties(){var t;return this.metadata?((t=this.metadata).relationsOptions??(t.relationsOptions={properties:[]}),this.metadata.relationsOptions.properties??[]):[]}constructor(t,e,n){super(t,e),this.dialog=n}addProperty(){var t=this;return j((function*(){const e={name:`property${t.properties.length+1}`,defaultValue:void 0,noDefaultValue:!0,skipInit:!1,allowSkipInit:!0};yield t.configureEndpoint(e)}))()}removeProperty(t){let e;this.metadata?.relationsOptions?.properties&&(e=this.metadata.relationsOptions.properties.findIndex((e=>e.name==t)))>=0&&(this.metadata.relationsOptions.properties.splice(e,1),this.history.getNewState())}configureEndpoint(t){var e=this;return j((function*(){var n;const o=JSON.parse(JSON.stringify(t)),i=yield(0,c.n)(e.dialog.open(p.b,{title:"configure property",width:"60vw",data:o}).afterClosed());if(i&&e.metadata?.relationsOptions){let i;e.metadata.relationsOptions.properties&&(i=e.metadata.relationsOptions.properties.findIndex((e=>e.name==t.name)))>=0?(e.metadata.relationsOptions.properties.splice(i,1),e.metadata.relationsOptions.properties.splice(i,0,o)):((n=e.metadata.relationsOptions).properties??(n.properties=[]),e.metadata.relationsOptions.properties.push(o)),e.history.getNewState()}return i??!1}))()}}z.ɵfac=function(t){return new(t||z)(b.Y(O.s),b.Y(w.SB),b.Y(C.J))},z.ɵcmp=x.Xp({type:z,selectors:[["deconstruct-node"]],standalone:!0,features:[k.q,P.j],decls:13,vars:6,consts:[["name","deconstruct",3,"parent","destroySubject"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"input"],["name","object",3,"parentCoordiantes","zoomLevel","parent"],[1,"outputs"],["class","output",4,"ngFor","ngForOf"],[1,"dynamic-flex-row","dynamic-flex-end"],["type","button",1,"dynamic-btn-icon","dynamic-margin-left-extra-small",3,"click"],[1,"fas","fa-plus"],[1,"output"],[1,"dynamic-flex-row"],["type","button",1,"dynamic-btn-icon","dynamic-margin-horizontal-extra-small",3,"click"],[1,"fas","fa-pen"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-times"],[3,"parentCoordiantes","zoomLevel","name","parent"]],template:function(t,e){1&t&&(u._U(0,"relations-node-header",0),u.Tg(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),u._U(5,"relation-node-input",5),u.Tg(6,"div"),l._(7,"object"),u.qZ()()(),u.Tg(8,"div",6),_.Y(9,q,9,5,"div",7),u.Tg(10,"div",8)(11,"button",9),m.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.addProperty()})),u._U(12,"span",10),u.qZ()()()()()),2&t&&(y.Q("parent",e)("destroySubject",e.destroySubject),g.x(5),y.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e),g.x(4),y.Q("ngForOf",e.properties))},dependencies:[a.e,r.P,s.n,o.e,D.sg],encapsulation:2,changeDetection:0});class N{constructor(){this.metaInfo={name:"Deconstruct",description:"Allows deconstruction of object into its properties as outputs",group:"Data"},this.nodeDefinition=z,Object.freeze(this)}}}}]);
//# sourceMappingURL=8711.chunk.dc296e16f99d0d18da76.js.map