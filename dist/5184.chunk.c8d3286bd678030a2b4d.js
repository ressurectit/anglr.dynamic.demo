(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[5184],{85184:(t,e,a)=>{"use strict";a.r(e),a.d(e,{RelationsWithLayoutEditorModule:()=>_t});var n=a(14392),o=a(76668),r=a(27052),i=a(48659),s=a(97212),l=a(89001),u=a(35648),c=a(66888),d=a(94761),g=a(8477),p=a(71785),m=a(97149),y=a(40921),h=a(56454),v=a(22804),_=a(17505),f=a(44055),b=a(56179),w=a(99043),k=a(57489),x=a(45529),M=a(57466),N=a(27049),C=a(85638),L=a(89952),D=a(77653),T=a(79440),U=a(77842),O=a(73379),Y=a(80827),R=a(41853),F=a(72891),P=a(66794),q=a(73301),Q=a(84967),Z=a(35218),W=a(86825);let E=class{constructor(t,e){this._store=t,this.history=e,this._metadata=null}get emptyMetadata(){return{id:`stackPanel-${(0,M.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}_getMetadata(t){return{layout:t}}_loadDemo(){this._metadata=C.F.demoLayoutWithRelations}};E.ɵfac=function(t){return new(t||E)(T.Y(L.U),T.Y(p.dB))},E.ɵcmp=U.Xp({type:E,selectors:[["layout-editor-view"]],features:[O._([h.z,{provide:g.qO,useFactory:t=>new v.I((e=>t.getData(e)?.layout)),deps:[L.U]},(0,m._)(),(0,y.rj)(),(0,x.m_)(),(0,b.vQ)(),(0,w.gJ)(),(0,k.hd)(),{provide:_.L,useClass:D.y}])],decls:9,vars:4,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/layout",3,"store","getMetadataCallback","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(Y.Tg(0,"div",0)(1,"button",1)(2,"span"),R._(3,"go back"),Y.qZ()(),Y.Tg(4,"load-save-new",2),F.N("metadataChange",(function(t){let a;return e._metadata=null!==(a=null==t?null:t.layout)&&void 0!==a?a:e.emptyMetadata})),Y.qZ(),Y.Tg(5,"button",3),F.N("click",(function(){return e._loadDemo()})),Y.Tg(6,"span"),R._(7,"demo"),Y.qZ()()(),Y._U(8,"layout-editor",4)),2&t&&(P.x(4),q.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history),P.x(4),q.Q("metadata",e._metadata))},dependencies:[Q.v,Z.Z,W.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([N.r,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",Object)],E.prototype,"_getMetadata",null),E=(0,n.gn)([(0,d.N)({path:"layout"}),(0,d.N)({path:"layout/:id"}),(0,n.w6)("design:paramtypes",[L.U,f.Y])],E);var z=a(23710),A=a(15467),I=a(70625),j=a(75990),B=a(79842),G=a(68623),J=a(15686),X=a(4477),$=a(94727),V=a(32361),H=a(12311),K=a(77470),S=a(27635),tt=a(4489),et=a(68965),at=a(31686),nt=a(60405);function ot(t,e){if(1&t&&Y._U(0,"ng-option",7),2&t){const t=e.$implicit;q.Q("value",t)("text",t)}}const rt=function(t){return["/relationsWithLayoutEditor/layout",t]},it=function(t){return["/relationsWithLayoutEditor/relations",t]};let st=class{constructor(t,e,a,n){this._store=t,this._router=e,this._relationsManager=a,this._route=n,this._available=new I.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStored(),this._route.params.subscribe((({id:t})=>{if(t){this._available.setValue(t);const e=this._store.getData(t);this._metadata=e?.layout,this._relationsManager.setRelations(e.relations??[])}else this._relationsManager.setRelations([]);this._available.valueChanges.subscribe((t=>{this._router.navigate(["/relationsWithLayoutEditor/preview",t],{skipLocationChange:!1,replaceUrl:!0})}))}))}ngOnDestroy(){}};st.ɵfac=function(t){return new(t||st)(T.Y(L.U),T.Y(z.F0),T.Y(j.N),T.Y(A.gz))},st.ɵcmp=U.Xp({type:st,selectors:[["layout-preview-view"]],features:[O._([{provide:g.qO,useFactory:t=>new v.I((e=>t.getData(e)?.layout)),deps:[L.U]},(0,B.AL)(),(0,y.mi)(),(0,x.Ur)(),(0,b.WH)(),(0,w.qN)(),(0,k.ag)(),(0,G.cg)()])],decls:10,vars:9,consts:[[1,"flex-row"],[1,"margin-horizontal-small",3,"routerLink"],[1,"flex-1",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll"],[3,"layoutComponentRenderer"],[3,"value","text"]],template:function(t,e){1&t&&(Y.Tg(0,"div",0)(1,"a",1),R._(2,"layout"),Y.qZ(),Y.Tg(3,"a",1),R._(4,"relations"),Y.qZ(),Y.Tg(5,"ng-select",2),J.Y(6,ot,1,2,"ng-option",3),Y.qZ()(),Y.Tg(7,"div",4)(8,"div",5),X.Gk(9,6),Y.qZ()()),2&t&&(P.x(1),q.Q("routerLink",$.VK(5,rt,e._available.value)),P.x(2),q.Q("routerLink",$.VK(7,it,e._available.value)),P.x(2),q.Q("formControl",e._available),P.x(1),q.Q("ngForOf",e._availableNames),P.x(3),q.Q("layoutComponentRenderer",e._metadata))},dependencies:[H.s,K.JJ,S.oH,V.y,tt.x,et.w,at.v,nt.i],encapsulation:2,changeDetection:0}),st=(0,n.gn)([(0,d.N)({path:"preview"}),(0,d.N)({path:"preview/:id"}),(0,n.w6)("design:paramtypes",[L.U,z.F0,j.N,A.gz])],st);var lt=a(91861),ut=a(80734),ct=a(20809),dt=a(31166),gt=a(71674);let pt=class{constructor(t,e,a){this._store=t,this.history=e,this._layoutManager=a,this._metadata=[]}get emptyMetadata(){return[]}_getMetadata(t){return{relations:t}}_loadDemo(){this._metadata=C.F.relationsWithLayoutDemo}setMetadata(t){this._metadata=t?.relations??this.emptyMetadata,this._layoutManager.setLayout(t?.layout)}};pt.ɵfac=function(t){return new(t||pt)(T.Y(L.U),T.Y(lt.nR),T.Y(ut.n))},pt.ɵcmp=U.Xp({type:pt,selectors:[["relations-editor-view"]],features:[O._([h.z,{provide:ct.te,useFactory:t=>new v.I((e=>t.getData(e)?.relations)),deps:[L.U]},(0,B.$R)(),(0,y.qm)(),(0,x.Od)(),(0,k.vu)(),(0,G.xb)(),(0,w.Rn)(),(0,b.El)(),{provide:_.L,useClass:dt.d}])],decls:9,vars:4,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/relations",3,"store","getMetadataCallback","history","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(Y.Tg(0,"div",0)(1,"button",1)(2,"span"),R._(3,"go back"),Y.qZ()(),Y.Tg(4,"load-save-new",2),F.N("metadataChange",(function(t){return e.setMetadata(t)})),Y.qZ(),Y.Tg(5,"button",3),F.N("click",(function(){return e._loadDemo()})),Y.Tg(6,"span"),R._(7,"demo"),Y.qZ()()(),Y._U(8,"relations-editor",4)),2&t&&(P.x(4),q.Q("store",e._store)("getMetadataCallback",e._getMetadata)("history",e.history),P.x(4),q.Q("metadata",e._metadata))},dependencies:[Q.v,gt.Y,W.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([N.r,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Array]),(0,n.w6)("design:returntype",Object)],pt.prototype,"_getMetadata",null),pt=(0,n.gn)([(0,d.N)({path:"relations"}),(0,d.N)({path:"relations/:id"}),(0,n.w6)("design:paramtypes",[L.U,f.Y,ut.n])],pt);const mt=[st,E,pt];var yt=a(18567),ht=a(53245),vt=a(38327);let _t=class{};_t.ɵfac=function(t){return new(t||_t)},_t.ɵmod=U.oA({type:_t}),_t.ɵinj=vt.cJ({providers:[(0,ht.Y)("LAYOUT_RELATIONS_DATA")],imports:[r.e,i.U,o.Bz,u.A,s.p,c.W,yt.Qw]}),_t=(0,n.gn)([(0,l.P)(mt)],_t)},68623:(t,e,a)=>{"use strict";a.d(e,{cg:()=>_,xb:()=>v,Gc:()=>h});var n=a(14389),o=a(91861),r=a(20809),i=a(46480),s=a(11776),l=a(38327);function u(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}class c{constructor(t){this._logger=t}tryToGet(t){var e,n=this;return(e=function*(){try{return n._logger?.debug("RestDynamicModuleRelationsProvider: trying to get relations types for module {@module}",{moduleName:t.package}),"rest-components"===t.package?yield a.e(7867).then(a.bind(a,27867)):null}catch(e){n._logger?.debug("RestDynamicModuleRelationsProvider: module {@module} was not found, reason: "+e,{moduleName:t.package})}return null},function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(t){u(r,n,o,i,s,"next",t)}function s(t){u(r,n,o,i,s,"throw",t)}i(void 0)}))})()}}function d(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}c.ɵfac=function(t){return new(t||c)(s.LF(i.bZ,8))},c.ɵprov=l.Yz({token:c,factory:c.ɵfac});class g{constructor(t){this._logger=t}tryToGet(t){var e,n=this;return(e=function*(){if("rest-components"!==t.package)return null;try{return n._logger?.debug("RestDynamicModuleItemsProvider: trying to get item {@item}",{name:t.name,package:t.package}),yield a(2721)(`./${t.name}/type`)}catch(e){n._logger?.debug("RestDynamicModuleItemsProvider: item {@item} was not found, reason: "+e,{name:t.name,package:t.package})}return null},function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(t){d(r,n,o,i,s,"next",t)}function s(t){d(r,n,o,i,s,"throw",t)}i(void 0)}))})()}}g.ɵfac=function(t){return new(t||g)(s.LF(i.bZ,8))},g.ɵprov=l.Yz({token:g,factory:g.ɵfac});const p={provide:o.GP,useClass:c,multi:!0},m={provide:o.n7,useClass:g,multi:!0},y={provide:r.B6,useClass:g,multi:!0};function h(){return[p,m,(0,n.XW)("rest-components")]}function v(){return[...h()]}function _(){return[y]}},2721:(t,e,a)=>{var n={"./rest/type":[20309,309]};function o(t){if(!a.o(n,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],o=e[0];return a.e(e[1]).then((()=>a(o)))}o.keys=()=>Object.keys(n),o.id=2721,t.exports=o}}]);
//# sourceMappingURL=5184.chunk.c8d3286bd678030a2b4d.js.map