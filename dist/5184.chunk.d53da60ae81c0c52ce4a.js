"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[5184],{85184:(t,e,a)=>{a.r(e),a.d(e,{RelationsWithLayoutEditorModule:()=>ct});var n=a(14392),o=a(76668),r=a(27052),i=a(68624),s=a(97212),l=a(89001),u=a(35648),d=a(66888),c=a(94761),p=a(8477),g=a(97149),m=a(22804),_=a(17505),y=a(56179),h=a(99043),v=a(57489),b=a(57466),f=a(27049),w=a(85638),x=a(89952),k=a(77653),M=a(79440),N=a(13691),C=a(73379),L=a(80827),T=a(41853),U=a(72891),q=a(66794),D=a(73301),Q=a(84967),O=a(9545),F=a(86825);let Y=class{constructor(t){this._store=t,this._metadata=null}get emptyMetadata(){return{id:`stackPanel-${(0,b.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}_getMetadata(t){return{layout:t}}_loadDemo(){this._metadata=w.F.demoLayoutWithRelations}};Y.ɵfac=function(t){return new(t||Y)(M.Y(x.U))},Y.ɵcmp=N.Xp({type:Y,selectors:[["layout-editor-view"]],features:[C._([{provide:p.qO,useFactory:t=>new m.I((e=>t.getData(e)?.layout)),deps:[x.U]},{provide:m.I,useExisting:p.qO},(0,g._)(),(0,y.vQ)(),(0,h.gJ)(),(0,v.hd)(),{provide:_.L,useClass:k.y}])],decls:9,vars:3,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/layout",3,"store","getMetadataCallback","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(L.Tg(0,"div",0)(1,"button",1)(2,"span"),T._(3,"go back"),L.qZ()(),L.Tg(4,"load-save-new",2),U.N("metadataChange",(function(t){let a;return e._metadata=null!==(a=null==t?null:t.layout)&&void 0!==a?a:e.emptyMetadata})),L.qZ(),L.Tg(5,"button",3),U.N("click",(function(){return e._loadDemo()})),L.Tg(6,"span"),T._(7,"demo"),L.qZ()()(),L._U(8,"layout-editor",4)),2&t&&(q.x(4),D.Q("store",e._store)("getMetadataCallback",e._getMetadata),q.x(4),D.Q("metadata",e._metadata))},dependencies:[Q.v,O.Z,F.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([f.r,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",Object)],Y.prototype,"_getMetadata",null),Y=(0,n.gn)([(0,c.N)({path:"layout"}),(0,c.N)({path:"layout/:id"}),(0,n.w6)("design:paramtypes",[x.U])],Y);var Z=a(37943),E=a(15467),W=a(70625),R=a(75990),A=a(28626),I=a(15686),P=a(4477),j=a(94727),z=a(32361),J=a(12311),B=a(77470),V=a(27635),X=a(4489),$=a(68965),H=a(31686),K=a(60405);function S(t,e){if(1&t&&L._U(0,"ng-option",7),2&t){const t=e.$implicit;D.Q("value",t)("text",t)}}const G=function(t){return["/relationsWithLayoutEditor/layout",t]},tt=function(t){return["/relationsWithLayoutEditor/relations",t]};let et=class{constructor(t,e,a,n){this._store=t,this._router=e,this._relationsManager=a,this._route=n,this._available=new W.NI(""),this._metadata=null,this._availableNames=[]}ngOnInit(){this._availableNames=this._store.getStored(),this._route.params.subscribe((({id:t})=>{if(t){this._available.setValue(t);const e=this._store.getData(t);this._metadata=e?.layout,this._relationsManager.setRelations(e.relations??[])}else this._relationsManager.setRelations([]);this._available.valueChanges.subscribe((t=>{this._router.navigate(["/relationsWithLayoutEditor/preview",t],{skipLocationChange:!1,replaceUrl:!0})}))}))}ngOnDestroy(){}};et.ɵfac=function(t){return new(t||et)(M.Y(x.U),M.Y(Z.F0),M.Y(R.N),M.Y(E.gz))},et.ɵcmp=N.Xp({type:et,selectors:[["layout-preview-view"]],features:[C._([{provide:p.qO,useFactory:t=>new m.I((e=>t.getData(e)?.layout)),deps:[x.U]},(0,A.AL)(),(0,y.WH)(),(0,h.qN)(),(0,v.ag)()])],decls:10,vars:9,consts:[[1,"flex-row"],[1,"margin-horizontal-small",3,"routerLink"],[1,"flex-1",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[1,"flex-row","margin-top-big","flex-1"],[1,"flex-1","overflow-vertical-scroll"],[3,"layoutComponentRenderer"],[3,"value","text"]],template:function(t,e){1&t&&(L.Tg(0,"div",0)(1,"a",1),T._(2,"layout"),L.qZ(),L.Tg(3,"a",1),T._(4,"relations"),L.qZ(),L.Tg(5,"ng-select",2),I.Y(6,S,1,2,"ng-option",3),L.qZ()(),L.Tg(7,"div",4)(8,"div",5),P.Gk(9,6),L.qZ()()),2&t&&(q.x(1),D.Q("routerLink",j.VK(5,G,e._available.value)),q.x(2),D.Q("routerLink",j.VK(7,tt,e._available.value)),q.x(2),D.Q("formControl",e._available),q.x(1),D.Q("ngForOf",e._availableNames),q.x(3),D.Q("layoutComponentRenderer",e._metadata))},dependencies:[J.s,B.JJ,V.oH,z.y,X.x,$.w,H.v,K.i],encapsulation:2,changeDetection:0}),et=(0,n.gn)([(0,c.N)({path:"preview"}),(0,c.N)({path:"preview/:id"}),(0,n.w6)("design:paramtypes",[x.U,Z.F0,R.N,E.gz])],et);var at=a(80734),nt=a(20809),ot=a(31166),rt=a(36159);let it=class{constructor(t,e){this._store=t,this._layoutManager=e,this._metadata=[]}get emptyMetadata(){return[]}_getMetadata(t){return{relations:t}}_loadDemo(){this._metadata=w.F.relationsWithLayoutDemo}setMetadata(t){this._metadata=t?.relations??this.emptyMetadata,this._layoutManager.setLayout(t?.layout)}};it.ɵfac=function(t){return new(t||it)(M.Y(x.U),M.Y(at.n))},it.ɵcmp=N.Xp({type:it,selectors:[["relations-editor-view"]],features:[C._([{provide:nt.te,useFactory:t=>new m.I((e=>t.getData(e)?.relations)),deps:[x.U]},{provide:m.I,useExisting:nt.te},(0,A.$R)(),(0,v.vu)(),(0,h.Rn)(),(0,y.El)(),{provide:_.L,useClass:ot.d}])],decls:9,vars:3,consts:[[1,"flex-row"],["type","button","goBack","",1,"btn","btn-primary","margin-right-extra-small"],["routePath","/relationsWithLayoutEditor/relations",3,"store","getMetadataCallback","metadataChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(L.Tg(0,"div",0)(1,"button",1)(2,"span"),T._(3,"go back"),L.qZ()(),L.Tg(4,"load-save-new",2),U.N("metadataChange",(function(t){return e.setMetadata(t)})),L.qZ(),L.Tg(5,"button",3),U.N("click",(function(){return e._loadDemo()})),L.Tg(6,"span"),T._(7,"demo"),L.qZ()()(),L._U(8,"relations-editor",4)),2&t&&(q.x(4),D.Q("store",e._store)("getMetadataCallback",e._getMetadata),q.x(4),D.Q("metadata",e._metadata))},dependencies:[Q.v,rt.Y,F.Q],encapsulation:2,changeDetection:0}),(0,n.gn)([f.r,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Array]),(0,n.w6)("design:returntype",Object)],it.prototype,"_getMetadata",null),it=(0,n.gn)([(0,c.N)({path:"relations"}),(0,c.N)({path:"relations/:id"}),(0,n.w6)("design:paramtypes",[x.U,at.n])],it);const st=[et,Y,it];var lt=a(18567),ut=a(53245),dt=a(38327);let ct=class{};ct.ɵfac=function(t){return new(t||ct)},ct.ɵmod=N.oA({type:ct}),ct.ɵinj=dt.cJ({providers:[(0,ut.Y)("LAYOUT_RELATIONS_DATA")],imports:[r.e,i.U,o.Bz,u.A,s.p,d.W,lt.Qw]}),ct=(0,n.gn)([(0,l.P)(st)],ct)}}]);
//# sourceMappingURL=5184.chunk.d53da60ae81c0c52ce4a.js.map