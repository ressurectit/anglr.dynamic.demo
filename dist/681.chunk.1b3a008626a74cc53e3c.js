"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[681],{5690:(t,e,n)=>{n.r(e),n.d(e,{HtmlBlockLayoutEditorMetadata:()=>l});var o=n(32441),i=n(76001),r=n(28438);const s=new(n(53136).y)("html","html",(t=>t.getModel()?.getValue()??""));var a=n(57466);class c{constructor(t){this.content=null,a.Rl.bind(this)(t)}}class l{constructor(){this.metaInfo={name:"Html block",description:"Html block - displays html or string",group:"Data",optionsMetadata:{propertiesMetadata:[{modelType:o.k,propertiesControls:[i.e]},{modelType:c,propertiesControls:[(0,r.R)("content",s)]}]},defaultOptions:{content:"<div>This is your <strong>HTML</strong> block</div>"}},Object.freeze(this)}}},28438:(t,e,n)=>{n.d(e,{R:()=>w});var o=n(70625),i=n(71309),r=n(43939),s=n(64297),a=n(87316),c=n(79440),l=n(68961),d=n(13691),u=n(47098),p=n(82568),h=n(80827),g=n(72891),f=n(41853),m=n(66794),v=n(6427),y=n(43801),M=n(85902),_=n(47826);function C(t,e,n,o,i,r,s){try{var a=t[r](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}const E="[_nghost-%COMP%]\n{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}";class O extends a.k{constructor(t,e,n){super(t,e),this.dialog=n}showCodeEditor(){var t,e=this;return(t=function*(){if((0,r.fp)(e.property)||!e.languageModel)return;const t=yield(0,s.n)(e.dialog.open(i.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:e.form?.get(e.property)?.value??"",languageModel:e.languageModel}}).afterClosed());if((0,r.EN)(t)){const n=e.form?.get(e.property);n instanceof o.NI&&n.setValue(t)}},function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function s(t){C(r,o,i,s,a,"next",t)}function a(t){C(r,o,i,s,a,"throw",t)}s(void 0)}))})()}}function w(t,e){class n extends O{constructor(){super(...arguments),this.property=t,this.languageModel=e}}return n.ɵfac=function(){let t;return function(e){return(t||(t=y.n5(n)))(e||n)}}(),n.ɵcmp=d.Xp({type:n,selectors:[["code-properties-control"]],inputs:{property:"property",languageModel:"languageModel"},standalone:!0,features:[u.q,p.j],decls:3,vars:1,consts:[["type","button","type","button",1,"btn","btn-primary","margin-vertical-small",3,"click"]],template:function(t,e){1&t&&(h.Tg(0,"button",0),g.N("click",(function(){return e.showCodeEditor()})),h.Tg(1,"span"),f._(2),h.qZ()()),2&t&&(m.x(2),v.hi("Edit ",e.property,""))},styles:[E],changeDetection:0}),n}O.ɵfac=function(t){return new(t||O)(c.Y(l.s),c.Y(M.T),c.Y(_.J))},O.ɵcmp=d.Xp({type:O,selectors:[["base-code-properties-control"]],inputs:{property:"property",languageModel:"languageModel"},standalone:!0,features:[u.q,p.j],decls:3,vars:1,consts:[["type","button","type","button",1,"btn","btn-primary","margin-vertical-small",3,"click"]],template:function(t,e){1&t&&(h.Tg(0,"button",0),g.N("click",(function(){return e.showCodeEditor()})),h.Tg(1,"span"),f._(2),h.qZ()()),2&t&&(m.x(2),v.hi("Edit ",e.property,""))},styles:[E],changeDetection:0})},94596:(t,e,n)=>{n.d(e,{$:()=>o});const o=Symbol("LayoutPropertyMetadata")},20350:(t,e,n)=>{n.d(e,{q:()=>g});var o=n(39273),i=n(43801),r=n(13691),s=n(47098),a=n(80827),c=n(65589),l=n(73301),d=n(49280),u=n(77470),p=n(27635),h=n(61939);class g extends o.L{}g.ɵfac=function(){let t;return function(e){return(t||(t=i.n5(g)))(e||g)}}(),g.ɵcmp=r.Xp({type:g,selectors:[["input-string"]],features:[s.q],decls:2,vars:3,consts:[["type","text",1,"properties-form-control",3,"formControl"]],template:function(t,e){1&t&&(a._U(0,"input",0),c.AL(1,"asRequired")),2&t&&l.Q("formControl",c.lc(1,1,e._control))},dependencies:[d.Fj,u.JJ,p.oH,h.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0})},39273:(t,e,n)=>{n.d(e,{L:()=>c});var o=n(79440),i=n(68961),r=n(13691);function s(t,e,n,o,i,r,s){try{var a=t[r](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function a(t){s(r,o,i,a,c,"next",t)}function c(t){s(r,o,i,a,c,"throw",t)}a(void 0)}))}}class c{constructor(t){this._changeDetector=t,this._initialized=!1,this.values=[]}get control(){return this._control}set control(t){this._control=t,this._controlSet()}ngOnInit(){var t=this;return a((function*(){t._initialized||(t._initialized=!0,yield t._initialize())}))()}initialize(){var t=this;return a((function*(){yield t.ngOnInit()}))()}invalidateVisuals(){this._changeDetector.detectChanges()}_initialize(){}_controlSet(){}}c.ɵfac=function(t){return new(t||c)(o.Y(i.s))},c.ɵdir=r.lG({type:c,inputs:{control:"control",values:"values"}})},21147:(t,e,n)=>{n.d(e,{f:()=>M});var o=n(39273),i=n(80827),r=n(73301),s=n(43801),a=n(13691),c=n(47098),l=n(65589),d=n(15686),u=n(66794),p=n(12311),h=n(24881),g=n(17790),f=n(77470),m=n(27635),v=n(61939);function y(t,e){if(1&t&&i._U(0,"option",2),2&t){const t=e.$implicit;r.Q("value",t)("text",t)}}class M extends o.L{}M.ɵfac=function(){let t;return function(e){return(t||(t=s.n5(M)))(e||M)}}(),M.ɵcmp=a.Xp({type:M,selectors:[["select-value"]],features:[c.q],decls:3,vars:4,consts:[[1,"properties-form-control",3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"]],template:function(t,e){1&t&&(i.Tg(0,"select",0),l.AL(1,"asRequired"),d.Y(2,y,1,2,"option",1),i.qZ()),2&t&&(r.Q("formControl",l.lc(1,2,e._control)),u.x(2),r.Q("ngForOf",e.values))},dependencies:[p.s,h.YN,g.Kr,h.EJ,f.JJ,m.oH,v.i],styles:["[_nghost-%COMP%]{display: block;}"],changeDetection:0})},85902:(t,e,n)=>{n.d(e,{T:()=>c});var o=n(8477),i=n(46480),r=n(11776),s=n(38327);function a(t,e,n,o,i,r,s){try{var a=t[r](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(o,i)}class c{constructor(t,e){this._loader=t,this._logger=e,this._cache={}}extractMetadata(t){var e,n=this;return(e=function*(){const e=`${t.package}-${t.name}`;if(n._cache[e])return n._cache[e];const o=yield n._loader.loadItem(t);if(!o)return null;const i=o.data;if(!i.layoutEditorMetadata)return n._logger?.warn("LayoutEditorMetadataExtractor: Missing metadata! ",{package:t.package,name:t.name}),null;n._logger?.debug("LayoutEditorMetadataExtractor: Reading metadata! ",{package:t.package,name:t.name});const r=yield i.layoutEditorMetadata;return Object.freeze(r),n._cache[e]=r,r},function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function s(t){a(r,o,i,s,c,"next",t)}function c(t){a(r,o,i,s,c,"throw",t)}s(void 0)}))})()}}c.ɵfac=function(t){return new(t||c)(r.LF(o.Vl),r.LF(i.bZ,8))},c.ɵprov=s.Yz({token:c,factory:c.ɵfac})},8477:(t,e,n)=>{n.d(e,{Aw:()=>a,Vl:()=>c,X5:()=>r,gM:()=>s,qO:()=>l,xM:()=>i});var o=n(40296);const i=new o.O("LAYOUT_COMPONENT_TRANSFORM"),r=new o.O("LAYOUT_COMPONENT_CHILD_EXTENSIONS"),s=new o.O("LAYOUT_COMPONENTS_MODULE_DATA_EXTRACTORS"),a=new o.O("LAYOUT_COMPONENTS_MODULE_PROVIDERS"),c=new o.O("LAYOUT_COMPONENTS_LOADER"),l=new o.O("LAYOUT_METADATA_STORAGE")},71309:(t,e,n)=>{n.d(e,{I:()=>w});var o=n(9249),i=n(79440),r=n(13691),s=n(84773),a=n(80827),c=n(72891),l=n(41853),d=n(43870),u=n(11282),p=n(73301),h=n(66794),g=n(31750),f=n(80943),m=n(74445),v=n(49891),y=n(43939),M=n(58654);self.MonacoEnvironment={getWorkerUrl:function(t,e){return"json"===e?"dist/json.worker.js":"css"===e||"scss"===e||"less"===e?"dist/css.worker.js":"html"===e||"handlebars"==e?"dist/html.worker.js":"typescript"===e||"javascript"===e?"dist/ts.worker.js":"dist/editor.worker.js"}};const _={target:M.Mj.typescript.ScriptTarget.ES2020,module:M.Mj.typescript.ModuleKind.CommonJS,moduleResolution:M.Mj.typescript.ModuleResolutionKind.NodeJs,allowNonTsExtensions:!0,removeComments:!0,noImplicitAny:!0,noImplicitReturns:!0,noImplicitOverride:!0,noImplicitThis:!0,noUnusedLocals:!0,noUnusedParameters:!0,strict:!0,strictNullChecks:!0,esModuleInterop:!0,newLine:M.Mj.typescript.NewLineKind.LineFeed,typeRoots:["node_modules/@types"]};M.Mj.typescript.typescriptDefaults.setCompilerOptions(_);var C=n(4905),E=n(36973);class O{constructor(t){this.element=t,this.codeEditor=null,this.openedFile=null,this.changeEvent=null,this.save=new m.v,this.contentChange=new m.v}ngOnChanges(t){(0,v.$)("languageModel")in t&&this.languageModel&&(0,v.$)("content")in t&&(0,y.EN)(this.content)&&this.updateContent()}ngAfterViewInit(){this.createEditor()}saveContent(){this.openedFile&&this.codeEditor&&this.languageModel&&this.save.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}ngOnDestroy(){this.changeEvent?.dispose(),this.changeEvent=null,this.openedFile?.dispose(),this.openedFile=null,this.codeEditor?.dispose(),this.codeEditor=null}createEditor(){this.codeEditor=M.j6.create(this.element.nativeElement,{theme:"vs-dark",model:this.openedFile,lightbulb:{enabled:!0},minimap:{enabled:!0}}),this.codeEditor.addCommand(M.DC.CtrlCmd|M.VD.KeyS,(()=>{this.saveContent()})),this.changeEvent=this.codeEditor.onDidChangeModelContent((()=>{this.openedFile&&this.languageModel&&this.codeEditor&&this.contentChange.emit({content:this.openedFile.getValue(),code:this.languageModel.compiledCode(this.codeEditor)})}))}updateContent(){this.openedFile?.dispose(),this.openedFile=null,this.languageModel&&!(0,y.fp)(this.content)&&(this.openedFile=M.j6.createModel(this.content,this.languageModel.language,M.Sf.file(`index.${this.languageModel.extension}`)),this.codeEditor?.setModel(this.openedFile))}}O.monacoInit=!0,O.ɵfac=function(t){return new(t||O)(i.Y(C.SB))},O.ɵcmp=r.Xp({type:O,selectors:[["code-editor"]],inputs:{content:"content",languageModel:"languageModel"},outputs:{save:"save",contentChange:"contentChange"},features:[E.T],decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]\r\n{\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n}"],changeDetection:0});class w{constructor(t,e){this.data=t,this.dialog=e,this.content=null,this.content=t.content}}w.ɵfac=function(t){return new(t||w)(i.Y(o.m),i.Y(g.s))},w.ɵcmp=r.Xp({type:w,selectors:[["code-editor-dialog"]],decls:9,vars:3,consts:[[2,"height","calc(75vh - 32px)","width","calc(75vw - 20px)",3,"content","languageModel","save"],["editor",""],[1,"flex-row","flex-end"],["type","button","type","button",1,"btn","btn-info",3,"mat-dialog-close"],["type","button","type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){if(1&t){const t=s.E();a.Tg(0,"code-editor",0,1),c.N("save",(function(t){return e.content=t.content})),a.qZ(),a.Tg(2,"div",2)(3,"button",3)(4,"span"),l._(5,"cancel"),a.qZ()(),a.Tg(6,"button",4),c.N("click",(function(){return d.CH(t),u.M(1).saveContent(),d.Kt(e.dialog.close(e.content))})),a.Tg(7,"span"),l._(8,"ok"),a.qZ()()()}2&t&&(p.Q("content",e.data.content)("languageModel",e.data.languageModel),h.x(3),p.Q("mat-dialog-close",null))},dependencies:[f.ZT,O],encapsulation:2,changeDetection:0})},53136:(t,e,n)=>{n.d(e,{y:()=>o});class o{constructor(t,e,n){this.language=t,this.extension=e,this.compiledCode=n}}},92640:(t,e,n)=>{n.d(e,{x:()=>i});var o=n(70625);const i={asyncValidators:[],validators:[],disabled:!1,type:o.NI,childType:o.NI,args:{}}},9204:(t,e,n)=>{n.d(e,{j:()=>c});var o=n(70625),i=n(46480),r=n(43939),s=n(79440),a=n(13691);class c{constructor(t){this._logger=t}transform(t,e){return(0,r.fp)(t)?null:t instanceof o.NI?t:(this._logger?.warn("Failed to cast AbstractControl to FormControl"),null)}}c.ɵfac=function(t){return new(t||c)(s.Y(i.bZ,24))},c.ɵpipe=a.Yj({name:"asFormControl",type:c,pure:!0})},61939:(t,e,n)=>{n.d(e,{i:()=>i});var o=n(13691);class i{transform(t,e,n){return t??e}}i.ɵfac=function(t){return new(t||i)},i.ɵpipe=o.Yj({name:"asRequired",type:i,pure:!0})}}]);
//# sourceMappingURL=681.chunk.1b3a008626a74cc53e3c.js.map