"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[1601],{77653:(e,t,n)=>{n.d(t,{y:()=>r});var i=n(17505),a=n(38327);class r extends i.L{constructor(){super("LAYOUT_PACKAGES_STORE")}}r.ɵfac=function(e){return new(e||r)},r.ɵprov=a.Yz({token:r,factory:r.ɵfac})},41348:(e,t,n)=>{n.d(t,{Z:()=>dt});var i=n(27052),a=n(35669),r=n(60405),o=n(38476),s=n(44155),d=n(49891),c=n(23199),l=n(2032),p=n(46480),h=n(45069),u=n(49414),g=n(57466),m=n(77842);class f{transform(e){return{metadata:{id:"",displayName:"",package:e.itemSource.package,name:e.itemSource.name,options:(0,g.l7)(!0,{},e.metadata.metaInfo?.defaultOptions)},parentId:null,index:null}}}f.ɵfac=function(e){return new(e||f)},f.ɵpipe=m.Yj({name:"toLayoutDragData",type:f,pure:!0,standalone:!0});var v=n(89651),b=n(10219),y=n(76405),w=n(41853),D=n(6845),C=n(66794),P=n(6427),x=n(84773),I=n(72891),E=n(43870),_=n(65589),S=n(15686),T=n(73301),O=n(4477),M=n(79440),k=n(68961),A=n(36973),Y=n(82568),L=n(17505),N=n(85902),z=n(12311),Z=n(21651),R=n(32434),q=n(74445),F=n(4905),Q=n(88364),j=n(48759),B=n(98906),$=n(52053);let X;class U{constructor(e,t,n,i,a){this.dnd=e,this.paletteItemElement=t,this.draggingSvc=n,this.bus=i,this.zone=a,this.initSubscriptions=new c.w0,this.drag=this.dnd.dragSource("METADATA",{beginDrag:()=>{this.draggingSvc.setDragging(!0);const e=(0,g.l7)(!0,{},this.dragData);if(e.metadata){const t=`${e.metadata.name}-${(0,g.Ox)(16)}`;e.metadata.id=t,e.metadata.displayName=t}return{dragData:e}},endDrag:e=>{if(e.didDrop()){const t=e.getItem(),n=e.getDropResult();if(!t)return;t.dragData.index=n.index,this.bus.setDropData({data:t.dragData,id:n.id}),this.itemDrop.emit()}this.bus.setDropPlaceholderPreview(null),this.draggingSvc.setDragging(!1)}},this.initSubscriptions),this.itemDrop=new q.v,this.connectDragToItem()}ngOnInit(){if(!this.dragData)throw new Error("DndCoreDesignerDirective: missing drag data!")}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.itemConnection?.unsubscribe(),this.itemConnection=null,this.dragPreviewConnection?.unsubscribe(),this.dragPreviewConnection=null}connectDragToItem(){this.zone.runOutsideAngular((()=>{this.itemConnection?.unsubscribe(),this.itemConnection=this.drag.connectDragSource(this.paletteItemElement.nativeElement,{dropEffect:"copy"}),this.dragPreviewConnection=this.drag.connectDragPreview((X||(X=new Image,X.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),X))}))}}function G(e,t,n,i,a,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,a)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){G(r,i,a,o,s,"next",e)}function s(e){G(r,i,a,o,s,"throw",e)}o(void 0)}))}}function K(e,t){if(1&e&&(y.Tg(0,"div",8),w._(1),y.qZ()),2&e){const e=D.o().$implicit;C.x(1),P.Oq(null==e.metadata.metaInfo?null:e.metadata.metaInfo.description)}}function V(e,t){if(1&e){const e=x.E();y.Tg(0,"div",4)(1,"div",5),I.N("itemDrop",(function(){E.CH(e);const t=D.o(2);return E.Kt(t.refreshPipe=!t.refreshPipe)})),_.AL(2,"toLayoutDragData"),y.Tg(3,"div",6),w._(4),y.qZ(),S.Y(5,K,2,1,"div",7),y.qZ()()}if(2&e){const e=t.$implicit;let n;C.x(1),T.Q("dndCorePaletteItem",_.lc(2,3,e)),C.x(3),P.Oq(null!==(n=null==e.metadata.metaInfo?null:e.metadata.metaInfo.name)&&void 0!==n?n:e.itemSource.name),C.x(1),T.Q("ngIf",null==e.metadata.metaInfo?null:e.metadata.metaInfo.description)}}function J(e,t){if(1&e&&(O.yn(0),y.Tg(1,"div",2),w._(2),y.qZ(),S.Y(3,V,6,5,"div",3),O.BQ()),2&e){const e=t.$implicit;C.x(2),P.hi("",e.key," "),C.x(1),T.Q("ngForOf",e.value)}}U.ɵfac=function(e){return new(e||U)(M.Y(j.f),M.Y(F.SB),M.Y(B.z),M.Y($.E),M.Y(Q.R))},U.ɵdir=m.lG({type:U,selectors:[["","dndCorePaletteItem",""]],inputs:{dragData:["dndCorePaletteItem","dragData"]},outputs:{itemDrop:"itemDrop"}});class W{get usedPackages(){return this.packages??this.packageManager.usedPackages}constructor(e,t,n,i,a,r){this.moduleTypesLoader=e,this.changeDetector=t,this.packageManager=n,this.metadataExtractor=i,this._refreshObservables=a,this.logger=r,this.initSubscriptions=new c.w0,this.allItems=[],this.whiteListedPackages=[],this.groupedItems={},this.refreshPipe=!1}ngOnInit(){var e=this;return H((function*(){if(e.initSubscriptions.add(e.packageManager.usedPackagesChange.subscribe((()=>e.initItems()))),e._refreshObservables&&Array.isArray(e._refreshObservables))for(const t of e._refreshObservables)e.initSubscriptions.add(t.subscribe((()=>e.initItems())));yield e.initItems()}))()}ngOnChanges(e){var t=this;return H((function*(){if((0,d.$)("whiteList")in e&&(t.whiteListedPackages=[],Array.isArray(t.whiteList)))for(const e of t.whiteList)t.whiteListedPackages.find((t=>t==e.package))||t.whiteListedPackages.push(e.package);((0,d.$)("whiteList")in e||(0,d.$)("blackList")in e||(0,d.$)("packages")in e)&&(yield t.initItems())}))()}ngOnDestroy(){this.initSubscriptions.unsubscribe()}initItems(){var e=this;return H((function*(){var t;e.groupedItems={},e.allItems=[];for(const t of e.usedPackages){const n=(yield e.moduleTypesLoader.loadItem({package:t,name:"types"}))?.data??[];for(const i of n){if(e.whiteListedPackages.find((e=>t==e))){if(!e.whiteList?.find((e=>e.package==t&&e.name==i)))continue}else if(e.blackList?.find((e=>e.package==t&&e.name==i)))continue;const n={package:t,name:i},a=yield e.metadataExtractor.extractMetadata(n);a?e.allItems.push({itemSource:n,metadata:a}):e.logger?.warn("ComponentsPaletteSAComponent: Failed to obtain layout editor metadata {@source}",n)}}e.groupedItems[""]=[];for(const n of e.allItems){const i=n.metadata.metaInfo?.group??"";(t=e.groupedItems)[i]??(t[i]=[]),e.groupedItems[i].push(n)}e.changeDetector.detectChanges()}))()}}W.ɵfac=function(e){return new(e||W)(M.Y(v.QT),M.Y(k.s),M.Y(L.L),M.Y(N.T),M.Y(v.dK,8),M.Y(p.bZ,8))},W.ɵcmp=m.Xp({type:W,selectors:[["components-palette"]],inputs:{packages:"packages",whiteList:"whiteList",blackList:"blackList"},standalone:!0,features:[A.T,Y.j],decls:3,vars:3,consts:[[1,"dynamic-flex-column"],[4,"ngFor","ngForOf"],[1,"dynamic-text-spread","dynamic-text-small-caps","dynamic-margin-left-extra-small","dynamic-margin-horizontal-small","dynamic-bold"],["class","palette-droplist",4,"ngFor","ngForOf"],[1,"palette-droplist"],[1,"editor-component","mat-elevation-z2",3,"dndCorePaletteItem","itemDrop"],[1,"editor-component-name"],["class","editor-component-description",4,"ngIf"],[1,"editor-component-description"]],template:function(e,t){1&e&&(y.Tg(0,"div",0),S.Y(1,J,4,2,"ng-container",1),_.AL(2,"keyvalue"),y.qZ()),2&e&&(C.x(1),T.Q("ngForOf",_.lc(2,1,t.groupedItems)))},dependencies:[i.e,z.sg,Z.O,R.N,b.N,U,f],encapsulation:2,changeDetection:0}),(0,l.gn)([(0,h.C)(10),(0,u.S)(),(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[]),(0,l.w6)("design:returntype",Promise)],W.prototype,"initItems",null);var ee=n(64205),te=n(17868),ne=n(98246),ie=n(27173),ae=n(19063),re=n(11282),oe=n(94727),se=n(86357),de=n(85320),ce=n(83434),le=n(26938),pe=n(43649),he=n(19440),ue=n(44214),ge=n(48936),me=n(43939),fe=n(27049),ve=n(16114),be=n(95176);class ye{get metadata(){if(!this.dragData.metadata)throw new Error("DndCoreTreeItemDirective: invalid drag data without metadata!");return this.dragData.metadata}get canDrop(){return this.manager.getComponent(this.metadata.id)?.canDrop??!1}constructor(e,t,n,i,a,r,o,s,d){this.dnd=e,this.designerElement=t,this.draggingSvc=n,this.manager=i,this.bus=a,this.zone=r,this.injector=o,this._manager=s,this.document=d,this.initSubscriptions=new c.w0,this.placeholderDrop=this.dnd.dropTarget(["TREE_COMPONENT"],{canDrop:()=>!0,drop:e=>{const t=e.getItem();let n=this.bus.dropPlaceholderPreviewIndex;return t&&(0,me.EN)(t.dragData.index)&&(0,me.EN)(n)&&n>t.dragData.index&&n--,{index:n,id:this.metadata?.id}}},this.initSubscriptions),this.containerDrop=this.dnd.dropTarget(["TREE_COMPONENT"],{canDrop:e=>this.canDropAncestors(this.metadata.id,e.getItem()?.dragData.metadata?.id)[0]&&e.isOver({shallow:!0}),drop:e=>{const[t,n]=this.getFixedDropCoordinates(e,!1);return{index:t,id:n}},hover:e=>{if(e.isOver({shallow:!0})){const[t,n]=this.getDropCoordinates(e,!1);if((0,me.fp)(t)||(0,me.fp)(n))return;this.bus.setDropPlaceholderPreview({index:t,parentId:n,placeholder:{height:0,width:0}})}}},this.initSubscriptions),this.drag=this.dnd.dragSource("TREE_COMPONENT",{beginDrag:()=>(this.draggingSvc.setDragging(!0),this.designerElement.nativeElement.classList.add("is-dragged"),{dragData:this.dragData}),canDrag:()=>!this.dragDisabled,endDrag:e=>{if(this.designerElement.nativeElement.classList.remove("is-dragged"),e.didDrop()){const t=e.getItem(),n=e.getDropResult();if(!t)return;t.dragData.index=n.index,this.bus.setDropData({data:t.dragData,id:n.id})}this.bus.setDropPlaceholderPreview(null),this.draggingSvc.setDragging(!1)}},this.initSubscriptions),this.dropzone=this.dnd.dropTarget(["TREE_COMPONENT"],{canDrop:e=>(this.canDrop&&!this.hasAncestor(this.metadata.id,e.getItem()?.dragData.metadata?.id)||this.canDropAncestors(this.metadata.id,e.getItem()?.dragData.metadata?.id)[0])&&e.isOver({shallow:!0}),drop:e=>{const[t,n]=this.getFixedDropCoordinates(e,this.canDrop);return{index:t,id:n}},hover:e=>{if(e.isOver({shallow:!0})&&(this._manager.dragOverComponent(this.metadata.id),e.canDrop())){const[t,n]=this.getDropCoordinates(e,this.canDrop);if((0,me.fp)(t)||(0,me.fp)(n))return;this.bus.setDropPlaceholderPreview({index:t,parentId:n,placeholder:{height:0,width:0}})}}},this.initSubscriptions),this.dragDisabled=!1,this.dropMetadata=new q.v,this.connectDropToContainer()}ngOnInit(){if(!this.dropzoneElement)throw new Error("DndCoreDesignerDirective: missing dropzone element!");if(!this.containerElement)throw new Error("DndCoreDesignerDirective: missing container element!");if(!this.dragData)throw new Error("DndCoreDesignerDirective: missing drag data!");this.initSubscriptions.add(this.bus.dropDataChange.pipe((0,ve.h)((e=>e.id===this.metadata.id))).subscribe((e=>this.dropMetadata.emit(e.data)))),this.initSubscriptions.add(this.bus.oldDropPlaceholderPreviewChange.pipe((0,ve.h)((e=>e.parentId===this.metadata.id))).subscribe((()=>{this.placeholderPreviewElement?.remove(),this.placeholderPreviewElement=null}))),this.initSubscriptions.add(this.bus.newDropPlaceholderPreviewChange.pipe((0,ve.h)((e=>e.parentId===this.metadata.id))).subscribe(this.showPlaceholderPreview))}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.placeholderConnection?.unsubscribe(),this.placeholderConnection=null,this.containerConnection?.unsubscribe(),this.containerConnection=null}getDropCoordinates(e,t){if(t)return this.getDropCoordinatesForChildren(e);const[n,i,a]=this.canDropAncestors(this.metadata.id,e.getItem()?.dragData.metadata?.id);if(!n||(0,me.fp)(i))return[null,null];const r=this.manager.getComponent(i),o=this.manager.getComponent(a)?.index??0,s=e.getItem();return s&&(0,me.EN)(s.dragData.index)&&s.dragData.metadata?.id===this.metadata.id?[s.dragData.index,s.dragData.parentId??""]:r?[o+this.getIndexIncrement(e),i]:[null,null]}getDropCoordinatesForChildren(e){const t=e=>{const t=e.children[0]?.getBoundingClientRect(),n=t?.y;return n+t?.height/2};if(!this.containerElement)return[null,null];let n=0;const i=e.getClientOffset();if(!i)return[null,null];const a=i.y;for(let e=0;e<this.containerElement.children.length;e++){const i=this.containerElement.children[e];if(!i.classList.contains("drag-placeholder")){if(a<=t(i))return[n,this.metadata.id];n++}}return[n,this.metadata.id]}getFixedDropCoordinates(e,t){const[n,i]=this.getDropCoordinates(e,t);let a=n;const r=e.getItem();return r&&(0,me.EN)(a)&&(0,me.EN)(r.dragData.index)&&i===r.dragData.parentId&&a>r.dragData.index&&a--,[a,i]}getIndexIncrement(e){const t=this.dropzoneElement.getBoundingClientRect(),n=e.getClientOffset();return n?n.y-t.y<=t.height/2?0:1:0}showPlaceholderPreview(e){this.containerElement&&(this.placeholderPreviewElement??(this.placeholderPreviewElement=this.document.createElement("div")),this.placeholderPreviewElement.classList.add("drag-placeholder"),this.placeholderPreviewElement.remove(),this.connectDropToPlaceholder(),this.containerElement.insertBefore(this.placeholderPreviewElement,this.containerElement.children[e.index]))}connectDropToPlaceholder(){this.zone.runOutsideAngular((()=>{this.placeholderConnection?.unsubscribe(),this.placeholderPreviewElement&&(this.placeholderConnection=this.placeholderDrop.connectDropTarget(this.placeholderPreviewElement))}))}connectDropToContainer(){this.zone.runOutsideAngular((()=>{this.containerConnection?.unsubscribe(),this.containerConnection=this.containerDrop.connectDropTarget(this.designerElement.nativeElement)}))}canDropAncestors(e,t){(0,me.fp)(e)&&(e=this.metadata.id);const n=this.manager.getComponentDef(e);return!n?.parent||(0,me.EN)(t)&&this.hasAncestor(n.component.id,t)?[!1,null,e]:n.parent.component.canDrop?[!0,n.parent.component.id,e]:this.canDropAncestors(n.parent.component.id,t)}hasAncestor(e,t){if(!t)return!1;const n=this.manager.getComponentDef(e);return n?.component?.id===t||!!n?.parent&&this.hasAncestor(n.parent.component?.id,t)}}function we(e,t,n,i,a,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,a)}function De(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return De=function(e){this.s=e,this.n=e.next},De.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new De(e)}function Ce(e,t){if(1&e&&y._U(0,"span",10),2&e){const e=D.o();T.Q("ngClass",e.open?"fa-chevron-down":"fa-chevron-right")}}function Pe(e,t){if(1&e&&(y.Tg(0,"div",11),y._U(1,"components-tree-item",12),y.qZ()),2&e){const e=t.$implicit,n=t.index,i=D.o();C.x(1),T.Q("data",e)("parentId",null==i.data?null:i.data.id)("index",n)}}ye.ɵfac=function(e){return new(e||ye)(M.Y(j.f),M.Y(F.SB),M.Y(B.z),M.Y(ce.t),M.Y($.E),M.Y(Q.R),M.Y(be.z),M.Y(ce.t),M.Y(ge.K))},ye.ɵdir=m.lG({type:ye,selectors:[["","dndCoreTreeItem",""]],inputs:{dropzoneElement:"dropzoneElement",containerElement:"containerElement",dragData:["dndCoreTreeItem","dragData"],dragDisabled:"dragDisabled"},outputs:{dropMetadata:"dropMetadata"},exportAs:["dndCoreTreeItem"]}),(0,l.gn)([fe.r,(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[Object]),(0,l.w6)("design:returntype",void 0)],ye.prototype,"showPlaceholderPreview",null);const xe=function(e,t,n){return{metadata:e,parentId:t,index:n}};class Ie{get hasChildren(){return!!this.children&&this.children.length>0}get dragDisabled(){return!this.parentId||!this.data||!0===this._manager.getComponent(this.data.id)?.dragDisabled}constructor(e,t,n,i){this._manager=e,this._changeDetector=t,this._draggingSvc=n,this.iteratorSvc=i,this._initSubscriptions=new c.w0,this.children=[],this.index=0,this.open=!0}ngOnInit(){this._initSubscriptions.add(this._manager.layoutChange.subscribe((()=>{this.initChildren()}))),this._initSubscriptions.add(this._manager.selectedChange.subscribe((()=>{this._changeDetector.detectChanges()}))),this._initSubscriptions.add(this._manager.highlightedChange.subscribe((()=>this._changeDetector.detectChanges()))),this._initSubscriptions.add(this._manager.displayNameChange.subscribe((()=>this._changeDetector.detectChanges()))),this._initSubscriptions.add(this._manager.draggedOverComponentChange.subscribe((()=>this._handleDragOver()))),this.initChildren()}ngOnDestroy(){this._initSubscriptions.unsubscribe()}toggle(){this.open=!this.open}expand(e){if(!e)return this.open=!0,!0;if(this.data?.id===e)return!0;if(this.hasChildren)for(const t of this._childrenNodes?.toArray())if(t.expand(e))return this.expand(),!0;return!1}addDescendant(e){this.data&&this._manager.getComponent(this.data.id)?.addDescendant(e)}expandAll(){this._childrenNodes?.forEach((e=>e.expandAll())),this.expand(),this._changeDetector.detectChanges()}collapse(){this.open=!1}collapseAll(){this._childrenNodes?.forEach((e=>e.collapseAll())),this.collapse(),this._changeDetector.detectChanges()}initChildren(){var e,t=this;return(e=function*(){if(t.children=[],t.data){var e,n=!1,i=!1;try{for(var a,r=function(e){var t,n,i,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new De(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(t.iteratorSvc.getChildrenIteratorFor(t.data));n=!(a=yield r.next()).done;n=!1){const e=a.value;t.children.push(e.metadata)}}catch(t){i=!0,e=t}finally{try{n&&null!=r.return&&(yield r.return())}finally{if(i)throw e}}}t._changeDetector.detectChanges()},function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){we(r,i,a,o,s,"next",e)}function s(e){we(r,i,a,o,s,"throw",e)}o(void 0)}))})()}highlight(e,t){e.preventDefault(),e.stopPropagation(),this._manager.highlightComponent(t)}_handleDragOver(){if(this._manager.draggedOverComponent!=this.data?.id)return this.dragOverSubscription?.unsubscribe(),void(this.dragOverSubscription=null);this.open||(this.dragOverSubscription=(0,ne.H)(500).subscribe((()=>{this.expand(),this._changeDetector.detectChanges()})))}_cancelHighlight(e){e.preventDefault(),e.stopPropagation(),this._manager.cancelHighlightedComponent()}}Ie.ɵfac=function(e){return new(e||Ie)(M.Y(ce.t),M.Y(k.s),M.Y(B.z),M.Y(le.$))},Ie.ɵcmp=m.Xp({type:Ie,selectors:[["components-tree-item"]],viewQuery:function(e,t){if(1&e&&ae.Gf(Ie,5),2&e){let e;ae.iG(e=ae.CR())&&(t._childrenNodes=e)}},hostBindings:function(e,t){1&e&&I.N("mouseleave",(function(e){return t._cancelHighlight(e)}))},inputs:{data:"data",index:"index",parentId:"parentId",open:"open"},exportAs:["componentsTreeItem"],standalone:!0,features:[Y.j],decls:12,vars:23,consts:[[3,"dndCoreTreeItem","dropzoneElement","containerElement","dragDisabled","dragSource","noHTML5Preview","dropMetadata"],["dndCoreTree","dndCoreTreeItem","dropzone",""],[1,"designer-dropzone",3,"dropTarget"],[1,"flex","dynamic-align-items-center",3,"ngClass"],["type","button","mat-icon-button","",3,"disabled","click"],["class","fa",3,"ngClass",4,"ngIf"],[3,"mouseover","click"],[1,"node-children"],["childrenContainer",""],["class","node-child",4,"ngFor","ngForOf"],[1,"fa",3,"ngClass"],[1,"node-child"],[3,"data","parentId","index"]],template:function(e,t){if(1&e&&(y.Tg(0,"div",0,1),I.N("dropMetadata",(function(e){return t.addDescendant(e)})),y.Tg(3,"div",2)(4,"div",3)(5,"button",4),I.N("click",(function(){return t.toggle()})),S.Y(6,Ce,1,1,"span",5),y.qZ(),y.Tg(7,"div",6),I.N("mouseover",(function(e){return t.highlight(e,null==t.data?null:t.data.id)}))("click",(function(){return t._manager.selectComponent(null==t.data?null:t.data.id)})),w._(8),y.qZ()(),y.Tg(9,"div",7,8),S.Y(11,Pe,2,3,"div",9),y.qZ()()()),2&e){const e=re.M(1),n=re.M(2),i=re.M(10);T.Q("dndCoreTreeItem",oe.kE(19,xe,t.data,t.parentId,t.index))("dropzoneElement",n)("containerElement",i)("dragDisabled",t.dragDisabled)("dragSource",e.drag)("noHTML5Preview",!0),C.x(3),T.Q("dropTarget",e.dropzone),C.x(1),T.Q("ngClass",t.hasChildren?"nested-node-tree":"node-tree"),C.x(1),T.Q("disabled",!t.hasChildren),se.u("aria-label","Toggle"),C.x(1),T.Q("ngIf",t.hasChildren),C.x(1),de.ek("selected",(null==t.data?null:t.data.id)===t._manager.selectedComponent)("highlighted",(null==t.data?null:t.data.id)===t._manager.highlightedComponent),C.x(1),P.Oq((null==t.data?null:t.data.displayName)||(null==t.data?null:t.data.id)),C.x(1),de.ek("hidden",!t.open),C.x(2),T.Q("ngForOf",t.children)}},dependencies:[Ie,i.e,pe.m,z.sg,Z.O,ee.o,he.R,te.c8,ue.$d,ue.Li,b.N,ye,ie.c],encapsulation:2,changeDetection:0}),(0,l.gn)([(0,h.C)(10),(0,u.S)(),(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[]),(0,l.w6)("design:returntype",Promise)],Ie.prototype,"initChildren",null);var Ee=n(73379);function _e(e,t){if(1&e){const e=x.E();y.Tg(0,"div",1)(1,"button",2),I.N("click",(function(){E.CH(e);const t=D.o();return E.Kt(null==t.rootTreeItem?null:t.rootTreeItem.collapseAll())})),y._U(2,"span",3),y.qZ(),y.Tg(3,"button",4),I.N("click",(function(){E.CH(e);const t=D.o();return E.Kt(null==t.rootTreeItem?null:t.rootTreeItem.expandAll())})),y._U(4,"span",5),y.qZ(),y._U(5,"components-tree-item",6),y.qZ()}if(2&e){const e=D.o();C.x(5),T.Q("data",e.root)}}class Se{constructor(e,t){this._manager=e,this._changeDetector=t,this._initSubscriptions=new c.w0}ngOnInit(){this._initSubscriptions.add(this._manager.layoutChange.subscribe((()=>{this.root=this._manager.getMetadata(),this._changeDetector.detectChanges()}))),this._initSubscriptions.add(this._manager.selectedChange.subscribe((()=>{this.rootTreeItem?.expand(this._manager.selectedComponent),this._changeDetector.detectChanges()}))),this._initSubscriptions.add(this._manager.highlightedChange.subscribe((()=>this._changeDetector.detectChanges()))),this._initSubscriptions.add(this._manager.displayNameChange.subscribe((()=>this._changeDetector.detectChanges()))),this.root=this._manager.getMetadata()}ngOnDestroy(){this._initSubscriptions.unsubscribe()}}Se.ɵfac=function(e){return new(e||Se)(M.Y(ce.t),M.Y(k.s))},Se.ɵcmp=m.Xp({type:Se,selectors:[["components-tree"]],viewQuery:function(e,t){if(1&e&&ae.Gf(Ie,5),2&e){let e;ae.iG(e=ae.CR())&&(t.rootTreeItem=e.first)}},standalone:!0,features:[Ee._([B.z,$.E]),Y.j],decls:1,vars:1,consts:[["class","component-tree",4,"ngIf"],[1,"component-tree"],["type","button","mat-icon-button","","aria-label","Collapse all",3,"click"],[1,"fa","fa-minus-square"],["type","button","mat-icon-button","","aria-label","Expand all",3,"click"],[1,"fa","fa-plus-square"],[3,"data"]],template:function(e,t){1&e&&S.Y(0,_e,6,1,"div",0),2&e&&T.Q("ngIf",t.root)},dependencies:[i.e,Z.O,ee.o,he.R,Ie],encapsulation:2,changeDetection:0});var Te=n(70625),Oe=n(48659),Me=n(71791),ke=n(14389),Ae=n(7525);class Ye{constructor(e,t,n){this.document=e,this.element=t,this.ngZone=n,this.lastXCoordinate=null,this.size=new q.v}dragStart(e){this.ngZone.runOutsideAngular((()=>{this.document.addEventListener("mousemove",this.drag),this.document.addEventListener("mouseup",this.dragEnd)})),this.element.nativeElement.classList.add("hovering"),e.stopImmediatePropagation(),e.preventDefault(),this.lastXCoordinate=e.clientX}drag(e){(0,me.fp)(this.lastXCoordinate)||(this.size.emit(e.clientX-this.lastXCoordinate),e.stopImmediatePropagation(),e.preventDefault(),this.lastXCoordinate=e.clientX)}dragEnd(e){this.ngZone.runOutsideAngular((()=>{this.document.removeEventListener("mousemove",this.drag),this.document.removeEventListener("mouseup",this.dragEnd)})),this.element.nativeElement.classList.remove("hovering"),e.stopImmediatePropagation(),e.preventDefault(),this.lastXCoordinate=null}}Ye.ɵfac=function(e){return new(e||Ye)(M.Y(ge.K),M.Y(F.SB),M.Y(Q.R))},Ye.ɵdir=m.lG({type:Ye,selectors:[["","widthResizer",""]],hostBindings:function(e,t){1&e&&I.N("mousedown",(function(e){return t.dragStart(e)}))},outputs:{size:"size"},standalone:!0}),(0,l.gn)([fe.r,(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[MouseEvent]),(0,l.w6)("design:returntype",void 0)],Ye.prototype,"drag",null),(0,l.gn)([fe.r,(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[MouseEvent]),(0,l.w6)("design:returntype",void 0)],Ye.prototype,"dragEnd",null);var Le=n(43671),Ne=n(49280),ze=n(77470),Ze=n(27635),Re=n(49934);function qe(e,t,n,i,a,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,a)}function Fe(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){qe(r,i,a,o,s,"next",e)}function s(e){qe(r,i,a,o,s,"throw",e)}o(void 0)}))}}function Qe(e,t){if(1&e){const e=x.E();y.Tg(0,"div",2)(1,"button",3),I.N("click",(function(){E.CH(e);const t=D.o();return E.Kt(t.toggleCollapsed())})),y.Tg(2,"span",4),w._(3,"properties"),y.qZ()()()}}function je(e,t){if(1&e&&(O.yn(0),O.Gk(1,18),O.BQ()),2&e){const e=t.$implicit,n=D.o().$implicit;C.x(1),T.Q("propertiesControl",e)("form",n.form)("propertiesMetadata",n.metadata)}}function Be(e,t){if(1&e&&(O.yn(0),S.Y(1,je,2,3,"ng-container",17),O.BQ()),2&e){const e=t.$implicit;C.x(1),T.Q("ngForOf",e.controls)}}function $e(e,t){if(1&e&&(O.yn(0),y.Tg(1,"div",11)(2,"div",12)(3,"label",13),w._(4,"type"),y.qZ(),y.Tg(5,"div",14),w._(6),y.qZ(),y.Tg(7,"label",13),w._(8,"id"),y.qZ(),y.Tg(9,"div",14),w._(10),y.qZ(),y.Tg(11,"label",13),w._(12,"display name"),y.qZ(),y._U(13,"input",15),y.qZ()(),y.Tg(14,"div",16),S.Y(15,Be,2,1,"ng-container",17),y.qZ(),O.BQ()),2&e){const e=D.o(2);let t;C.x(6),P.Oq(null!==(t=null==e.metadata||null==e.metadata.metaInfo?null:e.metadata.metaInfo.name)&&void 0!==t?t:null==e.component.options||null==e.component.options.typeMetadata?null:e.component.options.typeMetadata.name),C.x(4),P.Oq(null==e.component.options||null==e.component.options.typeMetadata?null:e.component.options.typeMetadata.id),C.x(3),T.Q("formControl",e.displayName),C.x(2),T.Q("ngForOf",e.propertiesData)}}function Xe(e,t){if(1&e){const e=x.E();O.yn(0),y.Tg(1,"div",5)(2,"div",6)(3,"div",7),w._(4,"properties"),y.qZ(),y.Tg(5,"button",8),I.N("click",(function(){E.CH(e);const t=D.o();return E.Kt(t.toggleCollapsed())})),y._U(6,"span",9),y.qZ()(),S.Y(7,$e,16,4,"ng-container",1),y.qZ(),y.Tg(8,"div",10),I.N("size",(function(t){E.CH(e);const n=D.o();return E.Kt(n.updateSize(t))})),y.qZ(),O.BQ()}if(2&e){const e=D.o();C.x(1),de.Ud("width",e.state.width,"px"),C.x(6),T.Q("ngIf",e.component)}}const Ue="PROPERTIES_EDITOR_STATE";class Ge{constructor(e,t,n,i,a,r,o,s){this.manager=e,this.metadataExtractor=t,this.propertyExtractor=n,this.formModelBuilder=i,this.changeDetector=a,this.storage=r,this.history=o,this.logger=s,this.initSubscriptions=new c.w0,this.optionsFormSubscription=null,this.lastComponentId=null,this.lastComponent=null,this.component=null,this.metadata=null,this.displayName=new Te.NI(null),this.propertiesData=[],this.state={opened:!1,width:350}}ngOnInit(){var e=this;return Fe((function*(){const t=e.storage.get(Ue);t&&(e.state=t),e.initSubscriptions.add(e.manager.layoutChange.subscribe((()=>e.initProperties()))),e.initSubscriptions.add(e.manager.selectedChange.subscribe((()=>e.initProperties()))),e.displayName.valueChanges.subscribe(function(){var t=Fe((function*(t){if(e.component?.options?.typeMetadata&&(0,me.EN)(t)){e.component.options.typeMetadata.displayName=t;const n={};(0,ke.mv)(n,"options",e.component.options,e.component.options),e.component.options=e.component.options,yield e.component.ngOnChanges?.(n),e.manager.displayNameUpdated(),e.history.getNewState()}}));return function(e){return t.apply(this,arguments)}}()),yield e.initProperties()}))()}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.optionsFormSubscription?.unsubscribe(),this.optionsFormSubscription=null}toggleCollapsed(){this.state.opened=!this.state.opened,this.storage.set(Ue,this.state)}updateSize(e){this.state.width-=e,this.storage.set(Ue,this.state),this.changeDetector.detectChanges()}initProperties(){var e=this;return Fe((function*(){if((0,me.EN)(e.manager.selectedComponent)){const t=e.manager.getComponent(e.manager.selectedComponent);if(e.lastComponent==t&&e.lastComponentId==e.manager.selectedComponent)return;e.lastComponent=t,e.lastComponentId=e.manager.selectedComponent,t?(e.component=t,yield e.getMetadata()):e.hide()}else e.hide()}))()}getMetadata(){var e=this;return Fe((function*(){if(e.optionsFormSubscription?.unsubscribe(),e.optionsFormSubscription=new c.w0,e.propertiesData=[],e.component?.options?.typeMetadata){if(e.displayName.setValue(e.component.options.typeMetadata.displayName||e.component.options.typeMetadata.id,{emitEvent:!1}),e.metadata=yield e.metadataExtractor.extractMetadata(e.component.options?.typeMetadata),e.metadata||(e.logger?.error("PropertiesEditorSAComponent: unable to get metadata {@source}",{package:e.component.options?.typeMetadata.package,name:e.component.options?.typeMetadata.name}),e.hide()),e.metadata?.metaInfo?.optionsMetadata?.propertiesMetadata?.length)for(const t of e.metadata?.metaInfo?.optionsMetadata?.propertiesMetadata)e.initDynamicProperty(t);if(e.component){const t=e.manager.getParent(e.component.id);if(t?.options?.typeMetadata){const n=yield e.metadataExtractor.extractMetadata(t.options?.typeMetadata);if(n?.metaInfo?.optionsMetadata?.childPropertiesMetadata?.length)for(const t of n?.metaInfo?.optionsMetadata?.childPropertiesMetadata)e.initDynamicProperty(t)}}}else e.hide();e.changeDetector.detectChanges()}))()}hide(){this.lastComponent=null,this.lastComponentId=null,this.component=null,this.metadata=null,this.propertiesData=[],this.optionsFormSubscription?.unsubscribe(),this.optionsFormSubscription=null,this.changeDetector.detectChanges()}initDynamicProperty(e){var t=this;const n=this.formModelBuilder.build(new e.modelType(this.component?.options?.typeMetadata.options)),i=this.propertyExtractor.extract(e.modelType);this.optionsFormSubscription&&(this.optionsFormSubscription.add(n.valueChanges.subscribe(function(){var e=Fe((function*(e){if(t.component?.options?.typeMetadata){(0,g.l7)(t.component.options.typeMetadata.options,e);const n={};(0,ke.mv)(n,"options",t.component.options,t.component.options),t.component.options=t.component.options,yield t.component.ngOnChanges?.(n),t.component.invalidateVisuals(),t.history.getNewState()}}));return function(t){return e.apply(this,arguments)}}())),this.propertiesData.push({form:n,metadata:i,controls:e.propertiesControls}))}}Ge.ɵfac=function(e){return new(e||Ge)(M.Y(ce.t),M.Y(N.T),M.Y(Le.L),M.Y(Me.p),M.Y(k.s),M.Y(p.T0),M.Y(v.dB),M.Y(p.bZ,8))},Ge.ɵcmp=m.Xp({type:Ge,selectors:[["properties-editor"]],standalone:!0,features:[Ee._([Me.p]),Y.j],decls:2,vars:2,consts:[["class","properties-toolbar",4,"ngIf"],[4,"ngIf"],[1,"properties-toolbar"],["type","button",1,"dynamic-btn-icon","props-buttons",3,"click"],[1,"dynamic-text-vertical"],[1,"properties-main"],[1,"header"],[1,"header-title"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-times"],["widthResizer","",1,"properties-resizer",3,"size"],[1,"static-properties"],[1,"properties-form-group"],[1,"properties-control-label"],[1,"properties-form-static"],["type","text",1,"properties-form-control",3,"formControl"],[1,"dynamic-thin-scrollbar","properties-controls"],[4,"ngFor","ngForOf"],[3,"propertiesControl","form","propertiesMetadata"]],template:function(e,t){1&e&&(S.Y(0,Qe,4,0,"div",0),S.Y(1,Xe,9,3,"ng-container",1)),2&e&&(T.Q("ngIf",!t.state.opened),C.x(1),T.Q("ngIf",t.state.opened))},dependencies:[i.e,z.sg,Z.O,Oe.U,Ne.Fj,ze.JJ,Ze.oH,Ae.L,Re._,Ye],encapsulation:2,changeDetection:0}),(0,l.gn)([(0,h.C)(10),(0,u.S)(),(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[]),(0,l.w6)("design:returntype",Promise)],Ge.prototype,"initProperties",null);var He=n(10517);class Ke{}Ke.ɵfac=function(e){return new(e||Ke)},Ke.ɵcmp=m.Xp({type:Ke,selectors:[["layout-editor-drag-preview"]],inputs:{layoutMetadata:"layoutMetadata"},standalone:!0,features:[Y.j],decls:4,vars:2,consts:[[1,"dynamic-semi-bold"],[1,"dynamic-margin-left-extra-small","dynamic-small-text"]],template:function(e,t){1&e&&(y.Tg(0,"span",0),w._(1),y.qZ(),y.Tg(2,"span",1),w._(3),y.qZ()),2&e&&(C.x(1),P.Oq(null==t.layoutMetadata?null:t.layoutMetadata.name),C.x(2),P.hi("#",(null==t.layoutMetadata?null:t.layoutMetadata.displayName)||(null==t.layoutMetadata?null:t.layoutMetadata.id),""))},encapsulation:2,changeDetection:0});var Ve=n(56454),Je=n(93802);class We{constructor(e){this.template=e}static ngTemplateContextGuard(e,t){return!0}}We.ɵfac=function(e){return new(e||We)(M.Y(Je.Rg))},We.ɵdir=m.lG({type:We,selectors:[["","dndCorePreviewTemplate",""]],inputs:{type:["dndCorePreviewTemplateType","type"]}});var et=n(8215);class tt{constructor(e,t){this.viewContainer=e,this.dnd=t,this.initSubscriptions=new c.w0}ngOnInit(){this.initSubscriptions.add(this.dnd.dragLayer(this.initSubscriptions).listen((e=>({dragging:e.isDragging(),item:e.getItem(),coordinates:e.getClientOffset(),type:e.getItemType()}))).subscribe((e=>{e.dragging?e.item&&(this.dragPreviewElement??(this.dragPreviewElement=this.renderDragPreview(e.item)),this.dragPreviewElement&&(this.dragPreviewElement.style.position="fixed",this.dragPreviewElement.style.top=`${e.coordinates?.y}px`,this.dragPreviewElement.style.left=`${e.coordinates?.x}px`,this.dragPreviewElement.style.zIndex="21312")):this.removeDragPreview()})))}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.removeDragPreview()}renderDragPreview(e){return this.dndCorePreviewTemplate?(this.dragPreviewView=this.viewContainer.createEmbeddedView(this.dndCorePreviewTemplate,{$implicit:e}),this.dragPreviewElement=this.dragPreviewView.rootNodes[0],this.dragPreviewView.detectChanges(),this.dragPreviewElement??null):null}removeDragPreview(){this.dragPreviewElement?.remove(),this.dragPreviewView?.destroy(),this.dragPreviewElement=null,this.dragPreviewView=null}}tt.ɵfac=function(e){return new(e||tt)(M.Y(et.s_),M.Y(j.f))},tt.ɵcmp=m.Xp({type:tt,selectors:[["dnd-core-drag-preview"]],contentQueries:function(e,t,n){if(1&e&&ae.Su(n,We,7,Je.Rg),2&e){let e;ae.iG(e=ae.CR())&&(t.dndCorePreviewTemplate=e.first)}},decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0});var nt=n(6535),it=n(75464),at=n(2538),rt=n(84473);function ot(e,t){1&e&&y._U(0,"package-manager")}function st(e,t){if(1&e&&y._U(0,"layout-editor-drag-preview",8),2&e){const e=t.$implicit;T.Q("layoutMetadata",e.dragData.metadata)}}class dt{constructor(e,t,n){this.history=e,this.changeDetector=t,this.hotkeys=n,this.initSubscriptions=new c.w0,this.metadata=null,n?.init()}ngOnInit(){this.initSubscriptions.add(this.history.pop.subscribe((e=>{this.metadata=e,this.changeDetector.detectChanges()}))),this.hotkeys&&(this.initSubscriptions.add(this.hotkeys.undo.subscribe((()=>this.history.undo()))),this.initSubscriptions.add(this.hotkeys.redo.subscribe((()=>this.history.redo()))))}ngOnChanges(e){(0,d.$)("metadata")in e&&(this.history.clean(),this.metadata&&this.history.setInitialState(this.metadata))}ngOnDestroy(){this.initSubscriptions.unsubscribe(),this.hotkeys?.destroy()}}dt.ɵfac=function(e){return new(e||dt)(M.Y(v.dB),M.Y(k.s),M.Y(Ve.z,8))},dt.ɵcmp=m.Xp({type:dt,selectors:[["layout-editor"]],inputs:{metadata:"metadata",packages:"packages",whiteList:"whiteList",blackList:"blackList"},standalone:!0,features:[Ee._([He.NX,$.E]),A.T,Y.j],decls:13,vars:7,consts:[[1,"dynamic-flex-row","dynamic-margin-top-big","dynamic-flex-1"],["label","Hierarchy"],["label","Palette"],[4,"ngIf"],[3,"packages","whiteList","blackList"],[1,"dynamic-flex-1","layout-content","dynamic-thin-scrollbar"],[3,"layoutComponentRenderer"],["class","mat-elevation-z4",3,"layoutMetadata",4,"dndCorePreviewTemplate"],[1,"mat-elevation-z4",3,"layoutMetadata"]],template:function(e,t){1&e&&(y.Tg(0,"div",0)(1,"mat-tab-group")(2,"mat-tab",1),y._U(3,"components-tree"),y.qZ(),y.Tg(4,"mat-tab",2),S.Y(5,ot,1,0,"package-manager",3),_.AL(6,"isPresent"),y._U(7,"components-palette",4),y.qZ()(),y.Tg(8,"div",5),O.Gk(9,6),y.qZ(),y._U(10,"properties-editor"),y.qZ(),y.Tg(11,"dnd-core-drag-preview"),S.Y(12,st,1,1,"layout-editor-drag-preview",7),y.qZ()),2&e&&(C.x(5),T.Q("ngIf",!_.lc(6,5,t.packages)),C.x(2),T.Q("packages",t.packages)("whiteList",t.whiteList)("blackList",t.blackList),C.x(2),T.Q("layoutComponentRenderer",t.metadata))},dependencies:[Se,W,Ge,b.N,tt,We,Ke,r.i,s.F,nt.X,a.N,it.uX,at.SP,i.e,Z.O,o.W,rt.$],styles:["[_nghost-%COMP%]{display: flex;}"],changeDetection:0})},27173:(e,t,n)=>{n.d(t,{c:()=>d});var i=n(23199),a=n(79440),r=n(4905),o=n(77842),s=n(98906);class d{constructor(e,t){this.draggingSvc=e,this.element=t,this.initSubscriptions=new i.w0,this.isDropZone=!1}ngOnInit(){this.initSubscriptions.add(this.draggingSvc.draggingChange.subscribe((()=>this.processDragValue())))}ngOnDestroy(){this.initSubscriptions.unsubscribe()}processDragValue(){setTimeout((()=>{this.draggingSvc.dragging&&this.isDropZone?this.element.nativeElement.classList.add("drag-active"):this.element.nativeElement.classList.remove("drag-active")}))}}d.ɵfac=function(e){return new(e||d)(a.Y(s.z),a.Y(r.SB))},d.ɵdir=o.lG({type:d,selectors:[["",8,"designer-dropzone"]],inputs:{isDropZone:"isDropZone"},standalone:!0})},11650:(e,t,n)=>{n.d(t,{c:()=>d});var i=n(99109),a=n(41348),r=n(97149),o=n(77842),s=n(38327);class d{static withProviders(e=!0){return{ngModule:d,providers:[(0,r._)(e)]}}}d.ɵfac=function(e){return new(e||d)},d.ɵmod=o.oA({type:d}),d.ɵinj=s.cJ({imports:[a.Z,i.u]})},10219:(e,t,n)=>{n.d(t,{N:()=>r});var i=n(77842),a=n(38327);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=i.oA({type:r}),r.ɵinj=a.cJ({})},52053:(e,t,n)=>{n.d(t,{E:()=>r});var i=n(86463),a=n(38327);class r{constructor(){this.dropDataChangeSubject=new i.x,this.dropPlaceholderPreview=null,this.newDropPlaceholderPreviewSubject=new i.x,this.oldDropPlaceholderPreviewSubject=new i.x}get dropDataChange(){return this.dropDataChangeSubject.asObservable()}get newDropPlaceholderPreviewChange(){return this.newDropPlaceholderPreviewSubject.asObservable()}get oldDropPlaceholderPreviewChange(){return this.oldDropPlaceholderPreviewSubject.asObservable()}get dropPlaceholderPreviewIndex(){return this.dropPlaceholderPreview?.index??null}setDropData(e){this.dropDataChangeSubject.next(e)}setDropPlaceholderPreview(e){e?.index===this.dropPlaceholderPreview?.index&&e?.parentId===this.dropPlaceholderPreview?.parentId||(this.dropPlaceholderPreview&&this.oldDropPlaceholderPreviewSubject.next(this.dropPlaceholderPreview),this.dropPlaceholderPreview=e,this.dropPlaceholderPreview&&this.newDropPlaceholderPreviewSubject.next(this.dropPlaceholderPreview))}}r.ɵfac=function(e){return new(e||r)},r.ɵprov=a.Yz({token:r,factory:r.ɵfac})},49934:(e,t,n)=>{n.d(t,{_:()=>c});var i=n(46480),a=n(79440),r=n(8215),o=n(77842),s=n(36973);function d(e,t,n,i,a,r,o){try{var s=e[r](o),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(i,a)}class c{constructor(e,t){this._viewContainerRef=e,this._logger=t,this._componentRef=null,this.propertiesMetadata=null}ngOnChanges(){var e,t=this;return(e=function*(){if(t._logger?.debug("PropertiesControlRendererDirective: rendering properties control {@type}",{type:t.type?.name}),t.ngOnDestroy(),t._viewContainerRef.clear(),t.type){const e=t._viewContainerRef.injector;if(t._componentRef=t._viewContainerRef.createComponent(t.type,{injector:e}),t._componentRef){const e=t._componentRef.instance;e.propertiesMetadata=t.propertiesMetadata,e.form=t.form,yield e.initialize(),e.invalidateVisuals()}}},function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){d(r,i,a,o,s,"next",e)}function s(e){d(r,i,a,o,s,"throw",e)}o(void 0)}))})()}ngOnDestroy(){this._componentRef&&(this._logger?.debug("PropertiesControlRendererDirective: destroying properties control {@type}",{type:this.type?.name}),this._componentRef?.destroy(),this._componentRef=null)}}c.ɵfac=function(e){return new(e||c)(a.Y(r.s_),a.Y(i.bZ,8))},c.ɵdir=o.lG({type:c,selectors:[["","propertiesControl",""]],inputs:{form:"form",propertiesMetadata:"propertiesMetadata",type:["propertiesControl","type"]},features:[s.T]})},7525:(e,t,n)=>{n.d(t,{L:()=>l});var i=n(27052),a=n(39163),r=n(5348),o=n(77880),s=n(59951),d=n(77842),c=n(38327);class l{}l.ɵfac=function(e){return new(e||l)},l.ɵmod=d.oA({type:l}),l.ɵinj=c.cJ({imports:[i.e,a.z,s.i,o.j,r.A]})},59951:(e,t,n)=>{n.d(t,{i:()=>c});var i=n(27052),a=n(48659),r=n(5348),o=n(25626),s=n(77842),d=n(38327);class c{}c.ɵfac=function(e){return new(e||c)},c.ɵmod=s.oA({type:c}),c.ɵinj=d.cJ({imports:[i.e,a.U,r.A,o.F]})}}]);
//# sourceMappingURL=1601.chunk.b3a8e15e800736f1201a.js.map